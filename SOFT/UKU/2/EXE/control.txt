; generated by ARM C/C++ Compiler, 4.1 [Build 481]
; commandline ArmCC [--debug -c --asm --interleave -o.\EXE\control.o --depend=.\EXE\control.d --cpu=Cortex-M3 --apcs=interwork -O1 -IC:\Keil\ARM\INC -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU_220_IPS_TERMOKOMPENSAT -DUKU2071x -DAPSENERGIA --omf_browse=.\EXE\control.crf control.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  ke_start PROC
;;;232    //-----------------------------------------------
;;;233    void ke_start(char in)
000000  e92d41fc          PUSH     {r2-r8,lr}
;;;234    {          
000004  4606              MOV      r6,r0
;;;235    ke_start_stat=(enum_ke_start_stat)0;		 
000006  4dfc              LDR      r5,|L1.1016|
000008  2700              MOVS     r7,#0
00000a  762f              STRB     r7,[r5,#0x18]
;;;236    
;;;237    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000c  7d28              LDRB     r0,[r5,#0x14]  ; spc_stat
00000e  2301              MOVS     r3,#1
000010  2802              CMP      r0,#2
000012  d00e              BEQ      |L1.50|
;;;238    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;239    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;240    #endif
;;;241    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000014  eb060146          ADD      r1,r6,r6,LSL #1
000018  eb011206          ADD      r2,r1,r6,LSL #4
00001c  49f7              LDR      r1,|L1.1020|
00001e  eb010482          ADD      r4,r1,r2,LSL #2
000022  f894103d          LDRB     r1,[r4,#0x3d]
000026  07ca              LSLS     r2,r1,#31
000028  d005              BEQ      |L1.54|
00002a  2066              MOVS     r0,#0x66
00002c  7628              STRB     r0,[r5,#0x18]
                  |L1.46|
;;;242    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;243    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;244    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;245    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;246    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;247    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;248    else 
;;;249    	{
;;;250    
;;;251    	ke_start_stat=kssYES;
;;;252    
;;;253    	spc_stat=spcKE;
;;;254    	__ee_spc_stat=spcKE;
;;;255    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;256    	
;;;257    	spc_bat=in;
;;;258    	__ee_spc_bat=in;
;;;259    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;260    
;;;261    	bat[in]._zar_cnt_ke=0;
;;;262    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;263    	
;;;264    	spc_phase=0;
;;;265    	__ee_spc_phase=0;
;;;266    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;267    
;;;268    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;269    
;;;270    		{					
;;;271    		signed short temp_temp;
;;;272    		signed char temp;
;;;273    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;274    		    
;;;275    		temp=LPC_RTC->YEAR;
;;;276    		gran_char(&temp,1,99);
;;;277    		*((char*)(&(ke_date[0])))=temp;
;;;278    			
;;;279    		temp=LPC_RTC->MONTH;
;;;280    		gran_char(&temp,1,12);
;;;281    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;282    		
;;;283    		temp=LPC_RTC->DOM;
;;;284    		gran_char(&temp,1,31);
;;;285    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;286    				
;;;287    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;288    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;289    
;;;290    		temp=LPC_RTC->HOUR;
;;;291    		gran_char(&temp,0,23);
;;;292    		*((char*)(&(ke_date[1])))=temp;
;;;293                   
;;;294    		temp=LPC_RTC->MIN;
;;;295    		gran_char(&temp,0,59);
;;;296    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;297    	          
;;;298    		temp=LPC_RTC->SEC;
;;;299    		gran_char(&temp,0,59);
;;;300    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;301    			
;;;302    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;303    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;304    		}
;;;305    
;;;306    	}
;;;307    }
00002e  e8bd81fc          POP      {r2-r8,pc}
                  |L1.50|
000032  762b              STRB     r3,[r5,#0x18]         ;237
000034  e7fb              B        |L1.46|
                  |L1.54|
000036  f894203f          LDRB     r2,[r4,#0x3f]         ;242
00003a  0792              LSLS     r2,r2,#30             ;242
00003c  d502              BPL      |L1.68|
00003e  2067              MOVS     r0,#0x67              ;242
000040  7628              STRB     r0,[r5,#0x18]         ;242
000042  e7f4              B        |L1.46|
                  |L1.68|
000044  0789              LSLS     r1,r1,#30             ;243
000046  d502              BPL      |L1.78|
000048  2068              MOVS     r0,#0x68              ;243
00004a  7628              STRB     r0,[r5,#0x18]         ;243
00004c  e7ef              B        |L1.46|
                  |L1.78|
00004e  4aec              LDR      r2,|L1.1024|
000050  f9b41008          LDRSH    r1,[r4,#8]            ;244
000054  f9b22000          LDRSH    r2,[r2,#0]            ;244  ; IKB
000058  4291              CMP      r1,r2                 ;244
00005a  dd02              BLE      |L1.98|
00005c  2069              MOVS     r0,#0x69              ;244
00005e  7628              STRB     r0,[r5,#0x18]         ;244
000060  e7e5              B        |L1.46|
                  |L1.98|
000062  4252              RSBS     r2,r2,#0              ;245
000064  4291              CMP      r1,r2                 ;245
000066  da02              BGE      |L1.110|
000068  206a              MOVS     r0,#0x6a              ;245
00006a  7628              STRB     r0,[r5,#0x18]         ;245
00006c  e7df              B        |L1.46|
                  |L1.110|
00006e  49e2              LDR      r1,|L1.1016|
000070  2801              CMP      r0,#1                 ;246
000072  7d49              LDRB     r1,[r1,#0x15]         ;246
000074  d100              BNE      |L1.120|
000076  b111              CBZ      r1,|L1.126|
                  |L1.120|
000078  2801              CMP      r0,#1                 ;247
00007a  d003              BEQ      |L1.132|
00007c  e004              B        |L1.136|
                  |L1.126|
00007e  206b              MOVS     r0,#0x6b              ;246
000080  7628              STRB     r0,[r5,#0x18]         ;246
000082  e7d4              B        |L1.46|
                  |L1.132|
000084  2901              CMP      r1,#1                 ;247
000086  d07c              BEQ      |L1.386|
                  |L1.136|
000088  2064              MOVS     r0,#0x64              ;251
00008a  7628              STRB     r0,[r5,#0x18]         ;251
00008c  752b              STRB     r3,[r5,#0x14]         ;253
00008e  f8a5305c          STRH     r3,[r5,#0x5c]         ;254
000092  4619              MOV      r1,r3                 ;255
000094  f44f70f8          MOV      r0,#0x1f0             ;255
000098  f7fffffe          BL       lc640_write_int
00009c  756e              STRB     r6,[r5,#0x15]         ;257
00009e  f8a5605e          STRH     r6,[r5,#0x5e]         ;258
0000a2  4631              MOV      r1,r6                 ;259
0000a4  f44f70fa          MOV      r0,#0x1f4             ;259
0000a8  f7fffffe          BL       lc640_write_int
0000ac  61a7              STR      r7,[r4,#0x18]         ;261
0000ae  48d5              LDR      r0,|L1.1028|
0000b0  2100              MOVS     r1,#0                 ;262
0000b2  f9300016          LDRSH    r0,[r0,r6,LSL #1]     ;262
0000b6  f7fffffe          BL       lc640_write_int
0000ba  75af              STRB     r7,[r5,#0x16]         ;264
0000bc  f8a57060          STRH     r7,[r5,#0x60]         ;265
0000c0  4639              MOV      r1,r7                 ;266
0000c2  f44f70fb          MOV      r0,#0x1f6             ;266
0000c6  f7fffffe          BL       lc640_write_int
0000ca  48cf              LDR      r0,|L1.1032|
0000cc  8800              LDRH     r0,[r0,#0]            ;273  ; bat_u_old_cnt
0000ce  1c40              ADDS     r0,r0,#1              ;273
0000d0  f0000007          AND      r0,r0,#7              ;273
0000d4  eb040040          ADD      r0,r4,r0,LSL #1       ;273
0000d8  8c00              LDRH     r0,[r0,#0x20]         ;273
0000da  9001              STR      r0,[sp,#4]            ;273
0000dc  4dcb              LDR      r5,|L1.1036|
0000de  8ba8              LDRH     r0,[r5,#0x1c]         ;275
0000e0  9000              STR      r0,[sp,#0]            ;275
0000e2  f04f0263          MOV      r2,#0x63              ;276
0000e6  f04f0101          MOV      r1,#1                 ;276
0000ea  4668              MOV      r0,sp                 ;276
0000ec  f7fffffe          BL       gran_char
0000f0  4cc1              LDR      r4,|L1.1016|
0000f2  f89d0000          LDRB     r0,[sp,#0]            ;277
0000f6  34a4              ADDS     r4,r4,#0xa4           ;277
0000f8  7020              STRB     r0,[r4,#0]            ;277
0000fa  7e28              LDRB     r0,[r5,#0x18]         ;279
0000fc  9000              STR      r0,[sp,#0]            ;279
0000fe  220c              MOVS     r2,#0xc               ;280
000100  2101              MOVS     r1,#1                 ;280
000102  4668              MOV      r0,sp                 ;280
000104  f7fffffe          BL       gran_char
000108  f89d0000          LDRB     r0,[sp,#0]            ;281
00010c  7060              STRB     r0,[r4,#1]            ;281
00010e  7b28              LDRB     r0,[r5,#0xc]          ;283
000110  9000              STR      r0,[sp,#0]            ;283
000112  221f              MOVS     r2,#0x1f              ;284
000114  2101              MOVS     r1,#1                 ;284
000116  4668              MOV      r0,sp                 ;284
000118  f7fffffe          BL       gran_char
00011c  f89d0000          LDRB     r0,[sp,#0]            ;285
000120  70a0              STRB     r0,[r4,#2]            ;285
000122  f89d0004          LDRB     r0,[sp,#4]            ;287
000126  70e0              STRB     r0,[r4,#3]            ;287
000128  f44f70fc          MOV      r0,#0x1f8             ;288
00012c  6821              LDR      r1,[r4,#0]            ;288  ; ke_date
00012e  f7fffffe          BL       lc640_write_long
000132  7a28              LDRB     r0,[r5,#8]            ;290
000134  9000              STR      r0,[sp,#0]            ;290
000136  2217              MOVS     r2,#0x17              ;291
000138  2100              MOVS     r1,#0                 ;291
00013a  4668              MOV      r0,sp                 ;291
00013c  f7fffffe          BL       gran_char
000140  f89d0000          LDRB     r0,[sp,#0]            ;292
000144  7120              STRB     r0,[r4,#4]            ;292
000146  7928              LDRB     r0,[r5,#4]            ;294
000148  9000              STR      r0,[sp,#0]            ;294
00014a  223b              MOVS     r2,#0x3b              ;295
00014c  2100              MOVS     r1,#0                 ;295
00014e  4668              MOV      r0,sp                 ;295
000150  f7fffffe          BL       gran_char
000154  f89d0000          LDRB     r0,[sp,#0]            ;296
000158  7160              STRB     r0,[r4,#5]            ;296
00015a  7828              LDRB     r0,[r5,#0]            ;298
00015c  9000              STR      r0,[sp,#0]            ;298
00015e  223b              MOVS     r2,#0x3b              ;299
000160  2100              MOVS     r1,#0                 ;299
000162  4668              MOV      r0,sp                 ;299
000164  f7fffffe          BL       gran_char
000168  f89d0000          LDRB     r0,[sp,#0]            ;300
00016c  71a0              STRB     r0,[r4,#6]            ;300
00016e  f89d0005          LDRB     r0,[sp,#5]            ;302
000172  71e0              STRB     r0,[r4,#7]            ;302
000174  f44f70fe          MOV      r0,#0x1fc             ;303
000178  6861              LDR      r1,[r4,#4]            ;303  ; ke_date
00017a  f7fffffe          BL       lc640_write_long
00017e  e756              B        |L1.46|
000180  e7ff              B        |L1.386|
                  |L1.386|
000182  206c              MOVS     r0,#0x6c              ;247
000184  7628              STRB     r0,[r5,#0x18]         ;247
000186  e752              B        |L1.46|
;;;308    
                          ENDP

                  ke_drv PROC
;;;309    //-----------------------------------------------
;;;310    void ke_drv(void)
000188  e92d47f0          PUSH     {r4-r10,lr}
;;;311    {
;;;312    
;;;313    if(spc_stat==spcKE)
00018c  4c9a              LDR      r4,|L1.1016|
00018e  7d20              LDRB     r0,[r4,#0x14]  ; spc_stat
000190  2801              CMP      r0,#1
000192  d17e              BNE      |L1.658|
000194  4621              MOV      r1,r4
000196  2601              MOVS     r6,#1
;;;314    	{
;;;315    	if(spc_phase==0)
;;;316    		{
;;;317    		mess_send(MESS2BAT_HNDL,PARAM_BAT_MASK_OFF_AFTER_2SEC,(1<<(1-spc_bat)),20);
000198  7d49              LDRB     r1,[r1,#0x15]
00019a  7da0              LDRB     r0,[r4,#0x16]         ;315  ; spc_phase
00019c  f1c10201          RSB      r2,r1,#1
0001a0  fa06f102          LSL      r1,r6,r2
;;;318    		mess_send(MESS2BPS_HNDL,PARAM_BPS_ALL_OFF_AFTER_2SEC,0xffff,20);
;;;319    
;;;320    		bat[spc_bat]._zar_cnt_ke+=abs(bat[spc_bat]._Ib);
;;;321    	    	
;;;322    		if(bat[spc_bat]._zar_cnt_ke>=AH_CONSTANT)
;;;323    			{
;;;324    			bat[spc_bat]._zar_cnt_ke-=AH_CONSTANT;
;;;325    			lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat],lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat])+1);
0001a4  4f97              LDR      r7,|L1.1028|
0001a6  4d95              LDR      r5,|L1.1020|
0001a8  b20a              SXTH     r2,r1                 ;317
0001aa  b110              CBZ      r0,|L1.434|
;;;326    			}
;;;327    		}
;;;328    
;;;329    	else if(spc_phase==1)
0001ac  2801              CMP      r0,#1
0001ae  d033              BEQ      |L1.536|
0001b0  e037              B        |L1.546|
                  |L1.434|
0001b2  2314              MOVS     r3,#0x14              ;317
0001b4  21ca              MOVS     r1,#0xca              ;317
0001b6  20c8              MOVS     r0,#0xc8              ;317
0001b8  f7fffffe          BL       mess_send
0001bc  2314              MOVS     r3,#0x14              ;318
0001be  f04f32ff          MOV      r2,#0xffffffff        ;318
0001c2  21ce              MOVS     r1,#0xce              ;318
0001c4  20cd              MOVS     r0,#0xcd              ;318
0001c6  f7fffffe          BL       mess_send
0001ca  7d60              LDRB     r0,[r4,#0x15]         ;320  ; spc_bat
0001cc  eb000140          ADD      r1,r0,r0,LSL #1       ;320
0001d0  eb011000          ADD      r0,r1,r0,LSL #4       ;320
0001d4  eb050080          ADD      r0,r5,r0,LSL #2       ;320
0001d8  f9b00008          LDRSH    r0,[r0,#8]            ;320
0001dc  f7fffffe          BL       abs
0001e0  7d61              LDRB     r1,[r4,#0x15]         ;320  ; spc_bat
0001e2  eb010241          ADD      r2,r1,r1,LSL #1       ;320
0001e6  eb021201          ADD      r2,r2,r1,LSL #4       ;320
0001ea  eb050282          ADD      r2,r5,r2,LSL #2       ;320
0001ee  6993              LDR      r3,[r2,#0x18]         ;320
0001f0  4418              ADD      r0,r0,r3              ;320
0001f2  6190              STR      r0,[r2,#0x18]         ;320
0001f4  f64843a0          MOV      r3,#0x8ca0            ;322
0001f8  4298              CMP      r0,r3                 ;322
0001fa  db12              BLT      |L1.546|
0001fc  1ac0              SUBS     r0,r0,r3              ;324
0001fe  6190              STR      r0,[r2,#0x18]         ;324
000200  f8370011          LDRH     r0,[r7,r1,LSL #1]     ;325
000204  f7fffffe          BL       lc640_read_int
000208  1c40              ADDS     r0,r0,#1              ;325
00020a  b201              SXTH     r1,r0                 ;325
00020c  7d60              LDRB     r0,[r4,#0x15]         ;325  ; spc_bat
00020e  f9370010          LDRSH    r0,[r7,r0,LSL #1]     ;325
000212  f7fffffe          BL       lc640_write_int
000216  e004              B        |L1.546|
                  |L1.536|
;;;330    		{
;;;331    		mess_send(MESS2BAT_HNDL,PARAM_BAT_MASK_OFF_AFTER_2SEC,(1<<(1-spc_bat)),20);
000218  2314              MOVS     r3,#0x14
00021a  21ca              MOVS     r1,#0xca
00021c  20c8              MOVS     r0,#0xc8
00021e  f7fffffe          BL       mess_send
                  |L1.546|
;;;332    		}
;;;333    
;;;334    	if(bat[spc_bat]._Ub<(USIGN*10))
000222  7d61              LDRB     r1,[r4,#0x15]  ; spc_bat
;;;335    		{
;;;336    		cnt_end_ke++;
;;;337    		if(cnt_end_ke>=30)
;;;338    			{
;;;339    			
;;;340    			if((spc_stat==spcKE)&&(spc_phase==0))
;;;341    				{
;;;342    				lc640_write_int(ADR_EE_BAT_C_REAL[spc_bat],lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;343    				ke_mem_hndl(spc_bat,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;344    				lc640_write_int(ADR_EE_BAT_ZAR_CNT[spc_bat],0);
;;;345    				cntrl_stat=50;
;;;346    				cntrl_stat_old=50;
;;;347    				}
;;;348    
;;;349    			if((BAT_IS_ON[1-spc_bat]) == bisON)
;;;350    				{
;;;351    				spc_phase=1;
;;;352    				__ee_spc_phase=1;
;;;353    				lc640_write_int(EE_SPC_PHASE,1);
;;;354    				}			
;;;355    			else
;;;356    				{
;;;357    				spc_stat=spcOFF;
;;;358    				__ee_spc_stat=spcOFF;
;;;359    				lc640_write_int(EE_SPC_STAT,spcOFF);
000224  f44f79f8          MOV      r9,#0x1f0
000228  eb010041          ADD      r0,r1,r1,LSL #1       ;334
00022c  eb001001          ADD      r0,r0,r1,LSL #4       ;334
000230  eb050080          ADD      r0,r5,r0,LSL #2       ;334
000234  f04f0800          MOV      r8,#0                 ;315
000238  f9b02002          LDRSH    r2,[r0,#2]            ;334
00023c  4874              LDR      r0,|L1.1040|
00023e  f9b00000          LDRSH    r0,[r0,#0]            ;334  ; USIGN
000242  eb000080          ADD      r0,r0,r0,LSL #2       ;334
000246  ebb20f40          CMP      r2,r0,LSL #1          ;334
00024a  da45              BGE      |L1.728|
00024c  f8b40058          LDRH     r0,[r4,#0x58]         ;336  ; cnt_end_ke
000250  1c40              ADDS     r0,r0,#1              ;336
000252  b200              SXTH     r0,r0                 ;336
000254  f8a40058          STRH     r0,[r4,#0x58]         ;336
000258  281e              CMP      r0,#0x1e              ;337
00025a  db3f              BLT      |L1.732|
00025c  7d20              LDRB     r0,[r4,#0x14]         ;340  ; spc_stat
00025e  2801              CMP      r0,#1                 ;340
000260  d121              BNE      |L1.678|
000262  7da0              LDRB     r0,[r4,#0x16]         ;340  ; spc_phase
000264  b9f8              CBNZ     r0,|L1.678|
000266  f8370011          LDRH     r0,[r7,r1,LSL #1]     ;342
00026a  f7fffffe          BL       lc640_read_int
00026e  b201              SXTH     r1,r0                 ;342
000270  4868              LDR      r0,|L1.1044|
000272  7d62              LDRB     r2,[r4,#0x15]         ;342  ; spc_bat
000274  f9300012          LDRSH    r0,[r0,r2,LSL #1]     ;342
000278  f7fffffe          BL       lc640_write_int
00027c  7d60              LDRB     r0,[r4,#0x15]         ;343  ; spc_bat
00027e  f8370010          LDRH     r0,[r7,r0,LSL #1]     ;343
000282  f7fffffe          BL       lc640_read_int
000286  b281              UXTH     r1,r0                 ;343
000288  7d60              LDRB     r0,[r4,#0x15]         ;343  ; spc_bat
00028a  f7fffffe          BL       ke_mem_hndl
00028e  4862              LDR      r0,|L1.1048|
000290  e000              B        |L1.660|
                  |L1.658|
000292  e045              B        |L1.800|
                  |L1.660|
000294  7d61              LDRB     r1,[r4,#0x15]         ;344  ; spc_bat
000296  f9300011          LDRSH    r0,[r0,r1,LSL #1]     ;344
00029a  2100              MOVS     r1,#0                 ;344
00029c  f7fffffe          BL       lc640_write_int
0002a0  2032              MOVS     r0,#0x32              ;345
0002a2  8420              STRH     r0,[r4,#0x20]         ;345
0002a4  8460              STRH     r0,[r4,#0x22]         ;346
                  |L1.678|
0002a6  7d60              LDRB     r0,[r4,#0x15]         ;349  ; spc_bat
0002a8  495c              LDR      r1,|L1.1052|
0002aa  f1c00001          RSB      r0,r0,#1              ;349
0002ae  5c08              LDRB     r0,[r1,r0]            ;349
0002b0  2855              CMP      r0,#0x55              ;349
0002b2  d008              BEQ      |L1.710|
0002b4  f8848014          STRB     r8,[r4,#0x14]         ;357
0002b8  f8a4805c          STRH     r8,[r4,#0x5c]         ;358
0002bc  2100              MOVS     r1,#0
0002be  4648              MOV      r0,r9
0002c0  f7fffffe          BL       lc640_write_int
0002c4  e00a              B        |L1.732|
                  |L1.710|
0002c6  75a6              STRB     r6,[r4,#0x16]         ;351
0002c8  f8a46060          STRH     r6,[r4,#0x60]         ;352
0002cc  2101              MOVS     r1,#1                 ;353
0002ce  f44f70fb          MOV      r0,#0x1f6             ;353
0002d2  f7fffffe          BL       lc640_write_int
0002d6  e001              B        |L1.732|
                  |L1.728|
;;;360    				}
;;;361    			}
;;;362    		}
;;;363    	else cnt_end_ke=0;
0002d8  f8a48058          STRH     r8,[r4,#0x58]
                  |L1.732|
;;;364    
;;;365    	if((bat[spc_bat]._Ub>=bat[1-spc_bat]._Ub)&&(spc_phase==1))
0002dc  7d61              LDRB     r1,[r4,#0x15]  ; spc_bat
0002de  eb010041          ADD      r0,r1,r1,LSL #1
0002e2  eb001001          ADD      r0,r0,r1,LSL #4
0002e6  eb050080          ADD      r0,r5,r0,LSL #2
0002ea  f9b02002          LDRSH    r2,[r0,#2]
0002ee  f1c10001          RSB      r0,r1,#1
0002f2  eb000140          ADD      r1,r0,r0,LSL #1
0002f6  eb011000          ADD      r0,r1,r0,LSL #4
0002fa  eb050080          ADD      r0,r5,r0,LSL #2
0002fe  f9b00002          LDRSH    r0,[r0,#2]
000302  4282              CMP      r2,r0
000304  db0c              BLT      |L1.800|
000306  7da0              LDRB     r0,[r4,#0x16]  ; spc_phase
000308  2801              CMP      r0,#1
00030a  d109              BNE      |L1.800|
;;;366    		{
;;;367    		spc_stat=spcOFF;
00030c  f8848014          STRB     r8,[r4,#0x14]
;;;368    		__ee_spc_stat=spcOFF;
000310  f8a4805c          STRH     r8,[r4,#0x5c]
;;;369    		lc640_write_int(EE_SPC_STAT,spcOFF);
000314  4648              MOV      r0,r9
000316  e8bd47f0          POP      {r4-r10,lr}
00031a  2100              MOVS     r1,#0
00031c  f7ffbffe          B.W      lc640_write_int
                  |L1.800|
;;;370    		}
;;;371    	}
;;;372    			
;;;373    }
000320  e8bd87f0          POP      {r4-r10,pc}
;;;374    
                          ENDP

                  vz_start PROC
;;;375    //-----------------------------------------------
;;;376    char vz_start(char hour)
000324  b570              PUSH     {r4-r6,lr}
;;;377    {          
000326  4605              MOV      r5,r0
;;;378    char out;
;;;379    out=0;
000328  2600              MOVS     r6,#0
;;;380    if((spc_stat==spcOFF)&&(speedChrgBlckStat!=1))
00032a  4c33              LDR      r4,|L1.1016|
00032c  7d20              LDRB     r0,[r4,#0x14]  ; spc_stat
00032e  bb18              CBNZ     r0,|L1.888|
000330  483b              LDR      r0,|L1.1056|
000332  8800              LDRH     r0,[r0,#0]  ; speedChrgBlckStat
000334  2801              CMP      r0,#1
000336  d01f              BEQ      |L1.888|
;;;381    	{
;;;382    	spc_stat=spcVZ;
000338  f104041e          ADD      r4,r4,#0x1e
00033c  2102              MOVS     r1,#2
00033e  f8041c0a          STRB     r1,[r4,#-0xa]
;;;383    	__ee_spc_stat=spcVZ; 
000342  87e1              STRH     r1,[r4,#0x3e]
;;;384    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);   
000344  f44f70f8          MOV      r0,#0x1f0
000348  f7fffffe          BL       lc640_write_int
;;;385    	vz_cnt_h=hour;
00034c  86e5              STRH     r5,[r4,#0x36]
;;;386    	__ee_vz_cnt=hour*60;
00034e  ebc51005          RSB      r0,r5,r5,LSL #4
000352  0081              LSLS     r1,r0,#2
000354  460d              MOV      r5,r1
000356  87a1              STRH     r1,[r4,#0x3c]
;;;387    	lc640_write_int(EE_VZ_CNT,__ee_vz_cnt);
000358  f44f70f9          MOV      r0,#0x1f2
00035c  f7fffffe          BL       lc640_write_int
;;;388    	lc640_write_int(EE_SPC_VZ_LENGT,hour*60);	
000360  4629              MOV      r1,r5
000362  f44f70ff          MOV      r0,#0x1fe
000366  f7fffffe          BL       lc640_write_int
;;;389    	vz_cnt_h_=0;
00036a  2000              MOVS     r0,#0
00036c  8720              STRH     r0,[r4,#0x38]
;;;390    	vz_cnt_s=0;
00036e  8660              STRH     r0,[r4,#0x32]
;;;391    	out=1;
000370  2601              MOVS     r6,#1
;;;392    	vz_mem_hndl(1);
000372  2001              MOVS     r0,#1
000374  f7fffffe          BL       vz_mem_hndl
                  |L1.888|
;;;393    	}
;;;394    //else if((spc_stat==spc_KE1p1)||(spc_stat==spc_KE1p2)) out=22; 
;;;395    //else if((spc_stat==spc_KE2p1)||(spc_stat==spc_KE2p2)) out=33;
;;;396    //plazma=out;	
;;;397    return out;
000378  4630              MOV      r0,r6
;;;398    }
00037a  bd70              POP      {r4-r6,pc}
;;;399    
                          ENDP

                  vz_stop PROC
;;;400    //-----------------------------------------------
;;;401    void vz_stop(void)
00037c  b510              PUSH     {r4,lr}
;;;402    {
;;;403    if(spc_stat==spcVZ)
00037e  4c1e              LDR      r4,|L1.1016|
000380  7d20              LDRB     r0,[r4,#0x14]  ; spc_stat
000382  2802              CMP      r0,#2
000384  d112              BNE      |L1.940|
;;;404         {
;;;405    vz_mem_hndl(vz_cnt_h);          
000386  f104041e          ADD      r4,r4,#0x1e
00038a  8ee0              LDRH     r0,[r4,#0x36]  ; vz_cnt_h
00038c  f7fffffe          BL       vz_mem_hndl
;;;406    vz_cnt_s=0;
000390  2000              MOVS     r0,#0
000392  8660              STRH     r0,[r4,#0x32]
;;;407    vz_cnt_h=0;
000394  86e0              STRH     r0,[r4,#0x36]
;;;408    vz_cnt_h_=0;
000396  8720              STRH     r0,[r4,#0x38]
;;;409    spc_stat=spcOFF;
000398  f8040c0a          STRB     r0,[r4,#-0xa]
;;;410    
;;;411    		__ee_spc_stat=spcOFF;
00039c  87e0              STRH     r0,[r4,#0x3e]
;;;412    		lc640_write_int(EE_SPC_STAT,spcOFF);
00039e  e8bd4010          POP      {r4,lr}
0003a2  2100              MOVS     r1,#0
0003a4  f44f70f8          MOV      r0,#0x1f0
0003a8  f7ffbffe          B.W      lc640_write_int
                  |L1.940|
;;;413         }
;;;414    
;;;415    }
0003ac  bd10              POP      {r4,pc}
;;;416    
                          ENDP

                  avz_next_date_hndl PROC
;;;417    //-----------------------------------------------
;;;418    void avz_next_date_hndl(void)
0003ae  b570              PUSH     {r4-r6,lr}
;;;419    {
;;;420    if((LPC_RTC->MONTH+AVZ)>12)lc640_write_int(EE_YEAR_AVZ,LPC_RTC->YEAR+1);
0003b0  4c16              LDR      r4,|L1.1036|
0003b2  3c20              SUBS     r4,r4,#0x20
0003b4  f8940038          LDRB     r0,[r4,#0x38]
0003b8  4d1a              LDR      r5,|L1.1060|
0003ba  7829              LDRB     r1,[r5,#0]  ; AVZ
0003bc  4408              ADD      r0,r0,r1
0003be  280c              CMP      r0,#0xc
0003c0  d906              BLS      |L1.976|
0003c2  8fa0              LDRH     r0,[r4,#0x3c]
0003c4  1c40              ADDS     r0,r0,#1
0003c6  b201              SXTH     r1,r0
0003c8  20b8              MOVS     r0,#0xb8
0003ca  f7fffffe          BL       lc640_write_int
0003ce  e004              B        |L1.986|
                  |L1.976|
;;;421    else lc640_write_int(EE_YEAR_AVZ,LPC_RTC->YEAR);
0003d0  f9b4103c          LDRSH    r1,[r4,#0x3c]
0003d4  20b8              MOVS     r0,#0xb8
0003d6  f7fffffe          BL       lc640_write_int
                  |L1.986|
;;;422    
;;;423    //lc640_write_int(EE_YEAR_AVZ,6);
;;;424    
;;;425    if((LPC_RTC->MONTH+AVZ)>12)lc640_write_int(EE_MONTH_AVZ,(LPC_RTC->MONTH+AVZ)-12);
0003da  f8941038          LDRB     r1,[r4,#0x38]
0003de  7828              LDRB     r0,[r5,#0]  ; AVZ
0003e0  4401              ADD      r1,r1,r0
0003e2  290c              CMP      r1,#0xc
0003e4  d920              BLS      |L1.1064|
0003e6  f8941038          LDRB     r1,[r4,#0x38]
0003ea  380c              SUBS     r0,r0,#0xc
0003ec  4401              ADD      r1,r1,r0
0003ee  20b6              MOVS     r0,#0xb6
0003f0  f7fffffe          BL       lc640_write_int
0003f4  e01e              B        |L1.1076|
0003f6  0000              DCW      0x0000
                  |L1.1016|
                          DCD      ||area_number.18||
                  |L1.1020|
                          DCD      bat
                  |L1.1024|
                          DCD      IKB
                  |L1.1028|
                          DCD      ADR_EE_BAT_ZAR_CNT_KE
                  |L1.1032|
                          DCD      bat_u_old_cnt
                  |L1.1036|
                          DCD      0x40024020
                  |L1.1040|
                          DCD      USIGN
                  |L1.1044|
                          DCD      ADR_EE_BAT_C_REAL
                  |L1.1048|
                          DCD      ADR_EE_BAT_ZAR_CNT
                  |L1.1052|
                          DCD      BAT_IS_ON
                  |L1.1056|
                          DCD      speedChrgBlckStat
                  |L1.1060|
                          DCD      AVZ
                  |L1.1064|
;;;426    else lc640_write_int(EE_MONTH_AVZ,LPC_RTC->MONTH+AVZ);                                                 
000428  f8941038          LDRB     r1,[r4,#0x38]
00042c  4401              ADD      r1,r1,r0
00042e  20b6              MOVS     r0,#0xb6
000430  f7fffffe          BL       lc640_write_int
                  |L1.1076|
;;;427    
;;;428    //lc640_write_int(EE_MONTH_AVZ,5);
;;;429    
;;;430    if(LPC_RTC->DOM>28) lc640_write_int(EE_DATE_AVZ,28);
000434  f894002c          LDRB     r0,[r4,#0x2c]
000438  281c              CMP      r0,#0x1c
00043a  d904              BLS      |L1.1094|
00043c  211c              MOVS     r1,#0x1c
00043e  20b4              MOVS     r0,#0xb4
000440  f7fffffe          BL       lc640_write_int
000444  e004              B        |L1.1104|
                  |L1.1094|
;;;431    else lc640_write_int(EE_DATE_AVZ,LPC_RTC->DOM);
000446  f894102c          LDRB     r1,[r4,#0x2c]
00044a  20b4              MOVS     r0,#0xb4
00044c  f7fffffe          BL       lc640_write_int
                  |L1.1104|
;;;432    
;;;433    //lc640_write_int(EE_DATE_AVZ,4);
;;;434    
;;;435    lc640_write_int(EE_HOUR_AVZ,LPC_RTC->HOUR);
000450  f1040420          ADD      r4,r4,#0x20
000454  7a21              LDRB     r1,[r4,#8]
000456  f04f00ae          MOV      r0,#0xae
00045a  f7fffffe          BL       lc640_write_int
;;;436    lc640_write_int(EE_MIN_AVZ,LPC_RTC->MIN);
00045e  7921              LDRB     r1,[r4,#4]
000460  20b0              MOVS     r0,#0xb0
000462  f7fffffe          BL       lc640_write_int
;;;437    lc640_write_int(EE_SEC_AVZ,LPC_RTC->SEC);
000466  7821              LDRB     r1,[r4,#0]
000468  e8bd4070          POP      {r4-r6,lr}
00046c  20b2              MOVS     r0,#0xb2
00046e  f7ffbffe          B.W      lc640_write_int
;;;438    
;;;439    }
;;;440    
                          ENDP

                  avz_drv PROC
;;;441    //-----------------------------------------------
;;;442    void avz_drv(void)                               
000472  b510              PUSH     {r4,lr}
;;;443    {                
;;;444    if(AVZ!=AVZ_OFF)
000474  48ff              LDR      r0,|L1.2164|
000476  7800              LDRB     r0,[r0,#0]  ; AVZ
;;;445    	{
;;;446    	if((LPC_RTC->YEAR==YEAR_AVZ)&&(LPC_RTC->MONTH==MONTH_AVZ)&&(LPC_RTC->DOM==DATE_AVZ)&&(LPC_RTC->HOUR==HOUR_AVZ)&&(LPC_RTC->MIN==MIN_AVZ)&&(LPC_RTC->SEC==SEC_AVZ))
;;;447    		{
;;;448    		bAVZ=1;
000478  4cff              LDR      r4,|L1.2168|
00047a  b328              CBZ      r0,|L1.1224|
00047c  48ff              LDR      r0,|L1.2172|
00047e  8f82              LDRH     r2,[r0,#0x3c]         ;446
000480  49ff              LDR      r1,|L1.2176|
000482  8809              LDRH     r1,[r1,#0]            ;446  ; YEAR_AVZ
000484  428a              CMP      r2,r1                 ;446
000486  d11f              BNE      |L1.1224|
000488  f8902038          LDRB     r2,[r0,#0x38]         ;446
00048c  49fd              LDR      r1,|L1.2180|
00048e  8809              LDRH     r1,[r1,#0]            ;446  ; MONTH_AVZ
000490  428a              CMP      r2,r1                 ;446
000492  d119              BNE      |L1.1224|
000494  f890102c          LDRB     r1,[r0,#0x2c]         ;446
000498  4afb              LDR      r2,|L1.2184|
00049a  8812              LDRH     r2,[r2,#0]            ;446  ; DATE_AVZ
00049c  4291              CMP      r1,r2                 ;446
00049e  d113              BNE      |L1.1224|
0004a0  f8901028          LDRB     r1,[r0,#0x28]         ;446
0004a4  4af9              LDR      r2,|L1.2188|
0004a6  8812              LDRH     r2,[r2,#0]            ;446  ; HOUR_AVZ
0004a8  4291              CMP      r1,r2                 ;446
0004aa  d10d              BNE      |L1.1224|
0004ac  f8901024          LDRB     r1,[r0,#0x24]         ;446
0004b0  4af7              LDR      r2,|L1.2192|
0004b2  8812              LDRH     r2,[r2,#0]            ;446  ; MIN_AVZ
0004b4  4291              CMP      r1,r2                 ;446
0004b6  d107              BNE      |L1.1224|
0004b8  f8900020          LDRB     r0,[r0,#0x20]         ;446
0004bc  49f5              LDR      r1,|L1.2196|
0004be  8809              LDRH     r1,[r1,#0]            ;446  ; SEC_AVZ
0004c0  4288              CMP      r0,r1                 ;446
0004c2  d101              BNE      |L1.1224|
0004c4  2001              MOVS     r0,#1
0004c6  75e0              STRB     r0,[r4,#0x17]
                  |L1.1224|
;;;449    		}
;;;450    	}
;;;451    if(bAVZ)
0004c8  7de0              LDRB     r0,[r4,#0x17]  ; bAVZ
0004ca  2800              CMP      r0,#0
0004cc  d00b              BEQ      |L1.1254|
;;;452    	{
;;;453    	if(vz_start(AVZ_TIME))
0004ce  48f2              LDR      r0,|L1.2200|
0004d0  8800              LDRH     r0,[r0,#0]  ; AVZ_TIME
0004d2  b2c0              UXTB     r0,r0
0004d4  f7fffffe          BL       vz_start
0004d8  2800              CMP      r0,#0
0004da  d004              BEQ      |L1.1254|
;;;454    		{
;;;455    		bAVZ=0;
0004dc  2000              MOVS     r0,#0
0004de  75e0              STRB     r0,[r4,#0x17]
;;;456    		avz_next_date_hndl();
0004e0  e8bd4010          POP      {r4,lr}
0004e4  e7fe              B        avz_next_date_hndl
                  |L1.1254|
;;;457    		}
;;;458    	}	
;;;459    
;;;460    }
0004e6  bd10              POP      {r4,pc}
;;;461    
                          ENDP

                  vz_drv PROC
;;;462    //-----------------------------------------------
;;;463    void vz_drv(void)
0004e8  b570              PUSH     {r4-r6,lr}
;;;464    { 
;;;465    if(spc_stat==spcVZ)
0004ea  4ce3              LDR      r4,|L1.2168|
0004ec  7d20              LDRB     r0,[r4,#0x14]  ; spc_stat
0004ee  2802              CMP      r0,#2
0004f0  d142              BNE      |L1.1400|
;;;466    	{
;;;467    	if(vz_cnt_s_<3600)
0004f2  f8b40052          LDRH     r0,[r4,#0x52]  ; vz_cnt_s_
0004f6  f44f6161          MOV      r1,#0xe10
;;;468    		{
;;;469    		vz_cnt_s_++;
;;;470    		if(vz_cnt_s_>=3600)
;;;471    			{
;;;472    			vz_cnt_s_=0;
0004fa  2500              MOVS     r5,#0
0004fc  4288              CMP      r0,r1                 ;467
0004fe  d212              BCS      |L1.1318|
000500  1c40              ADDS     r0,r0,#1              ;469
000502  b280              UXTH     r0,r0                 ;469
000504  f8a40052          STRH     r0,[r4,#0x52]         ;469
000508  4288              CMP      r0,r1                 ;470
00050a  d30c              BCC      |L1.1318|
00050c  f8a45052          STRH     r5,[r4,#0x52]
;;;473    			if(vz_cnt_h)
000510  f8b40054          LDRH     r0,[r4,#0x54]  ; vz_cnt_h
000514  b138              CBZ      r0,|L1.1318|
;;;474    				{
;;;475    				vz_cnt_h--;
000516  1e40              SUBS     r0,r0,#1
000518  f8240f54          STRH     r0,[r4,#0x54]!
;;;476    				vz_cnt_h_++;
00051c  8860              LDRH     r0,[r4,#2]  ; vz_cnt_h_
00051e  1c40              ADDS     r0,r0,#1
000520  8060              STRH     r0,[r4,#2]
000522  f1a40454          SUB      r4,r4,#0x54
                  |L1.1318|
;;;477    				}
;;;478    			}
;;;479    		}
;;;480    
;;;481    
;;;482    	if(vz_cnt_s<60)
000526  f8b40050          LDRH     r0,[r4,#0x50]  ; vz_cnt_s
00052a  283c              CMP      r0,#0x3c
00052c  d224              BCS      |L1.1400|
;;;483    		{
;;;484    		vz_cnt_s++;
00052e  1c40              ADDS     r0,r0,#1
000530  b280              UXTH     r0,r0
000532  f8a40050          STRH     r0,[r4,#0x50]
;;;485    		if(vz_cnt_s>=60)
000536  283c              CMP      r0,#0x3c
000538  d31e              BCC      |L1.1400|
;;;486    			{
;;;487    			vz_cnt_s=0;
00053a  f8245f50          STRH     r5,[r4,#0x50]!
;;;488    			
;;;489    			__ee_vz_cnt--;
00053e  8960              LDRH     r0,[r4,#0xa]  ; __ee_vz_cnt
000540  1e40              SUBS     r0,r0,#1
000542  b201              SXTH     r1,r0
000544  8161              STRH     r1,[r4,#0xa]
;;;490    			lc640_write_int(EE_VZ_CNT,__ee_vz_cnt);
000546  f44f70f9          MOV      r0,#0x1f2
00054a  f7fffffe          BL       lc640_write_int
;;;491    			if((!__ee_vz_cnt)||(speedChrgBlckStat==1))
00054e  8960              LDRH     r0,[r4,#0xa]  ; __ee_vz_cnt
000550  f1a40450          SUB      r4,r4,#0x50
000554  b118              CBZ      r0,|L1.1374|
000556  48d1              LDR      r0,|L1.2204|
000558  8800              LDRH     r0,[r0,#0]  ; speedChrgBlckStat
00055a  2801              CMP      r0,#1
00055c  d10c              BNE      |L1.1400|
                  |L1.1374|
;;;492    				{
;;;493    				spc_stat=spcOFF;
00055e  7525              STRB     r5,[r4,#0x14]
;;;494    						__ee_spc_stat=spcOFF;
000560  f8a4505c          STRH     r5,[r4,#0x5c]
;;;495    		lc640_write_int(EE_SPC_STAT,spcOFF);
000564  2100              MOVS     r1,#0
000566  f44f70f8          MOV      r0,#0x1f0
00056a  f7fffffe          BL       lc640_write_int
;;;496    				vz_mem_hndl(0);
00056e  e8bd4070          POP      {r4-r6,lr}
000572  2000              MOVS     r0,#0
000574  f7ffbffe          B.W      vz_mem_hndl
                  |L1.1400|
;;;497    				}
;;;498    			}
;;;499    		}
;;;500    
;;;501    	}
;;;502    
;;;503    
;;;504    } 
000578  bd70              POP      {r4-r6,pc}
;;;505    
                          ENDP

                  kb_init PROC
;;;509    //-----------------------------------------------
;;;510    void kb_init(void)
00057a  48c9              LDR      r0,|L1.2208|
;;;511    {
;;;512    main_kb_cnt=(TBAT*60)-60/*120*/;
00057c  f06f013b          MVN      r1,#0x3b
000580  8800              LDRH     r0,[r0,#0]  ; TBAT
000582  ebc01000          RSB      r0,r0,r0,LSL #4
000586  eb010080          ADD      r0,r1,r0,LSL #2
00058a  49bb              LDR      r1,|L1.2168|
00058c  f8a10040          STRH     r0,[r1,#0x40]
;;;513    }
000590  4770              BX       lr
;;;514    
                          ENDP

                  kb_hndl PROC
;;;515    //-----------------------------------------------
;;;516    void kb_hndl(void)
000592  e92d5ff0          PUSH     {r4-r12,lr}
;;;517    {
;;;518    
;;;519    static signed short ibat[2],ibat_[2];
;;;520    #ifdef UKU_TELECORE2015
;;;521    if(((++main_kb_cnt>=TBAT*60)&&(TBAT))&&(BAT_TYPE==0))
;;;522    #else 
;;;523    if(((++main_kb_cnt>=TBAT*60)&&(TBAT)))
000596  f8df82e0          LDR      r8,|L1.2168|
;;;524    #endif
;;;525    	{
;;;526    	main_kb_cnt=0;
;;;527    	
;;;528    	kb_start[0]=0;
;;;529    	kb_start[1]=0;
;;;530    	kb_start_ips=0;
;;;531    
;;;532    	if( (BAT_IS_ON[0]==bisON) && (bat[0]._Ub>80) && ( (abs(bat[0]._Ib)<IKB) || (bat[0]._av&1) ) ) kb_start[0]=1;
;;;533    	if( (BAT_IS_ON[1]==bisON) && (bat[1]._Ub>80) && ( (abs(bat[1]._Ib)<IKB) || (bat[1]._av&1) ) ) kb_start[1]=1;
;;;534    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;535    	if( (!ips_bat_av_vzvod)                      && ((abs(Ib_ips_termokompensat)<IKB) || (bat_ips._av&1) ) ) kb_start_ips=1;
00059a  f8dfa308          LDR      r10,|L1.2212|
00059e  2500              MOVS     r5,#0                 ;523
0005a0  f8b80040          LDRH     r0,[r8,#0x40]         ;523  ; main_kb_cnt
0005a4  4ec0              LDR      r6,|L1.2216|
0005a6  1c40              ADDS     r0,r0,#1              ;523
0005a8  b201              SXTH     r1,r0                 ;523
0005aa  48bd              LDR      r0,|L1.2208|
0005ac  f8a81040          STRH     r1,[r8,#0x40]         ;523
0005b0  f8df92f8          LDR      r9,|L1.2220|
0005b4  f9b00000          LDRSH    r0,[r0,#0]            ;523  ; TBAT
;;;536    #endif	
;;;537    	if( (net_av) || (num_of_wrks_bps==0) || ( (spc_stat!=spcOFF) && (spc_stat!=spcVZ) ) ) 
;;;538    		{
;;;539    		kb_start[0]=0;
;;;540    		kb_start[1]=0;
;;;541    		kb_start_ips=0;
;;;542    		}
;;;543    
;;;544    	if((kb_start[0]==1)||(kb_start[1]==1)||(kb_start_ips==1))
;;;545    		{
;;;546    		kb_cnt_1lev=10;
0005b8  270a              MOVS     r7,#0xa
0005ba  ebc01200          RSB      r2,r0,r0,LSL #4       ;523
0005be  f04f0b01          MOV      r11,#1                ;532
0005c2  f1080446          ADD      r4,r8,#0x46           ;528
0005c6  ebb10f82          CMP      r1,r2,LSL #2          ;523
0005ca  db61              BLT      |L1.1680|
0005cc  b3f0              CBZ      r0,|L1.1612|
0005ce  f8a85040          STRH     r5,[r8,#0x40]         ;526
0005d2  7025              STRB     r5,[r4,#0]            ;528
0005d4  7065              STRB     r5,[r4,#1]            ;529
0005d6  f888500e          STRB     r5,[r8,#0xe]          ;530
0005da  48b5              LDR      r0,|L1.2224|
0005dc  7800              LDRB     r0,[r0,#0]            ;532  ; BAT_IS_ON
0005de  2855              CMP      r0,#0x55              ;532
0005e0  d111              BNE      |L1.1542|
0005e2  f9b60002          LDRSH    r0,[r6,#2]            ;532  ; bat
0005e6  2850              CMP      r0,#0x50              ;532
0005e8  dd0d              BLE      |L1.1542|
0005ea  f9b60008          LDRSH    r0,[r6,#8]            ;532  ; bat
0005ee  f7fffffe          BL       abs
0005f2  f9b91000          LDRSH    r1,[r9,#0]            ;532  ; IKB
0005f6  4288              CMP      r0,r1                 ;532
0005f8  db03              BLT      |L1.1538|
0005fa  f896003d          LDRB     r0,[r6,#0x3d]         ;532  ; bat
0005fe  07c0              LSLS     r0,r0,#31             ;532
000600  d001              BEQ      |L1.1542|
                  |L1.1538|
000602  f884b000          STRB     r11,[r4,#0]           ;532
                  |L1.1542|
000606  48aa              LDR      r0,|L1.2224|
000608  7840              LDRB     r0,[r0,#1]            ;533  ; BAT_IS_ON
00060a  2855              CMP      r0,#0x55              ;533
00060c  d111              BNE      |L1.1586|
00060e  f9b6004e          LDRSH    r0,[r6,#0x4e]         ;533  ; bat
000612  2850              CMP      r0,#0x50              ;533
000614  dd0d              BLE      |L1.1586|
000616  f9b60054          LDRSH    r0,[r6,#0x54]         ;533  ; bat
00061a  f7fffffe          BL       abs
00061e  f9b91000          LDRSH    r1,[r9,#0]            ;533  ; IKB
000622  4288              CMP      r0,r1                 ;533
000624  db03              BLT      |L1.1582|
000626  f8960089          LDRB     r0,[r6,#0x89]         ;533  ; bat
00062a  07c0              LSLS     r0,r0,#31             ;533
00062c  d001              BEQ      |L1.1586|
                  |L1.1582|
00062e  f884b001          STRB     r11,[r4,#1]           ;533
                  |L1.1586|
000632  48a0              LDR      r0,|L1.2228|
000634  7800              LDRB     r0,[r0,#0]            ;535  ; ips_bat_av_vzvod
000636  b980              CBNZ     r0,|L1.1626|
000638  f9ba0000          LDRSH    r0,[r10,#0]           ;535  ; Ib_ips_termokompensat
00063c  f7fffffe          BL       abs
000640  f9b91000          LDRSH    r1,[r9,#0]            ;535  ; IKB
000644  4288              CMP      r0,r1                 ;535
000646  db06              BLT      |L1.1622|
000648  489b              LDR      r0,|L1.2232|
00064a  e000              B        |L1.1614|
                  |L1.1612|
00064c  e020              B        |L1.1680|
                  |L1.1614|
00064e  f890003d          LDRB     r0,[r0,#0x3d]         ;535  ; bat_ips
000652  07c0              LSLS     r0,r0,#31             ;535
000654  d001              BEQ      |L1.1626|
                  |L1.1622|
000656  f888b00e          STRB     r11,[r8,#0xe]         ;535
                  |L1.1626|
00065a  4898              LDR      r0,|L1.2236|
00065c  7800              LDRB     r0,[r0,#0]            ;537  ; net_av
00065e  b938              CBNZ     r0,|L1.1648|
000660  f898000f          LDRB     r0,[r8,#0xf]          ;537  ; num_of_wrks_bps
000664  b120              CBZ      r0,|L1.1648|
000666  f8980014          LDRB     r0,[r8,#0x14]         ;537  ; spc_stat
00066a  b128              CBZ      r0,|L1.1656|
00066c  2802              CMP      r0,#2                 ;537
00066e  d003              BEQ      |L1.1656|
                  |L1.1648|
000670  7025              STRB     r5,[r4,#0]            ;539
000672  7065              STRB     r5,[r4,#1]            ;540
000674  f888500e          STRB     r5,[r8,#0xe]          ;541
                  |L1.1656|
000678  7820              LDRB     r0,[r4,#0]            ;544  ; kb_start
00067a  2801              CMP      r0,#1                 ;544
00067c  d01e              BEQ      |L1.1724|
00067e  7860              LDRB     r0,[r4,#1]            ;544  ; kb_start
000680  2801              CMP      r0,#1                 ;544
000682  d01b              BEQ      |L1.1724|
000684  f898000e          LDRB     r0,[r8,#0xe]          ;544  ; kb_start_ips
000688  2801              CMP      r0,#1                 ;544
00068a  d017              BEQ      |L1.1724|
;;;547    		}
;;;548    	else kb_cnt_1lev=0;
00068c  f8a85042          STRH     r5,[r8,#0x42]
                  |L1.1680|
;;;549    	}
;;;550    
;;;551    if(kb_cnt_1lev)
000690  4641              MOV      r1,r8
000692  f9b80042          LDRSH    r0,[r8,#0x42]  ; kb_cnt_1lev
;;;552    	{
;;;553    	kb_cnt_1lev--;
;;;554    
;;;555    	if(kb_cnt_1lev>5)mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_PLUS,30,15);
;;;556    	else if(kb_cnt_1lev>0) mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_MINUS,30,15);
;;;557    
;;;558    
;;;559    	if(kb_cnt_1lev==5)
;;;560    		{
;;;561    		ibat[0]=abs(bat[0]._Ib);
000696  f8df81e0          LDR      r8,|L1.2168|
00069a  f1080868          ADD      r8,r8,#0x68
00069e  b3f0              CBZ      r0,|L1.1822|
0006a0  1e40              SUBS     r0,r0,#1              ;553
0006a2  b200              SXTH     r0,r0                 ;553
0006a4  468b              MOV      r11,r1                ;553
0006a6  f8a10042          STRH     r0,[r1,#0x42]         ;553
0006aa  2805              CMP      r0,#5                 ;555
0006ac  dd09              BLE      |L1.1730|
0006ae  230f              MOVS     r3,#0xf               ;555
0006b0  221e              MOVS     r2,#0x1e              ;555
0006b2  2164              MOVS     r1,#0x64              ;555
0006b4  20e1              MOVS     r0,#0xe1              ;555
0006b6  f7fffffe          BL       mess_send
0006ba  e00a              B        |L1.1746|
                  |L1.1724|
0006bc  f8a87042          STRH     r7,[r8,#0x42]         ;546
0006c0  e7e6              B        |L1.1680|
                  |L1.1730|
0006c2  2800              CMP      r0,#0                 ;556
0006c4  dd05              BLE      |L1.1746|
0006c6  230f              MOVS     r3,#0xf               ;556
0006c8  221e              MOVS     r2,#0x1e              ;556
0006ca  2169              MOVS     r1,#0x69              ;556
0006cc  20e1              MOVS     r0,#0xe1              ;556
0006ce  f7fffffe          BL       mess_send
                  |L1.1746|
0006d2  f8bb0042          LDRH     r0,[r11,#0x42]        ;559  ; kb_cnt_1lev
0006d6  2805              CMP      r0,#5                 ;559
0006d8  d111              BNE      |L1.1790|
0006da  f9b60008          LDRSH    r0,[r6,#8]  ; bat
0006de  f7fffffe          BL       abs
0006e2  f8a80000          STRH     r0,[r8,#0]
;;;562    		ibat[1]=abs(bat[1]._Ib);
0006e6  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
0006ea  f7fffffe          BL       abs
0006ee  f8a80002          STRH     r0,[r8,#2]
;;;563    		ibat_ips=abs(Ib_ips_termokompensat);
0006f2  f9ba0000          LDRSH    r0,[r10,#0]  ; Ib_ips_termokompensat
0006f6  f7fffffe          BL       abs
0006fa  f8ab0048          STRH     r0,[r11,#0x48]
                  |L1.1790|
;;;564    		}
;;;565    	
;;;566    	if(kb_cnt_1lev==0)
0006fe  485e              LDR      r0,|L1.2168|
000700  f8b00042          LDRH     r0,[r0,#0x42]  ; kb_cnt_1lev
000704  2800              CMP      r0,#0
000706  d158              BNE      |L1.1978|
;;;567    		{
;;;568    		ibat_[0]=abs(bat[0]._Ib);
000708  f9b60008          LDRSH    r0,[r6,#8]  ; bat
00070c  f7fffffe          BL       abs
000710  f8dfb164          LDR      r11,|L1.2168|
000714  f10b0b6c          ADD      r11,r11,#0x6c
000718  f8ab0000          STRH     r0,[r11,#0]
;;;569    		ibat_[1]=abs(bat[1]._Ib);
00071c  e000              B        |L1.1824|
                  |L1.1822|
00071e  e05a              B        |L1.2006|
                  |L1.1824|
000720  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
000724  f7fffffe          BL       abs
000728  f8ab0002          STRH     r0,[r11,#2]
;;;570    		ibat_ips_=abs(Ib_ips_termokompensat);
00072c  f9ba0000          LDRSH    r0,[r10,#0]  ; Ib_ips_termokompensat
000730  f7fffffe          BL       abs
000734  f8dfa140          LDR      r10,|L1.2168|
000738  f8aa004a          STRH     r0,[r10,#0x4a]
;;;571    
;;;572    		kb_cnt_2lev=0;
00073c  f8aa5044          STRH     r5,[r10,#0x44]
;;;573    
;;;574    
;;;575    		if(( (ibat[0]+ibat_[0]) < IKB )&& (kb_start[0]==1))
000740  f9b80000          LDRSH    r0,[r8,#0]  ; ibat
000744  f9bb1000          LDRSH    r1,[r11,#0]  ; ibat_
000748  4408              ADD      r0,r0,r1
00074a  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
00074e  4288              CMP      r0,r1
000750  da02              BGE      |L1.1880|
000752  7820              LDRB     r0,[r4,#0]  ; kb_start
000754  2801              CMP      r0,#1
000756  d032              BEQ      |L1.1982|
                  |L1.1880|
;;;576    			{
;;;577    			kb_cnt_2lev=10;  
;;;578    			}
;;;579    		else if(bat[0]._Ub>200)
000758  f9b60002          LDRSH    r0,[r6,#2]  ; bat
00075c  28c8              CMP      r0,#0xc8
00075e  dd04              BLE      |L1.1898|
;;;580    			{
;;;581    			kb_start[0]=0;
000760  7025              STRB     r5,[r4,#0]
;;;582    			avar_bat_hndl(0,0);
000762  2100              MOVS     r1,#0
000764  4608              MOV      r0,r1
000766  f7fffffe          BL       avar_bat_hndl
                  |L1.1898|
;;;583    			}
;;;584    		
;;;585    		if(( (ibat[1]+ibat_[1]) < IKB ) && (kb_start[1]==1))
00076a  f9b80002          LDRSH    r0,[r8,#2]  ; ibat
00076e  f9bb1002          LDRSH    r1,[r11,#2]  ; ibat_
000772  4408              ADD      r0,r0,r1
000774  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
000778  4288              CMP      r0,r1
00077a  da02              BGE      |L1.1922|
00077c  7860              LDRB     r0,[r4,#1]  ; kb_start
00077e  2801              CMP      r0,#1
000780  d020              BEQ      |L1.1988|
                  |L1.1922|
;;;586    			{
;;;587    			kb_cnt_2lev=10;     
;;;588    			}
;;;589    		else  if(bat[1]._Ub>200)
000782  f9b6004e          LDRSH    r0,[r6,#0x4e]  ; bat
000786  28c8              CMP      r0,#0xc8
000788  dd04              BLE      |L1.1940|
;;;590    			{
;;;591    			kb_start[1]=0;
00078a  7065              STRB     r5,[r4,#1]
;;;592    			avar_bat_hndl(1,0);
00078c  2100              MOVS     r1,#0
00078e  2001              MOVS     r0,#1
000790  f7fffffe          BL       avar_bat_hndl
                  |L1.1940|
;;;593    			}
;;;594    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;595    		if(( (ibat_ips+ibat_ips_) < IKB ) && (kb_start_ips==1))
000794  f9ba0048          LDRSH    r0,[r10,#0x48]  ; ibat_ips
000798  f9ba104a          LDRSH    r1,[r10,#0x4a]  ; ibat_ips_
00079c  4408              ADD      r0,r0,r1
00079e  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
0007a2  4288              CMP      r0,r1
0007a4  da09              BGE      |L1.1978|
0007a6  f89a000e          LDRB     r0,[r10,#0xe]  ; kb_start_ips
0007aa  2801              CMP      r0,#1
0007ac  d105              BNE      |L1.1978|
;;;596    			{
;;;597    			if(KB_ALGORITM==1)
0007ae  4844              LDR      r0,|L1.2240|
0007b0  8800              LDRH     r0,[r0,#0]  ; KB_ALGORITM
0007b2  2801              CMP      r0,#1
0007b4  d009              BEQ      |L1.1994|
;;;598    				{
;;;599    				avar_bat_ips_hndl(1);
;;;600    				kb_start_ips=0;
;;;601    				}
;;;602    			else
;;;603    				{
;;;604    				kb_cnt_2lev=10;     
0007b6  f8aa7044          STRH     r7,[r10,#0x44]
                  |L1.1978|
;;;605    				}
;;;606    			}
;;;607    #endif
;;;608    		}	
;;;609    
;;;610    
;;;611    	}
;;;612    else if(kb_cnt_2lev)
;;;613    	{
;;;614    	kb_cnt_2lev--;
;;;615    
;;;616    	if(kb_cnt_2lev>5)mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_PLUS,200,15);
;;;617    	else if(kb_cnt_2lev>0) mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_MINUS,200,15);
;;;618    
;;;619    
;;;620    	if(kb_cnt_2lev==5)
;;;621    		{
;;;622    		ibat[0]=abs(bat[0]._Ib);
;;;623    		ibat[1]=abs(bat[1]._Ib);
;;;624    		ibat_ips=abs(Ib_ips_termokompensat);
;;;625    		}
;;;626    	
;;;627    	if(kb_cnt_2lev==0)
;;;628    		{
;;;629    		ibat_[0]=abs(bat[0]._Ib);
;;;630    		ibat_[1]=abs(bat[1]._Ib);
;;;631    		ibat_ips_=abs(Ib_ips_termokompensat);
;;;632    
;;;633    		kb_full_ver=0;
;;;634    
;;;635    		if(( (ibat[0]+ibat_[0]) < IKB ) && (kb_start[0]==1))
;;;636    			{
;;;637    			kb_full_ver=1;  
;;;638    			}
;;;639    		else if(bat[0]._Ub>200)			
;;;640    			{
;;;641    			kb_start[0]=0;
;;;642    			avar_bat_hndl(0,0);
;;;643    			}
;;;644    
;;;645    		if(( (ibat[1]+ibat_[1]) < IKB ) && (kb_start[1]==1))
;;;646    			{
;;;647    			kb_full_ver=1;     
;;;648    			}
;;;649    		else	if(bat[1]._Ub>200)		
;;;650    			{
;;;651    			kb_start[1]=0;
;;;652    			avar_bat_hndl(1,0);
;;;653    			}
;;;654    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;655    		if(( (ibat_ips+ibat_ips_) < IKB )  && (kb_start_ips==1))
;;;656    			{
;;;657    			if(KB_ALGORITM==2)
;;;658    				{
;;;659    				avar_bat_ips_hndl(1);
;;;660    				kb_start_ips=0;
;;;661    				}
;;;662    			else
;;;663    				{
;;;664    				kb_full_ver=1;     
;;;665    				}
;;;666    			}
;;;667    #endif
;;;668    		}	
;;;669    	}
;;;670    
;;;671    else if(kb_full_ver)
;;;672    	{
;;;673    	
;;;674    	mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_STEP_DOWN,0,15);
;;;675    
;;;676    	if( abs(bat[0]._Ib) > IKB ) 
;;;677    		{
;;;678    		if(kb_start[0]==1)
;;;679    			{
;;;680    			kb_start[0]=0;
;;;681    			avar_bat_hndl(0,0);
;;;682    			}
;;;683    		}
;;;684    
;;;685    	if( abs(bat[1]._Ib) > IKB ) 
;;;686    		{
;;;687    		if(kb_start[1]==1)
;;;688    			{
;;;689    			kb_start[1]=0;
;;;690    			avar_bat_hndl(1,0);
;;;691    			}
;;;692    		}
;;;693    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;694    	if( abs(Ib_ips_termokompensat) > IKB ) 
;;;695    		{
;;;696    		if(kb_start_ips==1)
;;;697    			{
;;;698    			kb_start_ips=0;
;;;699    			avar_bat_ips_hndl(0);
;;;700    			}
;;;701    		}
;;;702    #endif
;;;703    
;;;704    	if ((kb_start[0]==0) && (kb_start[1]==0) && (kb_start_ips==0)) 
;;;705    		{
;;;706    		kb_full_ver=0;
;;;707    		}
;;;708    
;;;709    	if(( (mess_find(MESS2KB_HNDL))	&& (mess_data[0]==PARAM_CNTRL_IS_DOWN) ) || (load_U<(USIGN*10)) )
;;;710    		{
;;;711    		kb_full_ver=0;
;;;712    		if((kb_start[0]==1)&&((load_I>(2*IKB)/10))&&(!(bat[0]._av&0x01))) avar_bat_hndl(0,1);
;;;713    		if((kb_start[1]==1)&&((load_I>(2*IKB)/10))&&(!(bat[1]._av&0x01))) avar_bat_hndl(1,1);
;;;714    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;715    		if((kb_start_ips==1)&&((load_I>(2*IKB)/10))&&(!(bat_ips._av&0x01))) avar_bat_ips_hndl(1);
;;;716    #endif
;;;717    		}
;;;718    	}
;;;719    
;;;720    }
0007ba  e8bd9ff0          POP      {r4-r12,pc}
                  |L1.1982|
0007be  f8aa7044          STRH     r7,[r10,#0x44]        ;577
0007c2  e7d2              B        |L1.1898|
                  |L1.1988|
0007c4  f8aa7044          STRH     r7,[r10,#0x44]        ;587
0007c8  e7e4              B        |L1.1940|
                  |L1.1994|
0007ca  2001              MOVS     r0,#1                 ;599
0007cc  f7fffffe          BL       avar_bat_ips_hndl
0007d0  f88a500e          STRB     r5,[r10,#0xe]         ;600
                  |L1.2004|
0007d4  e7f1              B        |L1.1978|
                  |L1.2006|
0007d6  f9b10044          LDRSH    r0,[r1,#0x44]         ;612  ; kb_cnt_2lev
0007da  b3e8              CBZ      r0,|L1.2136|
0007dc  1e40              SUBS     r0,r0,#1              ;614
0007de  b200              SXTH     r0,r0                 ;614
0007e0  460f              MOV      r7,r1                 ;614
0007e2  f8a10044          STRH     r0,[r1,#0x44]         ;614
0007e6  2805              CMP      r0,#5                 ;616
0007e8  dd06              BLE      |L1.2040|
0007ea  230f              MOVS     r3,#0xf               ;616
0007ec  22c8              MOVS     r2,#0xc8              ;616
0007ee  2164              MOVS     r1,#0x64              ;616
0007f0  20e1              MOVS     r0,#0xe1              ;616
0007f2  f7fffffe          BL       mess_send
0007f6  e007              B        |L1.2056|
                  |L1.2040|
0007f8  2800              CMP      r0,#0                 ;617
0007fa  dd05              BLE      |L1.2056|
0007fc  230f              MOVS     r3,#0xf               ;617
0007fe  22c8              MOVS     r2,#0xc8              ;617
000800  2169              MOVS     r1,#0x69              ;617
000802  20e1              MOVS     r0,#0xe1              ;617
000804  f7fffffe          BL       mess_send
                  |L1.2056|
000808  f8b70044          LDRH     r0,[r7,#0x44]         ;620  ; kb_cnt_2lev
00080c  2805              CMP      r0,#5                 ;620
00080e  d111              BNE      |L1.2100|
000810  f9b60008          LDRSH    r0,[r6,#8]            ;622  ; bat
000814  f7fffffe          BL       abs
000818  f8a80000          STRH     r0,[r8,#0]            ;622
00081c  f9b60054          LDRSH    r0,[r6,#0x54]         ;623  ; bat
000820  f7fffffe          BL       abs
000824  f8a80002          STRH     r0,[r8,#2]            ;623
000828  f9ba0000          LDRSH    r0,[r10,#0]           ;624  ; Ib_ips_termokompensat
00082c  f7fffffe          BL       abs
000830  f8a70048          STRH     r0,[r7,#0x48]         ;624
                  |L1.2100|
000834  4810              LDR      r0,|L1.2168|
000836  f8b00044          LDRH     r0,[r0,#0x44]         ;627  ; kb_cnt_2lev
00083a  2800              CMP      r0,#0                 ;627
                  |L1.2108|
00083c  d1bd              BNE      |L1.1978|
00083e  f9b60008          LDRSH    r0,[r6,#8]            ;629  ; bat
000842  f7fffffe          BL       abs
000846  4f0c              LDR      r7,|L1.2168|
000848  376c              ADDS     r7,r7,#0x6c           ;629
00084a  8038              STRH     r0,[r7,#0]            ;629
00084c  f9b60054          LDRSH    r0,[r6,#0x54]         ;630  ; bat
000850  f7fffffe          BL       abs
000854  8078              STRH     r0,[r7,#2]            ;630
000856  e000              B        |L1.2138|
                  |L1.2136|
000858  e07d              B        |L1.2390|
                  |L1.2138|
00085a  f9ba0000          LDRSH    r0,[r10,#0]           ;631  ; Ib_ips_termokompensat
00085e  f7fffffe          BL       abs
000862  f8dfa014          LDR      r10,|L1.2168|
000866  f8aa004a          STRH     r0,[r10,#0x4a]        ;631
00086a  f88a500d          STRB     r5,[r10,#0xd]         ;633
00086e  f9b80000          LDRSH    r0,[r8,#0]            ;635  ; ibat
000872  e027              B        |L1.2244|
                  |L1.2164|
                          DCD      AVZ
                  |L1.2168|
                          DCD      ||area_number.18||
                  |L1.2172|
                          DCD      0x40024000
                  |L1.2176|
                          DCD      YEAR_AVZ
                  |L1.2180|
                          DCD      MONTH_AVZ
                  |L1.2184|
                          DCD      DATE_AVZ
                  |L1.2188|
                          DCD      HOUR_AVZ
                  |L1.2192|
                          DCD      MIN_AVZ
                  |L1.2196|
                          DCD      SEC_AVZ
                  |L1.2200|
                          DCD      AVZ_TIME
                  |L1.2204|
                          DCD      speedChrgBlckStat
                  |L1.2208|
                          DCD      TBAT
                  |L1.2212|
                          DCD      Ib_ips_termokompensat
                  |L1.2216|
                          DCD      bat
                  |L1.2220|
                          DCD      IKB
                  |L1.2224|
                          DCD      BAT_IS_ON
                  |L1.2228|
                          DCD      ips_bat_av_vzvod
                  |L1.2232|
                          DCD      bat_ips
                  |L1.2236|
                          DCD      net_av
                  |L1.2240|
                          DCD      KB_ALGORITM
                  |L1.2244|
0008c4  f9b71000          LDRSH    r1,[r7,#0]            ;635  ; ibat_
0008c8  4408              ADD      r0,r0,r1              ;635
0008ca  f9b91000          LDRSH    r1,[r9,#0]            ;635  ; IKB
0008ce  4288              CMP      r0,r1                 ;635
0008d0  da02              BGE      |L1.2264|
0008d2  7820              LDRB     r0,[r4,#0]            ;635  ; kb_start
0008d4  2801              CMP      r0,#1                 ;635
0008d6  d032              BEQ      |L1.2366|
                  |L1.2264|
0008d8  f9b60002          LDRSH    r0,[r6,#2]            ;639  ; bat
0008dc  28c8              CMP      r0,#0xc8              ;639
0008de  dd04              BLE      |L1.2282|
0008e0  7025              STRB     r5,[r4,#0]            ;641
0008e2  2100              MOVS     r1,#0                 ;642
0008e4  4608              MOV      r0,r1                 ;642
0008e6  f7fffffe          BL       avar_bat_hndl
                  |L1.2282|
0008ea  f9b80002          LDRSH    r0,[r8,#2]            ;645  ; ibat
0008ee  f9b71002          LDRSH    r1,[r7,#2]            ;645  ; ibat_
0008f2  4408              ADD      r0,r0,r1              ;645
0008f4  f9b91000          LDRSH    r1,[r9,#0]            ;645  ; IKB
0008f8  4288              CMP      r0,r1                 ;645
0008fa  da02              BGE      |L1.2306|
0008fc  7860              LDRB     r0,[r4,#1]            ;645  ; kb_start
0008fe  2801              CMP      r0,#1                 ;645
000900  d020              BEQ      |L1.2372|
                  |L1.2306|
000902  f9b6004e          LDRSH    r0,[r6,#0x4e]         ;649  ; bat
000906  28c8              CMP      r0,#0xc8              ;649
000908  dd04              BLE      |L1.2324|
00090a  7065              STRB     r5,[r4,#1]            ;651
00090c  2100              MOVS     r1,#0                 ;652
00090e  2001              MOVS     r0,#1                 ;652
000910  f7fffffe          BL       avar_bat_hndl
                  |L1.2324|
000914  f9ba0048          LDRSH    r0,[r10,#0x48]        ;655  ; ibat_ips
000918  f9ba104a          LDRSH    r1,[r10,#0x4a]        ;655  ; ibat_ips_
00091c  4408              ADD      r0,r0,r1              ;655
00091e  f9b91000          LDRSH    r1,[r9,#0]            ;655  ; IKB
000922  4288              CMP      r0,r1                 ;655
000924  f6bfaf56          BGE      |L1.2004|
000928  f89a000e          LDRB     r0,[r10,#0xe]         ;655  ; kb_start_ips
00092c  2801              CMP      r0,#1                 ;655
00092e  d185              BNE      |L1.2108|
000930  48ff              LDR      r0,|L1.3376|
000932  8800              LDRH     r0,[r0,#0]            ;657  ; KB_ALGORITM
000934  2802              CMP      r0,#2                 ;657
000936  d008              BEQ      |L1.2378|
000938  f88ab00d          STRB     r11,[r10,#0xd]        ;664
                  |L1.2364|
00093c  e73d              B        |L1.1978|
                  |L1.2366|
00093e  f88ab00d          STRB     r11,[r10,#0xd]        ;637
000942  e7d2              B        |L1.2282|
                  |L1.2372|
000944  f88ab00d          STRB     r11,[r10,#0xd]        ;647
000948  e7e4              B        |L1.2324|
                  |L1.2378|
00094a  2001              MOVS     r0,#1                 ;659
00094c  f7fffffe          BL       avar_bat_ips_hndl
000950  f88a500e          STRB     r5,[r10,#0xe]         ;660
000954  e731              B        |L1.1978|
                  |L1.2390|
000956  7b48              LDRB     r0,[r1,#0xd]          ;671  ; kb_full_ver
000958  4688              MOV      r8,r1                 ;671
00095a  2800              CMP      r0,#0                 ;671
00095c  d0ee              BEQ      |L1.2364|
00095e  230f              MOVS     r3,#0xf               ;674
000960  2200              MOVS     r2,#0                 ;674
000962  216e              MOVS     r1,#0x6e              ;674
000964  20e1              MOVS     r0,#0xe1              ;674
000966  f7fffffe          BL       mess_send
00096a  f9b60008          LDRSH    r0,[r6,#8]            ;676  ; bat
00096e  f7fffffe          BL       abs
000972  f9b91000          LDRSH    r1,[r9,#0]            ;676  ; IKB
000976  4288              CMP      r0,r1                 ;676
000978  dd07              BLE      |L1.2442|
00097a  7820              LDRB     r0,[r4,#0]            ;678  ; kb_start
00097c  2801              CMP      r0,#1                 ;678
00097e  d104              BNE      |L1.2442|
000980  7025              STRB     r5,[r4,#0]            ;680
000982  2100              MOVS     r1,#0                 ;681
000984  4608              MOV      r0,r1                 ;681
000986  f7fffffe          BL       avar_bat_hndl
                  |L1.2442|
00098a  f9b60054          LDRSH    r0,[r6,#0x54]         ;685  ; bat
00098e  f7fffffe          BL       abs
000992  f9b91000          LDRSH    r1,[r9,#0]            ;685  ; IKB
000996  4288              CMP      r0,r1                 ;685
000998  dd06              BLE      |L1.2472|
00099a  7860              LDRB     r0,[r4,#1]            ;687  ; kb_start
00099c  2801              CMP      r0,#1                 ;687
00099e  d103              BNE      |L1.2472|
0009a0  7065              STRB     r5,[r4,#1]            ;689
0009a2  2100              MOVS     r1,#0                 ;690
0009a4  f7fffffe          BL       avar_bat_hndl
                  |L1.2472|
0009a8  f9ba0000          LDRSH    r0,[r10,#0]           ;694  ; Ib_ips_termokompensat
0009ac  f7fffffe          BL       abs
0009b0  f9b91000          LDRSH    r1,[r9,#0]            ;694  ; IKB
0009b4  4288              CMP      r0,r1                 ;694
0009b6  dd08              BLE      |L1.2506|
0009b8  f898000e          LDRB     r0,[r8,#0xe]          ;696  ; kb_start_ips
0009bc  2801              CMP      r0,#1                 ;696
0009be  d104              BNE      |L1.2506|
0009c0  f888500e          STRB     r5,[r8,#0xe]          ;698
0009c4  2000              MOVS     r0,#0                 ;699
0009c6  f7fffffe          BL       avar_bat_ips_hndl
                  |L1.2506|
0009ca  7820              LDRB     r0,[r4,#0]            ;704  ; kb_start
0009cc  b930              CBNZ     r0,|L1.2524|
0009ce  7860              LDRB     r0,[r4,#1]            ;704  ; kb_start
0009d0  b920              CBNZ     r0,|L1.2524|
0009d2  f898000e          LDRB     r0,[r8,#0xe]          ;704  ; kb_start_ips
0009d6  b908              CBNZ     r0,|L1.2524|
0009d8  f888500d          STRB     r5,[r8,#0xd]          ;706
                  |L1.2524|
0009dc  20e6              MOVS     r0,#0xe6              ;709
0009de  f7fffffe          BL       mess_find
0009e2  b118              CBZ      r0,|L1.2540|
0009e4  48d3              LDR      r0,|L1.3380|
0009e6  6800              LDR      r0,[r0,#0]            ;709  ; mess_data
0009e8  28e7              CMP      r0,#0xe7              ;709
0009ea  d00a              BEQ      |L1.2562|
                  |L1.2540|
0009ec  48d2              LDR      r0,|L1.3384|
0009ee  49d3              LDR      r1,|L1.3388|
0009f0  f9b00000          LDRSH    r0,[r0,#0]            ;709  ; USIGN
0009f4  f9b11000          LDRSH    r1,[r1,#0]            ;709  ; load_U
0009f8  eb000080          ADD      r0,r0,r0,LSL #2       ;709
0009fc  ebb10f40          CMP      r1,r0,LSL #1          ;709
                  |L1.2560|
000a00  da9c              BGE      |L1.2364|
                  |L1.2562|
000a02  f888500d          STRB     r5,[r8,#0xd]          ;711
000a06  7820              LDRB     r0,[r4,#0]            ;712  ; kb_start
000a08  4dcd              LDR      r5,|L1.3392|
000a0a  2801              CMP      r0,#1                 ;712
000a0c  d10f              BNE      |L1.2606|
000a0e  f9b90000          LDRSH    r0,[r9,#0]            ;712  ; IKB
000a12  f9b51000          LDRSH    r1,[r5,#0]            ;712  ; load_I
000a16  0040              LSLS     r0,r0,#1              ;712
000a18  fb90f0f7          SDIV     r0,r0,r7              ;712
000a1c  4288              CMP      r0,r1                 ;712
000a1e  da06              BGE      |L1.2606|
000a20  f896003d          LDRB     r0,[r6,#0x3d]         ;712  ; bat
000a24  07c0              LSLS     r0,r0,#31             ;712
000a26  d102              BNE      |L1.2606|
000a28  2101              MOVS     r1,#1                 ;712
000a2a  f7fffffe          BL       avar_bat_hndl
                  |L1.2606|
000a2e  7860              LDRB     r0,[r4,#1]            ;713  ; kb_start
000a30  2801              CMP      r0,#1                 ;713
000a32  d110              BNE      |L1.2646|
000a34  f9b90000          LDRSH    r0,[r9,#0]            ;713  ; IKB
000a38  f9b51000          LDRSH    r1,[r5,#0]            ;713  ; load_I
000a3c  0040              LSLS     r0,r0,#1              ;713
000a3e  fb90f0f7          SDIV     r0,r0,r7              ;713
000a42  4288              CMP      r0,r1                 ;713
000a44  da07              BGE      |L1.2646|
000a46  f8960089          LDRB     r0,[r6,#0x89]         ;713  ; bat
000a4a  07c0              LSLS     r0,r0,#31             ;713
000a4c  d103              BNE      |L1.2646|
000a4e  2101              MOVS     r1,#1                 ;713
000a50  4608              MOV      r0,r1                 ;713
000a52  f7fffffe          BL       avar_bat_hndl
                  |L1.2646|
000a56  f898000e          LDRB     r0,[r8,#0xe]          ;715  ; kb_start_ips
000a5a  2801              CMP      r0,#1                 ;715
                  |L1.2652|
000a5c  f47faeba          BNE      |L1.2004|
000a60  f9b90000          LDRSH    r0,[r9,#0]            ;715  ; IKB
000a64  f9b51000          LDRSH    r1,[r5,#0]            ;715  ; load_I
000a68  0040              LSLS     r0,r0,#1              ;715
000a6a  fb90f0f7          SDIV     r0,r0,r7              ;715
000a6e  4288              CMP      r0,r1                 ;715
000a70  dac6              BGE      |L1.2560|
000a72  48b4              LDR      r0,|L1.3396|
000a74  f890003d          LDRB     r0,[r0,#0x3d]         ;715  ; bat_ips
000a78  07c0              LSLS     r0,r0,#31             ;715
000a7a  d1ef              BNE      |L1.2652|
000a7c  e8bd5ff0          POP      {r4-r12,lr}           ;715
000a80  2001              MOVS     r0,#1                 ;715
000a82  f7ffbffe          B.W      avar_bat_ips_hndl
;;;721    
                          ENDP

                  samokalibr_init PROC
;;;725    //-----------------------------------------------
;;;726    void samokalibr_init(void)
000a86  49b0              LDR      r1,|L1.3400|
;;;727    {
;;;728    samokalibr_cnt=1785;
000a88  f24060f9          MOV      r0,#0x6f9
000a8c  87c8              STRH     r0,[r1,#0x3e]
;;;729    }
000a8e  4770              BX       lr
;;;730    //-----------------------------------------------
                          ENDP

                  samokalibr_hndl PROC
;;;731    void samokalibr_hndl(void)
000a90  e92d47f0          PUSH     {r4-r10,lr}
;;;732    {
;;;733    if(++samokalibr_cnt>=1800)samokalibr_cnt=0;
000a94  4cac              LDR      r4,|L1.3400|
000a96  8fe0              LDRH     r0,[r4,#0x3e]  ; samokalibr_cnt
000a98  1c40              ADDS     r0,r0,#1
000a9a  b200              SXTH     r0,r0
000a9c  87e0              STRH     r0,[r4,#0x3e]
000a9e  f5b06fe1          CMP      r0,#0x708
000aa2  db01              BLT      |L1.2728|
000aa4  2000              MOVS     r0,#0
000aa6  87e0              STRH     r0,[r4,#0x3e]
                  |L1.2728|
;;;734    
;;;735    if(samokalibr_cnt>=1785U)
000aa8  f9b4003e          LDRSH    r0,[r4,#0x3e]  ; samokalibr_cnt
000aac  f5b06fdf          CMP      r0,#0x6f8
000ab0  d911              BLS      |L1.2774|
;;;736    	{
;;;737    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,1,15);
000ab2  230f              MOVS     r3,#0xf
000ab4  2201              MOVS     r2,#1
000ab6  2164              MOVS     r1,#0x64
000ab8  20d2              MOVS     r0,#0xd2
000aba  f7fffffe          BL       mess_send
;;;738    	mess_send(MESS2IND_HNDL,PARAM_SAMOKALIBR,0,15);
000abe  230f              MOVS     r3,#0xf
000ac0  2200              MOVS     r2,#0
000ac2  21d8              MOVS     r1,#0xd8
000ac4  20d7              MOVS     r0,#0xd7
000ac6  f7fffffe          BL       mess_send
;;;739    	mess_send(MESS2MATEMAT,PARAM_SAMOKALIBR,0,15);
000aca  230f              MOVS     r3,#0xf
000acc  2200              MOVS     r2,#0
000ace  21d8              MOVS     r1,#0xd8
000ad0  20dc              MOVS     r0,#0xdc
000ad2  f7fffffe          BL       mess_send
                  |L1.2774|
;;;740    	} 
;;;741    
;;;742    if(samokalibr_cnt==1799U)
000ad6  f9b4003e          LDRSH    r0,[r4,#0x3e]  ; samokalibr_cnt
000ada  f5a061e0          SUB      r1,r0,#0x700
000ade  3907              SUBS     r1,#7
000ae0  d133              BNE      |L1.2890|
;;;743    	{
;;;744    	if((Kibat0[0]!=ad7705_buff_[0])&&(abs(bat[0]._Ib/10)<IZMAX)) lc640_write_int(ADR_KI0BAT[0],ad7705_buff_[0]);
000ae2  4d9a              LDR      r5,|L1.3404|
000ae4  4c9a              LDR      r4,|L1.3408|
000ae6  4e9b              LDR      r6,|L1.3412|
000ae8  8828              LDRH     r0,[r5,#0]  ; Kibat0
000aea  8821              LDRH     r1,[r4,#0]  ; ad7705_buff_
000aec  270a              MOVS     r7,#0xa
000aee  f8df8268          LDR      r8,|L1.3416|
000af2  f8df9268          LDR      r9,|L1.3420|
000af6  4288              CMP      r0,r1
000af8  d010              BEQ      |L1.2844|
000afa  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000afe  fb90f0f7          SDIV     r0,r0,r7
000b02  b200              SXTH     r0,r0
000b04  f7fffffe          BL       abs
000b08  f9b81000          LDRSH    r1,[r8,#0]  ; IZMAX
000b0c  4288              CMP      r0,r1
000b0e  da05              BGE      |L1.2844|
000b10  f9b41000          LDRSH    r1,[r4,#0]  ; ad7705_buff_
000b14  f9b90000          LDRSH    r0,[r9,#0]  ; ADR_KI0BAT
000b18  f7fffffe          BL       lc640_write_int
                  |L1.2844|
;;;745    	if((Kibat0[1]!=ad7705_buff_[1])&&(abs(bat[0]._Ib/10)<IZMAX)) lc640_write_int(ADR_KI0BAT[1],ad7705_buff_[1]);
000b1c  8868              LDRH     r0,[r5,#2]  ; Kibat0
000b1e  8861              LDRH     r1,[r4,#2]  ; ad7705_buff_
000b20  4288              CMP      r0,r1
000b22  d012              BEQ      |L1.2890|
000b24  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000b28  fb90f0f7          SDIV     r0,r0,r7
000b2c  b200              SXTH     r0,r0
000b2e  f7fffffe          BL       abs
000b32  f9b81000          LDRSH    r1,[r8,#0]  ; IZMAX
000b36  4288              CMP      r0,r1
000b38  da07              BGE      |L1.2890|
000b3a  f9b41002          LDRSH    r1,[r4,#2]  ; ad7705_buff_
000b3e  f9b90002          LDRSH    r0,[r9,#2]  ; ADR_KI0BAT
000b42  e8bd47f0          POP      {r4-r10,lr}
000b46  f7ffbffe          B.W      lc640_write_int
                  |L1.2890|
;;;746    	
;;;747    	}	 	
;;;748    }
000b4a  e8bd87f0          POP      {r4-r10,pc}
;;;749    
                          ENDP

                  ubat_old_drv PROC
;;;752    //-----------------------------------------------
;;;753    void ubat_old_drv(void)
000b4e  b510              PUSH     {r4,lr}
;;;754    {        
;;;755    bat_u_old_cnt++;
000b50  4c83              LDR      r4,|L1.3424|
000b52  8820              LDRH     r0,[r4,#0]  ; bat_u_old_cnt
000b54  1c40              ADDS     r0,r0,#1
000b56  8020              STRH     r0,[r4,#0]
;;;756    gran_ring(&bat_u_old_cnt,0,8);
000b58  2208              MOVS     r2,#8
000b5a  2100              MOVS     r1,#0
000b5c  4620              MOV      r0,r4
000b5e  f7fffffe          BL       gran_ring
;;;757    
;;;758    bat[0]._u_old[bat_u_old_cnt]=bat[0]._Ub;
000b62  497c              LDR      r1,|L1.3412|
000b64  f9b40000          LDRSH    r0,[r4,#0]  ; bat_u_old_cnt
000b68  eb010040          ADD      r0,r1,r0,LSL #1
000b6c  884a              LDRH     r2,[r1,#2]  ; bat
000b6e  8402              STRH     r2,[r0,#0x20]
;;;759    bat[1]._u_old[bat_u_old_cnt]=bat[1]._Ub;
000b70  f8b1104e          LDRH     r1,[r1,#0x4e]  ; bat
000b74  f8a0106c          STRH     r1,[r0,#0x6c]
;;;760    }
000b78  bd10              POP      {r4,pc}
;;;761    
                          ENDP

                  unet_drv PROC
;;;762    //-----------------------------------------------
;;;763    void unet_drv(void)
000b7a  b570              PUSH     {r4-r6,lr}
;;;764    {
;;;765    if(net_U<UMN)
000b7c  4d79              LDR      r5,|L1.3428|
000b7e  487a              LDR      r0,|L1.3432|
;;;766    	{
;;;767    	if((unet_drv_cnt<10)&&(main_1Hz_cnt>15))
000b80  4a7a              LDR      r2,|L1.3436|
000b82  f9b51000          LDRSH    r1,[r5,#0]            ;765  ; net_U
000b86  f9b03000          LDRSH    r3,[r0,#0]            ;765  ; UMN
000b8a  f9920000          LDRSB    r0,[r2,#0]
000b8e  4299              CMP      r1,r3                 ;765
000b90  da1d              BGE      |L1.3022|
;;;768    		{
;;;769    		unet_drv_cnt++;
;;;770    		if(unet_drv_cnt>=10)
;;;771    			{
;;;772    			net_Ustore=net_U;
000b92  4c77              LDR      r4,|L1.3440|
000b94  280a              CMP      r0,#0xa               ;767
000b96  da0e              BGE      |L1.2998|
000b98  4b76              LDR      r3,|L1.3444|
000b9a  f9b33000          LDRSH    r3,[r3,#0]            ;767  ; main_1Hz_cnt
000b9e  2b0f              CMP      r3,#0xf               ;767
000ba0  dd09              BLE      |L1.2998|
000ba2  1c40              ADDS     r0,r0,#1              ;769
000ba4  b240              SXTB     r0,r0                 ;769
000ba6  7010              STRB     r0,[r2,#0]            ;769
000ba8  280a              CMP      r0,#0xa               ;770
000baa  db08              BLT      |L1.3006|
000bac  8021              STRH     r1,[r4,#0]
;;;773    		 	avar_unet_hndl(1);
000bae  2001              MOVS     r0,#1
000bb0  f7fffffe          BL       avar_unet_hndl
000bb4  e003              B        |L1.3006|
                  |L1.2998|
;;;774    			
;;;775    			}
;;;776    		}
;;;777    	else if(unet_drv_cnt>=10)unet_drv_cnt=10;
000bb6  280a              CMP      r0,#0xa
000bb8  db01              BLT      |L1.3006|
000bba  200a              MOVS     r0,#0xa
000bbc  7010              STRB     r0,[r2,#0]
                  |L1.3006|
;;;778    
;;;779    	if(net_U<net_Ustore) net_Ustore=net_U;	
000bbe  f9b50000          LDRSH    r0,[r5,#0]  ; net_U
000bc2  f9b41000          LDRSH    r1,[r4,#0]  ; net_Ustore
000bc6  4288              CMP      r0,r1
000bc8  da00              BGE      |L1.3020|
000bca  8020              STRH     r0,[r4,#0]
                  |L1.3020|
;;;780    	}
;;;781    
;;;782    else if(net_U>UMN)
;;;783    	{                 
;;;784    	if(unet_drv_cnt)
;;;785    		{
;;;786    		unet_drv_cnt--;
;;;787    		if(unet_drv_cnt<=0)
;;;788    			{
;;;789    			avar_unet_hndl(0);
;;;790    			}
;;;791    		}
;;;792    	else if(unet_drv_cnt<0)unet_drv_cnt=0;
;;;793    	
;;;794    	}
;;;795    
;;;796    }
000bcc  bd70              POP      {r4-r6,pc}
                  |L1.3022|
000bce  ddfd              BLE      |L1.3020|
000bd0  2800              CMP      r0,#0                 ;784
000bd2  d0fb              BEQ      |L1.3020|
000bd4  1e40              SUBS     r0,r0,#1              ;786
000bd6  b240              SXTB     r0,r0                 ;786
000bd8  7010              STRB     r0,[r2,#0]            ;786
000bda  2800              CMP      r0,#0                 ;787
000bdc  dcf6              BGT      |L1.3020|
000bde  e8bd4070          POP      {r4-r6,lr}            ;789
000be2  2000              MOVS     r0,#0                 ;789
000be4  f7ffbffe          B.W      avar_unet_hndl
;;;797    
                          ENDP

                  matemat PROC
;;;798    //-----------------------------------------------
;;;799    void matemat(void)
000be8  e92d4ffe          PUSH     {r1-r11,lr}
;;;800    {
;;;801    //signed short temp_SS;
;;;802    signed long temp_SL/*,temp_SL_*/;
;;;803    char /*temp,*/i;
;;;804    //signed short temp_SS;
;;;805    
;;;806    #ifdef UKU_MGTS
;;;807    // 
;;;808    temp_SL=(signed long)net_buff_;
;;;809    temp_SL*=Kunet;
;;;810    temp_SL/=110000L;
;;;811    net_U=(signed short)temp_SL;
;;;812    #endif
;;;813    
;;;814    #ifdef UKU_RSTKM
;;;815    // 
;;;816    temp_SL=(signed long)net_buff_;
;;;817    temp_SL*=Kunet;
;;;818    temp_SL/=110000L;
;;;819    net_U=(signed short)temp_SL;
;;;820    #endif
;;;821    
;;;822    #ifdef UKU_3U
;;;823    // 
;;;824    temp_SL=(signed long)net_buff_;
;;;825    temp_SL*=Kunet;
;;;826    temp_SL/=36000L;
;;;827    net_U=(signed short)temp_SL;
;;;828    #endif
;;;829    
;;;830    #ifdef UKU_6U
;;;831    // 
;;;832    
;;;833    if((AUSW_MAIN%10)||(AUSW_MAIN==2400)||(AUSW_MAIN==4800)||(AUSW_MAIN==6000))
;;;834    	{
;;;835    
;;;836    	if(bps[11]._device==dNET_METR)
;;;837    		{
;;;838    		net_metr_buff_[0]=((signed short)bps[11]._buff[0])+(((signed short)bps[11]._buff[1])<<8);
;;;839    		net_metr_buff_[1]=((signed short)bps[11]._buff[2])+(((signed short)bps[11]._buff[3])<<8);
;;;840    		net_metr_buff_[2]=((signed short)bps[11]._buff[4])+(((signed short)bps[11]._buff[5])<<8);
;;;841    
;;;842    		temp_SL=(signed long)net_metr_buff_[0];
;;;843    		temp_SL*=KunetA;
;;;844    		temp_SL/=6000L;
;;;845    		net_Ua=(signed short)temp_SL;
;;;846    	
;;;847    		temp_SL=(signed long)net_metr_buff_[1];
;;;848    		temp_SL*=KunetB;
;;;849    		temp_SL/=6000L;
;;;850    		net_Ub=(signed short)temp_SL;
;;;851    	
;;;852    		temp_SL=(signed long)net_metr_buff_[2];
;;;853    		temp_SL*=KunetC;
;;;854    		temp_SL/=6000L;
;;;855    		net_Uc=(signed short)temp_SL;
;;;856    		}
;;;857    	else
;;;858    		{
;;;859    		temp_SL=(signed long)net_buff_;
;;;860    		temp_SL*=KunetA;
;;;861    		temp_SL/=110000L;
;;;862    		net_Ua=(signed short)temp_SL;
;;;863    	
;;;864    		temp_SL=(signed long)adc_buff_[3];
;;;865    		temp_SL*=KunetB;
;;;866    		temp_SL/=6000L;
;;;867    		net_Ub=(signed short)temp_SL;
;;;868    	
;;;869    		temp_SL=(signed long)adc_buff_[10];
;;;870    		temp_SL*=KunetC;
;;;871    		temp_SL/=6000L;
;;;872    		net_Uc=(signed short)temp_SL;
;;;873    		}
;;;874    
;;;875    	net_U=net_Ua;
;;;876    	if(net_Ub<net_U)net_U=net_Ub;
;;;877    	if(net_Uc<net_U)net_U=net_Uc;
;;;878    	}
;;;879    else 
;;;880    	{
;;;881    	temp_SL=(signed long)net_buff_;
;;;882    	temp_SL*=Kunet;
;;;883    	temp_SL/=110000L;
;;;884    	net_U=(signed short)temp_SL;
;;;885    	}
;;;886    
;;;887    
;;;888    
;;;889    
;;;890    #endif
;;;891    
;;;892    #ifdef UKU_GLONASS
;;;893    // 
;;;894    temp_SL=(signed long)net_buff_;
;;;895    temp_SL*=Kunet;
;;;896    temp_SL/=110000L;
;;;897    net_U=(signed short)temp_SL;
;;;898    #endif
;;;899    
;;;900    #ifdef UKU_KONTUR
;;;901    // 
;;;902    temp_SL=(signed long)net_buff_;
;;;903    temp_SL*=Kunet;
;;;904    temp_SL/=110000L;
;;;905    net_U=(signed short)temp_SL;
;;;906    #endif
;;;907    
;;;908    
;;;909    #ifdef UKU_220_V2
;;;910    // 
;;;911    
;;;912    if(AUSW_MAIN==22033)
;;;913    	{
;;;914    	temp_SL=(signed long)net_buff_;
;;;915    	temp_SL*=KunetA;
;;;916    	temp_SL/=6000L;
;;;917    	net_Ua=(signed short)temp_SL;
;;;918    
;;;919    	temp_SL=(signed long)adc_buff_[3];
;;;920    	temp_SL*=KunetB;
;;;921    	temp_SL/=6000L;
;;;922    	net_Ub=(signed short)temp_SL;
;;;923    
;;;924    	temp_SL=(signed long)adc_buff_[10];
;;;925    	temp_SL*=KunetC;
;;;926    	temp_SL/=6000L;
;;;927    	net_Uc=(signed short)temp_SL;
;;;928    
;;;929    	net_U=net_Ua;
;;;930    	if(net_Ub<net_U)net_U=net_Ub;
;;;931    	if(net_Uc<net_U)net_U=net_Uc;
;;;932    	}
;;;933    else
;;;934    	{
;;;935    	temp_SL=(signed long)net_buff_;
;;;936    	temp_SL*=Kunet;
;;;937    	temp_SL/=5000L;
;;;938    	net_U=(signed short)temp_SL;
;;;939    	}
;;;940    #endif
;;;941    
;;;942    
;;;943    #ifdef UKU_220
;;;944    // 
;;;945    
;;;946    if(AUSW_MAIN==22035)
;;;947    	{
;;;948    	temp_SL=(signed long)net_buff_;
;;;949    	temp_SL*=KunetA;
;;;950    	temp_SL/=6000L;
;;;951    	net_Ua=(signed short)temp_SL;
;;;952    
;;;953    	temp_SL=(signed long)adc_buff_[3];
;;;954    	temp_SL*=KunetB;
;;;955    	temp_SL/=6000L;
;;;956    	net_Ub=(signed short)temp_SL;
;;;957    
;;;958    	temp_SL=(signed long)adc_buff_[10];
;;;959    	temp_SL*=KunetC;
;;;960    	temp_SL/=6000L;
;;;961    	net_Uc=(signed short)temp_SL;
;;;962    
;;;963    	net_U=net_Ua;
;;;964    	if(net_Ub<net_U)net_U=net_Ub;
;;;965    	if(net_Uc<net_U)net_U=net_Uc;
;;;966    	}
;;;967    else
;;;968    	{
;;;969    	temp_SL=(signed long)net_buff_;
;;;970    	temp_SL*=Kunet;
;;;971    	#ifdef _ACDC_
;;;972    	temp_SL/=500L;
;;;973    	#else
;;;974    	temp_SL/=5000L;
;;;975    	#endif
;;;976    	net_U=(signed short)temp_SL;
;;;977    	
;;;978    	}
;;;979    #endif
;;;980    
;;;981    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;982    // 
;;;983    
;;;984    
;;;985    	if(bps[11]._device==dNET_METR)
000bec  4862              LDR      r0,|L1.3448|
;;;986    		{
;;;987    		net_metr_buff_[0]=((signed short)bps[11]._buff[0])+(((signed short)bps[11]._buff[1])<<8);
;;;988    		net_metr_buff_[1]=((signed short)bps[11]._buff[2])+(((signed short)bps[11]._buff[3])<<8);
;;;989    		net_metr_buff_[2]=((signed short)bps[11]._buff[4])+(((signed short)bps[11]._buff[5])<<8);
;;;990    
;;;991    		temp_SL=(signed long)net_metr_buff_[2];
;;;992    		temp_SL*=KunetA;
;;;993    		temp_SL/=6000L;
;;;994    		net_Ua=(signed short)temp_SL;
;;;995    	
;;;996    		temp_SL=(signed long)net_metr_buff_[1];
;;;997    		temp_SL*=KunetB;
000bee  4965              LDR      r1,|L1.3460|
000bf0  4a62              LDR      r2,|L1.3452|
000bf2  f89003f4          LDRB     r0,[r0,#0x3f4]        ;985  ; bps
;;;998    		temp_SL/=6000L;
;;;999    		net_Ub=(signed short)temp_SL;
;;;1000   	
;;;1001   		temp_SL=(signed long)net_metr_buff_[0];
;;;1002   		temp_SL*=KunetC;
000bf6  4b64              LDR      r3,|L1.3464|
000bf8  9002              STR      r0,[sp,#8]            ;992
000bfa  f9b1b000          LDRSH    r11,[r1,#0]           ;997
000bfe  f8dfc180          LDR      r12,|L1.3456|
000c02  f9b2a000          LDRSH    r10,[r2,#0]           ;992
000c06  f9b31000          LDRSH    r1,[r3,#0]
000c0a  4d60              LDR      r5,|L1.3468|
;;;1003   		temp_SL/=6000L;
;;;1004   		net_Uc=(signed short)temp_SL;
000c0c  4c60              LDR      r4,|L1.3472|
;;;1005   
;;;1006   		net_F3=((signed short)bps[11]._buff[6])+(((signed short)bps[11]._buff[7])<<8);
;;;1007   
;;;1008   		net_U=net_Ua;
;;;1009   		if(net_Ub<net_U)net_U=net_Ub;
;;;1010   		if(net_Uc<net_U)net_U=net_Uc;
;;;1011   		}
;;;1012   	  else if(AUSW_MAIN==22033)
;;;1013   	{
;;;1014   	temp_SL=(signed long)net_buff_;
000c0e  4f4e              LDR      r7,|L1.3400|
000c10  f2456611          MOV      r6,#0x5611            ;1012
;;;1015   	temp_SL*=KunetA;
;;;1016   	temp_SL/=4000L;
;;;1017   	net_Ua=(signed short)temp_SL;
;;;1018   
;;;1019   	temp_SL=(signed long)adc_buff_[3];
;;;1020   	temp_SL*=KunetB;
;;;1021   	temp_SL/=6000L;
;;;1022   	net_Ub=(signed short)temp_SL;
;;;1023   
;;;1024   	temp_SL=(signed long)adc_buff_[10];
;;;1025   	temp_SL*=KunetC;
;;;1026   	temp_SL/=6000L;
;;;1027   	net_Uc=(signed short)temp_SL;
;;;1028   
;;;1029   	net_U=net_Ua;
;;;1030   	if(net_Ub<net_U)net_U=net_Ub;
;;;1031   	if(net_Uc<net_U)net_U=net_Uc;
;;;1032   	}
;;;1033   else if((AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043)||(AUSW_MAIN==22018))
;;;1034   	{
;;;1035   	temp_SL=(signed long)net_buff_;
;;;1036   	temp_SL*=KunetA;
;;;1037   	temp_SL/=40000L;
;;;1038   	net_Ua=(signed short)temp_SL;
;;;1039   
;;;1040   	temp_SL=(signed long)adc_buff_[3];
;;;1041   	temp_SL*=KunetB;
;;;1042   	temp_SL/=6000L;
;;;1043   	net_Ub=(signed short)temp_SL;
;;;1044   
;;;1045   	temp_SL=(signed long)adc_buff_[10];
;;;1046   	temp_SL*=KunetC;
;;;1047   	temp_SL/=6000L;
;;;1048   	net_Uc=(signed short)temp_SL;
;;;1049   
;;;1050   	net_U=net_Ua;
;;;1051   	if(net_Ub<net_U)net_U=net_Ub;
;;;1052   	if(net_Uc<net_U)net_U=net_Uc;
;;;1053   	}
;;;1054   else	if((AUSW_MAIN==22010)||(AUSW_MAIN==22011) )
;;;1055   	{
;;;1056   	temp_SL=(signed long)net_buff_;
;;;1057   	temp_SL*=Kunet;
;;;1058   	temp_SL/=35000L;
;;;1059   	net_U=(signed short)temp_SL;
;;;1060   	
;;;1061   	}
;;;1062   else
;;;1063   	{
;;;1064   	temp_SL=(signed long)net_buff_;
;;;1065   	temp_SL*=Kunet;
;;;1066   	#ifdef _ACDC_
;;;1067   	temp_SL/=500L;
000c14  f44f78fa          MOV      r8,#0x1f4
000c18  9101              STR      r1,[sp,#4]            ;985
000c1a  2807              CMP      r0,#7                 ;985
000c1c  d036              BEQ      |L1.3212|
000c1e  4639              MOV      r1,r7                 ;1014
000c20  4b5d              LDR      r3,|L1.3480|
000c22  8d0a              LDRH     r2,[r1,#0x28]         ;1014
000c24  4955              LDR      r1,|L1.3452|
000c26  f8df915c          LDR      r9,|L1.3460|
000c2a  f2417a70          MOV      r10,#0x1770           ;993
000c2e  f9b11000          LDRSH    r1,[r1,#0]            ;992
000c32  f9b99000          LDRSH    r9,[r9,#0]            ;997
000c36  434a              MULS     r2,r1,r2              ;1015
000c38  f9b31006          LDRSH    r1,[r3,#6]            ;1019
000c3c  f9b33014          LDRSH    r3,[r3,#0x14]         ;1024
000c40  fb01f109          MUL      r1,r1,r9              ;1020
000c44  f8df9140          LDR      r9,|L1.3464|
000c48  fb91f1fa          SDIV     r1,r1,r10             ;1021
000c4c  f9b99000          LDRSH    r9,[r9,#0]            ;1002
000c50  4850              LDR      r0,|L1.3476|
000c52  fb03f309          MUL      r3,r3,r9              ;1025
000c56  fb93f3fa          SDIV     r3,r3,r10             ;1026
000c5a  8800              LDRH     r0,[r0,#0]            ;1012  ; AUSW_MAIN
000c5c  b209              SXTH     r1,r1                 ;1022
000c5e  b21b              SXTH     r3,r3                 ;1027
000c60  42b0              CMP      r0,r6                 ;1012
000c62  d154              BNE      |L1.3342|
000c64  f44f607a          MOV      r0,#0xfa0             ;1016
000c68  fb92f0f0          SDIV     r0,r2,r0              ;1016
000c6c  b200              SXTH     r0,r0                 ;1017
000c6e  f8ac0000          STRH     r0,[r12,#0]           ;1017
000c72  8029              STRH     r1,[r5,#0]            ;1022
000c74  8023              STRH     r3,[r4,#0]            ;1027
000c76  4a3b              LDR      r2,|L1.3428|
000c78  8010              STRH     r0,[r2,#0]            ;1029
000c7a  4281              CMP      r1,r0                 ;1030
000c7c  da00              BGE      |L1.3200|
000c7e  8011              STRH     r1,[r2,#0]            ;1030
                  |L1.3200|
000c80  f9b20000          LDRSH    r0,[r2,#0]            ;1031  ; net_U
000c84  4283              CMP      r3,r0                 ;1031
000c86  da00              BGE      |L1.3210|
000c88  8013              STRH     r3,[r2,#0]            ;1031
                  |L1.3210|
000c8a  e0b4              B        |L1.3574|
                  |L1.3212|
000c8c  4843              LDR      r0,|L1.3484|
000c8e  4b2e              LDR      r3,|L1.3400|
000c90  7801              LDRB     r1,[r0,#0]            ;987  ; bps
000c92  7842              LDRB     r2,[r0,#1]            ;987  ; bps
000c94  3390              ADDS     r3,r3,#0x90           ;987
000c96  eb012102          ADD      r1,r1,r2,LSL #8       ;987
000c9a  fa1ff981          UXTH     r9,r1                 ;987
000c9e  f8a39000          STRH     r9,[r3,#0]            ;987
000ca2  7881              LDRB     r1,[r0,#2]            ;988  ; bps
000ca4  78c2              LDRB     r2,[r0,#3]            ;988  ; bps
000ca6  eb012102          ADD      r1,r1,r2,LSL #8       ;988
000caa  b28a              UXTH     r2,r1                 ;988
000cac  805a              STRH     r2,[r3,#2]            ;988
000cae  7901              LDRB     r1,[r0,#4]            ;989  ; bps
000cb0  f890e005          LDRB     lr,[r0,#5]            ;989  ; bps
000cb4  eb01210e          ADD      r1,r1,lr,LSL #8       ;989
000cb8  b289              UXTH     r1,r1                 ;989
000cba  8099              STRH     r1,[r3,#4]            ;989
000cbc  fb01f10a          MUL      r1,r1,r10             ;992
000cc0  f2417370          MOV      r3,#0x1770            ;993
000cc4  fb91f1f3          SDIV     r1,r1,r3              ;993
000cc8  fa0ffa81          SXTH     r10,r1                ;994
000ccc  f8aca000          STRH     r10,[r12,#0]          ;994
000cd0  fb02f20b          MUL      r2,r2,r11             ;997
000cd4  fb92f1f3          SDIV     r1,r2,r3              ;998
000cd8  b209              SXTH     r1,r1                 ;999
000cda  8029              STRH     r1,[r5,#0]            ;999
000cdc  9a01              LDR      r2,[sp,#4]            ;1002
000cde  fb09f902          MUL      r9,r9,r2              ;1002
000ce2  fb99f2f3          SDIV     r2,r9,r3              ;1003
000ce6  b212              SXTH     r2,r2                 ;1004
000ce8  8022              STRH     r2,[r4,#0]            ;1004
000cea  7983              LDRB     r3,[r0,#6]            ;1006  ; bps
000cec  79c0              LDRB     r0,[r0,#7]            ;1006  ; bps
000cee  eb032000          ADD      r0,r3,r0,LSL #8       ;1006
000cf2  4b2b              LDR      r3,|L1.3488|
000cf4  8018              STRH     r0,[r3,#0]            ;1006
000cf6  481b              LDR      r0,|L1.3428|
000cf8  f8a0a000          STRH     r10,[r0,#0]           ;1008
000cfc  4551              CMP      r1,r10                ;1009
000cfe  da00              BGE      |L1.3330|
000d00  8001              STRH     r1,[r0,#0]            ;1009
                  |L1.3330|
000d02  f9b01000          LDRSH    r1,[r0,#0]            ;1010  ; net_U
000d06  428a              CMP      r2,r1                 ;1010
000d08  da75              BGE      |L1.3574|
000d0a  8002              STRH     r2,[r0,#0]            ;1010
000d0c  e073              B        |L1.3574|
                  |L1.3342|
000d0e  f5a049ac          SUB      r9,r0,#0x5600         ;1033
000d12  f1b9092f          SUBS     r9,r9,#0x2f           ;1033
000d16  d008              BEQ      |L1.3370|
000d18  f1190928          ADDS     r9,r9,#0x28           ;1033
000d1c  d005              BEQ      |L1.3370|
000d1e  f1b90914          SUBS     r9,r9,#0x14           ;1033
000d22  d002              BEQ      |L1.3370|
000d24  f1190919          ADDS     r9,r9,#0x19           ;1033
000d28  d14e              BNE      |L1.3528|
                  |L1.3370|
000d2a  f6494040          MOV      r0,#0x9c40            ;1037
000d2e  e039              B        |L1.3492|
                  |L1.3376|
                          DCD      KB_ALGORITM
                  |L1.3380|
                          DCD      mess_data
                  |L1.3384|
                          DCD      USIGN
                  |L1.3388|
                          DCD      load_U
                  |L1.3392|
                          DCD      load_I
                  |L1.3396|
                          DCD      bat_ips
                  |L1.3400|
                          DCD      ||area_number.18||
                  |L1.3404|
                          DCD      Kibat0
                  |L1.3408|
                          DCD      ad7705_buff_
                  |L1.3412|
                          DCD      bat
                  |L1.3416|
                          DCD      IZMAX
                  |L1.3420|
                          DCD      ADR_KI0BAT
                  |L1.3424|
                          DCD      bat_u_old_cnt
                  |L1.3428|
                          DCD      net_U
                  |L1.3432|
                          DCD      UMN
                  |L1.3436|
                          DCD      unet_drv_cnt
                  |L1.3440|
                          DCD      net_Ustore
                  |L1.3444|
                          DCD      main_1Hz_cnt
                  |L1.3448|
                          DCD      bps
                  |L1.3452|
                          DCD      KunetA
                  |L1.3456|
                          DCD      net_Ua
                  |L1.3460|
                          DCD      KunetB
                  |L1.3464|
                          DCD      KunetC
                  |L1.3468|
                          DCD      net_Ub
                  |L1.3472|
                          DCD      net_Uc
                  |L1.3476|
                          DCD      AUSW_MAIN
                  |L1.3480|
                          DCD      ||.bss||+0x400
                  |L1.3484|
                          DCD      bps+0x3fa
                  |L1.3488|
                          DCD      net_F3
                  |L1.3492|
000da4  fb92f0f0          SDIV     r0,r2,r0              ;1037
000da8  b200              SXTH     r0,r0                 ;1038
000daa  f8ac0000          STRH     r0,[r12,#0]           ;1038
000dae  8029              STRH     r1,[r5,#0]            ;1043
000db0  8023              STRH     r3,[r4,#0]            ;1048
000db2  4aff              LDR      r2,|L1.4528|
000db4  8010              STRH     r0,[r2,#0]            ;1050
000db6  4281              CMP      r1,r0                 ;1051
000db8  da00              BGE      |L1.3516|
000dba  8011              STRH     r1,[r2,#0]            ;1051
                  |L1.3516|
000dbc  f9b20000          LDRSH    r0,[r2,#0]            ;1052  ; net_U
000dc0  4283              CMP      r3,r0                 ;1052
000dc2  da18              BGE      |L1.3574|
000dc4  8013              STRH     r3,[r2,#0]            ;1052
000dc6  e016              B        |L1.3574|
                  |L1.3528|
000dc8  49fa              LDR      r1,|L1.4532|
000dca  f5a043aa          SUB      r3,r0,#0x5500         ;1054
000dce  f9b12000          LDRSH    r2,[r1,#0]            ;1057
000dd2  49f9              LDR      r1,|L1.4536|
000dd4  8d09              LDRH     r1,[r1,#0x28]         ;1014
000dd6  4351              MULS     r1,r2,r1              ;1057
000dd8  3bfa              SUBS     r3,r3,#0xfa           ;1054
000dda  d001              BEQ      |L1.3552|
000ddc  1e5a              SUBS     r2,r3,#1              ;1054
000dde  d106              BNE      |L1.3566|
                  |L1.3552|
000de0  f64800b8          MOV      r0,#0x88b8            ;1058
000de4  fb91f0f0          SDIV     r0,r1,r0              ;1058
000de8  49f1              LDR      r1,|L1.4528|
000dea  8008              STRH     r0,[r1,#0]            ;1059
000dec  e003              B        |L1.3574|
                  |L1.3566|
000dee  fb91f0f8          SDIV     r0,r1,r8
;;;1068   	#else
;;;1069   	temp_SL/=5000L;
;;;1070   	#endif
;;;1071   	net_U=(signed short)temp_SL;
000df2  49ef              LDR      r1,|L1.4528|
000df4  8008              STRH     r0,[r1,#0]
                  |L1.3574|
;;;1072   	
;;;1073   	}
;;;1074   if(bps[11]._device!=dNET_METR) net_F3=net_F;
000df6  9802              LDR      r0,[sp,#8]
000df8  2807              CMP      r0,#7
000dfa  d003              BEQ      |L1.3588|
000dfc  48ef              LDR      r0,|L1.4540|
000dfe  8801              LDRH     r1,[r0,#0]  ; net_F
000e00  48ef              LDR      r0,|L1.4544|
000e02  8001              STRH     r1,[r0,#0]
                  |L1.3588|
;;;1075   #endif
;;;1076   
;;;1077   #ifdef UKU_TELECORE2015
;;;1078   // 
;;;1079   temp_SL=(signed long)net_buff_;
;;;1080   temp_SL*=Kunet;
;;;1081   temp_SL/=110000L;
;;;1082   net_U=(signed short)temp_SL;
;;;1083   #endif
;;;1084   
;;;1085   #ifdef UKU_TELECORE2017
;;;1086   // 
;;;1087   temp_SL=(signed long)net_buff_;
;;;1088   temp_SL*=Kunet;
;;;1089   temp_SL/=110000L;
;;;1090   net_U=(signed short)temp_SL;
;;;1091   #endif
;;;1092   
;;;1093   // 
;;;1094   temp_SL=(signed long)adc_buff_[0];
000e04  f8dfa3bc          LDR      r10,|L1.4548|
000e08  f9ba1000          LDRSH    r1,[r10,#0]  ; adc_buff_
;;;1095   temp_SL*=Kubat[0];
000e0c  4bee              LDR      r3,|L1.4552|
000e0e  f9b30000          LDRSH    r0,[r3,#0]  ; Kubat
000e12  4348              MULS     r0,r1,r0
;;;1096   temp_SL/=2000L;
000e14  f44f65fa          MOV      r5,#0x7d0
000e18  fb90f0f5          SDIV     r0,r0,r5
;;;1097   bat[0]._Ub=(signed short)temp_SL;
000e1c  4ceb              LDR      r4,|L1.4556|
000e1e  8060              STRH     r0,[r4,#2]
;;;1098   
;;;1099   #ifdef UKU_220
;;;1100   // 
;;;1101   temp_SL=(signed long)adc_buff_[0];
;;;1102   temp_SL*=Kubat[0];
;;;1103   temp_SL/=400L;
;;;1104   bat[0]._Ub=(signed short)temp_SL;
;;;1105   #endif
;;;1106   
;;;1107   #ifdef UKU_220_V2
;;;1108   // 
;;;1109   temp_SL=(signed long)adc_buff_[0];
;;;1110   temp_SL*=Kubat[0];
;;;1111   temp_SL/=400L;
;;;1112   bat[0]._Ub=(signed short)temp_SL;
;;;1113   #endif
;;;1114   
;;;1115   temp_SL=(signed long)adc_buff_[4];
000e20  f9ba1008          LDRSH    r1,[r10,#8]  ; adc_buff_
;;;1116   temp_SL*=Kubatm[0];
000e24  4aea              LDR      r2,|L1.4560|
000e26  f9b20000          LDRSH    r0,[r2,#0]  ; Kubatm
000e2a  4348              MULS     r0,r1,r0
;;;1117   temp_SL/=700L;
000e2c  f44f712f          MOV      r1,#0x2bc
000e30  fb90f0f1          SDIV     r0,r0,r1
;;;1118   bat[0]._Ubm=(signed short)temp_SL;
000e34  80a0              STRH     r0,[r4,#4]
;;;1119   
;;;1120   #ifdef UKU_KONTUR
;;;1121   temp_SL=(signed long)adc_buff_[4];
;;;1122   temp_SL*=Kubatm[0];
;;;1123   temp_SL/=2000L;
;;;1124   bat[0]._Ubm=(signed short)temp_SL;
;;;1125   #endif
;;;1126   
;;;1127   temp_SL=(signed long)adc_buff_[12];
000e36  f9bac018          LDRSH    r12,[r10,#0x18]  ; adc_buff_
;;;1128   temp_SL*=Kubat[1];
000e3a  f9b30002          LDRSH    r0,[r3,#2]  ; Kubat
000e3e  fb00f00c          MUL      r0,r0,r12
;;;1129   temp_SL/=2000L;
000e42  fb90f0f5          SDIV     r0,r0,r5
;;;1130   bat[1]._Ub=(signed short)temp_SL;
000e46  f8a4004e          STRH     r0,[r4,#0x4e]
;;;1131   
;;;1132   #ifdef UKU_220
;;;1133   temp_SL=(signed long)adc_buff_[12];
;;;1134   temp_SL*=Kubat[1];
;;;1135   temp_SL/=400L;
;;;1136   bat[1]._Ub=(signed short)temp_SL;
;;;1137   #endif
;;;1138   
;;;1139   #ifdef UKU_220_V2
;;;1140   temp_SL=(signed long)adc_buff_[12];
;;;1141   temp_SL*=Kubat[1];
;;;1142   temp_SL/=400L;
;;;1143   bat[1]._Ub=(signed short)temp_SL;
;;;1144   #endif
;;;1145   
;;;1146   temp_SL=(signed long)adc_buff_[1];
000e4a  f9ba3002          LDRSH    r3,[r10,#2]  ; adc_buff_
;;;1147   temp_SL*=Kubatm[1];
000e4e  f9b20002          LDRSH    r0,[r2,#2]  ; Kubatm
000e52  4358              MULS     r0,r3,r0
;;;1148   temp_SL/=700L;
000e54  fb90f0f1          SDIV     r0,r0,r1
;;;1149   bat[1]._Ubm=(signed short)temp_SL;
000e58  f8a40050          STRH     r0,[r4,#0x50]
;;;1150   #ifdef UKU_KONTUR
;;;1151   temp_SL=(signed long)adc_buff_[1];
;;;1152   temp_SL*=Kubatm[1];
;;;1153   temp_SL/=2000L;
;;;1154   bat[1]._Ubm=(signed short)temp_SL;
;;;1155   #endif
;;;1156   
;;;1157   #ifdef UKU_TELECORE2015
;;;1158   temp_SL=(signed long)adc_buff_[2];
;;;1159   temp_SL*=Kubat[0];
;;;1160   temp_SL/=2000L;
;;;1161   bat[0]._Ub=(signed short)temp_SL;
;;;1162   #endif
;;;1163   
;;;1164   /*
;;;1165   // 
;;;1166   if(!mess_find_unvol(MESS2MATEMAT))
;;;1167   	{
;;;1168   	temp_SL=(signed long)ad7705_buff_[0];
;;;1169   	temp_SL-=(signed long)Kibat0[0];
;;;1170   	temp_SL*=(signed long)Kibat1[0];
;;;1171   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1172   	else temp_SL/=1000L;
;;;1173   	bat[0]._Ib=(signed short)temp_SL;
;;;1174   
;;;1175   	temp_SL=(signed long)ad7705_buff_[1];
;;;1176   	temp_SL-=(signed long)Kibat0[1];
;;;1177   	temp_SL*=(signed long)Kibat1[1];
;;;1178   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1179   	else temp_SL/=1000L;
;;;1180   	bat[1]._Ib=(signed short)temp_SL;
;;;1181   	}
;;;1182   */
;;;1183   
;;;1184   
;;;1185   // 
;;;1186   if(!mess_find_unvol(MESS2MATEMAT))
000e5c  20dc              MOVS     r0,#0xdc
000e5e  f7fffffe          BL       mess_find_unvol
;;;1187   	{
;;;1188   	temp_SL=(signed long)ad7705_buff_[0];
;;;1189   	temp_SL-=(signed long)Kibat0[0];
;;;1190   	temp_SL*=(signed long)Kibat1[0];
;;;1191   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1192   	else if((AUSW_MAIN==22010)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033))temp_SL/=2000L;
000e62  f2456913          MOV      r9,#0x5613
000e66  bbf0              CBNZ     r0,|L1.3814|
000e68  f8dfc368          LDR      r12,|L1.4564|
000e6c  f8bc0000          LDRH     r0,[r12,#0]           ;1188  ; ad7705_buff_
000e70  f8dfb364          LDR      r11,|L1.4568|
000e74  f8bb1000          LDRH     r1,[r11,#0]           ;1189  ; Kibat0
000e78  1a40              SUBS     r0,r0,r1              ;1189
000e7a  4ad8              LDR      r2,|L1.4572|
000e7c  f9b21000          LDRSH    r1,[r2,#0]            ;1190  ; Kibat1
000e80  4341              MULS     r1,r0,r1              ;1190
000e82  48d7              LDR      r0,|L1.4576|
000e84  f6456338          MOV      r3,#0x5e38            ;1191
000e88  8800              LDRH     r0,[r0,#0]            ;1191  ; AUSW_MAIN
000e8a  4298              CMP      r0,r3                 ;1191
000e8c  d004              BEQ      |L1.3736|
000e8e  f5a04ebc          SUB      lr,r0,#0x5e00         ;1191
000e92  f1be0e92          SUBS     lr,lr,#0x92           ;1191
000e96  d104              BNE      |L1.3746|
                  |L1.3736|
000e98  f44f7e96          MOV      lr,#0x12c             ;1191
000e9c  fb91f1fe          SDIV     r1,r1,lr              ;1191
000ea0  e00f              B        |L1.3778|
                  |L1.3746|
000ea2  f5a04ea8          SUB      lr,r0,#0x5400
000ea6  f5be7efd          SUBS     lr,lr,#0x1fa
000eaa  d003              BEQ      |L1.3764|
000eac  4548              CMP      r0,r9
000eae  d001              BEQ      |L1.3764|
000eb0  42b0              CMP      r0,r6
000eb2  d102              BNE      |L1.3770|
                  |L1.3764|
000eb4  fb91f1f5          SDIV     r1,r1,r5
000eb8  e003              B        |L1.3778|
                  |L1.3770|
;;;1193   	else temp_SL/=1000L;
000eba  f44f7e7a          MOV      lr,#0x3e8
000ebe  fb91f1fe          SDIV     r1,r1,lr
                  |L1.3778|
;;;1194   	#ifdef UKU_TELECORE2015
;;;1195   	temp_SL/=2L;
;;;1196   	//temp_SL=-temp_SL;
;;;1197   	#endif
;;;1198   	//#ifdef UKU_TELECORE2017
;;;1199   	//temp_SL/=-2L;
;;;1200   	//temp_SL=-temp_SL;
;;;1201   	//#endif
;;;1202   	bat[0]._Ib=(signed short)temp_SL;
000ec2  8121              STRH     r1,[r4,#8]
;;;1203   
;;;1204   	temp_SL=(signed long)ad7705_buff_[1];
000ec4  f8bc1002          LDRH     r1,[r12,#2]  ; ad7705_buff_
;;;1205   	temp_SL-=(signed long)Kibat0[1];
000ec8  f8bbc002          LDRH     r12,[r11,#2]  ; Kibat0
000ecc  eba10c0c          SUB      r12,r1,r12
;;;1206   	temp_SL*=(signed long)Kibat1[1];
000ed0  f9b21002          LDRSH    r1,[r2,#2]  ; Kibat1
000ed4  fb01f10c          MUL      r1,r1,r12
;;;1207   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
000ed8  4298              CMP      r0,r3
000eda  d003              BEQ      |L1.3812|
000edc  f5a042bc          SUB      r2,r0,#0x5e00
000ee0  3a92              SUBS     r2,r2,#0x92
000ee2  d106              BNE      |L1.3826|
                  |L1.3812|
000ee4  e000              B        |L1.3816|
                  |L1.3814|
000ee6  e015              B        |L1.3860|
                  |L1.3816|
000ee8  f44f7096          MOV      r0,#0x12c
000eec  fb91f0f0          SDIV     r0,r1,r0
000ef0  e00e              B        |L1.3856|
                  |L1.3826|
;;;1208   	else if((AUSW_MAIN==22010)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033))temp_SL/=2000L;
000ef2  f5a042aa          SUB      r2,r0,#0x5500
000ef6  3afa              SUBS     r2,r2,#0xfa
000ef8  d003              BEQ      |L1.3842|
000efa  4548              CMP      r0,r9
000efc  d001              BEQ      |L1.3842|
000efe  42b0              CMP      r0,r6
000f00  d102              BNE      |L1.3848|
                  |L1.3842|
000f02  fb91f0f5          SDIV     r0,r1,r5
000f06  e003              B        |L1.3856|
                  |L1.3848|
;;;1209   	else temp_SL/=1000L;
000f08  f44f707a          MOV      r0,#0x3e8
000f0c  fb91f0f0          SDIV     r0,r1,r0
                  |L1.3856|
;;;1210   	bat[1]._Ib=(signed short)temp_SL;
000f10  f8a40054          STRH     r0,[r4,#0x54]
                  |L1.3860|
;;;1211   	}
;;;1212   
;;;1213   
;;;1214   
;;;1215   
;;;1216   
;;;1217   // 
;;;1218   
;;;1219   #ifdef UKU_KONTUR
;;;1220   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))bat[0]._nd=0;
;;;1221   else bat[0]._nd=1;
;;;1222   temp_SL=(signed long)adc_buff_[6];
;;;1223   temp_SL*=Ktbat[0];
;;;1224   temp_SL/=20000L;
;;;1225   temp_SL-=273L;
;;;1226   bat[0]._Tb=(signed short)temp_SL;
;;;1227   #else
;;;1228   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))bat[0]._nd=0;
000f14  f9ba000c          LDRSH    r0,[r10,#0xc]  ; adc_buff_
000f18  46d6              MOV      lr,r10
000f1a  4684              MOV      r12,r0
000f1c  f2a03021          SUB      r0,r0,#0x321
000f20  f64031b7          MOV      r1,#0xbb7
000f24  2300              MOVS     r3,#0
;;;1229   else bat[0]._nd=1;
000f26  f04f0a01          MOV      r10,#1
000f2a  9000              STR      r0,[sp,#0]            ;1228
000f2c  4288              CMP      r0,r1                 ;1228
000f2e  d201              BCS      |L1.3892|
000f30  7323              STRB     r3,[r4,#0xc]          ;1228
000f32  e001              B        |L1.3896|
                  |L1.3892|
000f34  f884a00c          STRB     r10,[r4,#0xc]
                  |L1.3896|
;;;1230   temp_SL=(signed long)adc_buff_[6];
;;;1231   temp_SL*=Ktbat[0];
000f38  48aa              LDR      r0,|L1.4580|
000f3a  f9b02000          LDRSH    r2,[r0,#0]  ; Ktbat
000f3e  fb02f20c          MUL      r2,r2,r12
;;;1232   temp_SL/=20000L;
000f42  f6446020          MOV      r0,#0x4e20
000f46  fb92f2f0          SDIV     r2,r2,r0
;;;1233   temp_SL-=273L;
000f4a  f2a21211          SUB      r2,r2,#0x111
;;;1234   bat[0]._Tb=(signed short)temp_SL;
000f4e  8162              STRH     r2,[r4,#0xa]
;;;1235   #endif
;;;1236   
;;;1237   #ifdef UKU_KONTUR
;;;1238   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))bat[1]._nd=0;
;;;1239   else bat[1]._nd=1;
;;;1240   temp_SL=(signed long)adc_buff_[7];
;;;1241   temp_SL*=Ktbat[1];
;;;1242   temp_SL/=20000L;
;;;1243   temp_SL-=273L;
;;;1244   bat[1]._Tb=(signed short)temp_SL;
;;;1245   #else
;;;1246   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))bat[1]._nd=0;
000f50  f9be200e          LDRSH    r2,[lr,#0xe]  ; adc_buff_
000f54  f64031b7          MOV      r1,#0xbb7
000f58  f2a23b21          SUB      r11,r2,#0x321
000f5c  458b              CMP      r11,r1
000f5e  d202              BCS      |L1.3942|
000f60  f8843058          STRB     r3,[r4,#0x58]
000f64  e001              B        |L1.3946|
                  |L1.3942|
;;;1247   else bat[1]._nd=1;
000f66  f884a058          STRB     r10,[r4,#0x58]
                  |L1.3946|
;;;1248   temp_SL=(signed long)adc_buff_[7];
;;;1249   temp_SL*=Ktbat[1];
000f6a  499e              LDR      r1,|L1.4580|
000f6c  f9b11002          LDRSH    r1,[r1,#2]  ; Ktbat
000f70  4351              MULS     r1,r2,r1
;;;1250   temp_SL/=20000L;
000f72  f6446020          MOV      r0,#0x4e20
000f76  fb91f0f0          SDIV     r0,r1,r0
;;;1251   temp_SL-=273L;
000f7a  f2a01011          SUB      r0,r0,#0x111
;;;1252   bat[1]._Tb=(signed short)temp_SL;
000f7e  4993              LDR      r1,|L1.4556|
000f80  f8a10056          STRH     r0,[r1,#0x56]
;;;1253   #endif
;;;1254   
;;;1255   #ifdef UKU_6U
;;;1256   
;;;1257   if(NUMMAKB==2)
;;;1258   	{
;;;1259   	if(makb[0]._cnt<5)
;;;1260   		{
;;;1261   		if(makb[0]._T_nd[0]==0)
;;;1262   			{
;;;1263   			bat[0]._Tb=makb[0]._T[0];
;;;1264   			bat[0]._nd=0;
;;;1265   			}
;;;1266   		}
;;;1267   
;;;1268   	if(makb[1]._cnt<5)
;;;1269   		{
;;;1270   		if(makb[1]._T_nd[0]==0)
;;;1271   			{
;;;1272   			bat[1]._Tb=makb[1]._T[0];
;;;1273   			bat[1]._nd=0;
;;;1274   			}
;;;1275   		}
;;;1276   
;;;1277   	}
;;;1278   else if(NUMMAKB==4)
;;;1279   	{
;;;1280   	signed short temp_t;
;;;1281   	temp_t=-20;
;;;1282   	if(makb[0]._cnt<5)
;;;1283   		{
;;;1284   		if(makb[0]._T_nd[0]==0)
;;;1285   			{
;;;1286   			temp_t=makb[0]._T[0];
;;;1287   			bat[0]._nd=0;
;;;1288   			}
;;;1289   		}
;;;1290   	if(makb[1]._cnt<5)
;;;1291   		{
;;;1292   		if(makb[1]._T_nd[0]==0)
;;;1293   			{
;;;1294   			if(temp_t<makb[1]._T[0])
;;;1295   				{
;;;1296   				bat[0]._nd=0;
;;;1297   				temp_t=makb[1]._T[0];
;;;1298   				}
;;;1299   			}
;;;1300   		}
;;;1301   	if(temp_t!=-20)bat[0]._Tb = temp_t;
;;;1302   
;;;1303    	temp_t=-20;
;;;1304   	if(makb[2]._cnt<5)
;;;1305   		{
;;;1306   		if(makb[2]._T_nd[0]==0)
;;;1307   			{
;;;1308   			temp_t=makb[2]._T[0];
;;;1309   			bat[1]._nd=0;
;;;1310   			}
;;;1311   		}
;;;1312   	if(makb[3]._cnt<5)
;;;1313   		{
;;;1314   		if(makb[3]._T_nd[0]==0)
;;;1315   			{
;;;1316   			if(temp_t<makb[3]._T[0])
;;;1317   				{
;;;1318   				bat[1]._nd=0;
;;;1319   				temp_t=makb[3]._T[0];
;;;1320   				}
;;;1321   			}
;;;1322   		}
;;;1323   	if(temp_t!=-20)bat[1]._Tb = temp_t;
;;;1324   	}
;;;1325   
;;;1326   #endif
;;;1327   
;;;1328   
;;;1329   // 
;;;1330   temp_SL=(signed long)adc_buff_[2];
000f84  f9be1004          LDRSH    r1,[lr,#4]  ; adc_buff_
;;;1331   temp_SL*=Kuload;
000f88  4897              LDR      r0,|L1.4584|
000f8a  f9b00000          LDRSH    r0,[r0,#0]  ; Kuload
000f8e  4348              MULS     r0,r1,r0
;;;1332   temp_SL/=2000L;
000f90  f44f62fa          MOV      r2,#0x7d0
000f94  fb90f0f2          SDIV     r0,r0,r2
;;;1333   load_U=(signed short)temp_SL;
000f98  4c94              LDR      r4,|L1.4588|
000f9a  8020              STRH     r0,[r4,#0]
;;;1334   
;;;1335   #ifdef UKU_220 
;;;1336   // 
;;;1337   temp_SL=(signed long)adc_buff_[2];
;;;1338   temp_SL*=Kuload;
;;;1339   temp_SL/=350L;
;;;1340   load_U=(signed short)temp_SL;
;;;1341   #endif
;;;1342   
;;;1343   #ifdef UKU_220_V2 
;;;1344   // 
;;;1345   temp_SL=(signed long)adc_buff_[2];
;;;1346   temp_SL*=Kuload;
;;;1347   temp_SL/=350L;
;;;1348   load_U=(signed short)temp_SL;
;;;1349   #endif
;;;1350   
;;;1351   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1352   // 
;;;1353   temp_SL=(signed long)adc_buff_[1];
000f9c  f9be2002          LDRSH    r2,[lr,#2]  ; adc_buff_
;;;1354   temp_SL*=Kuout;
000fa0  4893              LDR      r0,|L1.4592|
000fa2  f9b00000          LDRSH    r0,[r0,#0]  ; Kuout
000fa6  4342              MULS     r2,r0,r2
;;;1355   if(AUSW_MAIN==22010)temp_SL/=400L;
000fa8  488d              LDR      r0,|L1.4576|
000faa  f24555fa          MOV      r5,#0x55fa
000fae  8800              LDRH     r0,[r0,#0]  ; AUSW_MAIN
000fb0  42a8              CMP      r0,r5
000fb2  d104              BNE      |L1.4030|
000fb4  f44f75c8          MOV      r5,#0x190
000fb8  fb92f2f5          SDIV     r2,r2,r5
000fbc  e001              B        |L1.4034|
                  |L1.4030|
;;;1356   else temp_SL/=500L;
000fbe  fb92f2f8          SDIV     r2,r2,r8
                  |L1.4034|
;;;1357   out_U=(signed short)temp_SL;
000fc2  fa0ffb82          SXTH     r11,r2
000fc6  4a8b              LDR      r2,|L1.4596|
000fc8  f8a2b000          STRH     r11,[r2,#0]
;;;1358   load_U=out_U;
000fcc  f8a4b000          STRH     r11,[r4,#0]
;;;1359   
;;;1360   // 
;;;1361   temp_SL=(signed long)adc_buff_[2];
;;;1362   temp_SL*=Kubps;
000fd0  4a89              LDR      r2,|L1.4600|
000fd2  f9b22000          LDRSH    r2,[r2,#0]  ; Kubps
000fd6  fb01f102          MUL      r1,r1,r2
;;;1363   if(AUSW_MAIN==22010)temp_SL/=400L;
000fda  d104              BNE      |L1.4070|
000fdc  f44f72c8          MOV      r2,#0x190
000fe0  fb91f1f2          SDIV     r1,r1,r2
000fe4  e001              B        |L1.4074|
                  |L1.4070|
;;;1364   else temp_SL/=500L;
000fe6  fb91f1f8          SDIV     r1,r1,r8
                  |L1.4074|
;;;1365   bps_U=(signed short)temp_SL;
000fea  4d84              LDR      r5,|L1.4604|
000fec  b209              SXTH     r1,r1
000fee  8029              STRH     r1,[r5,#0]
;;;1366   
;;;1367   if(bps_U<100)
000ff0  2964              CMP      r1,#0x64
000ff2  da16              BGE      |L1.4130|
;;;1368   	{
;;;1369   	char i;
;;;1370   	for(i=0;i<NUMIST;i++)
000ff4  2100              MOVS     r1,#0
000ff6  4a82              LDR      r2,|L1.4608|
000ff8  f8dfe208          LDR      lr,|L1.4612|
000ffc  f9b28000          LDRSH    r8,[r2,#0]
001000  e00d              B        |L1.4126|
                  |L1.4098|
;;;1371   		{
;;;1372   		if(bps[i]._Uin>bps_U)bps_U=bps[i]._Uin;
001002  ebc102c1          RSB      r2,r1,r1,LSL #3
001006  eb021201          ADD      r2,r2,r1,LSL #4
00100a  eb0e0282          ADD      r2,lr,r2,LSL #2
00100e  f9b54000          LDRSH    r4,[r5,#0]  ; bps_U
001012  6a12              LDR      r2,[r2,#0x20]
001014  42a2              CMP      r2,r4
001016  dd00              BLE      |L1.4122|
001018  802a              STRH     r2,[r5,#0]
                  |L1.4122|
00101a  1c49              ADDS     r1,r1,#1              ;1370
00101c  b2c9              UXTB     r1,r1                 ;1370
                  |L1.4126|
00101e  4541              CMP      r1,r8                 ;1370
001020  dbef              BLT      |L1.4098|
                  |L1.4130|
;;;1373   		}
;;;1374   	}
;;;1375   
;;;1376   //  
;;;1377   temp_SL=0;
001022  2500              MOVS     r5,#0
;;;1378   for (i=0;i<NUMIST;i++)
001024  2100              MOVS     r1,#0
001026  4a76              LDR      r2,|L1.4608|
001028  4c76              LDR      r4,|L1.4612|
00102a  f9b22000          LDRSH    r2,[r2,#0]            ;1370
00102e  e00a              B        |L1.4166|
                  |L1.4144|
;;;1379   	{
;;;1380   	temp_SL+=((signed long)bps[i]._Ii);
001030  ebc108c1          RSB      r8,r1,r1,LSL #3
001034  eb081801          ADD      r8,r8,r1,LSL #4
001038  eb040888          ADD      r8,r4,r8,LSL #2
00103c  f8d88024          LDR      r8,[r8,#0x24]
001040  4445              ADD      r5,r5,r8
001042  1c49              ADDS     r1,r1,#1              ;1378
001044  b2c9              UXTB     r1,r1                 ;1378
                  |L1.4166|
001046  4291              CMP      r1,r2                 ;1378
001048  dbf2              BLT      |L1.4144|
;;;1381   	}
;;;1382   bps_I=(signed short)temp_SL;
00104a  496f              LDR      r1,|L1.4616|
00104c  800d              STRH     r5,[r1,#0]
;;;1383   
;;;1384   
;;;1385   #endif
;;;1386   
;;;1387   
;;;1388   #ifdef UKU_KONTUR
;;;1389   //   1(  )
;;;1390   if((adc_buff_[5]>800)&&(adc_buff_[5]<3800))ND_EXT[0]=0;
;;;1391   else ND_EXT[0]=1;
;;;1392   temp_SL=(signed long)adc_buff_[5];
;;;1393   temp_SL*=Ktext[0];
;;;1394   temp_SL/=20000L;
;;;1395   temp_SL-=273L;
;;;1396   t_ext[0]=(signed short)temp_SL;
;;;1397   #else 
;;;1398   //   1(  )
;;;1399   if((adc_buff_[5]>800)&&(adc_buff_[5]<3800))ND_EXT[0]=0;
00104e  495d              LDR      r1,|L1.4548|
001050  f8df81b8          LDR      r8,|L1.4620|
001054  f9b1500a          LDRSH    r5,[r1,#0xa]  ; adc_buff_
001058  f64031b7          MOV      r1,#0xbb7
00105c  f2a53e21          SUB      lr,r5,#0x321
001060  458e              CMP      lr,r1
001062  d202              BCS      |L1.4202|
001064  f8883000          STRB     r3,[r8,#0]
001068  e001              B        |L1.4206|
                  |L1.4202|
;;;1400   else ND_EXT[0]=1;
00106a  f888a000          STRB     r10,[r8,#0]
                  |L1.4206|
;;;1401   temp_SL=(signed long)adc_buff_[5];
;;;1402   temp_SL*=Ktext[0];
00106e  4968              LDR      r1,|L1.4624|
001070  f9b11000          LDRSH    r1,[r1,#0]  ; Ktext
001074  434d              MULS     r5,r1,r5
;;;1403   temp_SL/=20000L;
001076  f6446e20          MOV      lr,#0x4e20
00107a  fb95f5fe          SDIV     r5,r5,lr
;;;1404   temp_SL-=273L;
00107e  f2a51511          SUB      r5,r5,#0x111
;;;1405   t_ext[0]=(signed short)temp_SL;
001082  f8dfe190          LDR      lr,|L1.4628|
001086  f8ae5000          STRH     r5,[lr,#0]
;;;1406   /*
;;;1407   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;1408   else ND_EXT[1]=1;
;;;1409   temp_SL=(signed long)adc_buff_[6];
;;;1410   temp_SL*=Ktext[1];
;;;1411   temp_SL/=20000L;
;;;1412   temp_SL-=273L;
;;;1413   t_ext[1]=(signed short)temp_SL;	*/
;;;1414   #endif
;;;1415   
;;;1416   #ifdef UKU_220
;;;1417   
;;;1418   //   2(  )
;;;1419   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[1]=0;
;;;1420   else ND_EXT[1]=1;
;;;1421   temp_SL=(signed long)adc_buff_[3];
;;;1422   temp_SL*=Ktext[1];
;;;1423   temp_SL/=20000L;
;;;1424   temp_SL-=273L;
;;;1425   t_ext[1]=(signed short)temp_SL;
;;;1426   
;;;1427   //   3(  MSAN)
;;;1428   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[2]=0;
;;;1429   else ND_EXT[2]=1;
;;;1430   temp_SL=(signed long)adc_buff_[10];
;;;1431   temp_SL*=Ktext[2];
;;;1432   temp_SL/=20000L;
;;;1433   temp_SL-=273L;
;;;1434   t_ext[2]=(signed short)temp_SL;
;;;1435   
;;;1436   #else
;;;1437   
;;;1438   
;;;1439   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1440   
;;;1441   //   
;;;1442   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[0]=0;
00108a  9d00              LDR      r5,[sp,#0]
00108c  f6403eb7          MOV      lr,#0xbb7
001090  4575              CMP      r5,lr
001092  d202              BCS      |L1.4250|
001094  f8883000          STRB     r3,[r8,#0]
001098  e001              B        |L1.4254|
                  |L1.4250|
;;;1443   else ND_EXT[0]=1;
00109a  f888a000          STRB     r10,[r8,#0]
                  |L1.4254|
;;;1444   temp_SL=(signed long)adc_buff_[6];
;;;1445   temp_SL*=Ktext[0];
00109e  fb01f10c          MUL      r1,r1,r12
;;;1446   temp_SL/=20000L;
0010a2  f6446520          MOV      r5,#0x4e20
0010a6  fb91f1f5          SDIV     r1,r1,r5
;;;1447   temp_SL-=273L;
0010aa  f2a11111          SUB      r1,r1,#0x111
;;;1448   t_ext[0]=(signed short)temp_SL;
0010ae  4d59              LDR      r5,|L1.4628|
0010b0  8029              STRH     r1,[r5,#0]
;;;1449   
;;;1450   #else
;;;1451   
;;;1452   
;;;1453   
;;;1454   //   2(  )
;;;1455   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;1456   else ND_EXT[1]=1;
;;;1457   temp_SL=(signed long)adc_buff_[6];
;;;1458   temp_SL*=Ktext[1];
;;;1459   temp_SL/=20000L;
;;;1460   temp_SL-=273L;
;;;1461   t_ext[1]=(signed short)temp_SL;
;;;1462   
;;;1463   //   3(  MSAN)
;;;1464   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[2]=0;
;;;1465   else ND_EXT[2]=1;
;;;1466   temp_SL=(signed long)adc_buff_[3];
;;;1467   temp_SL*=Ktext[2];
;;;1468   temp_SL/=20000L;
;;;1469   temp_SL-=273L;
;;;1470   t_ext[2]=(signed short)temp_SL;
;;;1471   
;;;1472   #endif
;;;1473   #endif
;;;1474   
;;;1475   #ifdef UKU_220_V2
;;;1476   
;;;1477   //   2(  )
;;;1478   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[1]=0;
;;;1479   else ND_EXT[1]=1;
;;;1480   temp_SL=(signed long)adc_buff_[3];
;;;1481   temp_SL*=Ktext[1];
;;;1482   temp_SL/=20000L;
;;;1483   temp_SL-=273L;
;;;1484   t_ext[1]=(signed short)temp_SL;
;;;1485   
;;;1486   //   3(  MSAN)
;;;1487   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[2]=0;
;;;1488   else ND_EXT[2]=1;
;;;1489   temp_SL=(signed long)adc_buff_[10];
;;;1490   temp_SL*=Ktext[2];
;;;1491   temp_SL/=20000L;
;;;1492   temp_SL-=273L;
;;;1493   t_ext[2]=(signed short)temp_SL;
;;;1494   
;;;1495   #else
;;;1496   
;;;1497   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1498   // 
;;;1499   if(bps[8]._device==dIBAT_METR)
0010b2  f89412e0          LDRB     r1,[r4,#0x2e0]  ; bps
;;;1500   	{
;;;1501   	ibat_metr_buff_[0]=((signed long)bps[8]._buff[0])+(((signed long)bps[8]._buff[1])<<8);
;;;1502   	ibat_metr_buff_[1]=((signed long)bps[8]._buff[2])+(((signed long)bps[8]._buff[3])<<8);
;;;1503   	bIBAT_SMKLBR=((signed short)bps[8]._buff[4])+(((signed short)bps[8]._buff[5])<<8);
;;;1504   
;;;1505   	if(!bIBAT_SMKLBR)
;;;1506   		{
;;;1507   		signed long temp_SL;
;;;1508   		temp_SL=(signed long)ibat_metr_buff_[0];
;;;1509   		temp_SL-=(signed long)ibat_metr_buff_[1];
;;;1510   		temp_SL*=(signed long)Kibat1[0];
;;;1511   		if((AUSW_MAIN==22010)||(AUSW_MAIN==22011)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033)||(AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043))temp_SL/=2000L;
;;;1512   	
;;;1513   		Ib_ips_termokompensat =(signed short)temp_SL;
0010b6  f8dfc160          LDR      r12,|L1.4632|
0010ba  2909              CMP      r1,#9                 ;1499
0010bc  d13b              BNE      |L1.4406|
0010be  f89412e6          LDRB     r1,[r4,#0x2e6]        ;1501  ; bps
0010c2  f89452e7          LDRB     r5,[r4,#0x2e7]        ;1501  ; bps
0010c6  f8dfe154          LDR      lr,|L1.4636|
0010ca  eb012105          ADD      r1,r1,r5,LSL #8       ;1501
0010ce  f8ce1000          STR      r1,[lr,#0]            ;1501  ; ibat_metr_buff_
0010d2  f89452e8          LDRB     r5,[r4,#0x2e8]        ;1502  ; bps
0010d6  f894a2e9          LDRB     r10,[r4,#0x2e9]       ;1502  ; bps
0010da  eb05250a          ADD      r5,r5,r10,LSL #8      ;1502
0010de  f8ce5004          STR      r5,[lr,#4]            ;1502  ; ibat_metr_buff_
0010e2  f894a2ea          LDRB     r10,[r4,#0x2ea]       ;1503  ; bps
0010e6  f894e2eb          LDRB     lr,[r4,#0x2eb]        ;1503  ; bps
0010ea  eb0a2a0e          ADD      r10,r10,lr,LSL #8     ;1503
0010ee  f8dfe130          LDR      lr,|L1.4640|
0010f2  fa0ffa8a          SXTH     r10,r10               ;1503
0010f6  f8aea000          STRH     r10,[lr,#0]           ;1503
0010fa  f1ba0f00          CMP      r10,#0                ;1505
0010fe  d11a              BNE      |L1.4406|
001100  1b4d              SUBS     r5,r1,r5              ;1509
001102  4936              LDR      r1,|L1.4572|
001104  f9b11000          LDRSH    r1,[r1,#0]            ;1510  ; Kibat1
001108  4369              MULS     r1,r5,r1              ;1510
00110a  f5a045aa          SUB      r5,r0,#0x5500         ;1511
00110e  3dfa              SUBS     r5,r5,#0xfa           ;1511
001110  d00b              BEQ      |L1.4394|
001112  1e6d              SUBS     r5,r5,#1              ;1511
001114  d009              BEQ      |L1.4394|
001116  4548              CMP      r0,r9                 ;1511
001118  d007              BEQ      |L1.4394|
00111a  42b0              CMP      r0,r6                 ;1511
00111c  d005              BEQ      |L1.4394|
00111e  3d34              SUBS     r5,r5,#0x34           ;1511
001120  d003              BEQ      |L1.4394|
001122  3528              ADDS     r5,r5,#0x28           ;1511
001124  d001              BEQ      |L1.4394|
001126  3d14              SUBS     r5,r5,#0x14           ;1511
001128  d103              BNE      |L1.4402|
                  |L1.4394|
00112a  f44f65fa          MOV      r5,#0x7d0             ;1511
00112e  fb91f1f5          SDIV     r1,r1,r5              ;1511
                  |L1.4402|
001132  f8ac1000          STRH     r1,[r12,#0]
                  |L1.4406|
;;;1514   		}
;;;1515   	}
;;;1516   
;;;1517   bat[0]._Ub=load_U;
001136  4d25              LDR      r5,|L1.4556|
001138  f8a5b002          STRH     r11,[r5,#2]
;;;1518   if(AUSW_MAIN==22018) Ib_ips_termokompensat=bat[0]._Ib;
00113c  f5a041ac          SUB      r1,r0,#0x5600
001140  3902              SUBS     r1,#2
001142  d103              BNE      |L1.4428|
001144  8928              LDRH     r0,[r5,#8]  ; bat
001146  f8ac0000          STRH     r0,[r12,#0]
00114a  e002              B        |L1.4434|
                  |L1.4428|
;;;1519   else bat[0]._Ib=Ib_ips_termokompensat;
00114c  f8bc0000          LDRH     r0,[r12,#0]  ; Ib_ips_termokompensat
001150  8128              STRH     r0,[r5,#8]
                  |L1.4434|
;;;1520   
;;;1521   #endif
;;;1522   #endif
;;;1523   
;;;1524   
;;;1525   #ifdef UKU_TELECORE2015
;;;1526   
;;;1527   //   1
;;;1528   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))ND_EXT[0]=0;
;;;1529   else ND_EXT[0]=1;
;;;1530   temp_SL=(signed long)adc_buff_[7];
;;;1531   temp_SL*=Ktext[0];
;;;1532   temp_SL/=20000L;
;;;1533   temp_SL-=273L;
;;;1534   t_ext[0]=(signed short)temp_SL;
;;;1535   
;;;1536   
;;;1537   //   2
;;;1538   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;1539   else ND_EXT[1]=1;
;;;1540   temp_SL=(signed long)adc_buff_[6];
;;;1541   temp_SL*=Ktext[1];
;;;1542   temp_SL/=20000L;
;;;1543   temp_SL-=273L;
;;;1544   t_ext[1]=(signed short)temp_SL;
;;;1545   
;;;1546   #endif
;;;1547   
;;;1548   #ifdef UKU_TELECORE2017
;;;1549   
;;;1550   //   1
;;;1551   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))ND_EXT[0]=0;
;;;1552   else ND_EXT[0]=1;
;;;1553   temp_SL=(signed long)adc_buff_[7];
;;;1554   temp_SL*=Ktext[0];
;;;1555   temp_SL/=20000L;
;;;1556   temp_SL-=273L;
;;;1557   t_ext[0]=(signed short)temp_SL;
;;;1558   
;;;1559   
;;;1560   //   2
;;;1561   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;1562   else ND_EXT[1]=1;
;;;1563   temp_SL=(signed long)adc_buff_[6];
;;;1564   temp_SL*=Ktext[1];
;;;1565   temp_SL/=20000L;
;;;1566   temp_SL-=273L;
;;;1567   t_ext[1]=(signed short)temp_SL;
;;;1568   
;;;1569   #endif
;;;1570   
;;;1571   // 
;;;1572   temp_SL=(signed long)adc_buff_ext_[0];
001152  4e34              LDR      r6,|L1.4644|
001154  8831              LDRH     r1,[r6,#0]  ; adc_buff_ext_
;;;1573   temp_SL*=Kunet_ext[0];
001156  f8df90d0          LDR      r9,|L1.4648|
00115a  f9b90000          LDRSH    r0,[r9,#0]  ; Kunet_ext
00115e  4348              MULS     r0,r1,r0
;;;1574   temp_SL/=4000L;
001160  f44f6a7a          MOV      r10,#0xfa0
001164  fb90f0fa          SDIV     r0,r0,r10
;;;1575   Uvv[0]=(signed short)temp_SL;
001168  4930              LDR      r1,|L1.4652|
00116a  b280              UXTH     r0,r0
00116c  8008              STRH     r0,[r1,#0]
;;;1576   if(Uvv[0]<100) Uvv0=Uvv[0];
00116e  f8dfe0c0          LDR      lr,|L1.4656|
001172  2864              CMP      r0,#0x64
001174  d202              BCS      |L1.4476|
001176  f8ae0000          STRH     r0,[lr,#0]
00117a  e003              B        |L1.4484|
                  |L1.4476|
;;;1577   else Uvv0=net_U;
00117c  480c              LDR      r0,|L1.4528|
00117e  8800              LDRH     r0,[r0,#0]  ; net_U
001180  f8ae0000          STRH     r0,[lr,#0]
                  |L1.4484|
;;;1578   
;;;1579   // 
;;;1580   temp_SL=(signed long)adc_buff_ext_[1];
001184  8876              LDRH     r6,[r6,#2]  ; adc_buff_ext_
;;;1581   temp_SL*=Kunet_ext[1];
001186  f9b90002          LDRSH    r0,[r9,#2]  ; Kunet_ext
00118a  4370              MULS     r0,r6,r0
;;;1582   temp_SL/=4000L;
00118c  fb90f0fa          SDIV     r0,r0,r10
;;;1583   Uvv[1]=(signed short)temp_SL;
001190  8048              STRH     r0,[r1,#2]
;;;1584   
;;;1585   
;;;1586   //  
;;;1587   temp_SL=(signed long)eb2_data_short[0];
001192  4928              LDR      r1,|L1.4660|
001194  f9b10000          LDRSH    r0,[r1,#0]  ; eb2_data_short
;;;1588   temp_SL*=Kvv_eb2[0];
001198  4e27              LDR      r6,|L1.4664|
00119a  f9b69000          LDRSH    r9,[r6,#0]  ; Kvv_eb2
00119e  fb09f900          MUL      r9,r9,r0
;;;1589   temp_SL/=6000L;
0011a2  f2417070          MOV      r0,#0x1770
0011a6  fb99faf0          SDIV     r10,r9,r0
;;;1590   Uvv_eb2[0]=(signed short)temp_SL;
0011aa  f8df9090          LDR      r9,|L1.4668|
0011ae  e047              B        |L1.4672|
                  |L1.4528|
                          DCD      net_U
                  |L1.4532|
                          DCD      Kunet
                  |L1.4536|
                          DCD      ||area_number.18||
                  |L1.4540|
                          DCD      net_F
                  |L1.4544|
                          DCD      net_F3
                  |L1.4548|
                          DCD      ||.bss||+0x400
                  |L1.4552|
                          DCD      Kubat
                  |L1.4556|
                          DCD      bat
                  |L1.4560|
                          DCD      Kubatm
                  |L1.4564|
                          DCD      ad7705_buff_
                  |L1.4568|
                          DCD      Kibat0
                  |L1.4572|
                          DCD      Kibat1
                  |L1.4576|
                          DCD      AUSW_MAIN
                  |L1.4580|
                          DCD      Ktbat
                  |L1.4584|
                          DCD      Kuload
                  |L1.4588|
                          DCD      load_U
                  |L1.4592|
                          DCD      Kuout
                  |L1.4596|
                          DCD      out_U
                  |L1.4600|
                          DCD      Kubps
                  |L1.4604|
                          DCD      bps_U
                  |L1.4608|
                          DCD      NUMIST
                  |L1.4612|
                          DCD      bps
                  |L1.4616|
                          DCD      bps_I
                  |L1.4620|
                          DCD      ND_EXT
                  |L1.4624|
                          DCD      Ktext
                  |L1.4628|
                          DCD      t_ext
                  |L1.4632|
                          DCD      Ib_ips_termokompensat
                  |L1.4636|
                          DCD      ibat_metr_buff_
                  |L1.4640|
                          DCD      bIBAT_SMKLBR
                  |L1.4644|
                          DCD      adc_buff_ext_
                  |L1.4648|
                          DCD      Kunet_ext
                  |L1.4652|
                          DCD      Uvv
                  |L1.4656|
                          DCD      Uvv0
                  |L1.4660|
                          DCD      eb2_data_short
                  |L1.4664|
                          DCD      Kvv_eb2
                  |L1.4668|
                          DCD      Uvv_eb2
                  |L1.4672|
001240  f8a9a000          STRH     r10,[r9,#0]
;;;1591   
;;;1592   temp_SL=(signed long)eb2_data_short[1];
001244  f9b1e002          LDRSH    lr,[r1,#2]  ; eb2_data_short
;;;1593   temp_SL*=Kvv_eb2[1];
001248  f9b6a002          LDRSH    r10,[r6,#2]  ; Kvv_eb2
00124c  fb0afa0e          MUL      r10,r10,lr
;;;1594   temp_SL/=6000L;
001250  fb9afaf0          SDIV     r10,r10,r0
;;;1595   Uvv_eb2[1]=(signed short)temp_SL;
001254  f8a9a002          STRH     r10,[r9,#2]
;;;1596   
;;;1597   temp_SL=(signed long)eb2_data_short[2];
001258  f9b1a004          LDRSH    r10,[r1,#4]  ; eb2_data_short
;;;1598   temp_SL*=Kvv_eb2[2];
00125c  f9b66004          LDRSH    r6,[r6,#4]  ; Kvv_eb2
001260  fb06f60a          MUL      r6,r6,r10
;;;1599   temp_SL/=6000L;
001264  fb96f6f0          SDIV     r6,r6,r0
;;;1600   Uvv_eb2[2]=(signed short)temp_SL;
001268  f8a96004          STRH     r6,[r9,#4]
;;;1601   
;;;1602   //  
;;;1603   temp_SL=(signed long)eb2_data_short[3];
00126c  f9b1a006          LDRSH    r10,[r1,#6]  ; eb2_data_short
;;;1604   temp_SL*=Kpes_eb2[0];
001270  f8df9408          LDR      r9,|L1.5756|
001274  f9b96000          LDRSH    r6,[r9,#0]  ; Kpes_eb2
001278  fb06f60a          MUL      r6,r6,r10
;;;1605   temp_SL/=6000L;
00127c  fb96faf0          SDIV     r10,r6,r0
;;;1606   Upes_eb2[0]=(signed short)temp_SL;
001280  4eff              LDR      r6,|L1.5760|
001282  f8a6a000          STRH     r10,[r6,#0]
;;;1607   
;;;1608   temp_SL=(signed long)eb2_data_short[4];
001286  f9b1e008          LDRSH    lr,[r1,#8]  ; eb2_data_short
;;;1609   temp_SL*=Kpes_eb2[1];
00128a  f9b9a002          LDRSH    r10,[r9,#2]  ; Kpes_eb2
00128e  fb0afa0e          MUL      r10,r10,lr
;;;1610   temp_SL/=6000L;
001292  fb9afaf0          SDIV     r10,r10,r0
;;;1611   Upes_eb2[1]=(signed short)temp_SL;
001296  f8a6a002          STRH     r10,[r6,#2]
;;;1612   
;;;1613   temp_SL=(signed long)eb2_data_short[5];
00129a  f9b1a00a          LDRSH    r10,[r1,#0xa]  ; eb2_data_short
;;;1614   temp_SL*=Kpes_eb2[2];
00129e  f9b91004          LDRSH    r1,[r9,#4]  ; Kpes_eb2
0012a2  fb01f10a          MUL      r1,r1,r10
;;;1615   temp_SL/=6000L;
0012a6  fb91f0f0          SDIV     r0,r1,r0
;;;1616   Upes_eb2[2]=(signed short)temp_SL;
0012aa  80b0              STRH     r0,[r6,#4]
;;;1617   
;;;1618   //  
;;;1619   
;;;1620   ibt._T[0]=t_ext[1]+273;
0012ac  48f5              LDR      r0,|L1.5764|
0012ae  4ef6              LDR      r6,|L1.5768|
0012b0  8841              LDRH     r1,[r0,#2]  ; t_ext
0012b2  f2011111          ADD      r1,r1,#0x111
0012b6  fa0ff981          SXTH     r9,r1
0012ba  f8a69000          STRH     r9,[r6,#0]
;;;1621   ibt._T[1]=t_ext[2]+273;
0012be  8880              LDRH     r0,[r0,#4]  ; t_ext
0012c0  f2001011          ADD      r0,r0,#0x111
0012c4  fa0ffa80          SXTH     r10,r0
0012c8  f8a6a002          STRH     r10,[r6,#2]
;;;1622   
;;;1623   ibt._nd[0]=ND_EXT[1];
0012cc  f8981001          LDRB     r1,[r8,#1]  ; ND_EXT
0012d0  7231              STRB     r1,[r6,#8]
;;;1624   ibt._nd[1]=ND_EXT[2];
0012d2  f8980002          LDRB     r0,[r8,#2]  ; ND_EXT
0012d6  7270              STRB     r0,[r6,#9]
;;;1625   
;;;1626   #ifndef UKU_TELECORE2015
;;;1627   if((ibt._nd[0]==0) &&  (ibt._nd[1]==0))
;;;1628   	{
;;;1629   	t_box=((ibt._T[0]+ibt._T[1])/2)-273;
0012d8  4eec              LDR      r6,|L1.5772|
0012da  b901              CBNZ     r1,|L1.4830|
0012dc  b110              CBZ      r0,|L1.4836|
                  |L1.4830|
;;;1630   	}
;;;1631   else if((ibt._nd[0]==1) &&  (ibt._nd[1]==0))
0012de  2901              CMP      r1,#1
0012e0  d00a              BEQ      |L1.4856|
0012e2  e00a              B        |L1.4858|
                  |L1.4836|
0012e4  eb09000a          ADD      r0,r9,r10             ;1629
0012e8  eb0070d0          ADD      r0,r0,r0,LSR #31      ;1629
0012ec  f46f7188          MVN      r1,#0x110             ;1629
0012f0  eb010060          ADD      r0,r1,r0,ASR #1       ;1629
0012f4  8030              STRH     r0,[r6,#0]            ;1629
0012f6  e01d              B        |L1.4916|
                  |L1.4856|
0012f8  b108              CBZ      r0,|L1.4862|
                  |L1.4858|
;;;1632   	{
;;;1633   	t_box=ibt._T[1]-273;
;;;1634   	}
;;;1635   else if((ibt._nd[0]==0) &&  (ibt._nd[1]==1))
0012fa  b129              CBZ      r1,|L1.4872|
0012fc  e006              B        |L1.4876|
                  |L1.4862|
0012fe  f2aa1a11          SUB      r10,r10,#0x111        ;1633
001302  f8a6a000          STRH     r10,[r6,#0]           ;1633
001306  e015              B        |L1.4916|
                  |L1.4872|
001308  2801              CMP      r0,#1
00130a  d002              BEQ      |L1.4882|
                  |L1.4876|
;;;1636   	{
;;;1637   	t_box=ibt._T[0]-273;
;;;1638   	}
;;;1639   else if((ibt._nd[0]==1) &&  (ibt._nd[1]==1))
00130c  2901              CMP      r1,#1
00130e  d005              BEQ      |L1.4892|
001310  e010              B        |L1.4916|
                  |L1.4882|
001312  f2a91911          SUB      r9,r9,#0x111          ;1637
001316  f8a69000          STRH     r9,[r6,#0]            ;1637
00131a  e00b              B        |L1.4916|
                  |L1.4892|
00131c  2801              CMP      r0,#1
00131e  d109              BNE      |L1.4916|
;;;1640   	{
;;;1641   	if(t_ext_can_nd<5)t_box= t_ext_can;
001320  48db              LDR      r0,|L1.5776|
001322  7800              LDRB     r0,[r0,#0]  ; t_ext_can_nd
001324  2805              CMP      r0,#5
001326  d203              BCS      |L1.4912|
001328  48da              LDR      r0,|L1.5780|
00132a  8800              LDRH     r0,[r0,#0]  ; t_ext_can
00132c  8030              STRH     r0,[r6,#0]
00132e  e001              B        |L1.4916|
                  |L1.4912|
;;;1642   	else t_box=20;
001330  2014              MOVS     r0,#0x14
001332  8030              STRH     r0,[r6,#0]
                  |L1.4916|
;;;1643   	}
;;;1644   #endif
;;;1645   /*
;;;1646   //  
;;;1647   
;;;1648   ibt._T[0]=bat[0]._Tb+273;
;;;1649   ibt._T[1]=bat[1]._Tb+273;
;;;1650   ibt._T[2]=t_ext[1]+273;
;;;1651   ibt._T[3]=t_ext[2]+273;
;;;1652   
;;;1653   ibt._nd[0]=bat[0]._nd;
;;;1654   ibt._nd[1]=bat[1]._nd;
;;;1655   ibt._nd[2]=ND_EXT[1];
;;;1656   ibt._nd[3]=ND_EXT[2];
;;;1657   
;;;1658   ibt._avg1=0;
;;;1659   ibt._avg_cnt=4;
;;;1660   
;;;1661   if(ibt._nd[0]==0)
;;;1662   	{
;;;1663   	ibt._avg1+=ibt._T[0];
;;;1664   	}
;;;1665   else 
;;;1666   	{
;;;1667   	ibt._avg_cnt--;
;;;1668   	}
;;;1669   
;;;1670   if(ibt._nd[1]==0)
;;;1671   	{
;;;1672   	ibt._avg1+=ibt._T[1];
;;;1673   	}
;;;1674   else 
;;;1675   	{
;;;1676   	ibt._avg_cnt--;
;;;1677   	}
;;;1678   
;;;1679   if(ibt._nd[2]==0)
;;;1680   	{
;;;1681   	ibt._avg1+=ibt._T[2];
;;;1682   	}
;;;1683   else 
;;;1684   	{
;;;1685   	ibt._avg_cnt--;
;;;1686   	}
;;;1687   
;;;1688   if(ibt._nd[3]==0)
;;;1689   	{
;;;1690   	ibt._avg1+=ibt._T[3];
;;;1691   	}
;;;1692   else 
;;;1693   	{
;;;1694   	ibt._avg_cnt--;
;;;1695   	}
;;;1696   
;;;1697   if(ibt._avg_cnt==0)
;;;1698   	{
;;;1699   	}
;;;1700   else
;;;1701   	{
;;;1702   	ibt._avg1/=ibt._avg_cnt;
;;;1703   	}
;;;1704   
;;;1705   
;;;1706   if(ibt._nd[0]!=0)
;;;1707   	{
;;;1708   	ibt._T_dispers[0]=0;
;;;1709   	}
;;;1710   else 
;;;1711   	{
;;;1712   	ibt._T_dispers[0]=abs(ibt._T[0]-ibt._avg1);
;;;1713   	}
;;;1714   
;;;1715   if(ibt._nd[1]!=0)
;;;1716   	{
;;;1717   	ibt._T_dispers[1]=0;
;;;1718   	}
;;;1719   else 
;;;1720   	{
;;;1721   	ibt._T_dispers[1]=abs(ibt._T[1]-ibt._avg1);
;;;1722   	}
;;;1723   
;;;1724   if(ibt._nd[2]!=0)
;;;1725   	{
;;;1726   	ibt._T_dispers[2]=0;
;;;1727   	}
;;;1728   else 
;;;1729   	{
;;;1730   	ibt._T_dispers[2]=abs(ibt._T[2]-ibt._avg1);
;;;1731   	}
;;;1732   
;;;1733   if(ibt._nd[3]!=0)
;;;1734   	{
;;;1735   	ibt._T_dispers[3]=0;
;;;1736   	}
;;;1737   else 
;;;1738   	{
;;;1739   	ibt._T_dispers[3]=abs(ibt._T[3]-ibt._avg1);
;;;1740   	}
;;;1741   
;;;1742   if(	ibt._nd[0]&&
;;;1743   	ibt._nd[1]&&
;;;1744   	ibt._nd[2]&&
;;;1745   	ibt._nd[3]
;;;1746   	)
;;;1747   	{
;;;1748   	t_box=(bps[0]._Ti);
;;;1749   	}
;;;1750   
;;;1751   else if(	ibt._nd[0]||
;;;1752   	ibt._nd[1]||
;;;1753   	ibt._nd[2]||
;;;1754   	ibt._nd[3]
;;;1755   	)
;;;1756   	{
;;;1757   	t_box=(ibt._avg1-273);
;;;1758   	}
;;;1759   else 
;;;1760   	{
;;;1761   	ibt._max_dispers_num=0;
;;;1762   	ibt._max_dispers=ibt._T_dispers[0];
;;;1763   
;;;1764   	if(ibt._T_dispers[1]>ibt._max_dispers)
;;;1765   		{
;;;1766   		ibt._max_dispers_num=1;
;;;1767   		ibt._max_dispers=ibt._T_dispers[1];
;;;1768   		}
;;;1769   	if(ibt._T_dispers[2]>ibt._max_dispers)
;;;1770   		{
;;;1771   		ibt._max_dispers_num=2;
;;;1772   		ibt._max_dispers=ibt._T_dispers[2];
;;;1773   		}
;;;1774   	if(ibt._T_dispers[3]>ibt._max_dispers)
;;;1775   		{
;;;1776   		ibt._max_dispers_num=3;
;;;1777   		ibt._max_dispers=ibt._T_dispers[3];
;;;1778   		}
;;;1779   
;;;1780   	ibt._avg2=0;
;;;1781   
;;;1782   	if(ibt._max_dispers_num!=0)
;;;1783   		{
;;;1784   		ibt._avg2+=ibt._T[0];
;;;1785   		}
;;;1786   	if(ibt._max_dispers_num!=1)
;;;1787   		{
;;;1788   		ibt._avg2+=ibt._T[1];
;;;1789   		}
;;;1790   	if(ibt._max_dispers_num!=2)
;;;1791   		{
;;;1792   		ibt._avg2+=ibt._T[2];
;;;1793   		}
;;;1794   	if(ibt._max_dispers_num!=3)
;;;1795   		{
;;;1796   		ibt._avg2+=ibt._T[3];
;;;1797   		}
;;;1798   
;;;1799   	t_box=(ibt._avg2/3)-273;
;;;1800   
;;;1801   	}*/
;;;1802   
;;;1803   
;;;1804   //*********************************************
;;;1805   
;;;1806   #ifndef TELECORE
;;;1807   if((BAT_IS_ON[0]==bisON)&&(bat[0]._Ub>200)) Ibmax=bat[0]._Ib;
001334  48d8              LDR      r0,|L1.5784|
001336  7801              LDRB     r1,[r0,#0]  ; BAT_IS_ON
001338  2955              CMP      r1,#0x55
00133a  d104              BNE      |L1.4934|
00133c  f1bb0fc8          CMP      r11,#0xc8
001340  dd01              BLE      |L1.4934|
001342  8929              LDRH     r1,[r5,#8]  ; bat
001344  8739              STRH     r1,[r7,#0x38]
                  |L1.4934|
;;;1808   if((BAT_IS_ON[1]==bisON)&&(bat[1]._Ub>200)&&(bat[1]._Ib>bat[0]._Ib)) Ibmax=bat[1]._Ib;
001346  7840              LDRB     r0,[r0,#1]  ; BAT_IS_ON
001348  2855              CMP      r0,#0x55
00134a  d10a              BNE      |L1.4962|
00134c  f9b5004e          LDRSH    r0,[r5,#0x4e]  ; bat
001350  28c8              CMP      r0,#0xc8
001352  dd06              BLE      |L1.4962|
001354  f9b50054          LDRSH    r0,[r5,#0x54]  ; bat
001358  f9b51008          LDRSH    r1,[r5,#8]  ; bat
00135c  4288              CMP      r0,r1
00135e  dd00              BLE      |L1.4962|
001360  8738              STRH     r0,[r7,#0x38]
                  |L1.4962|
;;;1809   #endif
;;;1810   
;;;1811   #ifdef TELECORE
;;;1812   Ibmax=0;
;;;1813   /*
;;;1814   if((NUMBAT_TELECORE>0)&&(lakb[0]._communicationFullErrorStat==0)&&(lakb[0]._ch_curr/10>Ibmax))Ibmax=lakb[0]._ch_curr/10;
;;;1815   if((NUMBAT_TELECORE>1)&&(lakb[1]._communicationFullErrorStat==0)&&(lakb[1]._ch_curr/10>Ibmax))Ibmax=lakb[1]._ch_curr/10;
;;;1816   if((NUMBAT_TELECORE>2)&&(lakb[2]._communicationFullErrorStat==0)&&(lakb[2]._ch_curr/10>Ibmax))Ibmax=lakb[2]._ch_curr/10;
;;;1817   */
;;;1818   if((NUMBAT_TELECORE>0)&&(bat[0]._Ib/10>Ibmax))Ibmax=bat[0]._Ib/10;
;;;1819   if((NUMBAT_TELECORE>1)&&(bat[1]._Ib/10>Ibmax))Ibmax=bat[1]._Ib/10;
;;;1820   //if((BAT_IS_ON[0]==bisON)&&(bat[0]._Ub>200)) Ibmax=bat[0]._Ib/1;
;;;1821   //if((BAT_IS_ON[1]==bisON)&&(bat[1]._Ub>200)&&(bat[1]._Ib>bat[0]._Ib)) Ibmax=bat[1]._Ib;
;;;1822   #endif
;;;1823   //Ibmax=bat[0]._Ib;
;;;1824   //if((AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043))Ibmax=Ib_ips_termokompensat;
;;;1825   
;;;1826   #ifdef UKU_TELECORE2017
;;;1827   Ibmax=0;
;;;1828   if((NUMBAT_TELECORE>0)&&(bat[0]._Ib/10>Ibmax))Ibmax=bat[0]._Ib/10;
;;;1829   if((NUMBAT_TELECORE>1)&&(bat[1]._Ib/10>Ibmax))Ibmax=bat[1]._Ib/10;
;;;1830   #endif
;;;1831   
;;;1832   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1833   Ibmax=Ib_ips_termokompensat;
001362  f8bc0000          LDRH     r0,[r12,#0]  ; Ib_ips_termokompensat
001366  8738              STRH     r0,[r7,#0x38]
;;;1834   #endif
;;;1835   for(i=0;i<NUMIST;i++)
001368  2100              MOVS     r1,#0
00136a  e02e              B        |L1.5066|
                  |L1.4972|
;;;1836   	{
;;;1837   	if(bps[i]._cnt<25)
00136c  ebc100c1          RSB      r0,r1,r1,LSL #3
001370  eb001001          ADD      r0,r0,r1,LSL #4
001374  eb040080          ADD      r0,r4,r0,LSL #2
001378  78c6              LDRB     r6,[r0,#3]
00137a  2e19              CMP      r6,#0x19
00137c  d21c              BCS      |L1.5048|
;;;1838        	{
;;;1839        	bps[i]._Ii=bps[i]._buff[0]+(bps[i]._buff[1]*256);
00137e  7986              LDRB     r6,[r0,#6]
001380  79c7              LDRB     r7,[r0,#7]
001382  eb062607          ADD      r6,r6,r7,LSL #8
001386  6246              STR      r6,[r0,#0x24]
;;;1840        	bps[i]._Uin=bps[i]._buff[2]+(bps[i]._buff[3]*256);
001388  7a06              LDRB     r6,[r0,#8]
00138a  7a47              LDRB     r7,[r0,#9]
00138c  eb062607          ADD      r6,r6,r7,LSL #8
001390  6206              STR      r6,[r0,#0x20]
;;;1841        	bps[i]._Uii=bps[i]._buff[4]+(bps[i]._buff[5]*256);
001392  7a86              LDRB     r6,[r0,#0xa]
001394  7ac7              LDRB     r7,[r0,#0xb]
001396  eb062607          ADD      r6,r6,r7,LSL #8
00139a  61c6              STR      r6,[r0,#0x1c]
;;;1842        	bps[i]._Ti=(signed)(bps[i]._buff[6]);
00139c  7b06              LDRB     r6,[r0,#0xc]
00139e  6286              STR      r6,[r0,#0x28]
;;;1843        	bps[i]._adr_ee=bps[i]._buff[7];
0013a0  7b46              LDRB     r6,[r0,#0xd]
0013a2  f8806052          STRB     r6,[r0,#0x52]
;;;1844        	bps[i]._flags_tm=bps[i]._buff[8];
0013a6  7b86              LDRB     r6,[r0,#0xe]
0013a8  f8806042          STRB     r6,[r0,#0x42]
;;;1845   	     bps[i]._rotor=bps[i]._buff[10]+(bps[i]._buff[11]*256);    
0013ac  7c06              LDRB     r6,[r0,#0x10]
0013ae  7c47              LDRB     r7,[r0,#0x11]
0013b0  eb062607          ADD      r6,r6,r7,LSL #8
0013b4  64c6              STR      r6,[r0,#0x4c]
0013b6  e006              B        |L1.5062|
                  |L1.5048|
;;;1846        	} 
;;;1847   	else 
;;;1848        	{
;;;1849        	bps[i]._Uii=0; 
0013b8  61c3              STR      r3,[r0,#0x1c]
;;;1850        	bps[i]._Ii=0;
0013ba  6243              STR      r3,[r0,#0x24]
;;;1851        	bps[i]._Uin=0;
0013bc  6203              STR      r3,[r0,#0x20]
;;;1852        	bps[i]._Ti=0;
0013be  6283              STR      r3,[r0,#0x28]
;;;1853        	bps[i]._flags_tm=0; 
0013c0  f8803042          STRB     r3,[r0,#0x42]
;;;1854   	     bps[i]._rotor=0;    
0013c4  64c3              STR      r3,[r0,#0x4c]
                  |L1.5062|
0013c6  1c49              ADDS     r1,r1,#1              ;1835
0013c8  b2c9              UXTB     r1,r1                 ;1835
                  |L1.5066|
0013ca  4291              CMP      r1,r2                 ;1835
0013cc  dbce              BLT      |L1.4972|
;;;1855        	}
;;;1856        
;;;1857        }
;;;1858   
;;;1859   load_I=0;
0013ce  4eb3              LDR      r6,|L1.5788|
;;;1860   #ifdef TELECORE
;;;1861   
;;;1862   /*for(i=0;i<NUMBAT_TELECORE;i++)
;;;1863   	{
;;;1864   	load_I-=lakb[i]._ch_curr/10;
;;;1865   	}*/
;;;1866   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
;;;1867   #elif UKU_TELECORE2017
;;;1868   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
;;;1869   #else
;;;1870   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
0013d0  f9b51008          LDRSH    r1,[r5,#8]  ; bat
0013d4  200a              MOVS     r0,#0xa
0013d6  fb91f1f0          SDIV     r1,r1,r0
0013da  f9b55054          LDRSH    r5,[r5,#0x54]  ; bat
0013de  fb95f0f0          SDIV     r0,r5,r0
0013e2  4408              ADD      r0,r0,r1
0013e4  4240              RSBS     r0,r0,#0
0013e6  b207              SXTH     r7,r0
0013e8  8037              STRH     r7,[r6,#0]
;;;1871   #endif
;;;1872   Isumm=0;
0013ea  4dad              LDR      r5,|L1.5792|
0013ec  802b              STRH     r3,[r5,#0]
;;;1873   
;;;1874   for(i=0;i<NUMIST;i++)
0013ee  2000              MOVS     r0,#0
0013f0  e011              B        |L1.5142|
                  |L1.5106|
;;;1875        {
;;;1876        if(bps[i]._cnt<5)Isumm+=bps[i]._Ii;
0013f2  ebc001c0          RSB      r1,r0,r0,LSL #3
0013f6  eb011100          ADD      r1,r1,r0,LSL #4
0013fa  eb040181          ADD      r1,r4,r1,LSL #2
0013fe  f891c003          LDRB     r12,[r1,#3]
001402  f1bc0f05          CMP      r12,#5
001406  d204              BCS      |L1.5138|
001408  6a49              LDR      r1,[r1,#0x24]
00140a  f8b5c000          LDRH     r12,[r5,#0]  ; Isumm
00140e  4461              ADD      r1,r1,r12
001410  8029              STRH     r1,[r5,#0]
                  |L1.5138|
001412  1c40              ADDS     r0,r0,#1              ;1874
001414  b2c0              UXTB     r0,r0                 ;1874
                  |L1.5142|
001416  4290              CMP      r0,r2                 ;1874
001418  dbeb              BLT      |L1.5106|
;;;1877        }  
;;;1878        
;;;1879   load_I=load_I+Isumm;
00141a  8828              LDRH     r0,[r5,#0]  ; Isumm
00141c  4438              ADD      r0,r0,r7
00141e  b200              SXTH     r0,r0
001420  8030              STRH     r0,[r6,#0]
;;;1880   if(load_I<0)load_I=0;
001422  2800              CMP      r0,#0
001424  da00              BGE      |L1.5160|
001426  8033              STRH     r3,[r6,#0]
                  |L1.5160|
;;;1881   
;;;1882   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1883   load_I=0;
001428  8033              STRH     r3,[r6,#0]
;;;1884   
;;;1885   Isumm=0;
00142a  802b              STRH     r3,[r5,#0]
;;;1886   
;;;1887   for(i=0;i<NUMIST;i++)
00142c  2000              MOVS     r0,#0
00142e  e00e              B        |L1.5198|
                  |L1.5168|
;;;1888        {
;;;1889        if(bps[i]._cnt<5)Isumm+=bps[i]._Ii;
001430  ebc001c0          RSB      r1,r0,r0,LSL #3
001434  eb011100          ADD      r1,r1,r0,LSL #4
001438  eb040181          ADD      r1,r4,r1,LSL #2
00143c  78cf              LDRB     r7,[r1,#3]
00143e  2f05              CMP      r7,#5
001440  d203              BCS      |L1.5194|
001442  6a49              LDR      r1,[r1,#0x24]
001444  882f              LDRH     r7,[r5,#0]  ; Isumm
001446  4439              ADD      r1,r1,r7
001448  8029              STRH     r1,[r5,#0]
                  |L1.5194|
00144a  1c40              ADDS     r0,r0,#1              ;1887
00144c  b2c0              UXTB     r0,r0                 ;1887
                  |L1.5198|
00144e  4290              CMP      r0,r2                 ;1887
001450  dbee              BLT      |L1.5168|
;;;1890        }  
;;;1891        
;;;1892   load_I=load_I+Isumm;
001452  8829              LDRH     r1,[r5,#0]  ; Isumm
001454  1858              ADDS     r0,r3,r1
001456  b200              SXTH     r0,r0
001458  8030              STRH     r0,[r6,#0]
;;;1893   if(load_I<0)load_I=0;
00145a  2800              CMP      r0,#0
00145c  da00              BGE      |L1.5216|
00145e  8033              STRH     r3,[r6,#0]
                  |L1.5216|
;;;1894   
;;;1895   #endif
;;;1896   
;;;1897   
;;;1898   
;;;1899   #ifdef UKU_GLONASS
;;;1900   inv[0]._Uio=6;
;;;1901   if (NUMINV)
;;;1902   	{
;;;1903   	for(i=0;i<NUMINV;i++)
;;;1904   		{
;;;1905   		if(bps[i+first_inv_slot]._cnt<25)
;;;1906        		{
;;;1907        		inv[i]._Ii=bps[i+first_inv_slot]._buff[0]+(bps[i+first_inv_slot]._buff[1]*256);
;;;1908        		inv[i]._Uin=bps[i+first_inv_slot]._buff[2]+(bps[i+first_inv_slot]._buff[3]*256);
;;;1909        		inv[i]._Uio=bps[i+first_inv_slot]._buff[4]+(bps[i+first_inv_slot]._buff[5]*256);
;;;1910        		inv[i]._Ti=(signed)(bps[i+first_inv_slot]._buff[6]);
;;;1911        		inv[i]._flags_tm=bps[i+first_inv_slot]._buff[8];
;;;1912   	    	//	inv[i]._rotor=bps[i+first_inv_slot]._buff[10]+(bps[i+first_inv_slot]._buff[11]*256);
;;;1913   			inv[i]._cnt=0;    
;;;1914        		} 
;;;1915   		else 
;;;1916        		{
;;;1917        		inv[i]._Uio=0; 
;;;1918        		inv[i]._Ii=0;
;;;1919        		inv[i]._Uin=0;
;;;1920        		inv[i]._Ti=0;
;;;1921        		inv[i]._flags_tm=0; 
;;;1922   //	     	inv[i]._rotor0;
;;;1923   			inv[i]._cnt=25;    
;;;1924        		}
;;;1925        	}
;;;1926      	}
;;;1927   #endif
;;;1928   
;;;1929   #ifndef UKU_GLONASS
;;;1930   if (NUMINV)
001460  4890              LDR      r0,|L1.5796|
001462  f9b05000          LDRSH    r5,[r0,#0]  ; NUMINV
001466  2d00              CMP      r5,#0
001468  d063              BEQ      |L1.5426|
;;;1931   	{
;;;1932   	for(i=0;i<NUMINV;i++)
00146a  2200              MOVS     r2,#0
;;;1933   		{
;;;1934   		if(bps[i+20]._cnt<25)
;;;1935        		{
;;;1936        		inv[i]._Ii=bps[i+20]._buff[0]+(bps[i+20]._buff[1]*256);
00146c  4e8e              LDR      r6,|L1.5800|
00146e  e05e              B        |L1.5422|
                  |L1.5232|
001470  f1020014          ADD      r0,r2,#0x14           ;1934
001474  ebc001c0          RSB      r1,r0,r0,LSL #3       ;1934
001478  eb011000          ADD      r0,r1,r0,LSL #4       ;1934
00147c  eb040080          ADD      r0,r4,r0,LSL #2       ;1934
001480  78c1              LDRB     r1,[r0,#3]            ;1934
001482  2919              CMP      r1,#0x19              ;1934
001484  d239              BCS      |L1.5370|
001486  7981              LDRB     r1,[r0,#6]
001488  79c7              LDRB     r7,[r0,#7]
00148a  eb012707          ADD      r7,r1,r7,LSL #8
00148e  eb020142          ADD      r1,r2,r2,LSL #1
001492  eb061141          ADD      r1,r6,r1,LSL #5
001496  61cf              STR      r7,[r1,#0x1c]
;;;1937        		inv[i]._Pio=bps[i+20]._buff[2]+(bps[i+20]._buff[3]*256);
001498  7a07              LDRB     r7,[r0,#8]
00149a  f890c009          LDRB     r12,[r0,#9]
00149e  eb07270c          ADD      r7,r7,r12,LSL #8
0014a2  62cf              STR      r7,[r1,#0x2c]
;;;1938        		inv[i]._Uio=bps[i+20]._buff[4]+(bps[i+20]._buff[5]*256);
0014a4  7a87              LDRB     r7,[r0,#0xa]
0014a6  f890c00b          LDRB     r12,[r0,#0xb]
0014aa  eb07270c          ADD      r7,r7,r12,LSL #8
0014ae  618f              STR      r7,[r1,#0x18]
;;;1939        		inv[i]._Ti=(signed)(bps[i+20]._buff[6]);
0014b0  7b07              LDRB     r7,[r0,#0xc]
0014b2  620f              STR      r7,[r1,#0x20]
;;;1940        		inv[i]._flags_tm=bps[i+20]._buff[7];
0014b4  7b47              LDRB     r7,[r0,#0xd]
0014b6  f8817046          STRB     r7,[r1,#0x46]
;;;1941        		inv[i]._Uin=bps[i+20]._buff[8]+(bps[i+20]._buff[9]*256);
0014ba  7b87              LDRB     r7,[r0,#0xe]
0014bc  f890c00f          LDRB     r12,[r0,#0xf]
0014c0  eb07270c          ADD      r7,r7,r12,LSL #8
0014c4  628f              STR      r7,[r1,#0x28]
;;;1942        		inv[i]._Uil=bps[i+20]._buff[10]+(bps[i+20]._buff[11]*256);
0014c6  7c07              LDRB     r7,[r0,#0x10]
0014c8  f890c011          LDRB     r12,[r0,#0x11]
0014cc  eb07270c          ADD      r7,r7,r12,LSL #8
0014d0  624f              STR      r7,[r1,#0x24]
;;;1943   			inv[i]._cnt=0;
0014d2  708b              STRB     r3,[r1,#2]
;;;1944   			inv[i]._Uoutmin=bps[i+20]._buff[12]; 
0014d4  7c87              LDRB     r7,[r0,#0x12]
0014d6  f8817059          STRB     r7,[r1,#0x59]
;;;1945   			inv[i]._Uoutmax=bps[i+20]._buff[13]; 
0014da  7cc7              LDRB     r7,[r0,#0x13]
0014dc  f881705a          STRB     r7,[r1,#0x5a]
;;;1946   			inv[i]._Pnom=bps[i+20]._buff[14]; 
0014e0  7d07              LDRB     r7,[r0,#0x14]
0014e2  f8817058          STRB     r7,[r1,#0x58]
;;;1947   			inv[i]._net_contr_en=bps[i+20]._buff[15];
0014e6  7d47              LDRB     r7,[r0,#0x15]
0014e8  f881705b          STRB     r7,[r1,#0x5b]
;;;1948   			inv[i]._pwm_en=bps[i+20]._buff[16];  
0014ec  7d87              LDRB     r7,[r0,#0x16]
0014ee  f881705c          STRB     r7,[r1,#0x5c]
;;;1949   			inv[i]._phase_mode=bps[i+20]._buff[17];  
0014f2  7dc0              LDRB     r0,[r0,#0x17]
0014f4  f881005d          STRB     r0,[r1,#0x5d]
0014f8  e017              B        |L1.5418|
                  |L1.5370|
;;;1950        		} 
;;;1951   		else 
;;;1952        		{
;;;1953         		inv[i]._Ii=0;
0014fa  eb020042          ADD      r0,r2,r2,LSL #1
0014fe  eb061040          ADD      r0,r6,r0,LSL #5
001502  61c3              STR      r3,[r0,#0x1c]
;;;1954   			inv[i]._Pio=0;
001504  62c3              STR      r3,[r0,#0x2c]
;;;1955   			inv[i]._Uio=0;
001506  6183              STR      r3,[r0,#0x18]
;;;1956        		inv[i]._Ti=0;
001508  6203              STR      r3,[r0,#0x20]
;;;1957        		inv[i]._flags_tm=0; 
00150a  f8803046          STRB     r3,[r0,#0x46]
;;;1958        		inv[i]._Uil=0;
00150e  6243              STR      r3,[r0,#0x24]
;;;1959        		inv[i]._Uin=0;
001510  6283              STR      r3,[r0,#0x28]
;;;1960   			inv[i]._cnt=25; 
001512  2119              MOVS     r1,#0x19
001514  7081              STRB     r1,[r0,#2]
;;;1961   			inv[i]._Uoutmin=0; 
001516  f8803059          STRB     r3,[r0,#0x59]
;;;1962   			inv[i]._Uoutmax=0; 
00151a  f880305a          STRB     r3,[r0,#0x5a]
;;;1963   			inv[i]._Pnom=0; 
00151e  f8803058          STRB     r3,[r0,#0x58]
;;;1964   			inv[i]._net_contr_en=0;
001522  f880305b          STRB     r3,[r0,#0x5b]
;;;1965   			inv[i]._pwm_en=0;   
001526  f880305c          STRB     r3,[r0,#0x5c]
                  |L1.5418|
00152a  1c52              ADDS     r2,r2,#1              ;1932
00152c  b2d2              UXTB     r2,r2                 ;1932
                  |L1.5422|
00152e  42aa              CMP      r2,r5                 ;1932
001530  db9e              BLT      |L1.5232|
                  |L1.5426|
;;;1966   			   
;;;1967        		}
;;;1968        	}
;;;1969      	}
;;;1970   #endif
;;;1971   
;;;1972   #ifdef GLADKOV
;;;1973   inv[0]._Ii=bps[4]._buff[0]+(bps[4]._buff[1]*256);
;;;1974   inv[0]._Pio=bps[4]._buff[2]+(bps[4]._buff[3]*256);
;;;1975   inv[0]._Uio=bps[4]._buff[4]+(bps[4]._buff[5]*256);
;;;1976   inv[0]._Ti=(signed)(bps[4]._buff[6]);
;;;1977   inv[0]._flags_tm=bps[4]._buff[7];
;;;1978   inv[0]._Uin=bps[4]._buff[8]+(bps[4]._buff[9]*256);
;;;1979   inv[0]._Uil=bps[4]._buff[10]+(bps[4]._buff[11]*256);
;;;1980   inv[0]._cnt=0;    
;;;1981   
;;;1982   inv[1]._Ii=bps[21]._buff[0]+(bps[21]._buff[1]*256);
;;;1983   inv[1]._Pio=bps[21]._buff[2]+(bps[21]._buff[3]*256);
;;;1984   inv[1]._Uio=bps[21]._buff[4]+(bps[21]._buff[5]*256);
;;;1985   inv[1]._Ti=(signed)(bps[21]._buff[6]);
;;;1986   inv[1]._flags_tm=bps[21]._buff[7];
;;;1987   inv[1]._Uin=bps[21]._buff[8]+(bps[21]._buff[9]*256);
;;;1988   inv[1]._Uil=bps[21]._buff[10]+(bps[21]._buff[11]*256);
;;;1989   inv[1]._cnt=0;    
;;;1990   #endif
;;;1991   
;;;1992   /*
;;;1993   if((BAT_IS_ON[0]==bisON)&&(BAT_TYPE==1))
;;;1994   	{
;;;1995   	lakb[0]._battCommState=0;
;;;1996   	if(lakb[0]._cnt>10)lakb[0]._battCommState=2;
;;;1997   	else if(lakb[0]._bRS485ERR==1)lakb[0]._battCommState=1;
;;;1998   	
;;;1999   	if(lakb[0]._battCommState==0)
;;;2000   		{	
;;;2001   		bat[0]._Ub=(signed short)((lakb[0]._tot_bat_volt+5)/10);
;;;2002   		bat[0]._Ib=(signed short)lakb[0]._ch_curr;
;;;2003   		if(lakb[0]._dsch_curr) bat[0]._Ib=(signed short) (-lakb[0]._dsch_curr);
;;;2004   		bat[0]._Tb=(signed short)lakb[0]._max_cell_temp;
;;;2005   		}
;;;2006   	}
;;;2007   */
;;;2008   
;;;2009   #ifdef UKU_TELECORE2015
;;;2010   
;;;2011   	if(BAT_TYPE==2)
;;;2012   		{
;;;2013   		lakb[0]._ch_curr/*temp_SS*/=((ascii2halFhex(liBatteryInBuff[113]))<<12)+
;;;2014   					 		((ascii2halFhex(liBatteryInBuff[114]))<<8)+
;;;2015   							((ascii2halFhex(liBatteryInBuff[115]))<<4)+
;;;2016   							((ascii2halFhex(liBatteryInBuff[116])));
;;;2017   		
;;;2018   		/*if(temp_SS&0x8000)		lakb[0]._ch_curr=~temp_SS;
;;;2019   		else 				lakb[0]._ch_curr=temp_SS;*/
;;;2020   	
;;;2021   		lakb[0]._tot_bat_volt=	(unsigned short)(((ascii2halFhex(liBatteryInBuff[117]))<<12)+
;;;2022   							((ascii2halFhex(liBatteryInBuff[118]))<<8)+
;;;2023   							((ascii2halFhex(liBatteryInBuff[119]))<<4)+
;;;2024   							((ascii2halFhex(liBatteryInBuff[120]))))/100;
;;;2025   	
;;;2026   		lakb[0]._max_cell_temp= 	(((ascii2halFhex(liBatteryInBuff[93]))<<12)+
;;;2027   							((ascii2halFhex(liBatteryInBuff[94]))<<8)+
;;;2028   							((ascii2halFhex(liBatteryInBuff[95]))<<4)+
;;;2029   							((ascii2halFhex(liBatteryInBuff[96]))))/10-273;
;;;2030   	
;;;2031   		lakb[0]._s_o_c_abs=		(unsigned short)((ascii2halFhex(liBatteryInBuff[121]))<<12)+
;;;2032   							((ascii2halFhex(liBatteryInBuff[122]))<<8)+
;;;2033   							((ascii2halFhex(liBatteryInBuff[123]))<<4)+
;;;2034   							((ascii2halFhex(liBatteryInBuff[124])));
;;;2035   	
;;;2036   		lakb[0]._rat_cap=		(unsigned short)((ascii2halFhex(liBatteryInBuff[127]))<<12)+
;;;2037   							((ascii2halFhex(liBatteryInBuff[128]))<<8)+
;;;2038   							((ascii2halFhex(liBatteryInBuff[129]))<<4)+
;;;2039   							((ascii2halFhex(liBatteryInBuff[130])));
;;;2040   	
;;;2041   		lakb[0]._s_o_c=		lakb[0]._s_o_c_abs/(lakb[0]._rat_cap/100);
;;;2042   	
;;;2043   	
;;;2044   	/*	lakb[0]._rat_cap= (lakb_damp[i][13]*256)+ lakb_damp[i][14];
;;;2045   		lakb[0]._max_cell_volt= (lakb_damp[i][0]*256)+ lakb_damp[i][1];
;;;2046   		lakb[0]._min_cell_volt= (lakb_damp[i][2]*256)+ lakb_damp[i][3];
;;;2047   		lakb[0]._max_cell_temp= lakb_damp[i][4];
;;;2048   		lakb[0]._min_cell_temp= lakb_damp[i][5];
;;;2049   		lakb[0]._tot_bat_volt= (lakb_damp[i][6]*256)+ lakb_damp[i][7];
;;;2050   		lakb[0]._ch_curr= (lakb_damp[i][8]*256)+ lakb_damp[i][8];
;;;2051   		lakb[0]._dsch_curr= (lakb_damp[i][10]*256)+ lakb_damp[i][11];
;;;2052   		lakb[0]._s_o_c= lakb_damp[i][12];
;;;2053   		lakb[0]._r_b_t= lakb_damp[i][15];
;;;2054   		lakb[0]._c_c_l_v= (lakb_damp[i][16]*256)+ lakb_damp[i][17];
;;;2055   		lakb[0]._s_o_h= lakb_damp[i][18];
;;;2056   	
;;;2057   		if(lakb[i]._rat_cap==0)
;;;2058   			{
;;;2059   			if(lakb[i]._isOnCnt)
;;;2060   				{
;;;2061   				lakb[i]._isOnCnt--;
;;;2062   				if(lakb[i]._isOnCnt==0)
;;;2063   					{
;;;2064   					if(lakb[i]._battIsOn!=0) bLAKB_KONF_CH=1;
;;;2065   					}
;;;2066   				}
;;;2067   			}
;;;2068   		else 
;;;2069   			{
;;;2070   			if(lakb[i]._isOnCnt<50)
;;;2071   				{
;;;2072   				lakb[i]._isOnCnt++;
;;;2073   				if(lakb[i]._isOnCnt==50)
;;;2074   					{
;;;2075   					if(lakb[i]._battIsOn!=1) bLAKB_KONF_CH=1;
;;;2076   					}
;;;2077   				}
;;;2078   			}
;;;2079   		gran(&lakb[i]._isOnCnt,0,50);*/
;;;2080   		}
;;;2081   	else if(BAT_TYPE==3)
;;;2082   		{
;;;2083   		//short numOfPacks;
;;;2084   		//short numOfCells, numOfTemperCells, baseOfData;
;;;2085   		
;;;2086   		#ifndef UKU_TELECORE2016
;;;2087   		numOfCells=((ascii2halFhex(liBatteryInBuff[17]))<<4)+((ascii2halFhex(liBatteryInBuff[18])));
;;;2088   		numOfTemperCells=((ascii2halFhex(liBatteryInBuff[17+(numOfCells*4)+2]))<<4)+((ascii2halFhex(liBatteryInBuff[18+(numOfCells*4)+2])));
;;;2089   		numOfPacks=((ascii2halFhex(liBatteryInBuff[15]))<<4)+((ascii2halFhex(liBatteryInBuff[16])));
;;;2090   		if(numOfPacks)numOfPacks-=1;
;;;2091   		if((numOfPacks<0)||(numOfPacks>NUMBAT_TELECORE))numOfPacks=0;
;;;2092   		plazma_numOfCells=numOfCells;
;;;2093   		plazma_numOfTemperCells=numOfTemperCells;
;;;2094   		plazma_numOfPacks=numOfPacks;
;;;2095   
;;;2096   
;;;2097   		baseOfData=16+(numOfCells*4)+2+(numOfTemperCells*4)+2;
;;;2098   
;;;2099   		lakb[numOfPacks]._ch_curr=(signed short)(
;;;2100   							((ascii2halFhex(liBatteryInBuff[1+baseOfData]))<<12)+
;;;2101   							((ascii2halFhex(liBatteryInBuff[2+baseOfData]))<<8)+
;;;2102   							((ascii2halFhex(liBatteryInBuff[3+baseOfData]))<<4)+
;;;2103   							((ascii2halFhex(liBatteryInBuff[4+baseOfData])))
;;;2104   							);	  
;;;2105   
;;;2106   		lakb[numOfPacks]._tot_bat_volt=(signed short)(
;;;2107   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+4]))<<12)+
;;;2108   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+4]))<<8)+
;;;2109   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+4]))<<4)+
;;;2110   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+4])))
;;;2111   							)/10;
;;;2112   
;;;2113   		lakb[numOfPacks]._max_cell_temp=(signed short)(
;;;2114   							((ascii2halFhex(liBatteryInBuff[1+baseOfData-4]))<<12)+
;;;2115   							((ascii2halFhex(liBatteryInBuff[2+baseOfData-4]))<<8)+
;;;2116   							((ascii2halFhex(liBatteryInBuff[3+baseOfData-4]))<<4)+
;;;2117   							((ascii2halFhex(liBatteryInBuff[4+baseOfData-4])))
;;;2118   							)-2730;
;;;2119   
;;;2120   		lakb[numOfPacks]._s_o_c=(signed short)(
;;;2121   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+8]))<<12)+
;;;2122   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+8]))<<8)+
;;;2123   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+8]))<<4)+
;;;2124   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+8])))
;;;2125   							)/10;
;;;2126   
;;;2127   		lakb[numOfPacks]._s_o_h=(signed short)(
;;;2128   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+14]))<<12)+
;;;2129   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+14]))<<8)+
;;;2130   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+14]))<<4)+
;;;2131   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+14])))
;;;2132   							)/10;
;;;2133   		#endif
;;;2134   		
;;;2135   		#ifdef UKU_TELECORE2016
;;;2136   		{
;;;2137   		char i;
;;;2138   		
;;;2139   		for(i=0;i<NUMBAT_TELECORE;i++)
;;;2140   			{
;;;2141   			lakb[i]._s_o_c_percent= (signed short)(((unsigned long)lakb[i]._s_o_c*100UL)/(unsigned long)lakb[i]._s_o_h);
;;;2142   			}
;;;2143   		}
;;;2144   		#endif
;;;2145   		
;;;2146   										  
;;;2147   		}
;;;2148   	
;;;2149   if(sacredSunSilentCnt<3) 
;;;2150   	{
;;;2151       	bat[0]._Ub=lakb[0]._tot_bat_volt;
;;;2152       	bat[0]._Tb=lakb[0]._max_cell_temp;
;;;2153      	//bat[0]._Ib=lakb[0]._ch_curr/10;
;;;2154   	}
;;;2155   else 
;;;2156   	{
;;;2157       	//bat[0]._Ub=0;
;;;2158       	//bat[0]._Tb=0;
;;;2159      	//bat[0]._Ib=0;
;;;2160   	}
;;;2161   
;;;2162   if(BAT_TYPE==1)
;;;2163   	{
;;;2164   	char i;
;;;2165   	for(i=0;i<1;i++)
;;;2166   		{
;;;2167   		lakb[i]._rat_cap= (lakb_damp[i][13]*256)+ lakb_damp[i][14];
;;;2168   		lakb[i]._max_cell_volt= (lakb_damp[i][0]*256)+ lakb_damp[i][1];
;;;2169   		lakb[i]._min_cell_volt= (lakb_damp[i][2]*256)+ lakb_damp[i][3];
;;;2170   		lakb[i]._max_cell_temp= lakb_damp[i][4];
;;;2171   		lakb[i]._min_cell_temp= lakb_damp[i][5];
;;;2172   		lakb[i]._tot_bat_volt= (lakb_damp[i][6]*256)+ lakb_damp[i][7];
;;;2173   		lakb[i]._ch_curr= (lakb_damp[i][8]*256)+ lakb_damp[i][9];
;;;2174   		lakb[i]._dsch_curr= (lakb_damp[i][10]*256)+ lakb_damp[i][11];
;;;2175   		lakb[i]._s_o_c= lakb_damp[i][12];
;;;2176   		lakb[i]._r_b_t= lakb_damp[i][15];
;;;2177   		lakb[i]._c_c_l_v= (lakb_damp[i][16]*256)+ lakb_damp[i][17];
;;;2178   		lakb[i]._s_o_h= lakb_damp[i][18];
;;;2179   		lakb[i]._flags1= lakb_damp[i][34];
;;;2180   		lakb[i]._flags2= lakb_damp[i][35];
;;;2181   		lakb[i]._b_p_ser_num= lakb_damp[i][36];
;;;2182   
;;;2183   /*		if(lakb[i]._rat_cap==0)
;;;2184   			{
;;;2185   			if(lakb[i]._isOnCnt)
;;;2186   				{
;;;2187   				lakb[i]._isOnCnt--;
;;;2188   				if(lakb[i]._isOnCnt==0)
;;;2189   					{
;;;2190   					if(lakb[i]._battIsOn!=0) bLAKB_KONF_CH=1;
;;;2191   					}
;;;2192   				}
;;;2193   			}
;;;2194   		else 
;;;2195   			{
;;;2196   			if(lakb[i]._isOnCnt<50)
;;;2197   				{
;;;2198   				lakb[i]._isOnCnt++;
;;;2199   				if(lakb[i]._isOnCnt==50)
;;;2200   					{
;;;2201   					if(lakb[i]._battIsOn!=1) bLAKB_KONF_CH=1;
;;;2202   					}
;;;2203   				}
;;;2204   			} */
;;;2205   		gran(&lakb[i]._isOnCnt,0,50);
;;;2206   	 	}
;;;2207   
;;;2208   	if(lakb_damp[0][41]==100)
;;;2209   		{
;;;2210   		li_bat._485Error=1;
;;;2211   		}
;;;2212   	if(lakb_damp[0][41]==0)
;;;2213   		{
;;;2214   		//if(bRS485ERR)bLAKB_KONF_CH=1;
;;;2215   		li_bat._485Error=0;
;;;2216   		}
;;;2217   	li_bat._485ErrorCnt=lakb_damp[0][41];
;;;2218   
;;;2219   
;;;2220   	}
;;;2221   
;;;2222   
;;;2223   #endif
;;;2224   
;;;2225   		#ifdef UKU_TELECORE2017
;;;2226   		{
;;;2227   		char i;
;;;2228   		
;;;2229   		for(i=0;i<NUMBAT_TELECORE;i++)
;;;2230   			{
;;;2231   			lakb[i]._s_o_c_percent= (signed short)(((unsigned long)lakb[i]._s_o_c*100UL)/(unsigned long)lakb[i]._s_o_h);
;;;2232   			}
;;;2233   		}
;;;2234   		#endif
;;;2235   #ifdef UKU_TELECORE2015
;;;2236   //   
;;;2237   //TODO          
;;;2238   li_bat._batStat=bsOK;
;;;2239   if(BAT_TYPE==1) //COSLIGHT
;;;2240   	{
;;;2241   	if(li_bat._batStat==bsOK)
;;;2242   		{
;;;2243   		li_bat._Ub=lakb[0]._tot_bat_volt/10;
;;;2244   
;;;2245   		if(lakb[0]._ch_curr)li_bat._Ib=lakb[0]._ch_curr/10;
;;;2246   		else if(lakb[0]._dsch_curr) li_bat._Ib=bat[0]._Ib/10;//lakb[0]._dsch_curr/10;
;;;2247   	
;;;2248   		li_bat._ratCap=lakb[0]._rat_cap/100;
;;;2249   		li_bat._soc=lakb[0]._s_o_c;
;;;2250   		li_bat._soh=lakb[0]._s_o_h;
;;;2251   		li_bat._cclv=lakb[0]._c_c_l_v/10;
;;;2252   		li_bat._Tb=lakb[0]._max_cell_temp;
;;;2253   		li_bat._rbt=lakb[0]._r_b_t;
;;;2254   		}
;;;2255   	else 
;;;2256   		{
;;;2257   		li_bat._Ub=bat[0]._Ub;
;;;2258   		li_bat._Ib=bat[0]._Ib/10;
;;;2259   		li_bat._Tb=bat[0]._Tb;
;;;2260   		}
;;;2261   
;;;2262   	if((li_bat._485Error)||(li_bat._canError))
;;;2263   		{
;;;2264   		li_bat._batStat=bsOFF;
;;;2265   		}
;;;2266   	else li_bat._batStat=bsOK;
;;;2267   	}
;;;2268   else if(BAT_TYPE==2) //SACRED SUN
;;;2269   	{
;;;2270   	}
;;;2271   else if(BAT_TYPE==3) //ZTT
;;;2272   	{
;;;2273   	if(li_bat._batStat==bsOK)
;;;2274   		{
;;;2275   
;;;2276   		}
;;;2277   	}
;;;2278   #endif
;;;2279   
;;;2280   
;;;2281   /*
;;;2282   if((BAT_IS_ON[0]==bisON)&&(BAT_TYPE[0]==1)&&(BAT_LINK==0))
;;;2283   	{
;;;2284   
;;;2285   
;;;2286   	if(bat_drv_rx_buff[13]<=0x39)bbb[0]=bat_drv_rx_buff[13]-0x30;
;;;2287   	else bbb[0]=bat_drv_rx_buff[13]-55;
;;;2288   	if(bat_drv_rx_buff[14]<=0x39)bbb[1]=bat_drv_rx_buff[14]-0x30;
;;;2289   	else bbb[1]=bat_drv_rx_buff[14]-55;
;;;2290   	if(bat_drv_rx_buff[15]<=0x39)bbb[2]=bat_drv_rx_buff[15]-0x30;
;;;2291   	else bbb[2]=bat_drv_rx_buff[15]-55;
;;;2292   	if(bat_drv_rx_buff[16]<=0x39)bbb[3]=bat_drv_rx_buff[16]-0x30;
;;;2293   	else bbb[3]=bat_drv_rx_buff[16]-55;
;;;2294   
;;;2295   	tempSS=0;
;;;2296   	tempSS=((bbb[0]*4096)+(bbb[1]*256)+(bbb[2]*16)+bbb[3]);
;;;2297   
;;;2298   	bat[0]._max_cell_volt=(tempSS+5)/10;
;;;2299   
;;;2300   	if(bat_drv_rx_buff[17]<=0x39)bbb[0]=bat_drv_rx_buff[17]-0x30;
;;;2301   	else bbb[0]=bat_drv_rx_buff[17]-55;
;;;2302   	if(bat_drv_rx_buff[18]<=0x39)bbb[1]=bat_drv_rx_buff[18]-0x30;
;;;2303   	else bbb[1]=bat_drv_rx_buff[18]-55;
;;;2304   	if(bat_drv_rx_buff[19]<=0x39)bbb[2]=bat_drv_rx_buff[19]-0x30;
;;;2305   	else bbb[2]=bat_drv_rx_buff[19]-55;
;;;2306   	if(bat_drv_rx_buff[20]<=0x39)bbb[3]=bat_drv_rx_buff[20]-0x30;
;;;2307   	else bbb[3]=bat_drv_rx_buff[20]-55;
;;;2308   
;;;2309   	tempSS=0;
;;;2310   	tempSS=((bbb[0]*4096)+(bbb[1]*256)+(bbb[2]*16)+bbb[3]);
;;;2311   
;;;2312   	bat[0]._min_cell_volt=(tempSS+5)/10;
;;;2313   
;;;2314   
;;;2315   	}*/
;;;2316   
;;;2317   
;;;2318   
;;;2319   }
001532  e8bd8ffe          POP      {r1-r11,pc}
;;;2320   
                          ENDP

                  mnemo_hndl PROC
;;;2321   //-----------------------------------------------
;;;2322   void mnemo_hndl(void)
001536  4a5d              LDR      r2,|L1.5804|
;;;2323   {
;;;2324   if(((ind==iMn_220)||(ind==iMn))&&(sub_ind==0)&&(MNEMO_ON==mnON))
;;;2325   	{
;;;2326   	if(mnemo_cnt)mnemo_cnt--;
001538  495d              LDR      r1,|L1.5808|
00153a  7810              LDRB     r0,[r2,#0]            ;2324  ; a_ind
00153c  2804              CMP      r0,#4                 ;2324
00153e  d001              BEQ      |L1.5444|
001540  2801              CMP      r0,#1                 ;2324
001542  d105              BNE      |L1.5456|
                  |L1.5444|
001544  7850              LDRB     r0,[r2,#1]            ;2324  ; a_ind
001546  b918              CBNZ     r0,|L1.5456|
001548  485a              LDR      r0,|L1.5812|
00154a  7800              LDRB     r0,[r0,#0]            ;2324  ; MNEMO_ON
00154c  2855              CMP      r0,#0x55              ;2324
00154e  d003              BEQ      |L1.5464|
                  |L1.5456|
;;;2327   	}
;;;2328   else mnemo_cnt=MNEMO_TIME;
001550  4859              LDR      r0,|L1.5816|
001552  8800              LDRH     r0,[r0,#0]  ; MNEMO_TIME
001554  7008              STRB     r0,[r1,#0]
                  |L1.5462|
;;;2329   }
001556  4770              BX       lr
                  |L1.5464|
001558  7808              LDRB     r0,[r1,#0]            ;2326  ; mnemo_cnt
00155a  2800              CMP      r0,#0                 ;2326
00155c  d0fb              BEQ      |L1.5462|
00155e  1e40              SUBS     r0,r0,#1              ;2326
001560  7008              STRB     r0,[r1,#0]            ;2326
001562  4770              BX       lr
;;;2330   
                          ENDP

                  adc_init PROC
;;;2331   //-----------------------------------------------
;;;2332   void adc_init(void)
001564  4855              LDR      r0,|L1.5820|
;;;2333   {
;;;2334   
;;;2335   SET_REG(LPC_PINCON->PINSEL1,1,(25-16)*2,2);
001566  6841              LDR      r1,[r0,#4]
001568  f4212140          BIC      r1,r1,#0xc0000
00156c  f4412180          ORR      r1,r1,#0x40000
001570  6041              STR      r1,[r0,#4]
;;;2336   SET_REG(LPC_PINCON->PINSEL1,1,(24-16)*2,2);
001572  6841              LDR      r1,[r0,#4]
001574  f4213140          BIC      r1,r1,#0x30000
001578  f4413180          ORR      r1,r1,#0x10000
00157c  6041              STR      r1,[r0,#4]
;;;2337   SET_REG(LPC_PINCON->PINSEL1,1,(23-16)*2,2);
00157e  6841              LDR      r1,[r0,#4]
001580  f4214140          BIC      r1,r1,#0xc000
001584  f4414180          ORR      r1,r1,#0x4000
001588  6041              STR      r1,[r0,#4]
;;;2338   
;;;2339   
;;;2340   SET_REG(LPC_PINCON->PINMODE1,2,(25-16)*2,2);
00158a  6c41              LDR      r1,[r0,#0x44]
00158c  f4212140          BIC      r1,r1,#0xc0000
001590  f4412100          ORR      r1,r1,#0x80000
001594  6441              STR      r1,[r0,#0x44]
;;;2341   SET_REG(LPC_PINCON->PINMODE1,2,(24-16)*2,2);
001596  6c41              LDR      r1,[r0,#0x44]
001598  f4213140          BIC      r1,r1,#0x30000
00159c  f4413100          ORR      r1,r1,#0x20000
0015a0  6441              STR      r1,[r0,#0x44]
;;;2342   SET_REG(LPC_PINCON->PINMODE1,2,(23-16)*2,2);
0015a2  6c41              LDR      r1,[r0,#0x44]
0015a4  f4214140          BIC      r1,r1,#0xc000
0015a8  f4414100          ORR      r1,r1,#0x8000
0015ac  6441              STR      r1,[r0,#0x44]
;;;2343   
;;;2344   SET_REG(LPC_ADC->ADCR,0,24,3);
0015ae  4844              LDR      r0,|L1.5824|
0015b0  6801              LDR      r1,[r0,#0]
0015b2  f02161e0          BIC      r1,r1,#0x7000000
0015b6  6001              STR      r1,[r0,#0]
;;;2345   
;;;2346   SET_REG(LPC_ADC->ADCR,1,21,1);
0015b8  6801              LDR      r1,[r0,#0]
0015ba  f4411100          ORR      r1,r1,#0x200000
0015be  6001              STR      r1,[r0,#0]
;;;2347   SET_REG(LPC_ADC->ADCR,0,16,1);
0015c0  6801              LDR      r1,[r0,#0]
0015c2  f4213180          BIC      r1,r1,#0x10000
0015c6  6001              STR      r1,[r0,#0]
;;;2348   SET_REG(LPC_ADC->ADCR,1,8,8);
0015c8  6801              LDR      r1,[r0,#0]
0015ca  f421417f          BIC      r1,r1,#0xff00
0015ce  f4417180          ORR      r1,r1,#0x100
0015d2  6001              STR      r1,[r0,#0]
;;;2349   
;;;2350   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;2351   //SET_REG(LPC_GPIO0->FIOPIN,4,5,3);
;;;2352   	
;;;2353   	/*if(adc_ch<=7)*///SET_REG(LPC_ADC->ADCR,1<<5,0,8);
;;;2354        /*else if(adc_ch==8) SET_REG(LPC_ADC->ADCR,1<<2,0,8);
;;;2355        else SET_REG(LPC_ADC->ADCR,1<<4,0,8);*/
;;;2356   
;;;2357   LPC_ADC->ADINTEN     =  (1<< 8);      /* global enable interrupt            */
0015d4  1581              ASRS     r1,r0,#22
0015d6  60c1              STR      r1,[r0,#0xc]
0015d8  483a              LDR      r0,|L1.5828|
0015da  0389              LSLS     r1,r1,#14
0015dc  6001              STR      r1,[r0,#0]
;;;2358   
;;;2359   NVIC_EnableIRQ(ADC_IRQn);             /* enable ADC Interrupt               */
;;;2360   
;;;2361   
;;;2362   }
0015de  4770              BX       lr
;;;2363   
                          ENDP

                  adc_drv7 PROC
;;;2364   //-----------------------------------------------
;;;2365   void adc_drv7(void) //(U - )
0015e0  e92d41f0          PUSH     {r4-r8,lr}
;;;2366   {
;;;2367   //int temp_S;
;;;2368   //char i;
;;;2369   //signed short temp_SS;
;;;2370   
;;;2371   adc_self_ch_disp[0]=abs_pal(adc_self_ch_buff[1]-adc_self_ch_buff[0]);//adc_self_ch_buff[0]&0x0f80;
0015e4  4c38              LDR      r4,|L1.5832|
0015e6  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
0015e8  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
0015ea  1a40              SUBS     r0,r0,r1
0015ec  b200              SXTH     r0,r0
0015ee  f7fffffe          BL       abs_pal
0015f2  1da6              ADDS     r6,r4,#6
0015f4  8030              STRH     r0,[r6,#0]
;;;2372   adc_self_ch_disp[1]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[1]);//adc_self_ch_buff[1]&0x0f80;
0015f6  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
0015f8  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
0015fa  1a40              SUBS     r0,r0,r1
0015fc  b200              SXTH     r0,r0
0015fe  f7fffffe          BL       abs_pal
001602  8070              STRH     r0,[r6,#2]
;;;2373   adc_self_ch_disp[2]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[0]);//adc_self_ch_buff[2]&0x0f80;
001604  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
001606  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
001608  1a40              SUBS     r0,r0,r1
00160a  b200              SXTH     r0,r0
00160c  f7fffffe          BL       abs_pal
001610  80b0              STRH     r0,[r6,#4]
;;;2374   
;;;2375   //adc_self_ch_disp[0]=adc_self_ch_buff[0]&0x0ff0;
;;;2376   //adc_self_ch_disp[1]=adc_self_ch_buff[1]&0x0ff0;
;;;2377   //adc_self_ch_disp[2]=adc_self_ch_buff[2]&0x0ff0;
;;;2378   
;;;2379   
;;;2380   if(adc_self_ch_disp[2]<300)//==adc_self_ch_disp[2])
001612  f44f7196          MOV      r1,#0x12c
;;;2381   	{
;;;2382   	adc_result=adc_self_ch_buff[2];
001616  f1a40596          SUB      r5,r4,#0x96
00161a  4288              CMP      r0,r1                 ;2380
00161c  da02              BGE      |L1.5668|
00161e  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
001620  8568              STRH     r0,[r5,#0x2a]
001622  e00c              B        |L1.5694|
                  |L1.5668|
;;;2383   	} 
;;;2384   else if(adc_self_ch_disp[1]<300)//==adc_self_ch_disp[2])
001624  f9b60002          LDRSH    r0,[r6,#2]  ; adc_self_ch_disp
001628  4288              CMP      r0,r1
00162a  da02              BGE      |L1.5682|
;;;2385   	{
;;;2386   	adc_result=adc_self_ch_buff[1];
00162c  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
00162e  8568              STRH     r0,[r5,#0x2a]
001630  e005              B        |L1.5694|
                  |L1.5682|
;;;2387   	}
;;;2388   else if(adc_self_ch_disp[0]<300)//==adc_self_ch_disp[1])
001632  f9b60000          LDRSH    r0,[r6,#0]  ; adc_self_ch_disp
001636  4288              CMP      r0,r1
001638  da01              BGE      |L1.5694|
;;;2389   	{
;;;2390   	adc_result=adc_self_ch_buff[0];
00163a  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
00163c  8568              STRH     r0,[r5,#0x2a]
                  |L1.5694|
;;;2391   	}
;;;2392       //adc_result=92;
;;;2393   
;;;2394   if(adc_ch_net)
00163e  78ef              LDRB     r7,[r5,#3]  ; adc_ch_net
001640  2600              MOVS     r6,#0
001642  b1d7              CBZ      r7,|L1.5754|
;;;2395   	{
;;;2396   
;;;2397   	main_power_buffer[0]+=(long)(adc_result);
001644  4821              LDR      r0,|L1.5836|
001646  f9b5102a          LDRSH    r1,[r5,#0x2a]  ; adc_result
00164a  6802              LDR      r2,[r0,#0]  ; main_power_buffer
00164c  440a              ADD      r2,r2,r1
00164e  6002              STR      r2,[r0,#0]  ; main_power_buffer
;;;2398   	main_power_buffer[1]+=(long)(adc_result);
001650  6842              LDR      r2,[r0,#4]  ; main_power_buffer
001652  440a              ADD      r2,r2,r1
001654  6042              STR      r2,[r0,#4]  ; main_power_buffer
;;;2399   	main_power_buffer[2]+=(long)(adc_result);
001656  6882              LDR      r2,[r0,#8]  ; main_power_buffer
001658  440a              ADD      r2,r2,r1
00165a  6082              STR      r2,[r0,#8]  ; main_power_buffer
;;;2400   	main_power_buffer[3]+=(long)(adc_result);
00165c  68c2              LDR      r2,[r0,#0xc]  ; main_power_buffer
00165e  4411              ADD      r1,r1,r2
001660  60c1              STR      r1,[r0,#0xc]  ; main_power_buffer
;;;2401   
;;;2402   	adc_net_buff_cnt++;
001662  8e69              LDRH     r1,[r5,#0x32]  ; adc_net_buff_cnt
001664  1c49              ADDS     r1,r1,#1
001666  b209              SXTH     r1,r1
001668  8669              STRH     r1,[r5,#0x32]
;;;2403   	if(adc_net_buff_cnt>=0x1000)
00166a  f5b15f80          CMP      r1,#0x1000
00166e  db00              BLT      |L1.5746|
;;;2404   		{
;;;2405   		adc_net_buff_cnt=0;
001670  866e              STRH     r6,[r5,#0x32]
                  |L1.5746|
;;;2406   		}
;;;2407   	if((adc_net_buff_cnt&0x03ff)==0)
001672  f9b51032          LDRSH    r1,[r5,#0x32]  ; adc_net_buff_cnt
001676  058a              LSLS     r2,r1,#22
001678  e02a              B        |L1.5840|
                  |L1.5754|
00167a  e032              B        |L1.5858|
                  |L1.5756|
                          DCD      Kpes_eb2
                  |L1.5760|
                          DCD      Upes_eb2
                  |L1.5764|
                          DCD      t_ext
                  |L1.5768|
                          DCD      ibt
                  |L1.5772|
                          DCD      t_box
                  |L1.5776|
                          DCD      t_ext_can_nd
                  |L1.5780|
                          DCD      t_ext_can
                  |L1.5784|
                          DCD      BAT_IS_ON
                  |L1.5788|
                          DCD      load_I
                  |L1.5792|
                          DCD      Isumm
                  |L1.5796|
                          DCD      NUMINV
                  |L1.5800|
                          DCD      inv
                  |L1.5804|
                          DCD      a_ind
                  |L1.5808|
                          DCD      mnemo_cnt
                  |L1.5812|
                          DCD      MNEMO_ON
                  |L1.5816|
                          DCD      MNEMO_TIME
                  |L1.5820|
                          DCD      0x4002c000
                  |L1.5824|
                          DCD      0x40034000
                  |L1.5828|
                          DCD      0xe000e100
                  |L1.5832|
                          DCD      ||area_number.18||+0x96
                  |L1.5836|
                          DCD      ||.bss||+0x420
                  |L1.5840|
0016d0  d12a              BNE      |L1.5928|
;;;2408   		{
;;;2409   		#ifdef UKU_220
;;;2410   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;2411   		#else
;;;2412   		#ifdef UKU_220_V2
;;;2413   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;2414   		#else
;;;2415   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>8);
0016d2  1289              ASRS     r1,r1,#10
0016d4  f8502021          LDR      r2,[r0,r1,LSL #2]
0016d8  1212              ASRS     r2,r2,#8
0016da  852a              STRH     r2,[r5,#0x28]
;;;2416   		#endif
;;;2417   		#endif
;;;2418   		main_power_buffer[adc_net_buff_cnt>>10]=0;
0016dc  f8406021          STR      r6,[r0,r1,LSL #2]
0016e0  e022              B        |L1.5928|
                  |L1.5858|
;;;2419   		}
;;;2420   
;;;2421   
;;;2422   	} 
;;;2423   else if(!adc_ch_net)
;;;2424   	{
;;;2425   	adc_buff[adc_ch][adc_ch_cnt]=(long)adc_result;
0016e2  48fd              LDR      r0,|L1.6872|
0016e4  792c              LDRB     r4,[r5,#4]  ; adc_ch
0016e6  796a              LDRB     r2,[r5,#5]  ; adc_ch_cnt
0016e8  eb001384          ADD      r3,r0,r4,LSL #6
0016ec  f9b5102a          LDRSH    r1,[r5,#0x2a]  ; adc_result
0016f0  f8431022          STR      r1,[r3,r2,LSL #2]
;;;2426   	
;;;2427   	if((adc_ch_cnt&0x03)==0)
0016f4  0790              LSLS     r0,r2,#30
0016f6  d10b              BNE      |L1.5904|
;;;2428   		{
;;;2429   		long temp_L;
;;;2430   		char i;
;;;2431   		temp_L=0;
0016f8  2100              MOVS     r1,#0
                  |L1.5882|
;;;2432   		for(i=0;i<16;i++)
;;;2433   			{
;;;2434   			temp_L+=adc_buff[adc_ch][i];
0016fa  f853c020          LDR      r12,[r3,r0,LSL #2]
0016fe  4461              ADD      r1,r1,r12
001700  1c40              ADDS     r0,r0,#1              ;2432
001702  b2c0              UXTB     r0,r0                 ;2432
001704  2810              CMP      r0,#0x10              ;2432
001706  d3f8              BCC      |L1.5882|
;;;2435   			}
;;;2436   		adc_buff_[adc_ch]= (short)(temp_L>>4);
001708  1108              ASRS     r0,r1,#4
00170a  49f4              LDR      r1,|L1.6876|
00170c  f8210014          STRH     r0,[r1,r4,LSL #1]
                  |L1.5904|
;;;2437   
;;;2438   		//adc_buff_[3]=346;
;;;2439   		}
;;;2440   	if(++adc_ch>=16) 
001710  1c64              ADDS     r4,r4,#1
001712  b2e0              UXTB     r0,r4
001714  7128              STRB     r0,[r5,#4]
001716  2810              CMP      r0,#0x10
001718  d306              BCC      |L1.5928|
;;;2441   		{
;;;2442   		adc_ch=0;
00171a  712e              STRB     r6,[r5,#4]
;;;2443   		adc_ch_cnt++;
00171c  1c52              ADDS     r2,r2,#1
00171e  b2d0              UXTB     r0,r2
001720  7168              STRB     r0,[r5,#5]
;;;2444   		if(adc_ch_cnt>=16)adc_ch_cnt=0;
001722  2810              CMP      r0,#0x10
001724  d300              BCC      |L1.5928|
001726  716e              STRB     r6,[r5,#5]
                  |L1.5928|
;;;2445   		}
;;;2446   	}
;;;2447   
;;;2448   //adc_buff[adc_ch][adc_cnt1]=(adc_self_ch_buff[2]+adc_self_ch_buff[1])/2;
;;;2449   
;;;2450   //if(adc_buff[adc_ch][adc_cnt1]<adc_buff_min[adc_ch])adc_buff_min[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;2451   //if(adc_buff[adc_ch][adc_cnt1]>adc_buff_max[adc_ch])adc_buff_max[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;2452   /*
;;;2453   	{
;;;2454   	if((adc_cnt1&0x03)==0)
;;;2455   		{
;;;2456   		temp_S=0;
;;;2457   		for(i=0;i<16;i++)
;;;2458   			{
;;;2459   			temp_S+=adc_buff[adc_ch][i];
;;;2460   			} 
;;;2461            	adc_buff_[adc_ch]=temp_S>>4;
;;;2462             }
;;;2463   	}*/
;;;2464   
;;;2465   
;;;2466   		  
;;;2467   
;;;2468   adc_self_ch_cnt=0;
001728  70ae              STRB     r6,[r5,#2]
;;;2469   
;;;2470   adc_ch_net++;
00172a  1c7f              ADDS     r7,r7,#1
;;;2471   adc_ch_net&=1;
00172c  f0070001          AND      r0,r7,#1
001730  70e8              STRB     r0,[r5,#3]
;;;2472   
;;;2473   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;2474   //SET_REG(LPC_GPIO0->FIOPIN,adc_ch,5,3);
;;;2475   
;;;2476   if(adc_ch_net)
;;;2477   	{
;;;2478   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;2479   	//LPC_GPIO2->FIOPIN|=(1<<7);
;;;2480   	SET_REG(LPC_ADC->ADCR,1<<2,0,8);
001732  4aeb              LDR      r2,|L1.6880|
001734  b128              CBZ      r0,|L1.5954|
001736  6810              LDR      r0,[r2,#0]
001738  f02000ff          BIC      r0,r0,#0xff
00173c  1d00              ADDS     r0,r0,#4
00173e  6010              STR      r0,[r2,#0]
001740  e03b              B        |L1.6074|
                  |L1.5954|
;;;2481   	}
;;;2482   else
;;;2483   	{
;;;2484   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;2485   	//LPC_GPIO2->FIOPIN&=~(1<<7);
;;;2486   	if(!(adc_ch&(1<<3)))SET_REG(LPC_ADC->ADCR,1<<0,0,8);
001742  7929              LDRB     r1,[r5,#4]  ; adc_ch
001744  0708              LSLS     r0,r1,#28
001746  d405              BMI      |L1.5972|
001748  6810              LDR      r0,[r2,#0]
00174a  f02000ff          BIC      r0,r0,#0xff
00174e  1c40              ADDS     r0,r0,#1
001750  6010              STR      r0,[r2,#0]
001752  e004              B        |L1.5982|
                  |L1.5972|
;;;2487   	else 			SET_REG(LPC_ADC->ADCR,1<<1,0,8);
001754  6810              LDR      r0,[r2,#0]
001756  f02000ff          BIC      r0,r0,#0xff
00175a  1c80              ADDS     r0,r0,#2
00175c  6010              STR      r0,[r2,#0]
                  |L1.5982|
;;;2488   
;;;2489   
;;;2490   	SET_REG(LPC_GPIO0->FIODIR,1,28,1);
00175e  48e1              LDR      r0,|L1.6884|
001760  6803              LDR      r3,[r0,#0]
001762  f0435380          ORR      r3,r3,#0x10000000
001766  6003              STR      r3,[r0,#0]
;;;2491   	SET_REG(LPC_GPIO1->FIODIR,1,30,1);
001768  6a03              LDR      r3,[r0,#0x20]
00176a  f0434380          ORR      r3,r3,#0x40000000
00176e  6203              STR      r3,[r0,#0x20]
;;;2492   	SET_REG(LPC_GPIO3->FIODIR,1,26,1);
001770  6e03              LDR      r3,[r0,#0x60]
001772  f0436380          ORR      r3,r3,#0x4000000
001776  6603              STR      r3,[r0,#0x60]
;;;2493   
;;;2494   	if(!(adc_ch&(1<<0)))SET_REG(LPC_GPIO0->FIOPIN,0,28,1);
001778  07cb              LSLS     r3,r1,#31
00177a  d00a              BEQ      |L1.6034|
;;;2495   	else 			SET_REG(LPC_GPIO0->FIOPIN,1,28,1);
00177c  6943              LDR      r3,[r0,#0x14]
00177e  f0435380          ORR      r3,r3,#0x10000000
001782  6143              STR      r3,[r0,#0x14]
                  |L1.6020|
;;;2496   
;;;2497   	if(!(adc_ch&(1<<1)))SET_REG(LPC_GPIO1->FIOPIN,0,30,1);
001784  078b              LSLS     r3,r1,#30
001786  d409              BMI      |L1.6044|
001788  6b43              LDR      r3,[r0,#0x34]
00178a  f0234380          BIC      r3,r3,#0x40000000
00178e  6343              STR      r3,[r0,#0x34]
001790  e008              B        |L1.6052|
                  |L1.6034|
001792  6943              LDR      r3,[r0,#0x14]         ;2494
001794  f0235380          BIC      r3,r3,#0x10000000     ;2494
001798  6143              STR      r3,[r0,#0x14]         ;2494
00179a  e7f3              B        |L1.6020|
                  |L1.6044|
;;;2498   	else 			SET_REG(LPC_GPIO1->FIOPIN,1,30,1);
00179c  6b43              LDR      r3,[r0,#0x34]
00179e  f0434380          ORR      r3,r3,#0x40000000
0017a2  6343              STR      r3,[r0,#0x34]
                  |L1.6052|
;;;2499   
;;;2500   	if(!(adc_ch&(1<<2)))SET_REG(LPC_GPIO3->FIOPIN,0,26,1);
0017a4  0749              LSLS     r1,r1,#29
0017a6  d404              BMI      |L1.6066|
0017a8  6f41              LDR      r1,[r0,#0x74]
0017aa  f0216180          BIC      r1,r1,#0x4000000
0017ae  6741              STR      r1,[r0,#0x74]
0017b0  e003              B        |L1.6074|
                  |L1.6066|
;;;2501   	else 			SET_REG(LPC_GPIO3->FIOPIN,1,26,1);
0017b2  6f41              LDR      r1,[r0,#0x74]
0017b4  f0416180          ORR      r1,r1,#0x4000000
0017b8  6741              STR      r1,[r0,#0x74]
                  |L1.6074|
;;;2502   	}
;;;2503   	
;;;2504   
;;;2505   
;;;2506   
;;;2507   LPC_ADC->ADCR |=  (1<<24);
0017ba  6810              LDR      r0,[r2,#0]
0017bc  f0407080          ORR      r0,r0,#0x1000000
0017c0  6010              STR      r0,[r2,#0]
                  |L1.6082|
;;;2508   
;;;2509   }
0017c2  e8bd81f0          POP      {r4-r8,pc}
;;;2510   
                          ENDP

                  adc_drv6 PROC
;;;2511   //-----------------------------------------------
;;;2512   void adc_drv6(void) //(   )
0017c6  e92d41f0          PUSH     {r4-r8,lr}
;;;2513   {
;;;2514   //int temp_S;
;;;2515   //char i;
;;;2516   //signed short temp_SS;
;;;2517   
;;;2518   adc_self_ch_disp[0]=abs_pal(adc_self_ch_buff[1]-adc_self_ch_buff[0]);//adc_self_ch_buff[0]&0x0f80;
0017ca  4cc7              LDR      r4,|L1.6888|
0017cc  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
0017ce  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
0017d0  1a40              SUBS     r0,r0,r1
0017d2  b200              SXTH     r0,r0
0017d4  f7fffffe          BL       abs_pal
0017d8  1da5              ADDS     r5,r4,#6
0017da  8028              STRH     r0,[r5,#0]
;;;2519   adc_self_ch_disp[1]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[1]);//adc_self_ch_buff[1]&0x0f80;
0017dc  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
0017de  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
0017e0  1a40              SUBS     r0,r0,r1
0017e2  b200              SXTH     r0,r0
0017e4  f7fffffe          BL       abs_pal
0017e8  8068              STRH     r0,[r5,#2]
;;;2520   adc_self_ch_disp[2]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[0]);//adc_self_ch_buff[2]&0x0f80;
0017ea  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
0017ec  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
0017ee  1a40              SUBS     r0,r0,r1
0017f0  b200              SXTH     r0,r0
0017f2  f7fffffe          BL       abs_pal
0017f6  80a8              STRH     r0,[r5,#4]
;;;2521   
;;;2522   //adc_self_ch_disp[0]=adc_self_ch_buff[0]&0x0ff0;
;;;2523   //adc_self_ch_disp[1]=adc_self_ch_buff[1]&0x0ff0;
;;;2524   //adc_self_ch_disp[2]=adc_self_ch_buff[2]&0x0ff0;
;;;2525   
;;;2526   
;;;2527   if(adc_self_ch_disp[2]<300)//==adc_self_ch_disp[2])
0017f8  f44f7196          MOV      r1,#0x12c
;;;2528   	{
;;;2529   	adc_result=adc_self_ch_buff[2];
0017fc  f1a40696          SUB      r6,r4,#0x96
001800  4288              CMP      r0,r1                 ;2527
001802  da02              BGE      |L1.6154|
001804  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
001806  8570              STRH     r0,[r6,#0x2a]
001808  e00c              B        |L1.6180|
                  |L1.6154|
;;;2530   	} 
;;;2531   else if(adc_self_ch_disp[1]<300)//==adc_self_ch_disp[2])
00180a  f9b50002          LDRSH    r0,[r5,#2]  ; adc_self_ch_disp
00180e  4288              CMP      r0,r1
001810  da02              BGE      |L1.6168|
;;;2532   	{
;;;2533   	adc_result=adc_self_ch_buff[1];
001812  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
001814  8570              STRH     r0,[r6,#0x2a]
001816  e005              B        |L1.6180|
                  |L1.6168|
;;;2534   	}
;;;2535   else if(adc_self_ch_disp[0]<300)//==adc_self_ch_disp[1])
001818  f9b50000          LDRSH    r0,[r5,#0]  ; adc_self_ch_disp
00181c  4288              CMP      r0,r1
00181e  da01              BGE      |L1.6180|
;;;2536   	{
;;;2537   	adc_result=adc_self_ch_buff[0];
001820  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
001822  8570              STRH     r0,[r6,#0x2a]
                  |L1.6180|
;;;2538   	}
;;;2539       //adc_result=92;
;;;2540   
;;;2541   if(adc_ch_net)
001824  78f7              LDRB     r7,[r6,#3]  ; adc_ch_net
001826  2200              MOVS     r2,#0
001828  b3f7              CBZ      r7,|L1.6312|
;;;2542   	{
;;;2543   
;;;2544   	if(adc_window_flag)
;;;2545   		{
;;;2546   		main_power_buffer[0]+=(long)(adc_result>>2);
00182a  48ac              LDR      r0,|L1.6876|
00182c  79b3              LDRB     r3,[r6,#6]            ;2544  ; adc_window_flag
00182e  3020              ADDS     r0,r0,#0x20
001830  b18b              CBZ      r3,|L1.6230|
001832  f9b6102a          LDRSH    r1,[r6,#0x2a]  ; adc_result
001836  6804              LDR      r4,[r0,#0]  ; main_power_buffer
001838  eb0404a1          ADD      r4,r4,r1,ASR #2
00183c  6004              STR      r4,[r0,#0]  ; main_power_buffer
;;;2547   		main_power_buffer[1]+=(long)(adc_result>>2);
00183e  6844              LDR      r4,[r0,#4]  ; main_power_buffer
001840  eb0404a1          ADD      r4,r4,r1,ASR #2
001844  6044              STR      r4,[r0,#4]  ; main_power_buffer
;;;2548   		main_power_buffer[2]+=(long)(adc_result>>2);
001846  6884              LDR      r4,[r0,#8]  ; main_power_buffer
001848  eb0404a1          ADD      r4,r4,r1,ASR #2
00184c  6084              STR      r4,[r0,#8]  ; main_power_buffer
;;;2549   		main_power_buffer[3]+=(long)(adc_result>>2);
00184e  68c4              LDR      r4,[r0,#0xc]  ; main_power_buffer
001850  eb0401a1          ADD      r1,r4,r1,ASR #2
001854  60c1              STR      r1,[r0,#0xc]  ; main_power_buffer
                  |L1.6230|
;;;2550   		}
;;;2551   //	main_power_buffer[4]+=(long)(adc_result>>2);
;;;2552   //	main_power_buffer[5]+=(long)(adc_result>>2);
;;;2553   //	main_power_buffer[6]+=(long)(adc_result>>2);
;;;2554   //	main_power_buffer[7]+=(long)(adc_result>>2);
;;;2555   //	main_power_buffer_cnt++;
;;;2556   
;;;2557   
;;;2558   	if(adc_result<100)
001856  f9b6102a          LDRSH    r1,[r6,#0x2a]  ; adc_result
00185a  2964              CMP      r1,#0x64
00185c  da03              BGE      |L1.6246|
;;;2559   		{
;;;2560   		adc_zero_cnt++;
00185e  8df1              LDRH     r1,[r6,#0x2e]  ; adc_zero_cnt
001860  1c49              ADDS     r1,r1,#1
001862  85f1              STRH     r1,[r6,#0x2e]
001864  e000              B        |L1.6248|
                  |L1.6246|
;;;2561   		}
;;;2562   	else adc_zero_cnt=0;
001866  85f2              STRH     r2,[r6,#0x2e]
                  |L1.6248|
;;;2563   
;;;2564   	if(adc_zero_cnt>=2000)
001868  f9b6402e          LDRSH    r4,[r6,#0x2e]  ; adc_zero_cnt
00186c  f44f61fa          MOV      r1,#0x7d0
001870  428c              CMP      r4,r1
001872  db05              BLT      |L1.6272|
;;;2565   		{
;;;2566   		adc_zero_cnt=2000;
001874  85f1              STRH     r1,[r6,#0x2e]
;;;2567   		main_power_buffer[0]=0;
001876  6002              STR      r2,[r0,#0]  ; main_power_buffer
;;;2568   		main_power_buffer[1]=0;
001878  6042              STR      r2,[r0,#4]  ; main_power_buffer
;;;2569   		main_power_buffer[2]=0;
00187a  6082              STR      r2,[r0,#8]  ; main_power_buffer
;;;2570   		main_power_buffer[3]=0;
00187c  60c2              STR      r2,[r0,#0xc]  ; main_power_buffer
;;;2571   		net_buff_=0;
00187e  8532              STRH     r2,[r6,#0x28]
                  |L1.6272|
;;;2572   		}
;;;2573   
;;;2574   	if(adc_zero_cnt==5)
001880  8df1              LDRH     r1,[r6,#0x2e]  ; adc_zero_cnt
001882  2905              CMP      r1,#5
001884  d146              BNE      |L1.6420|
;;;2575   		{
;;;2576   		
;;;2577   		if(adc_window_flag)
001886  b1a3              CBZ      r3,|L1.6322|
;;;2578   			{
;;;2579   			adc_gorb_cnt++;
001888  8db1              LDRH     r1,[r6,#0x2c]  ; adc_gorb_cnt
00188a  1c49              ADDS     r1,r1,#1
00188c  b209              SXTH     r1,r1
00188e  85b1              STRH     r1,[r6,#0x2c]
;;;2580   			if(adc_gorb_cnt>=512)
001890  f5b17f00          CMP      r1,#0x200
001894  db00              BLT      |L1.6296|
;;;2581   				{
;;;2582   				adc_gorb_cnt=0;
001896  85b2              STRH     r2,[r6,#0x2c]
                  |L1.6296|
;;;2583   				//net_buff_=main_power_buffer[0]>>8;
;;;2584   				//main_power_buffer[0]=0;
;;;2585   			   	}
;;;2586   
;;;2587   			if((adc_gorb_cnt&0x007f)==0)
001898  f9b6102c          LDRSH    r1,[r6,#0x2c]  ; adc_gorb_cnt
00189c  064c              LSLS     r4,r1,#25
00189e  d108              BNE      |L1.6322|
;;;2588   				{
;;;2589   				net_buff_=main_power_buffer[adc_gorb_cnt>>7]>>8;
0018a0  11c9              ASRS     r1,r1,#7
0018a2  f8504021          LDR      r4,[r0,r1,LSL #2]
0018a6  e000              B        |L1.6314|
                  |L1.6312|
0018a8  e011              B        |L1.6350|
                  |L1.6314|
0018aa  1224              ASRS     r4,r4,#8
0018ac  8534              STRH     r4,[r6,#0x28]
;;;2590   				main_power_buffer[adc_gorb_cnt>>7]=0;
0018ae  f8402021          STR      r2,[r0,r1,LSL #2]
                  |L1.6322|
;;;2591   				}
;;;2592   			}
;;;2593   
;;;2594   		//LPC_GPIO2->FIODIR|=(1<<8);
;;;2595   		//LPC_GPIO2->FIOPIN^=(1<<8);
;;;2596   
;;;2597   		if((adc_window_cnt>150)&&(adc_window_flag))
0018b2  f9b60030          LDRSH    r0,[r6,#0x30]  ; adc_window_cnt
0018b6  2896              CMP      r0,#0x96
0018b8  dd01              BLE      |L1.6334|
0018ba  b103              CBZ      r3,|L1.6334|
;;;2598   			{
;;;2599   			adc_window_flag=0;
0018bc  71b2              STRB     r2,[r6,#6]
                  |L1.6334|
;;;2600   
;;;2601   			
;;;2602   			}
;;;2603   		if((adc_window_cnt>30)&&(adc_window_cnt<70)&&(!adc_window_flag))
0018be  381f              SUBS     r0,r0,#0x1f
0018c0  2827              CMP      r0,#0x27
0018c2  d227              BCS      |L1.6420|
0018c4  79b0              LDRB     r0,[r6,#6]  ; adc_window_flag
0018c6  bb28              CBNZ     r0,|L1.6420|
;;;2604   			{
;;;2605   			adc_window_flag=1;
0018c8  2001              MOVS     r0,#1
0018ca  71b0              STRB     r0,[r6,#6]
0018cc  e022              B        |L1.6420|
                  |L1.6350|
;;;2606   
;;;2607   			//LPC_GPIO2->FIODIR|=(1<<8);
;;;2608   			//LPC_GPIO2->FIOPIN|=(1<<8);
;;;2609   			}
;;;2610   		}
;;;2611   	} 
;;;2612   else if(!adc_ch_net)
;;;2613   	{
;;;2614   	adc_buff[adc_ch][adc_ch_cnt]=(long)adc_result;
0018ce  4882              LDR      r0,|L1.6872|
0018d0  7935              LDRB     r5,[r6,#4]  ; adc_ch
0018d2  7973              LDRB     r3,[r6,#5]  ; adc_ch_cnt
0018d4  eb001485          ADD      r4,r0,r5,LSL #6
0018d8  f9b6102a          LDRSH    r1,[r6,#0x2a]  ; adc_result
0018dc  f8441023          STR      r1,[r4,r3,LSL #2]
;;;2615   	
;;;2616   	if((adc_ch_cnt&0x03)==0)
0018e0  0798              LSLS     r0,r3,#30
0018e2  d10b              BNE      |L1.6396|
;;;2617   		{
;;;2618   		long temp_L;
;;;2619   		char i;
;;;2620   		temp_L=0;
0018e4  2100              MOVS     r1,#0
                  |L1.6374|
;;;2621   		for(i=0;i<16;i++)
;;;2622   			{
;;;2623   			temp_L+=adc_buff[adc_ch][i];
0018e6  f854c020          LDR      r12,[r4,r0,LSL #2]
0018ea  4461              ADD      r1,r1,r12
0018ec  1c40              ADDS     r0,r0,#1              ;2621
0018ee  b2c0              UXTB     r0,r0                 ;2621
0018f0  2810              CMP      r0,#0x10              ;2621
0018f2  d3f8              BCC      |L1.6374|
;;;2624   			}
;;;2625   		adc_buff_[adc_ch]= (short)(temp_L>>4);
0018f4  1108              ASRS     r0,r1,#4
0018f6  4979              LDR      r1,|L1.6876|
0018f8  f8210015          STRH     r0,[r1,r5,LSL #1]
                  |L1.6396|
;;;2626   
;;;2627   		//adc_buff_[3]=346;
;;;2628   		}
;;;2629   	if(++adc_ch>=16) 
0018fc  1c6d              ADDS     r5,r5,#1
0018fe  b2e8              UXTB     r0,r5
001900  7130              STRB     r0,[r6,#4]
001902  2810              CMP      r0,#0x10
001904  d306              BCC      |L1.6420|
;;;2630   		{
;;;2631   		adc_ch=0;
001906  7132              STRB     r2,[r6,#4]
;;;2632   		adc_ch_cnt++;
001908  1c5b              ADDS     r3,r3,#1
00190a  b2d8              UXTB     r0,r3
00190c  7170              STRB     r0,[r6,#5]
;;;2633   		if(adc_ch_cnt>=16)adc_ch_cnt=0;
00190e  2810              CMP      r0,#0x10
001910  d300              BCC      |L1.6420|
001912  7172              STRB     r2,[r6,#5]
                  |L1.6420|
;;;2634   		}
;;;2635   	}
;;;2636   
;;;2637   //adc_buff[adc_ch][adc_cnt1]=(adc_self_ch_buff[2]+adc_self_ch_buff[1])/2;
;;;2638   
;;;2639   //if(adc_buff[adc_ch][adc_cnt1]<adc_buff_min[adc_ch])adc_buff_min[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;2640   //if(adc_buff[adc_ch][adc_cnt1]>adc_buff_max[adc_ch])adc_buff_max[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;2641   /*
;;;2642   	{
;;;2643   	if((adc_cnt1&0x03)==0)
;;;2644   		{
;;;2645   		temp_S=0;
;;;2646   		for(i=0;i<16;i++)
;;;2647   			{
;;;2648   			temp_S+=adc_buff[adc_ch][i];
;;;2649   			} 
;;;2650            	adc_buff_[adc_ch]=temp_S>>4;
;;;2651             }
;;;2652   	}*/
;;;2653   
;;;2654   
;;;2655   		  
;;;2656   
;;;2657   adc_self_ch_cnt=0;
001914  70b2              STRB     r2,[r6,#2]
;;;2658   
;;;2659   adc_ch_net++;
001916  1c7f              ADDS     r7,r7,#1
;;;2660   adc_ch_net&=1;
001918  f0070001          AND      r0,r7,#1
00191c  70f0              STRB     r0,[r6,#3]
;;;2661   
;;;2662   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;2663   //SET_REG(LPC_GPIO0->FIOPIN,adc_ch,5,3);
;;;2664   
;;;2665   if(adc_ch_net)
;;;2666   	{
;;;2667   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;2668   	//LPC_GPIO2->FIOPIN|=(1<<7);
;;;2669   	SET_REG(LPC_ADC->ADCR,1<<2,0,8);
00191e  4a70              LDR      r2,|L1.6880|
001920  b128              CBZ      r0,|L1.6446|
001922  6810              LDR      r0,[r2,#0]
001924  f02000ff          BIC      r0,r0,#0xff
001928  1d00              ADDS     r0,r0,#4
00192a  6010              STR      r0,[r2,#0]
00192c  e03b              B        |L1.6566|
                  |L1.6446|
;;;2670   	}
;;;2671   else
;;;2672   	{
;;;2673   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;2674   	//LPC_GPIO2->FIOPIN&=~(1<<7);
;;;2675   	if(!(adc_ch&(1<<3)))SET_REG(LPC_ADC->ADCR,1<<0,0,8);
00192e  7931              LDRB     r1,[r6,#4]  ; adc_ch
001930  0708              LSLS     r0,r1,#28
001932  d405              BMI      |L1.6464|
001934  6810              LDR      r0,[r2,#0]
001936  f02000ff          BIC      r0,r0,#0xff
00193a  1c40              ADDS     r0,r0,#1
00193c  6010              STR      r0,[r2,#0]
00193e  e004              B        |L1.6474|
                  |L1.6464|
;;;2676   	else 			SET_REG(LPC_ADC->ADCR,1<<1,0,8);
001940  6810              LDR      r0,[r2,#0]
001942  f02000ff          BIC      r0,r0,#0xff
001946  1c80              ADDS     r0,r0,#2
001948  6010              STR      r0,[r2,#0]
                  |L1.6474|
;;;2677   
;;;2678   
;;;2679   	SET_REG(LPC_GPIO0->FIODIR,1,28,1);
00194a  4866              LDR      r0,|L1.6884|
00194c  6803              LDR      r3,[r0,#0]
00194e  f0435380          ORR      r3,r3,#0x10000000
001952  6003              STR      r3,[r0,#0]
;;;2680   	SET_REG(LPC_GPIO1->FIODIR,1,30,1);
001954  6a03              LDR      r3,[r0,#0x20]
001956  f0434380          ORR      r3,r3,#0x40000000
00195a  6203              STR      r3,[r0,#0x20]
;;;2681   	SET_REG(LPC_GPIO3->FIODIR,1,26,1);
00195c  6e03              LDR      r3,[r0,#0x60]
00195e  f0436380          ORR      r3,r3,#0x4000000
001962  6603              STR      r3,[r0,#0x60]
;;;2682   
;;;2683   	if(!(adc_ch&(1<<0)))SET_REG(LPC_GPIO0->FIOPIN,0,28,1);
001964  07cb              LSLS     r3,r1,#31
001966  d00a              BEQ      |L1.6526|
;;;2684   	else 			SET_REG(LPC_GPIO0->FIOPIN,1,28,1);
001968  6943              LDR      r3,[r0,#0x14]
00196a  f0435380          ORR      r3,r3,#0x10000000
00196e  6143              STR      r3,[r0,#0x14]
                  |L1.6512|
;;;2685   
;;;2686   	if(!(adc_ch&(1<<1)))SET_REG(LPC_GPIO1->FIOPIN,0,30,1);
001970  078b              LSLS     r3,r1,#30
001972  d409              BMI      |L1.6536|
001974  6b43              LDR      r3,[r0,#0x34]
001976  f0234380          BIC      r3,r3,#0x40000000
00197a  6343              STR      r3,[r0,#0x34]
00197c  e008              B        |L1.6544|
                  |L1.6526|
00197e  6943              LDR      r3,[r0,#0x14]         ;2683
001980  f0235380          BIC      r3,r3,#0x10000000     ;2683
001984  6143              STR      r3,[r0,#0x14]         ;2683
001986  e7f3              B        |L1.6512|
                  |L1.6536|
;;;2687   	else 			SET_REG(LPC_GPIO1->FIOPIN,1,30,1);
001988  6b43              LDR      r3,[r0,#0x34]
00198a  f0434380          ORR      r3,r3,#0x40000000
00198e  6343              STR      r3,[r0,#0x34]
                  |L1.6544|
;;;2688   
;;;2689   	if(!(adc_ch&(1<<2)))SET_REG(LPC_GPIO3->FIOPIN,0,26,1);
001990  0749              LSLS     r1,r1,#29
001992  d404              BMI      |L1.6558|
001994  6f41              LDR      r1,[r0,#0x74]
001996  f0216180          BIC      r1,r1,#0x4000000
00199a  6741              STR      r1,[r0,#0x74]
00199c  e003              B        |L1.6566|
                  |L1.6558|
;;;2690   	else 			SET_REG(LPC_GPIO3->FIOPIN,1,26,1);
00199e  6f41              LDR      r1,[r0,#0x74]
0019a0  f0416180          ORR      r1,r1,#0x4000000
0019a4  6741              STR      r1,[r0,#0x74]
                  |L1.6566|
;;;2691   	}
;;;2692   	
;;;2693   
;;;2694   
;;;2695   
;;;2696   LPC_ADC->ADCR |=  (1<<24);
0019a6  6810              LDR      r0,[r2,#0]
0019a8  f0407080          ORR      r0,r0,#0x1000000
0019ac  6010              STR      r0,[r2,#0]
                  |L1.6574|
;;;2697   
;;;2698   }
0019ae  e708              B        |L1.6082|
;;;2699    /*
                          ENDP

                  avg_hndl PROC
;;;2767   //-----------------------------------------------
;;;2768   void avg_hndl(void)
0019b0  b5f0              PUSH     {r4-r7,lr}
;;;2769   { 
;;;2770   char i;
;;;2771   
;;;2772   //#define AVGCNTMAX	5
;;;2773   if(avg_main_cnt)
0019b2  4c4d              LDR      r4,|L1.6888|
0019b4  3c96              SUBS     r4,r4,#0x96
0019b6  f9b40024          LDRSH    r0,[r4,#0x24]  ; avg_main_cnt
0019ba  b110              CBZ      r0,|L1.6594|
;;;2774   	{
;;;2775   	avg_main_cnt--;
0019bc  1e40              SUBS     r0,r0,#1
0019be  84a0              STRH     r0,[r4,#0x24]
;;;2776   	goto avg_hndl_end;
0019c0  e088              B        |L1.6868|
                  |L1.6594|
;;;2777   	}                 
;;;2778   
;;;2779   avg_num=0;
0019c2  2500              MOVS     r5,#0
0019c4  7325              STRB     r5,[r4,#0xc]
;;;2780   
;;;2781   for(i=0;i<NUMIST;i++)
0019c6  2000              MOVS     r0,#0
0019c8  4949              LDR      r1,|L1.6896|
;;;2782   	{
;;;2783   	if((bps[i]._state==bsWRK)&&(bps[i]._cnt<20))avg_num++;
0019ca  4b48              LDR      r3,|L1.6892|
0019cc  f9b12000          LDRSH    r2,[r1,#0]            ;2781
0019d0  e010              B        |L1.6644|
                  |L1.6610|
0019d2  ebc001c0          RSB      r1,r0,r0,LSL #3
0019d6  eb011100          ADD      r1,r1,r0,LSL #4
0019da  eb030181          ADD      r1,r3,r1,LSL #2
0019de  788e              LDRB     r6,[r1,#2]
0019e0  2e01              CMP      r6,#1
0019e2  d105              BNE      |L1.6640|
0019e4  78c9              LDRB     r1,[r1,#3]
0019e6  2914              CMP      r1,#0x14
0019e8  d202              BCS      |L1.6640|
0019ea  7b21              LDRB     r1,[r4,#0xc]  ; avg_num
0019ec  1c49              ADDS     r1,r1,#1
0019ee  7321              STRB     r1,[r4,#0xc]
                  |L1.6640|
0019f0  1c40              ADDS     r0,r0,#1              ;2781
0019f2  b2c0              UXTB     r0,r0                 ;2781
                  |L1.6644|
0019f4  4290              CMP      r0,r2                 ;2781
0019f6  dbec              BLT      |L1.6610|
;;;2784   	}
;;;2785   
;;;2786   /*if((K[NUMI]>=1)&&(bps_state[0]==ssWRK))	avg_num++;
;;;2787   if((K[NUMI]>=2)&&(bps_state[1]==ssWRK))	avg_num++;
;;;2788   if((K[NUMI]>=3)&&(bps_state[2]==ssWRK))	avg_num++;*/
;;;2789   
;;;2790   	
;;;2791   if(avg_num<2)
0019f8  7b26              LDRB     r6,[r4,#0xc]  ; avg_num
0019fa  2e02              CMP      r6,#2
0019fc  d36a              BCC      |L1.6868|
;;;2792   	{
;;;2793   	goto avg_hndl_end;
;;;2794   	}
;;;2795   	
;;;2796   else
;;;2797   	{
;;;2798   	i_avg_min=5000;
0019fe  f2413088          MOV      r0,#0x1388
001a02  6760              STR      r0,[r4,#0x74]  ; i_avg_min
;;;2799   	i_avg_max=0;
001a04  6725              STR      r5,[r4,#0x70]  ; i_avg_max
;;;2800   	i_avg_summ=0;
001a06  67a5              STR      r5,[r4,#0x78]  ; i_avg_summ
;;;2801   	for(i=0;i<NUMIST;i++)
001a08  2100              MOVS     r1,#0
001a0a  e016              B        |L1.6714|
                  |L1.6668|
;;;2802   		{
;;;2803   		if(bps[i]._state==bsWRK)
001a0c  ebc100c1          RSB      r0,r1,r1,LSL #3
001a10  eb001001          ADD      r0,r0,r1,LSL #4
001a14  eb030080          ADD      r0,r3,r0,LSL #2
001a18  7887              LDRB     r7,[r0,#2]
001a1a  2f01              CMP      r7,#1
001a1c  d10b              BNE      |L1.6710|
;;;2804   			{
;;;2805   			if(bps[i]._Ii>i_avg_max)i_avg_max=bps[i]._Ii;
001a1e  6a40              LDR      r0,[r0,#0x24]
001a20  6f27              LDR      r7,[r4,#0x70]  ; i_avg_max
001a22  42b8              CMP      r0,r7
001a24  dd00              BLE      |L1.6696|
001a26  6720              STR      r0,[r4,#0x70]  ; i_avg_max
                  |L1.6696|
;;;2806   			if(bps[i]._Ii<i_avg_min)i_avg_min=bps[i]._Ii;
001a28  6f67              LDR      r7,[r4,#0x74]  ; i_avg_min
001a2a  42b8              CMP      r0,r7
001a2c  da00              BGE      |L1.6704|
001a2e  6760              STR      r0,[r4,#0x74]  ; i_avg_min
                  |L1.6704|
;;;2807   			
;;;2808   			i_avg_summ+=bps[i]._Ii;
001a30  6fa7              LDR      r7,[r4,#0x78]  ; i_avg_summ
001a32  4438              ADD      r0,r0,r7
001a34  67a0              STR      r0,[r4,#0x78]  ; i_avg_summ
                  |L1.6710|
001a36  1c49              ADDS     r1,r1,#1              ;2801
001a38  b2c9              UXTB     r1,r1                 ;2801
                  |L1.6714|
001a3a  4291              CMP      r1,r2                 ;2801
001a3c  dbe6              BLT      |L1.6668|
;;;2809   			}
;;;2810   		}
;;;2811   	i_avg=i_avg_summ/avg_num;	
001a3e  6fa0              LDR      r0,[r4,#0x78]  ; i_avg_summ
001a40  fb90f6f6          SDIV     r6,r0,r6
001a44  67e6              STR      r6,[r4,#0x7c]  ; i_avg
;;;2812   	
;;;2813   	if(i_avg_min==0)i_avg_min=1;
001a46  6f60              LDR      r0,[r4,#0x74]  ; i_avg_min
001a48  2101              MOVS     r1,#1                 ;2783
001a4a  b900              CBNZ     r0,|L1.6734|
001a4c  6761              STR      r1,[r4,#0x74]  ; i_avg_min
                  |L1.6734|
;;;2814   
;;;2815   	avg=i_avg_max;
001a4e  4f26              LDR      r7,|L1.6888|
001a50  6f20              LDR      r0,[r4,#0x70]  ; i_avg_max
001a52  3f16              SUBS     r7,r7,#0x16
;;;2816   	avg*=100;
001a54  f04f0c64          MOV      r12,#0x64
001a58  fb00f00c          MUL      r0,r0,r12
;;;2817   	avg/=i_avg_min;
001a5c  f8d4c074          LDR      r12,[r4,#0x74]  ; i_avg_min
001a60  fb90f0fc          SDIV     r0,r0,r12
001a64  6038              STR      r0,[r7,#0]  ; avg
;;;2818   
;;;2819   	if(avg>160) bAVG=1;
001a66  28a0              CMP      r0,#0xa0
001a68  dd00              BLE      |L1.6764|
001a6a  72e1              STRB     r1,[r4,#0xb]
                  |L1.6764|
;;;2820   	if(avg<120) bAVG=0;
001a6c  2878              CMP      r0,#0x78
001a6e  da00              BGE      |L1.6770|
001a70  72e5              STRB     r5,[r4,#0xb]
                  |L1.6770|
;;;2821   
;;;2822   	if(bAVG==1)
001a72  7ae0              LDRB     r0,[r4,#0xb]  ; bAVG
001a74  2801              CMP      r0,#1
001a76  d12d              BNE      |L1.6868|
;;;2823   		{
;;;2824   		for(i=0;i<NUMIST;i++)
001a78  2100              MOVS     r1,#0
;;;2825   			{
;;;2826   			if(bps[i]._state==bsWRK)
;;;2827   				{
;;;2828   				if(bps[i]._Ii>i_avg)bps[i]._x_--;
;;;2829   				if(bps[i]._Ii<i_avg)bps[i]._x_++;
;;;2830   			
;;;2831   				if(bps[i]._x_<-50)bps[i]._x_=-50;
001a7a  f06f0431          MVN      r4,#0x31
001a7e  e027              B        |L1.6864|
                  |L1.6784|
001a80  ebc100c1          RSB      r0,r1,r1,LSL #3       ;2826
001a84  eb001001          ADD      r0,r0,r1,LSL #4       ;2826
001a88  eb030080          ADD      r0,r3,r0,LSL #2       ;2826
001a8c  7885              LDRB     r5,[r0,#2]            ;2826
001a8e  2d01              CMP      r5,#1                 ;2826
001a90  d11c              BNE      |L1.6860|
001a92  6a45              LDR      r5,[r0,#0x24]         ;2828
001a94  42b5              CMP      r5,r6                 ;2828
001a96  dd05              BLE      |L1.6820|
001a98  f8b05050          LDRH     r5,[r0,#0x50]         ;2828
001a9c  f1a50501          SUB      r5,r5,#1              ;2828
001aa0  f8a05050          STRH     r5,[r0,#0x50]         ;2828
                  |L1.6820|
001aa4  da05              BGE      |L1.6834|
001aa6  f8b05050          LDRH     r5,[r0,#0x50]         ;2829
001aaa  f1050501          ADD      r5,r5,#1              ;2829
001aae  f8a05050          STRH     r5,[r0,#0x50]         ;2829
                  |L1.6834|
001ab2  f9b05050          LDRSH    r5,[r0,#0x50]
001ab6  42a5              CMP      r5,r4
001ab8  da01              BGE      |L1.6846|
001aba  f8a04050          STRH     r4,[r0,#0x50]
                  |L1.6846|
;;;2832   				if(bps[i]._x_>50)bps[i]._x_=50;	
001abe  f9b05050          LDRSH    r5,[r0,#0x50]
001ac2  2d32              CMP      r5,#0x32
001ac4  dd02              BLE      |L1.6860|
001ac6  2532              MOVS     r5,#0x32
001ac8  f8a05050          STRH     r5,[r0,#0x50]
                  |L1.6860|
001acc  1c49              ADDS     r1,r1,#1              ;2824
001ace  b2c9              UXTB     r1,r1                 ;2824
                  |L1.6864|
001ad0  4291              CMP      r1,r2                 ;2824
001ad2  dbd5              BLT      |L1.6784|
                  |L1.6868|
;;;2833   				}
;;;2834   			}		
;;;2835   		}			
;;;2836   	}   	 
;;;2837   
;;;2838   
;;;2839   avg_hndl_end:
;;;2840   __nop();  
001ad4  bf00              NOP      
;;;2841   }
001ad6  bdf0              POP      {r4-r7,pc}
                  |L1.6872|
                          DCD      ||.bss||
                  |L1.6876|
                          DCD      ||.bss||+0x400
                  |L1.6880|
                          DCD      0x40034000
                  |L1.6884|
                          DCD      0x2009c000
                  |L1.6888|
                          DCD      ||area_number.18||+0x96
                  |L1.6892|
                          DCD      bps
                  |L1.6896|
                          DCD      NUMIST
                          ENDP

                  rele_hndl PROC
;;;2855   //*************-----------------------------------------------
;;;2856   void rele_hndl(void)
001af4  e92d41f0          PUSH     {r4-r8,lr}
;;;2857   {
;;;2858   //static char cnt_rel_sam;
;;;2859   //char temp;
;;;2860   
;;;2861   //temp=0;
;;;2862   
;;;2863   
;;;2864   SET_REG(LPC_PINCON->PINSEL0,0,4*2,6*2);
001af8  48ff              LDR      r0,|L1.7928|
001afa  6801              LDR      r1,[r0,#0]
001afc  4aff              LDR      r2,|L1.7932|
001afe  4011              ANDS     r1,r1,r2
001b00  6001              STR      r1,[r0,#0]
;;;2865   SET_REG(LPC_GPIO0->FIODIR,63,4,6);
001b02  4cff              LDR      r4,|L1.7936|
001b04  6821              LDR      r1,[r4,#0]
001b06  f441717c          ORR      r1,r1,#0x3f0
001b0a  6021              STR      r1,[r4,#0]
;;;2866   SET_REG(LPC_PINCON->PINSEL7,0,(25-16)*2,2);
001b0c  69c1              LDR      r1,[r0,#0x1c]
001b0e  f4212140          BIC      r1,r1,#0xc0000
001b12  61c1              STR      r1,[r0,#0x1c]
;;;2867   SET_REG(LPC_GPIO3->FIODIR,1,25,1);
001b14  6e21              LDR      r1,[r4,#0x60]
001b16  f0417100          ORR      r1,r1,#0x2000000
001b1a  6621              STR      r1,[r4,#0x60]
;;;2868   SET_REG(LPC_PINCON->PINSEL1,0,(29-16)*2,2);
001b1c  6841              LDR      r1,[r0,#4]
001b1e  f0216140          BIC      r1,r1,#0xc000000
001b22  6041              STR      r1,[r0,#4]
;;;2869   SET_REG(LPC_GPIO0->FIODIR,1,29,1);
001b24  6820              LDR      r0,[r4,#0]
001b26  f0405000          ORR      r0,r0,#0x20000000
001b2a  6020              STR      r0,[r4,#0]
;;;2870   
;;;2871   
;;;2872   
;;;2873   
;;;2874   
;;;2875   
;;;2876   if((((bat[0]._rel_stat)  || (tbatdisable_stat!=tbdsON))&&(tbatdisable_cmnd))	&& (main_1Hz_cnt>5))
001b2c  48f6              LDR      r0,|L1.7944|
001b2e  4df5              LDR      r5,|L1.7940|
001b30  49f7              LDR      r1,|L1.7952|
001b32  7802              LDRB     r2,[r0,#0]  ; tbatdisable_stat
001b34  48f5              LDR      r0,|L1.7948|
001b36  f895303c          LDRB     r3,[r5,#0x3c]  ; bat
001b3a  f9b11000          LDRSH    r1,[r1,#0]
001b3e  7800              LDRB     r0,[r0,#0]
001b40  4313              ORRS     r3,r3,r2
001b42  d007              BEQ      |L1.6996|
001b44  b130              CBZ      r0,|L1.6996|
001b46  2905              CMP      r1,#5
001b48  dd04              BLE      |L1.6996|
;;;2877   	{
;;;2878   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_BAT1,1);
001b4a  69a3              LDR      r3,[r4,#0x18]
001b4c  f4437380          ORR      r3,r3,#0x100
001b50  61a3              STR      r3,[r4,#0x18]
001b52  e003              B        |L1.7004|
                  |L1.6996|
;;;2879   	}
;;;2880   else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_BAT1,1);	  	
001b54  69e3              LDR      r3,[r4,#0x1c]
001b56  f4437380          ORR      r3,r3,#0x100
001b5a  61e3              STR      r3,[r4,#0x1c]
                  |L1.7004|
;;;2881   
;;;2882   if((((bat[1]._rel_stat) || (tbatdisable_stat!=tbdsON))&&(tbatdisable_cmnd))	&& (main_1Hz_cnt>5))
001b5c  f8953088          LDRB     r3,[r5,#0x88]  ; bat
001b60  4313              ORRS     r3,r3,r2
001b62  d007              BEQ      |L1.7028|
001b64  b130              CBZ      r0,|L1.7028|
001b66  2905              CMP      r1,#5
001b68  dd04              BLE      |L1.7028|
;;;2883   	{
;;;2884   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_BAT2,1);
001b6a  69a0              LDR      r0,[r4,#0x18]
001b6c  f0400040          ORR      r0,r0,#0x40
001b70  61a0              STR      r0,[r4,#0x18]
001b72  e003              B        |L1.7036|
                  |L1.7028|
;;;2885   	}
;;;2886   else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_BAT2,1);
001b74  69e0              LDR      r0,[r4,#0x1c]
001b76  f0400040          ORR      r0,r0,#0x40
001b7a  61e0              STR      r0,[r4,#0x1c]
                  |L1.7036|
;;;2887   
;;;2888   
;;;2889   if(mess_find_unvol((MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_SAMOKALIBR)) 
001b7c  20d2              MOVS     r0,#0xd2
001b7e  f7fffffe          BL       mess_find_unvol
001b82  4de4              LDR      r5,|L1.7956|
001b84  b110              CBZ      r0,|L1.7052|
001b86  6828              LDR      r0,[r5,#0]  ; mess_data
001b88  2864              CMP      r0,#0x64
001b8a  d04a              BEQ      |L1.7202|
                  |L1.7052|
;;;2890   	{
;;;2891   	if(mess_data[1]==1)SET_REG(LPC_GPIO0->FIOSET,1,29,1);
;;;2892   	else if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,29,1);
;;;2893   	}
;;;2894   else SET_REG(LPC_GPIO0->FIOCLR,1,29,1);
001b8c  69e0              LDR      r0,[r4,#0x1c]
001b8e  f0405000          ORR      r0,r0,#0x20000000
001b92  61e0              STR      r0,[r4,#0x1c]
                  |L1.7060|
;;;2895   
;;;2896   
;;;2897   #ifndef UKU2071x
;;;2898   //  
;;;2899   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;2900   	{
;;;2901   	if(mess_data[1]==0) 			SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2902   	else 						SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;2903   	}
;;;2904   else	if(!(avar_ind_stat&0x00000001)) 	SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2905   else 							SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;2906   #endif
;;;2907   #ifdef UKU2071x
;;;2908   //  
;;;2909   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001b94  20d2              MOVS     r0,#0xd2
001b96  f7fffffe          BL       mess_find_unvol
;;;2910   	{
;;;2911   	if(mess_data[1]==0)				SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1); 
;;;2912   	else 						SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2913   	}
;;;2914   else	if(!(avar_ind_stat&0x00000001))	SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
001b9a  4edf              LDR      r6,|L1.7960|
001b9c  b110              CBZ      r0,|L1.7076|
001b9e  6828              LDR      r0,[r5,#0]            ;2909  ; mess_data
001ba0  2866              CMP      r0,#0x66              ;2909
001ba2  d04d              BEQ      |L1.7232|
                  |L1.7076|
001ba4  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001ba6  07c0              LSLS     r0,r0,#31
001ba8  d056              BEQ      |L1.7256|
;;;2915   else 					  		SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001baa  6fa0              LDR      r0,[r4,#0x78]
001bac  f0407000          ORR      r0,r0,#0x2000000
001bb0  67a0              STR      r0,[r4,#0x78]
                  |L1.7090|
;;;2916   #endif
;;;2917   
;;;2918   #ifdef UKU_3U
;;;2919   //  
;;;2920   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;2921   	{
;;;2922   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2923   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2924        }
;;;2925   else 
;;;2926   	{
;;;2927   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2928        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2929   	} 
;;;2930   
;;;2931   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;2932   	{
;;;2933   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2934   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2935        }
;;;2936   else 
;;;2937   	{
;;;2938   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2939        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2940   	} 
;;;2941   
;;;2942   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;2943   	{
;;;2944   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2945   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2946        }
;;;2947   else 
;;;2948   	{
;;;2949   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2950        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2951   	} 
;;;2952   
;;;2953   #endif
;;;2954   
;;;2955   
;;;2956   #ifdef UKU_GLONASS
;;;2957   //  
;;;2958   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;2959   	{
;;;2960   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2961   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2962        }
;;;2963   else 
;;;2964   	{
;;;2965   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2966        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2967   	} 
;;;2968   
;;;2969   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;2970   	{
;;;2971   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2972   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2973        }
;;;2974   else 
;;;2975   	{
;;;2976   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2977        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2978   	} 
;;;2979   
;;;2980   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;2981   	{
;;;2982   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2983   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2984        }
;;;2985   else 
;;;2986   	{
;;;2987   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2988        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2989   	} 
;;;2990   
;;;2991   #endif
;;;2992   
;;;2993   #ifdef U 
;;;2994   
;;;2995   #endif
;;;2996   
;;;2997   #ifdef UKU_RSTKM
;;;2998   
;;;2999   //  
;;;3000   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;3001   	{
;;;3002   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3003   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3004   	}
;;;3005   else 
;;;3006   	{
;;;3007        if(  (!(avar_ind_stat&0x00007fff))/* &&
;;;3008             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;3009             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;3010             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  &&
;;;3011             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3012        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3013   	}
;;;3014   	
;;;3015   
;;;3016   // 
;;;3017   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3018   	{
;;;3019   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3020   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3021        }
;;;3022   else 
;;;3023   	{
;;;3024   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3025        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3026   	}
;;;3027   
;;;3028   
;;;3029   //  
;;;3030   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;3031   	{
;;;3032   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3033   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3034        }
;;;3035   else if(tloaddisable_cmnd==0)
;;;3036   	{
;;;3037   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3038   	}
;;;3039   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;3040   	{
;;;3041   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3042   	}
;;;3043   
;;;3044   else 
;;;3045   	{
;;;3046   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3047        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3048   	} 
;;;3049   
;;;3050   //  
;;;3051   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3052   	{
;;;3053   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3054   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3055   	}
;;;3056   else 
;;;3057   	{
;;;3058   	if(mixer_vent_stat==mvsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3059        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3060   	} 
;;;3061   
;;;3062   #endif
;;;3063   
;;;3064   #ifdef UKU_KONTUR
;;;3065   
;;;3066   //  
;;;3067   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;3068   	{
;;;3069   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3070   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3071   	}
;;;3072   else 
;;;3073   	{
;;;3074        if(  (!(avar_ind_stat&0x00007fff)) &&
;;;3075             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;3076             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;3077             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  /*&&
;;;3078             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3079        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3080   	}
;;;3081   
;;;3082   	
;;;3083   //rel_warm_plazma=0;
;;;3084   //    
;;;3085   /*
;;;3086   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_WARM))
;;;3087   	{
;;;3088   	if(mess_data[1]==0)
;;;3089   		{
;;;3090   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3091   		rel_warm_plazma=1;
;;;3092   		}
;;;3093   	else if(mess_data[1]==1) 
;;;3094   		{
;;;3095   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3096   		rel_warm_plazma=2;
;;;3097   		}
;;;3098        }
;;;3099   else 
;;;3100   	{
;;;3101   	if(warm_stat_k==wsOFF) 
;;;3102   		{
;;;3103   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3104   		rel_warm_plazma=3;
;;;3105   		}
;;;3106        else 
;;;3107   		{
;;;3108   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3109   		rel_warm_plazma=4;
;;;3110   		}
;;;3111   	}
;;;3112   */
;;;3113   // 
;;;3114   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3115   	{
;;;3116   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3117   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3118        }
;;;3119   else 
;;;3120   	{
;;;3121   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3122        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3123   	}
;;;3124   
;;;3125   
;;;3126   
;;;3127   //  
;;;3128   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;3129   	{
;;;3130   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3131   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3132        }
;;;3133   else if(tloaddisable_cmnd==0)
;;;3134   	{
;;;3135   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3136   	}
;;;3137   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;3138   	{
;;;3139   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3140   	}
;;;3141   
;;;3142   else 
;;;3143   	{
;;;3144   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3145        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3146   	} 
;;;3147   
;;;3148   //    
;;;3149   if(RELE_LOG)
;;;3150   	{
;;;3151   	if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3152   		{
;;;3153   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3154   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3155   		}
;;;3156   	else 
;;;3157   		{
;;;3158   		if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3159   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3160   		} 
;;;3161   
;;;3162   	}
;;;3163   else 
;;;3164   	{
;;;3165   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3166   		{
;;;3167   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3168   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3169   		}
;;;3170   	else 
;;;3171   		{
;;;3172   		if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3173   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3174   		} 
;;;3175   	}
;;;3176   #endif
;;;3177   
;;;3178   #ifdef UKU_6U
;;;3179   //  
;;;3180   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;3181   	{
;;;3182   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;3183   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;3184        }
;;;3185   else 
;;;3186   	{
;;;3187   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;3188        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;3189   	} 
;;;3190   
;;;3191   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;3192   	{
;;;3193   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3194   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3195       }
;;;3196   else if(NPN_OUT==npnoRELEAVBAT2)
;;;3197   	{
;;;3198   	if(npn_stat==npnsOFF)//&&(mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_NPN))
;;;3199   		{
;;;3200   		/*if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3201   		else if(mess_data[1]==1)*/ SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3202        	}
;;;3203   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3204   	}
;;;3205   else 
;;;3206   	{
;;;3207   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3208       else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3209   	} 
;;;3210   
;;;3211   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3212   	{
;;;3213   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3214   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3215        }
;;;3216   else 
;;;3217   	{
;;;3218   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3219        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3220   	} 
;;;3221   
;;;3222   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3223   	{
;;;3224   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3225   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3226   	}
;;;3227   else if((NPN_OUT==npnoRELEVENT))
;;;3228   	{
;;;3229   	if(npn_stat==npnsOFF)//&&(mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_NPN))
;;;3230   		{
;;;3231   		/*if(mess_data[1]==0)*/ SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3232   		//else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3233       	}
;;;3234   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3235   	}
;;;3236   else 
;;;3237   	{
;;;3238   	if(!vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3239   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3240   	}
;;;3241   
;;;3242   #endif
;;;3243   
;;;3244   #ifdef UKU_220
;;;3245   //  
;;;3246   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3247   	{
;;;3248   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3249   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3250        }
;;;3251   else 
;;;3252   	{
;;;3253   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3254        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3255   	} 
;;;3256   
;;;3257   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3258   	{
;;;3259   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3260   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3261        }
;;;3262   else 
;;;3263   	{
;;;3264   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3265        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3266   	} 
;;;3267   
;;;3268   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3269   	{
;;;3270   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3271   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3272   	}
;;;3273   else 
;;;3274   	{
;;;3275   	if((RELE_VENT_LOGIC==0)||(RELE_VENT_LOGIC==1))
;;;3276   		{
;;;3277   		if(vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3278   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3279   		}
;;;3280   	else 
;;;3281   		{
;;;3282   		if((avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3283        	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3284   		}
;;;3285   	}
;;;3286   
;;;3287   #endif
;;;3288   
;;;3289   #ifdef UKU_220_V2
;;;3290   //  
;;;3291   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3292   	{
;;;3293   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3294   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3295        }
;;;3296   else 
;;;3297   	{
;;;3298   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3299        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3300   	} 
;;;3301   
;;;3302   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3303   	{
;;;3304   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3305   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3306        }
;;;3307   else 
;;;3308   	{
;;;3309   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3310        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3311   	} 
;;;3312   
;;;3313   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3314   	{
;;;3315   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3316   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3317   	}
;;;3318   else 
;;;3319   	{
;;;3320   	if((RELE_VENT_LOGIC==0)||(RELE_VENT_LOGIC==1))
;;;3321   		{
;;;3322   		if(vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3323   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3324   		}
;;;3325   	else 
;;;3326   		{
;;;3327   		if((avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3328        	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3329   		}
;;;3330   	}
;;;3331   
;;;3332   #endif
;;;3333   
;;;3334   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;3335   
;;;3336   if((AUSW_MAIN==22010)||(AUSW_MAIN==22011))
001bb2  48da              LDR      r0,|L1.7964|
;;;3337   	{
;;;3338   	#ifndef UKU2071x
;;;3339   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3340   		{
;;;3341   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3342   		else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3343   		}
;;;3344   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3345   	else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3346   	#endif
;;;3347   
;;;3348   	#ifdef UKU2071x
;;;3349   		#ifndef APSENERGIA
;;;3350   		if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3351   			{
;;;3352   			if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3353   			else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3354   			}
;;;3355   		else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3356   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3357   		#endif
;;;3358   
;;;3359   		#ifdef APSENERGIA
;;;3360   		if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3361   			{
;;;3362   			if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3363   			else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3364   			}
;;;3365   		else if((mess_find_unvol(MESS2RELE_HNDL))&& (mess_data[0]==PARAM_RELE_BAT_IS_DISCHARGED))  SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3366   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3367   		#endif
;;;3368   
;;;3369   	#endif
;;;3370   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3371   		{
;;;3372   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3373   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3374   	     }
;;;3375   	else 
;;;3376   		{
;;;3377   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001bb4  4fda              LDR      r7,|L1.7968|
001bb6  8800              LDRH     r0,[r0,#0]            ;3336  ; AUSW_MAIN
001bb8  f5a041aa          SUB      r1,r0,#0x5500         ;3336
001bbc  39fa              SUBS     r1,r1,#0xfa           ;3336
001bbe  d001              BEQ      |L1.7108|
001bc0  1e49              SUBS     r1,r1,#1              ;3336
001bc2  d173              BNE      |L1.7340|
                  |L1.7108|
001bc4  20d2              MOVS     r0,#0xd2              ;3360
001bc6  f7fffffe          BL       mess_find_unvol
001bca  b110              CBZ      r0,|L1.7122|
001bcc  6828              LDR      r0,[r5,#0]            ;3360  ; mess_data
001bce  2866              CMP      r0,#0x66              ;3360
001bd0  d047              BEQ      |L1.7266|
                  |L1.7122|
001bd2  20d2              MOVS     r0,#0xd2              ;3365
001bd4  f7fffffe          BL       mess_find_unvol
001bd8  b110              CBZ      r0,|L1.7136|
001bda  6828              LDR      r0,[r5,#0]            ;3365  ; mess_data
001bdc  2872              CMP      r0,#0x72              ;3365
001bde  d04d              BEQ      |L1.7292|
                  |L1.7136|
001be0  6fa0              LDR      r0,[r4,#0x78]         ;3366
001be2  f0407000          ORR      r0,r0,#0x2000000      ;3366
001be6  67a0              STR      r0,[r4,#0x78]         ;3366
                  |L1.7144|
001be8  20d2              MOVS     r0,#0xd2              ;3370
001bea  f7fffffe          BL       mess_find_unvol
001bee  b110              CBZ      r0,|L1.7158|
001bf0  6828              LDR      r0,[r5,#0]            ;3370  ; mess_data
001bf2  286a              CMP      r0,#0x6a              ;3370
001bf4  d047              BEQ      |L1.7302|
                  |L1.7158|
001bf6  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001bf8  4238              TST      r0,r7
001bfa  d052              BEQ      |L1.7330|
;;;3378   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001bfc  69a0              LDR      r0,[r4,#0x18]
001bfe  f0400080          ORR      r0,r0,#0x80
001c02  61a0              STR      r0,[r4,#0x18]
                  |L1.7172|
;;;3379   		} 
;;;3380   
;;;3381   	//  
;;;3382   	#ifndef APSENERGIA
;;;3383   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3384   		{
;;;3385   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3386   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3387        	}
;;;3388   	else 
;;;3389   		{
;;;3390   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3391        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3392   		}
;;;3393   	#endif
;;;3394   	#ifdef APSENERGIA
;;;3395   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001c04  20d2              MOVS     r0,#0xd2
001c06  f7fffffe          BL       mess_find_unvol
001c0a  b110              CBZ      r0,|L1.7186|
001c0c  6828              LDR      r0,[r5,#0]  ; mess_data
001c0e  2867              CMP      r0,#0x67
001c10  d04d              BEQ      |L1.7342|
                  |L1.7186|
;;;3396   		{
;;;3397   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3398   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3399        	}
;;;3400   	else 
;;;3401   		{
;;;3402   		if(!apsEnergiaStat)SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001c12  48c4              LDR      r0,|L1.7972|
001c14  7800              LDRB     r0,[r0,#0]  ; apsEnergiaStat
001c16  b380              CBZ      r0,|L1.7290|
;;;3403   		else SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001c18  69e0              LDR      r0,[r4,#0x1c]
001c1a  f0400010          ORR      r0,r0,#0x10
001c1e  61e0              STR      r0,[r4,#0x1c]
001c20  e1ee              B        |L1.8192|
                  |L1.7202|
001c22  6868              LDR      r0,[r5,#4]            ;2891  ; mess_data
001c24  2801              CMP      r0,#1                 ;2891
001c26  d006              BEQ      |L1.7222|
001c28  2800              CMP      r0,#0                 ;2892
001c2a  d1b3              BNE      |L1.7060|
001c2c  69e0              LDR      r0,[r4,#0x1c]         ;2892
001c2e  f0405000          ORR      r0,r0,#0x20000000     ;2892
001c32  61e0              STR      r0,[r4,#0x1c]         ;2892
001c34  e7ae              B        |L1.7060|
                  |L1.7222|
001c36  69a0              LDR      r0,[r4,#0x18]         ;2891
001c38  f0405000          ORR      r0,r0,#0x20000000     ;2891
001c3c  61a0              STR      r0,[r4,#0x18]         ;2891
001c3e  e7a9              B        |L1.7060|
                  |L1.7232|
001c40  6868              LDR      r0,[r5,#4]            ;2911  ; mess_data
001c42  b120              CBZ      r0,|L1.7246|
001c44  6fa0              LDR      r0,[r4,#0x78]         ;2912
001c46  f0407000          ORR      r0,r0,#0x2000000      ;2912
001c4a  67a0              STR      r0,[r4,#0x78]         ;2912
001c4c  e7b1              B        |L1.7090|
                  |L1.7246|
001c4e  6fe0              LDR      r0,[r4,#0x7c]         ;2911
001c50  f0407000          ORR      r0,r0,#0x2000000      ;2911
001c54  67e0              STR      r0,[r4,#0x7c]         ;2911
001c56  e7ac              B        |L1.7090|
                  |L1.7256|
001c58  6fe0              LDR      r0,[r4,#0x7c]         ;2914
001c5a  f0407000          ORR      r0,r0,#0x2000000      ;2914
001c5e  67e0              STR      r0,[r4,#0x7c]         ;2914
001c60  e7a7              B        |L1.7090|
                  |L1.7266|
001c62  6868              LDR      r0,[r5,#4]            ;3362  ; mess_data
001c64  b120              CBZ      r0,|L1.7280|
001c66  6fa0              LDR      r0,[r4,#0x78]         ;3363
001c68  f0407000          ORR      r0,r0,#0x2000000      ;3363
001c6c  67a0              STR      r0,[r4,#0x78]         ;3363
001c6e  e7bb              B        |L1.7144|
                  |L1.7280|
001c70  6fe0              LDR      r0,[r4,#0x7c]         ;3362
001c72  f0407000          ORR      r0,r0,#0x2000000      ;3362
001c76  67e0              STR      r0,[r4,#0x7c]         ;3362
001c78  e7b6              B        |L1.7144|
                  |L1.7290|
001c7a  e027              B        |L1.7372|
                  |L1.7292|
001c7c  6fe0              LDR      r0,[r4,#0x7c]         ;3365
001c7e  f0407000          ORR      r0,r0,#0x2000000      ;3365
001c82  67e0              STR      r0,[r4,#0x7c]         ;3365
001c84  e7b0              B        |L1.7144|
                  |L1.7302|
001c86  6868              LDR      r0,[r5,#4]            ;3372  ; mess_data
001c88  b130              CBZ      r0,|L1.7320|
001c8a  2801              CMP      r0,#1                 ;3373
001c8c  d1ba              BNE      |L1.7172|
001c8e  69a0              LDR      r0,[r4,#0x18]         ;3373
001c90  f0400080          ORR      r0,r0,#0x80           ;3373
001c94  61a0              STR      r0,[r4,#0x18]         ;3373
001c96  e7b5              B        |L1.7172|
                  |L1.7320|
001c98  69e0              LDR      r0,[r4,#0x1c]         ;3372
001c9a  f0400080          ORR      r0,r0,#0x80           ;3372
001c9e  61e0              STR      r0,[r4,#0x1c]         ;3372
001ca0  e7b0              B        |L1.7172|
                  |L1.7330|
001ca2  69e0              LDR      r0,[r4,#0x1c]         ;3377
001ca4  f0400080          ORR      r0,r0,#0x80           ;3377
001ca8  61e0              STR      r0,[r4,#0x1c]         ;3377
001caa  e7ab              B        |L1.7172|
                  |L1.7340|
001cac  e013              B        |L1.7382|
                  |L1.7342|
001cae  6868              LDR      r0,[r5,#4]            ;3397  ; mess_data
001cb0  b110              CBZ      r0,|L1.7352|
001cb2  2801              CMP      r0,#1                 ;3398
001cb4  d005              BEQ      |L1.7362|
001cb6  e1a3              B        |L1.8192|
                  |L1.7352|
001cb8  69e0              LDR      r0,[r4,#0x1c]         ;3397
001cba  f0400010          ORR      r0,r0,#0x10           ;3397
001cbe  61e0              STR      r0,[r4,#0x1c]         ;3397
001cc0  e19e              B        |L1.8192|
                  |L1.7362|
001cc2  69a0              LDR      r0,[r4,#0x18]         ;3398
001cc4  f0400010          ORR      r0,r0,#0x10           ;3398
001cc8  61a0              STR      r0,[r4,#0x18]         ;3398
001cca  e199              B        |L1.8192|
                  |L1.7372|
001ccc  69a0              LDR      r0,[r4,#0x18]         ;3402
001cce  f0400010          ORR      r0,r0,#0x10           ;3402
001cd2  61a0              STR      r0,[r4,#0x18]         ;3402
001cd4  e194              B        |L1.8192|
                  |L1.7382|
;;;3404   		}
;;;3405   	#endif
;;;3406   	}
;;;3407   
;;;3408   else	if(AUSW_MAIN==22023)
;;;3409   	{
;;;3410   
;;;3411   	//  
;;;3412   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3413   		{
;;;3414   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3415   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3416        	}
;;;3417   	else 
;;;3418   		{
;;;3419   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001cd6  f8df8250          LDR      r8,|L1.7976|
001cda  f5a041ac          SUB      r1,r0,#0x5600         ;3408
001cde  3907              SUBS     r1,#7                 ;3408
001ce0  d162              BNE      |L1.7592|
001ce2  20d2              MOVS     r0,#0xd2              ;3412
001ce4  f7fffffe          BL       mess_find_unvol
001ce8  b110              CBZ      r0,|L1.7408|
001cea  6828              LDR      r0,[r5,#0]            ;3412  ; mess_data
001cec  2867              CMP      r0,#0x67              ;3412
001cee  d023              BEQ      |L1.7480|
                  |L1.7408|
001cf0  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001cf4  b370              CBZ      r0,|L1.7508|
;;;3420        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001cf6  69a0              LDR      r0,[r4,#0x18]
001cf8  f0400010          ORR      r0,r0,#0x10
001cfc  61a0              STR      r0,[r4,#0x18]
                  |L1.7422|
;;;3421   		} 
;;;3422   
;;;3423   
;;;3424   	//         .    
;;;3425   	#ifndef UKU2071x
;;;3426   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3427   		{
;;;3428   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3429   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3430   		}
;;;3431   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3432   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3433   	#endif
;;;3434   	#ifdef UKU2071x
;;;3435   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001cfe  20d2              MOVS     r0,#0xd2
001d00  f7fffffe          BL       mess_find_unvol
001d04  b110              CBZ      r0,|L1.7436|
001d06  6828              LDR      r0,[r5,#0]  ; mess_data
001d08  2866              CMP      r0,#0x66
001d0a  d028              BEQ      |L1.7518|
                  |L1.7436|
;;;3436   		{
;;;3437   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3438   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3439   		}
;;;3440   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001d0c  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001d0e  07c0              LSLS     r0,r0,#31
001d10  d031              BEQ      |L1.7542|
;;;3441   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001d12  6fa0              LDR      r0,[r4,#0x78]
001d14  f0407000          ORR      r0,r0,#0x2000000
001d18  67a0              STR      r0,[r4,#0x78]
                  |L1.7450|
;;;3442   	#endif
;;;3443   
;;;3444   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001d1a  20d2              MOVS     r0,#0xd2
001d1c  f7fffffe          BL       mess_find_unvol
001d20  b110              CBZ      r0,|L1.7464|
001d22  6828              LDR      r0,[r5,#0]  ; mess_data
001d24  286a              CMP      r0,#0x6a
001d26  d02b              BEQ      |L1.7552|
                  |L1.7464|
;;;3445   		{
;;;3446   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3447   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3448   	     }
;;;3449   	else 
;;;3450   		{
;;;3451   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001d28  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001d2a  4238              TST      r0,r7
001d2c  d037              BEQ      |L1.7582|
;;;3452   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001d2e  69a0              LDR      r0,[r4,#0x18]
001d30  f0400080          ORR      r0,r0,#0x80
001d34  61a0              STR      r0,[r4,#0x18]
001d36  e163              B        |L1.8192|
                  |L1.7480|
001d38  6868              LDR      r0,[r5,#4]            ;3414  ; mess_data
001d3a  b130              CBZ      r0,|L1.7498|
001d3c  2801              CMP      r0,#1                 ;3415
001d3e  d1de              BNE      |L1.7422|
001d40  69a0              LDR      r0,[r4,#0x18]         ;3415
001d42  f0400010          ORR      r0,r0,#0x10           ;3415
001d46  61a0              STR      r0,[r4,#0x18]         ;3415
001d48  e7d9              B        |L1.7422|
                  |L1.7498|
001d4a  69e0              LDR      r0,[r4,#0x1c]         ;3414
001d4c  f0400010          ORR      r0,r0,#0x10           ;3414
001d50  61e0              STR      r0,[r4,#0x1c]         ;3414
001d52  e7d4              B        |L1.7422|
                  |L1.7508|
001d54  69e0              LDR      r0,[r4,#0x1c]         ;3419
001d56  f0400010          ORR      r0,r0,#0x10           ;3419
001d5a  61e0              STR      r0,[r4,#0x1c]         ;3419
001d5c  e7cf              B        |L1.7422|
                  |L1.7518|
001d5e  6868              LDR      r0,[r5,#4]            ;3437  ; mess_data
001d60  b120              CBZ      r0,|L1.7532|
001d62  69e0              LDR      r0,[r4,#0x1c]         ;3438
001d64  f0407000          ORR      r0,r0,#0x2000000      ;3438
001d68  61e0              STR      r0,[r4,#0x1c]         ;3438
001d6a  e7d6              B        |L1.7450|
                  |L1.7532|
001d6c  69a0              LDR      r0,[r4,#0x18]         ;3437
001d6e  f0407000          ORR      r0,r0,#0x2000000      ;3437
001d72  61a0              STR      r0,[r4,#0x18]         ;3437
001d74  e7d1              B        |L1.7450|
                  |L1.7542|
001d76  6ba0              LDR      r0,[r4,#0x38]         ;3440
001d78  f0407000          ORR      r0,r0,#0x2000000      ;3440
001d7c  63a0              STR      r0,[r4,#0x38]         ;3440
001d7e  e7cc              B        |L1.7450|
                  |L1.7552|
001d80  6868              LDR      r0,[r5,#4]            ;3446  ; mess_data
001d82  b110              CBZ      r0,|L1.7562|
001d84  2801              CMP      r0,#1                 ;3447
001d86  d005              BEQ      |L1.7572|
001d88  e13a              B        |L1.8192|
                  |L1.7562|
001d8a  69e0              LDR      r0,[r4,#0x1c]         ;3446
001d8c  f0400080          ORR      r0,r0,#0x80           ;3446
001d90  61e0              STR      r0,[r4,#0x1c]         ;3446
001d92  e135              B        |L1.8192|
                  |L1.7572|
001d94  69a0              LDR      r0,[r4,#0x18]         ;3447
001d96  f0400080          ORR      r0,r0,#0x80           ;3447
001d9a  61a0              STR      r0,[r4,#0x18]         ;3447
001d9c  e130              B        |L1.8192|
                  |L1.7582|
001d9e  69e0              LDR      r0,[r4,#0x1c]         ;3451
001da0  f0400080          ORR      r0,r0,#0x80           ;3451
001da4  61e0              STR      r0,[r4,#0x1c]         ;3451
001da6  e12b              B        |L1.8192|
                  |L1.7592|
;;;3453   		} 
;;;3454   	}
;;;3455   else	if(AUSW_MAIN==22043)
001da8  f5a041ac          SUB      r1,r0,#0x5600
001dac  391b              SUBS     r1,r1,#0x1b
001dae  d170              BNE      |L1.7826|
;;;3456   	{
;;;3457   	//  
;;;3458   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001db0  20d2              MOVS     r0,#0xd2
001db2  f7fffffe          BL       mess_find_unvol
001db6  b110              CBZ      r0,|L1.7614|
001db8  6828              LDR      r0,[r5,#0]  ; mess_data
001dba  2867              CMP      r0,#0x67
001dbc  d031              BEQ      |L1.7714|
                  |L1.7614|
;;;3459   		{
;;;3460   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3461   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3462        	}
;;;3463   	else 
;;;3464   		{
;;;3465   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001dbe  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001dc2  b3b8              CBZ      r0,|L1.7732|
;;;3466        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001dc4  69a0              LDR      r0,[r4,#0x18]
001dc6  f0400010          ORR      r0,r0,#0x10
001dca  61a0              STR      r0,[r4,#0x18]
                  |L1.7628|
;;;3467   		} 
;;;3468   	//         .    
;;;3469   	#ifndef UKU2071x 
;;;3470   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3471   		{
;;;3472   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3473   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3474   		}
;;;3475   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3476   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3477   	#endif
;;;3478   	#ifdef UKU2071x 
;;;3479   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001dcc  20d2              MOVS     r0,#0xd2
001dce  f7fffffe          BL       mess_find_unvol
001dd2  b110              CBZ      r0,|L1.7642|
001dd4  6828              LDR      r0,[r5,#0]  ; mess_data
001dd6  2866              CMP      r0,#0x66
001dd8  d037              BEQ      |L1.7754|
                  |L1.7642|
;;;3480   		{
;;;3481   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3482   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3483   		}
;;;3484   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001dda  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001ddc  07c0              LSLS     r0,r0,#31
001dde  d040              BEQ      |L1.7778|
;;;3485   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001de0  6fa0              LDR      r0,[r4,#0x78]
001de2  f0407000          ORR      r0,r0,#0x2000000
001de6  67a0              STR      r0,[r4,#0x78]
                  |L1.7656|
;;;3486   	#endif
;;;3487   
;;;3488   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001de8  20d2              MOVS     r0,#0xd2
001dea  f7fffffe          BL       mess_find_unvol
001dee  b110              CBZ      r0,|L1.7670|
001df0  6828              LDR      r0,[r5,#0]  ; mess_data
001df2  286a              CMP      r0,#0x6a
001df4  d03a              BEQ      |L1.7788|
                  |L1.7670|
;;;3489   		{
;;;3490   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3491   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3492   	     }
;;;3493   	else 
;;;3494   		{
;;;3495   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001df6  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001df8  4238              TST      r0,r7
001dfa  d045              BEQ      |L1.7816|
;;;3496   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001dfc  69a0              LDR      r0,[r4,#0x18]
001dfe  f0400080          ORR      r0,r0,#0x80
001e02  61a0              STR      r0,[r4,#0x18]
                  |L1.7684|
;;;3497   		}
;;;3498   	//  
;;;3499   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001e04  20d2              MOVS     r0,#0xd2
001e06  f7fffffe          BL       mess_find_unvol
001e0a  b110              CBZ      r0,|L1.7698|
001e0c  6828              LDR      r0,[r5,#0]  ; mess_data
001e0e  286a              CMP      r0,#0x6a
001e10  d040              BEQ      |L1.7828|
                  |L1.7698|
;;;3500   		{
;;;3501   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3502   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3503        	}
;;;3504   	else 
;;;3505   		{
;;;3506   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
001e12  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001e14  4238              TST      r0,r7
001e16  d04c              BEQ      |L1.7858|
;;;3507        	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
001e18  69a0              LDR      r0,[r4,#0x18]
001e1a  f0400020          ORR      r0,r0,#0x20
001e1e  61a0              STR      r0,[r4,#0x18]
001e20  e0ee              B        |L1.8192|
                  |L1.7714|
001e22  6868              LDR      r0,[r5,#4]            ;3460  ; mess_data
001e24  b138              CBZ      r0,|L1.7734|
001e26  2801              CMP      r0,#1                 ;3461
001e28  d1d0              BNE      |L1.7628|
001e2a  69a0              LDR      r0,[r4,#0x18]         ;3461
001e2c  f0400010          ORR      r0,r0,#0x10           ;3461
001e30  61a0              STR      r0,[r4,#0x18]         ;3461
001e32  e7cb              B        |L1.7628|
                  |L1.7732|
001e34  e004              B        |L1.7744|
                  |L1.7734|
001e36  69e0              LDR      r0,[r4,#0x1c]         ;3460
001e38  f0400010          ORR      r0,r0,#0x10           ;3460
001e3c  61e0              STR      r0,[r4,#0x1c]         ;3460
001e3e  e7c5              B        |L1.7628|
                  |L1.7744|
001e40  69e0              LDR      r0,[r4,#0x1c]         ;3465
001e42  f0400010          ORR      r0,r0,#0x10           ;3465
001e46  61e0              STR      r0,[r4,#0x1c]         ;3465
001e48  e7c0              B        |L1.7628|
                  |L1.7754|
001e4a  6868              LDR      r0,[r5,#4]            ;3481  ; mess_data
001e4c  b120              CBZ      r0,|L1.7768|
001e4e  69e0              LDR      r0,[r4,#0x1c]         ;3482
001e50  f0407000          ORR      r0,r0,#0x2000000      ;3482
001e54  61e0              STR      r0,[r4,#0x1c]         ;3482
001e56  e7c7              B        |L1.7656|
                  |L1.7768|
001e58  69a0              LDR      r0,[r4,#0x18]         ;3481
001e5a  f0407000          ORR      r0,r0,#0x2000000      ;3481
001e5e  61a0              STR      r0,[r4,#0x18]         ;3481
001e60  e7c2              B        |L1.7656|
                  |L1.7778|
001e62  6ba0              LDR      r0,[r4,#0x38]         ;3484
001e64  f0407000          ORR      r0,r0,#0x2000000      ;3484
001e68  63a0              STR      r0,[r4,#0x38]         ;3484
001e6a  e7bd              B        |L1.7656|
                  |L1.7788|
001e6c  6868              LDR      r0,[r5,#4]            ;3490  ; mess_data
001e6e  b130              CBZ      r0,|L1.7806|
001e70  2801              CMP      r0,#1                 ;3491
001e72  d1c7              BNE      |L1.7684|
001e74  69a0              LDR      r0,[r4,#0x18]         ;3491
001e76  f0400080          ORR      r0,r0,#0x80           ;3491
001e7a  61a0              STR      r0,[r4,#0x18]         ;3491
001e7c  e7c2              B        |L1.7684|
                  |L1.7806|
001e7e  69e0              LDR      r0,[r4,#0x1c]         ;3490
001e80  f0400080          ORR      r0,r0,#0x80           ;3490
001e84  61e0              STR      r0,[r4,#0x1c]         ;3490
001e86  e7bd              B        |L1.7684|
                  |L1.7816|
001e88  69e0              LDR      r0,[r4,#0x1c]         ;3495
001e8a  f0400080          ORR      r0,r0,#0x80           ;3495
001e8e  61e0              STR      r0,[r4,#0x1c]         ;3495
001e90  e7b8              B        |L1.7684|
                  |L1.7826|
001e92  e013              B        |L1.7868|
                  |L1.7828|
001e94  6868              LDR      r0,[r5,#4]            ;3501  ; mess_data
001e96  b110              CBZ      r0,|L1.7838|
001e98  2801              CMP      r0,#1                 ;3502
001e9a  d005              BEQ      |L1.7848|
001e9c  e0b0              B        |L1.8192|
                  |L1.7838|
001e9e  69e0              LDR      r0,[r4,#0x1c]         ;3501
001ea0  f0400020          ORR      r0,r0,#0x20           ;3501
001ea4  61e0              STR      r0,[r4,#0x1c]         ;3501
001ea6  e0ab              B        |L1.8192|
                  |L1.7848|
001ea8  69a0              LDR      r0,[r4,#0x18]         ;3502
001eaa  f0400020          ORR      r0,r0,#0x20           ;3502
001eae  61a0              STR      r0,[r4,#0x18]         ;3502
001eb0  e0a6              B        |L1.8192|
                  |L1.7858|
001eb2  69e0              LDR      r0,[r4,#0x1c]         ;3506
001eb4  f0400020          ORR      r0,r0,#0x20           ;3506
001eb8  61e0              STR      r0,[r4,#0x1c]         ;3506
001eba  e0a1              B        |L1.8192|
                  |L1.7868|
;;;3508   		} 
;;;3509   	}
;;;3510   else	if((AUSW_MAIN==22033)||(AUSW_MAIN==22018))
001ebc  f5a041ac          SUB      r1,r0,#0x5600
001ec0  3911              SUBS     r1,r1,#0x11
001ec2  d001              BEQ      |L1.7880|
001ec4  310f              ADDS     r1,r1,#0xf
001ec6  d17f              BNE      |L1.8136|
                  |L1.7880|
;;;3511   	{
;;;3512   	#ifndef UKU2071x 
;;;3513   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3514   		{
;;;3515   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3516   		else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3517   		}
;;;3518   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3519   	else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3520   	#endif
;;;3521   	#ifdef UKU2071x 
;;;3522   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001ec8  20d2              MOVS     r0,#0xd2
001eca  f7fffffe          BL       mess_find_unvol
001ece  b110              CBZ      r0,|L1.7894|
001ed0  6828              LDR      r0,[r5,#0]  ; mess_data
001ed2  2866              CMP      r0,#0x66
001ed4  d03e              BEQ      |L1.8020|
                  |L1.7894|
;;;3523   		{
;;;3524   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3525   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3526   		}
;;;3527   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
001ed6  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001ed8  07c0              LSLS     r0,r0,#31
001eda  d047              BEQ      |L1.8044|
;;;3528   	else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
001edc  6fa0              LDR      r0,[r4,#0x78]
001ede  f0407000          ORR      r0,r0,#0x2000000
001ee2  67a0              STR      r0,[r4,#0x78]
                  |L1.7908|
;;;3529   	#endif
;;;3530   	
;;;3531   	
;;;3532   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001ee4  20d2              MOVS     r0,#0xd2
001ee6  f7fffffe          BL       mess_find_unvol
001eea  b110              CBZ      r0,|L1.7922|
001eec  6828              LDR      r0,[r5,#0]  ; mess_data
001eee  286a              CMP      r0,#0x6a
001ef0  d041              BEQ      |L1.8054|
                  |L1.7922|
;;;3533   		{
;;;3534   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3535   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3536   	     }
;;;3537   	else 
;;;3538   		{
;;;3539   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001ef2  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001ef4  4238              TST      r0,r7
001ef6  e019              B        |L1.7980|
                  |L1.7928|
                          DCD      0x4002c000
                  |L1.7932|
                          DCD      0xfff000ff
                  |L1.7936|
                          DCD      0x2009c000
                  |L1.7940|
                          DCD      bat
                  |L1.7944|
                          DCD      tbatdisable_stat
                  |L1.7948|
                          DCD      tbatdisable_cmnd
                  |L1.7952|
                          DCD      main_1Hz_cnt
                  |L1.7956|
                          DCD      mess_data
                  |L1.7960|
                          DCD      avar_ind_stat
                  |L1.7964|
                          DCD      AUSW_MAIN
                  |L1.7968|
                          DCD      0x100007f8
                  |L1.7972|
                          DCD      apsEnergiaStat
                  |L1.7976|
                          DCD      ips_bat_av_stat
                  |L1.7980|
001f2c  d031              BEQ      |L1.8082|
;;;3540   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001f2e  69a0              LDR      r0,[r4,#0x18]
001f30  f0400080          ORR      r0,r0,#0x80
001f34  61a0              STR      r0,[r4,#0x18]
                  |L1.7990|
;;;3541   		} 
;;;3542   
;;;3543   	//  
;;;3544   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001f36  20d2              MOVS     r0,#0xd2
001f38  f7fffffe          BL       mess_find_unvol
001f3c  b110              CBZ      r0,|L1.8004|
001f3e  6828              LDR      r0,[r5,#0]  ; mess_data
001f40  2867              CMP      r0,#0x67
001f42  d02b              BEQ      |L1.8092|
                  |L1.8004|
;;;3545   		{
;;;3546   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3547   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3548        	}
;;;3549   	else 
;;;3550   		{
;;;3551   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001f44  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001f48  b398              CBZ      r0,|L1.8114|
;;;3552        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001f4a  69a0              LDR      r0,[r4,#0x18]
001f4c  f0400010          ORR      r0,r0,#0x10
001f50  61a0              STR      r0,[r4,#0x18]
001f52  e055              B        |L1.8192|
                  |L1.8020|
001f54  6868              LDR      r0,[r5,#4]            ;3524  ; mess_data
001f56  b120              CBZ      r0,|L1.8034|
001f58  6fa0              LDR      r0,[r4,#0x78]         ;3525
001f5a  f0407000          ORR      r0,r0,#0x2000000      ;3525
001f5e  67a0              STR      r0,[r4,#0x78]         ;3525
001f60  e7c0              B        |L1.7908|
                  |L1.8034|
001f62  6fe0              LDR      r0,[r4,#0x7c]         ;3524
001f64  f0407000          ORR      r0,r0,#0x2000000      ;3524
001f68  67e0              STR      r0,[r4,#0x7c]         ;3524
001f6a  e7bb              B        |L1.7908|
                  |L1.8044|
001f6c  6fe0              LDR      r0,[r4,#0x7c]         ;3527
001f6e  f0407000          ORR      r0,r0,#0x2000000      ;3527
001f72  67e0              STR      r0,[r4,#0x7c]         ;3527
001f74  e7b6              B        |L1.7908|
                  |L1.8054|
001f76  6868              LDR      r0,[r5,#4]            ;3534  ; mess_data
001f78  b130              CBZ      r0,|L1.8072|
001f7a  2801              CMP      r0,#1                 ;3535
001f7c  d1db              BNE      |L1.7990|
001f7e  69a0              LDR      r0,[r4,#0x18]         ;3535
001f80  f0400080          ORR      r0,r0,#0x80           ;3535
001f84  61a0              STR      r0,[r4,#0x18]         ;3535
001f86  e7d6              B        |L1.7990|
                  |L1.8072|
001f88  69e0              LDR      r0,[r4,#0x1c]         ;3534
001f8a  f0400080          ORR      r0,r0,#0x80           ;3534
001f8e  61e0              STR      r0,[r4,#0x1c]         ;3534
001f90  e7d1              B        |L1.7990|
                  |L1.8082|
001f92  69e0              LDR      r0,[r4,#0x1c]         ;3539
001f94  f0400080          ORR      r0,r0,#0x80           ;3539
001f98  61e0              STR      r0,[r4,#0x1c]         ;3539
001f9a  e7cc              B        |L1.7990|
                  |L1.8092|
001f9c  6868              LDR      r0,[r5,#4]            ;3546  ; mess_data
001f9e  b110              CBZ      r0,|L1.8102|
001fa0  2801              CMP      r0,#1                 ;3547
001fa2  d007              BEQ      |L1.8116|
001fa4  e02c              B        |L1.8192|
                  |L1.8102|
001fa6  69e0              LDR      r0,[r4,#0x1c]         ;3546
001fa8  f0400010          ORR      r0,r0,#0x10           ;3546
001fac  61e0              STR      r0,[r4,#0x1c]         ;3546
001fae  e027              B        |L1.8192|
001fb0  e00a              B        |L1.8136|
                  |L1.8114|
001fb2  e004              B        |L1.8126|
                  |L1.8116|
001fb4  69a0              LDR      r0,[r4,#0x18]         ;3547
001fb6  f0400010          ORR      r0,r0,#0x10           ;3547
001fba  61a0              STR      r0,[r4,#0x18]         ;3547
001fbc  e020              B        |L1.8192|
                  |L1.8126|
001fbe  69e0              LDR      r0,[r4,#0x1c]         ;3551
001fc0  f0400010          ORR      r0,r0,#0x10           ;3551
001fc4  61e0              STR      r0,[r4,#0x1c]         ;3551
001fc6  e01b              B        |L1.8192|
                  |L1.8136|
;;;3553   		} 
;;;3554   	} 	 
;;;3555   else	
;;;3556   	{
;;;3557   	//         .    
;;;3558   	#ifndef UKU2071x 
;;;3559   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3560   		{
;;;3561   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3562   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3563   		}
;;;3564   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3565   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3566   	#endif
;;;3567   	#ifdef UKU2071x 
;;;3568   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001fc8  20d2              MOVS     r0,#0xd2
001fca  f7fffffe          BL       mess_find_unvol
001fce  b110              CBZ      r0,|L1.8150|
001fd0  6828              LDR      r0,[r5,#0]  ; mess_data
001fd2  2866              CMP      r0,#0x66
001fd4  d02d              BEQ      |L1.8242|
                  |L1.8150|
;;;3569   		{
;;;3570   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3571   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3572   		}
;;;3573   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001fd6  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001fd8  07c0              LSLS     r0,r0,#31
001fda  d036              BEQ      |L1.8266|
;;;3574   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001fdc  6fa0              LDR      r0,[r4,#0x78]
001fde  f0407000          ORR      r0,r0,#0x2000000
001fe2  67a0              STR      r0,[r4,#0x78]
                  |L1.8164|
;;;3575   	#endif
;;;3576   
;;;3577   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001fe4  20d2              MOVS     r0,#0xd2
001fe6  f7fffffe          BL       mess_find_unvol
001fea  b110              CBZ      r0,|L1.8178|
001fec  6828              LDR      r0,[r5,#0]  ; mess_data
001fee  286a              CMP      r0,#0x6a
001ff0  d030              BEQ      |L1.8276|
                  |L1.8178|
;;;3578   		{
;;;3579   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3580   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3581        	}
;;;3582   	else 
;;;3583   		{
;;;3584   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
001ff2  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001ff4  4238              TST      r0,r7
001ff6  d03b              BEQ      |L1.8304|
;;;3585        	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
001ff8  69a0              LDR      r0,[r4,#0x18]
001ffa  f0400020          ORR      r0,r0,#0x20
001ffe  61a0              STR      r0,[r4,#0x18]
                  |L1.8192|
;;;3586   		}
;;;3587   	}
;;;3588   //   
;;;3589   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_EXT))	 
002000  20d2              MOVS     r0,#0xd2
002002  f7fffffe          BL       mess_find_unvol
002006  b110              CBZ      r0,|L1.8206|
002008  6828              LDR      r0,[r5,#0]  ; mess_data
00200a  2871              CMP      r0,#0x71
00200c  d036              BEQ      |L1.8316|
                  |L1.8206|
;;;3590   	{
;;;3591   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
;;;3592   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,9,1);
;;;3593   	}
;;;3594   else if(DOP_RELE_FUNC==0)	//     
00200e  48ff              LDR      r0,|L1.9228|
002010  f9b00000          LDRSH    r0,[r0,#0]  ; DOP_RELE_FUNC
002014  b388              CBZ      r0,|L1.8314|
;;;3595   	{
;;;3596   	if((!speedChIsOn)&&(spc_stat!=spcVZ)) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
;;;3597   	else SET_REG(LPC_GPIO0->FIOSET,1,9,1);
;;;3598   	}
;;;3599   else if(DOP_RELE_FUNC==1)  //      
002016  2801              CMP      r0,#1
002018  d10a              BNE      |L1.8240|
;;;3600   	{
;;;3601   	if((mess_find_unvol(MESS2RELE_HNDL))&& (mess_data[0]==PARAM_RELE_BAT_IS_DISCHARGED)) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
00201a  20d2              MOVS     r0,#0xd2
00201c  f7fffffe          BL       mess_find_unvol
002020  b110              CBZ      r0,|L1.8232|
002022  6828              LDR      r0,[r5,#0]  ; mess_data
002024  2872              CMP      r0,#0x72
002026  d048              BEQ      |L1.8378|
                  |L1.8232|
;;;3602   	else SET_REG(LPC_GPIO0->FIOSET,1,9,1);
002028  69a0              LDR      r0,[r4,#0x18]
00202a  f4407000          ORR      r0,r0,#0x200
00202e  61a0              STR      r0,[r4,#0x18]
                  |L1.8240|
;;;3603   	}	 	
;;;3604   #endif
;;;3605   
;;;3606   #ifdef UKU_KONTUR
;;;3607   
;;;3608   //  
;;;3609   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;3610   	{
;;;3611   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3612   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3613   	}
;;;3614   else 
;;;3615   	{
;;;3616        if(  (!(avar_ind_stat&0x00007fff)) &&
;;;3617             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;3618             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;3619             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  /*&&
;;;3620             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3621        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3622   	}
;;;3623   
;;;3624   	
;;;3625   //rel_warm_plazma=0;
;;;3626   //    
;;;3627   /*
;;;3628   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_WARM))
;;;3629   	{
;;;3630   	if(mess_data[1]==0)
;;;3631   		{
;;;3632   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3633   		rel_warm_plazma=1;
;;;3634   		}
;;;3635   	else if(mess_data[1]==1) 
;;;3636   		{
;;;3637   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3638   		rel_warm_plazma=2;
;;;3639   		}
;;;3640        }
;;;3641   else 
;;;3642   	{
;;;3643   	if(warm_stat_k==wsOFF) 
;;;3644   		{
;;;3645   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3646   		rel_warm_plazma=3;
;;;3647   		}
;;;3648        else 
;;;3649   		{
;;;3650   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3651   		rel_warm_plazma=4;
;;;3652   		}
;;;3653   	}
;;;3654   */
;;;3655   // 
;;;3656   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3657   	{
;;;3658   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3659   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3660        }
;;;3661   else 
;;;3662   	{
;;;3663   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3664        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3665   	}
;;;3666   
;;;3667   
;;;3668   
;;;3669   //  
;;;3670   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;3671   	{
;;;3672   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3673   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3674        }
;;;3675   else if(tloaddisable_cmnd==0)
;;;3676   	{
;;;3677   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3678   	}
;;;3679   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;3680   	{
;;;3681   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3682   	}
;;;3683   
;;;3684   else 
;;;3685   	{
;;;3686   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3687        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3688   	} 
;;;3689   
;;;3690   //    
;;;3691   if(RELE_LOG)
;;;3692   	{
;;;3693   	if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3694   		{
;;;3695   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3696   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3697   		}
;;;3698   	else 
;;;3699   		{
;;;3700   		if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3701   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3702   		} 
;;;3703   
;;;3704   	}
;;;3705   else 
;;;3706   	{
;;;3707   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3708   		{
;;;3709   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3710   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3711   		}
;;;3712   	else 
;;;3713   		{
;;;3714   		if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3715   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3716   		} 
;;;3717   	}
;;;3718   #endif
;;;3719   
;;;3720   
;;;3721   #ifdef UKU_TELECORE2015
;;;3722   //  
;;;3723   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3724   	{
;;;3725   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3726   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3727   	}
;;;3728   else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3729   else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3730   
;;;3731   
;;;3732   // 
;;;3733   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3734   	{
;;;3735   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3736   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3737        }
;;;3738   else 
;;;3739   	{
;;;3740   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3741        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3742   	}
;;;3743   
;;;3744   // 
;;;3745   if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_WARM))
;;;3746   	{
;;;3747   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3748   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3749   	}
;;;3750   else 
;;;3751   	{
;;;3752   	if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3753        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3754   	} 
;;;3755   // 
;;;3756   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3757   	{
;;;3758   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3759   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3760   	}
;;;3761   else 
;;;3762   	{
;;;3763   	if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3764        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3765   	} 
;;;3766   
;;;3767   //  
;;;3768   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VVENT))
;;;3769   	{
;;;3770   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;3771   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;3772   	}
;;;3773   else 
;;;3774   	{
;;;3775   	if(vvent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;3776        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;3777   	} 
;;;3778   
;;;3779   #endif
;;;3780   
;;;3781   #ifdef UKU_TELECORE2017
;;;3782   //  
;;;3783   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3784   	{
;;;3785   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3786   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3787   	}
;;;3788   else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3789   else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3790   
;;;3791   
;;;3792   // 
;;;3793   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3794   	{
;;;3795   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3796   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3797        }
;;;3798   else 
;;;3799   	{
;;;3800   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3801        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3802   	}
;;;3803   
;;;3804   // 
;;;3805   if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_WARM))
;;;3806   	{
;;;3807   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3808   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3809   	}
;;;3810   else 
;;;3811   	{
;;;3812   	if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3813        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3814   	} 
;;;3815   // 
;;;3816   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3817   	{
;;;3818   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3819   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3820   	}
;;;3821   else 
;;;3822   	{
;;;3823   	if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3824        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3825   	} 
;;;3826   
;;;3827   //  
;;;3828   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VVENT))
;;;3829   	{
;;;3830   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;3831   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;3832   	}
;;;3833   else 
;;;3834   	{
;;;3835   	if(vvent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;3836        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;3837   	} 
;;;3838   
;;;3839   #endif
;;;3840   }
002030  e4bd              B        |L1.6574|
                  |L1.8242|
002032  6868              LDR      r0,[r5,#4]            ;3570  ; mess_data
002034  b120              CBZ      r0,|L1.8256|
002036  69e0              LDR      r0,[r4,#0x1c]         ;3571
002038  f0407000          ORR      r0,r0,#0x2000000      ;3571
00203c  61e0              STR      r0,[r4,#0x1c]         ;3571
00203e  e7d1              B        |L1.8164|
                  |L1.8256|
002040  69a0              LDR      r0,[r4,#0x18]         ;3570
002042  f0407000          ORR      r0,r0,#0x2000000      ;3570
002046  61a0              STR      r0,[r4,#0x18]         ;3570
002048  e7cc              B        |L1.8164|
                  |L1.8266|
00204a  6ba0              LDR      r0,[r4,#0x38]         ;3573
00204c  f0407000          ORR      r0,r0,#0x2000000      ;3573
002050  63a0              STR      r0,[r4,#0x38]         ;3573
002052  e7c7              B        |L1.8164|
                  |L1.8276|
002054  6868              LDR      r0,[r5,#4]            ;3579  ; mess_data
002056  b130              CBZ      r0,|L1.8294|
002058  2801              CMP      r0,#1                 ;3580
00205a  d1d1              BNE      |L1.8192|
00205c  69a0              LDR      r0,[r4,#0x18]         ;3580
00205e  f0400020          ORR      r0,r0,#0x20           ;3580
002062  61a0              STR      r0,[r4,#0x18]         ;3580
002064  e7cc              B        |L1.8192|
                  |L1.8294|
002066  69e0              LDR      r0,[r4,#0x1c]         ;3579
002068  f0400020          ORR      r0,r0,#0x20           ;3579
00206c  61e0              STR      r0,[r4,#0x1c]         ;3579
00206e  e7c7              B        |L1.8192|
                  |L1.8304|
002070  69e0              LDR      r0,[r4,#0x1c]         ;3584
002072  f0400020          ORR      r0,r0,#0x20           ;3584
002076  61e0              STR      r0,[r4,#0x1c]         ;3584
002078  e7c2              B        |L1.8192|
                  |L1.8314|
00207a  e00d              B        |L1.8344|
                  |L1.8316|
00207c  6868              LDR      r0,[r5,#4]            ;3591  ; mess_data
00207e  b130              CBZ      r0,|L1.8334|
002080  2801              CMP      r0,#1                 ;3592
002082  d1d5              BNE      |L1.8240|
002084  69a0              LDR      r0,[r4,#0x18]         ;3592
002086  f4407000          ORR      r0,r0,#0x200          ;3592
00208a  61a0              STR      r0,[r4,#0x18]         ;3592
00208c  e48f              B        |L1.6574|
                  |L1.8334|
00208e  69e0              LDR      r0,[r4,#0x1c]         ;3591
002090  f4407000          ORR      r0,r0,#0x200          ;3591
002094  61e0              STR      r0,[r4,#0x1c]         ;3591
002096  e48a              B        |L1.6574|
                  |L1.8344|
002098  48dd              LDR      r0,|L1.9232|
00209a  8800              LDRH     r0,[r0,#0]            ;3596  ; speedChIsOn
00209c  b940              CBNZ     r0,|L1.8368|
00209e  48dd              LDR      r0,|L1.9236|
0020a0  7d00              LDRB     r0,[r0,#0x14]         ;3596  ; spc_stat
0020a2  2802              CMP      r0,#2                 ;3596
0020a4  d004              BEQ      |L1.8368|
0020a6  69e0              LDR      r0,[r4,#0x1c]         ;3596
0020a8  f4407000          ORR      r0,r0,#0x200          ;3596
0020ac  61e0              STR      r0,[r4,#0x1c]         ;3596
0020ae  e47e              B        |L1.6574|
                  |L1.8368|
0020b0  69a0              LDR      r0,[r4,#0x18]         ;3597
0020b2  f4407000          ORR      r0,r0,#0x200          ;3597
0020b6  61a0              STR      r0,[r4,#0x18]         ;3597
0020b8  e479              B        |L1.6574|
                  |L1.8378|
0020ba  69e0              LDR      r0,[r4,#0x1c]         ;3601
0020bc  f4407000          ORR      r0,r0,#0x200          ;3601
0020c0  61e0              STR      r0,[r4,#0x1c]         ;3601
0020c2  e474              B        |L1.6574|
;;;3841   
                          ENDP

                  bps_hndl PROC
;;;3842   //-----------------------------------------------
;;;3843   void bps_hndl(void)
0020c4  e92d5ff0          PUSH     {r4-r12,lr}
;;;3844   {
;;;3845   char ptr__,i;
;;;3846   unsigned short tempUS;
;;;3847   
;;;3848   if(sh_cnt0<10)
0020c8  4ed2              LDR      r6,|L1.9236|
;;;3849   	{
;;;3850   	sh_cnt0++;
;;;3851   	if(sh_cnt0>=10)
;;;3852   		{
;;;3853   		sh_cnt0=0;
0020ca  2700              MOVS     r7,#0
;;;3854   		b1Hz_sh=1;
0020cc  f04f0a01          MOV      r10,#1
0020d0  7cb0              LDRB     r0,[r6,#0x12]         ;3848  ; sh_cnt0
0020d2  280a              CMP      r0,#0xa               ;3848
0020d4  d207              BCS      |L1.8422|
0020d6  1c40              ADDS     r0,r0,#1              ;3850
0020d8  b2c0              UXTB     r0,r0                 ;3850
0020da  74b0              STRB     r0,[r6,#0x12]         ;3850
0020dc  280a              CMP      r0,#0xa               ;3851
0020de  d302              BCC      |L1.8422|
0020e0  74b7              STRB     r7,[r6,#0x12]         ;3853
0020e2  f886a013          STRB     r10,[r6,#0x13]
                  |L1.8422|
;;;3855   		}
;;;3856   	}
;;;3857   
;;;3858   /*if(sh_cnt1<5)
;;;3859   	{
;;;3860   	sh_cnt1++;
;;;3861   	if(sh_cnt1==5)
;;;3862   		{
;;;3863   		sh_cnt1=0;
;;;3864   		b2Hz_sh=1;
;;;3865   		}
;;;3866   	} */
;;;3867   
;;;3868   
;;;3869   /*
;;;3870   if(mess_find(MESS_SRC_ON_OFF))
;;;3871   	{
;;;3872   	if(mess_data[0]==_MESS_SRC_MASK_BLOK_2SEC)
;;;3873   		{
;;;3874   		char i;
;;;3875   		for(i=0;i<NUMIST;i++)
;;;3876   			{
;;;3877   			if(mess_data[1]&(1<<i))src[i]._ist_blok_cnt=20;
;;;3878   			}
;;;3879   		
;;;3880   		}
;;;3881   	else if(mess_data[0]==_MESS_SRC_MASK_UNBLOK)
;;;3882   		{
;;;3883   		char i;
;;;3884   		for(i=0;i<NUMIST;i++)
;;;3885   			{
;;;3886   			if(mess_data[1]&(1<<i))src[i]._ist_blok_cnt=0;
;;;3887   			}
;;;3888   		
;;;3889   		}
;;;3890   	}
;;;3891   	
;;;3892   else if(mess_find(_MESS_SRC_MASK_ON))
;;;3893   	{				
;;;3894   	if(mess_data[0]==_MESS_SRC_MASK_ON)
;;;3895   		{
;;;3896   		char i;
;;;3897   		for(i=0;i<NUMIST;i++)
;;;3898   			{
;;;3899   			if(mess_data[1]&(1<<i))
;;;3900   				{
;;;3901   				src[i]._ist_blok_cnt=0;
;;;3902   				src[i]._flags_tu=2;
;;;3903   				}
;;;3904   			}
;;;3905   		
;;;3906   		}				
;;;3907   	}*/
;;;3908   
;;;3909   
;;;3910   
;;;3911   /*else*/ 
;;;3912   bps_on_mask=0;
0020e6  f8a6704c          STRH     r7,[r6,#0x4c]
;;;3913   bps_off_mask=0;
0020ea  f8a6704e          STRH     r7,[r6,#0x4e]
;;;3914   
;;;3915   if(mess_find_unvol(MESS2BPS_HNDL))
0020ee  20cd              MOVS     r0,#0xcd
0020f0  f7fffffe          BL       mess_find_unvol
;;;3916   	{
;;;3917   	if(mess_data[0]==PARAM_BPS_ALL_OFF_AFTER_2SEC)
;;;3918   		{
;;;3919   		bps_off_mask=0xffff;
;;;3920   		}
;;;3921   
;;;3922   	if(mess_data[0]==PARAM_BPS_MASK_OFF_AFTER_2SEC)
;;;3923   		{
;;;3924   		bps_off_mask=mess_data[1];
;;;3925   		}
;;;3926   
;;;3927   	if(mess_data[0]==PARAM_BPS_MASK_ON)
;;;3928   		{
;;;3929   		bps_on_mask=mess_data[1];
;;;3930   		}
;;;3931   
;;;3932   	if(mess_data[0]==PARAM_BPS_ALL_ON)
;;;3933   		{
;;;3934   		bps_on_mask=0xffff;
;;;3935   		}
;;;3936   
;;;3937   	if(mess_data[0]==PARAM_BPS_MASK_ON_OFF_AFTER_2SEC)
;;;3938   		{
;;;3939   		bps_on_mask=mess_data[1];
;;;3940   		bps_off_mask=~(mess_data[1]);
;;;3941   		}
;;;3942   
;;;3943   
;;;3944   	for(i=0;i<=NUMIST;i++)
;;;3945   		{
;;;3946   		if(bps_off_mask&(1<<i)) bps[i]._blok_cnt++;
0020f4  f8df8320          LDR      r8,|L1.9240|
0020f8  f8dfb320          LDR      r11,|L1.9244|
0020fc  b388              CBZ      r0,|L1.8546|
0020fe  4ac8              LDR      r2,|L1.9248|
002100  f64f73ff          MOV      r3,#0xffff            ;3919
002104  6810              LDR      r0,[r2,#0]            ;3917  ; mess_data
002106  28ce              CMP      r0,#0xce              ;3917
002108  d101              BNE      |L1.8462|
00210a  f8a6304e          STRH     r3,[r6,#0x4e]         ;3919
                  |L1.8462|
00210e  28cf              CMP      r0,#0xcf              ;3922
002110  d102              BNE      |L1.8472|
002112  6851              LDR      r1,[r2,#4]            ;3924  ; mess_data
002114  f8a6104e          STRH     r1,[r6,#0x4e]         ;3924
                  |L1.8472|
002118  28d1              CMP      r0,#0xd1              ;3927
00211a  d102              BNE      |L1.8482|
00211c  6851              LDR      r1,[r2,#4]            ;3929  ; mess_data
00211e  f8a6104c          STRH     r1,[r6,#0x4c]         ;3929
                  |L1.8482|
002122  28d2              CMP      r0,#0xd2              ;3932
002124  d101              BNE      |L1.8490|
002126  f8a6304c          STRH     r3,[r6,#0x4c]         ;3934
                  |L1.8490|
00212a  28d0              CMP      r0,#0xd0              ;3937
00212c  d105              BNE      |L1.8506|
00212e  6850              LDR      r0,[r2,#4]            ;3939  ; mess_data
002130  f8a6004c          STRH     r0,[r6,#0x4c]         ;3939
002134  43c0              MVNS     r0,r0                 ;3940
002136  f8a6004e          STRH     r0,[r6,#0x4e]         ;3940
                  |L1.8506|
00213a  2400              MOVS     r4,#0                 ;3944
00213c  e035              B        |L1.8618|
                  |L1.8510|
00213e  f8b6004e          LDRH     r0,[r6,#0x4e]  ; bps_off_mask
002142  fa0af904          LSL      r9,r10,r4
002146  ea190f00          TST      r9,r0
00214a  d00b              BEQ      |L1.8548|
00214c  ebc400c4          RSB      r0,r4,r4,LSL #3
002150  eb001004          ADD      r0,r0,r4,LSL #4
002154  eb080080          ADD      r0,r8,r0,LSL #2
002158  f8301f40          LDRH     r1,[r0,#0x40]!
00215c  1c49              ADDS     r1,r1,#1
00215e  8001              STRH     r1,[r0,#0]
002160  e008              B        |L1.8564|
                  |L1.8546|
002162  e027              B        |L1.8628|
                  |L1.8548|
;;;3947   		else bps[i]._blok_cnt=0;
002164  ebc400c4          RSB      r0,r4,r4,LSL #3
002168  eb001004          ADD      r0,r0,r4,LSL #4
00216c  eb080080          ADD      r0,r8,r0,LSL #2
002170  f8a07040          STRH     r7,[r0,#0x40]
                  |L1.8564|
;;;3948   		gran(&bps[i]._blok_cnt,0,50);
002174  ebc400c4          RSB      r0,r4,r4,LSL #3
002178  eb001004          ADD      r0,r0,r4,LSL #4
00217c  eb080580          ADD      r5,r8,r0,LSL #2
002180  f1050040          ADD      r0,r5,#0x40
002184  2232              MOVS     r2,#0x32
002186  2100              MOVS     r1,#0
002188  f7fffffe          BL       gran
;;;3949   		if(bps[i]._blok_cnt>20) bps[i]._flags_tu=1;
00218c  f9b50040          LDRSH    r0,[r5,#0x40]
002190  2814              CMP      r0,#0x14
002192  dd01              BLE      |L1.8600|
002194  f885a02c          STRB     r10,[r5,#0x2c]
                  |L1.8600|
;;;3950   		if(bps_on_mask&(1<<i)) bps[i]._flags_tu=0;
002198  f8b6004c          LDRH     r0,[r6,#0x4c]  ; bps_on_mask
00219c  ea190f00          TST      r9,r0
0021a0  d001              BEQ      |L1.8614|
0021a2  f885702c          STRB     r7,[r5,#0x2c]
                  |L1.8614|
0021a6  1c64              ADDS     r4,r4,#1              ;3944
0021a8  b2e4              UXTB     r4,r4                 ;3944
                  |L1.8618|
0021aa  f9bb0000          LDRSH    r0,[r11,#0]           ;3944  ; NUMIST
0021ae  4284              CMP      r4,r0                 ;3944
0021b0  ddc5              BLE      |L1.8510|
0021b2  e07d              B        |L1.8880|
                  |L1.8628|
;;;3951   	     }
;;;3952   
;;;3953   	
;;;3954   /*
;;;3955   
;;;3956   	if(bps_all_off_cnt>20)
;;;3957   		{
;;;3958   		for(i=0;i<=NUMIST;i++)
;;;3959   			{
;;;3960   	     	bps[i]._flags_tu=1;
;;;3961   	     	}
;;;3962   		}
;;;3963   	else if(bps_mask_off_cnt>20)
;;;3964   		{
;;;3965   		for(i=0;i<=NUMIST;i++)
;;;3966   			{
;;;3967   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=1;
;;;3968   	     	}
;;;3969   		}	
;;;3970   		
;;;3971   	else if(bps_mask_on_off_cnt>20)
;;;3972   		{
;;;3973   		for(i=0;i<=NUMIST;i++)
;;;3974   			{
;;;3975   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=1;
;;;3976   			else bps[i]._flags_tu=0;
;;;3977   	     	}
;;;3978   		}
;;;3979   		
;;;3980   	if(mess_data[0]==PARAM_BPS_MASK_ON)
;;;3981   		{
;;;3982   		for(i=0;i<=NUMIST;i++)
;;;3983   			{
;;;3984   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=0;
;;;3985   	     	}
;;;3986   		}
;;;3987   */										
;;;3988   	}
;;;3989   
;;;3990   
;;;3991   else if(b1Hz_sh)
0021b4  7cf0              LDRB     r0,[r6,#0x13]  ; b1Hz_sh
0021b6  b3f0              CBZ      r0,|L1.8758|
;;;3992   	{
;;;3993   	ptr__=0;
0021b8  2400              MOVS     r4,#0
;;;3994        for(i=0;i<=NUMIST;i++)
0021ba  2100              MOVS     r1,#0
0021bc  f9bb0000          LDRSH    r0,[r11,#0]           ;3944
0021c0  e009              B        |L1.8662|
                  |L1.8642|
;;;3995   		{
;;;3996   	     bps[i]._flags_tu=1;
0021c2  ebc102c1          RSB      r2,r1,r1,LSL #3
0021c6  eb021201          ADD      r2,r2,r1,LSL #4
0021ca  eb080282          ADD      r2,r8,r2,LSL #2
0021ce  f882a02c          STRB     r10,[r2,#0x2c]
0021d2  1c49              ADDS     r1,r1,#1              ;3994
0021d4  b2c9              UXTB     r1,r1                 ;3994
                  |L1.8662|
0021d6  4281              CMP      r1,r0                 ;3994
0021d8  ddf3              BLE      |L1.8642|
;;;3997   	     }	
;;;3998     	     
;;;3999     	for(i=0;(i<NUMIST)&&(ptr__<num_necc);i++)
0021da  2100              MOVS     r1,#0
0021dc  e01e              B        |L1.8732|
                  |L1.8670|
;;;4000     		{
;;;4001   		char ii,iii;
;;;4002   
;;;4003   		ii=(char)NUMIST;
0021de  b2c2              UXTB     r2,r0
;;;4004   		//if(ii<0)ii=0;
;;;4005   		if(ii>32)ii=32;
0021e0  2a20              CMP      r2,#0x20
0021e2  d900              BLS      |L1.8678|
0021e4  2220              MOVS     r2,#0x20
                  |L1.8678|
;;;4006   		iii=numOfForvardBps;
0021e6  7e73              LDRB     r3,[r6,#0x19]  ; numOfForvardBps
;;;4007   		//if(iii<0)iii=0;
;;;4008   		if(iii>=NUMIST)iii=0;
0021e8  4283              CMP      r3,r0
0021ea  db00              BLT      |L1.8686|
0021ec  2300              MOVS     r3,#0
                  |L1.8686|
;;;4009   		iii+=i;
0021ee  440b              ADD      r3,r3,r1
0021f0  b2db              UXTB     r3,r3
;;;4010   		iii=iii%ii;
0021f2  fbb3f5f2          UDIV     r5,r3,r2
0021f6  fb023215          MLS      r2,r2,r5,r3
;;;4011   		
;;;4012     	     if((bps[iii]._state==bsRDY)||(bps[iii]._state==bsWRK))
0021fa  ebc203c2          RSB      r3,r2,r2,LSL #3
0021fe  eb031202          ADD      r2,r3,r2,LSL #4
002202  eb080282          ADD      r2,r8,r2,LSL #2
002206  7893              LDRB     r3,[r2,#2]
002208  2b02              CMP      r3,#2
00220a  d001              BEQ      |L1.8720|
00220c  2b01              CMP      r3,#1
00220e  d103              BNE      |L1.8728|
                  |L1.8720|
;;;4013     	         	{
;;;4014     	         	bps[iii]._flags_tu=0;
002210  f882702c          STRB     r7,[r2,#0x2c]
;;;4015     	         	ptr__++;
002214  1c64              ADDS     r4,r4,#1
002216  b2e4              UXTB     r4,r4
                  |L1.8728|
002218  1c49              ADDS     r1,r1,#1              ;3999
00221a  b2c9              UXTB     r1,r1                 ;3999
                  |L1.8732|
00221c  4281              CMP      r1,r0                 ;3999
00221e  da04              BGE      |L1.8746|
002220  4a80              LDR      r2,|L1.9252|
002222  f9b22000          LDRSH    r2,[r2,#0]            ;3999  ; num_necc
002226  4294              CMP      r4,r2                 ;3999
002228  dbd9              BLT      |L1.8670|
                  |L1.8746|
;;;4016     	         	}
;;;4017   			
;;;4018     	     }
;;;4019   	bps[numOfForvardBps_old]._flags_tu=0;
00222a  7eb1              LDRB     r1,[r6,#0x1a]  ; numOfForvardBps_old
00222c  ebc102c1          RSB      r2,r1,r1,LSL #3
002230  eb021101          ADD      r1,r2,r1,LSL #4
002234  e000              B        |L1.8760|
                  |L1.8758|
002236  e03b              B        |L1.8880|
                  |L1.8760|
002238  eb080181          ADD      r1,r8,r1,LSL #2
00223c  f881702c          STRB     r7,[r1,#0x2c]
;;;4020   
;;;4021   	if(main_1Hz_cnt<60)
002240  4979              LDR      r1,|L1.9256|
002242  f9b11000          LDRSH    r1,[r1,#0]  ; main_1Hz_cnt
002246  293c              CMP      r1,#0x3c
002248  da0d              BGE      |L1.8806|
;;;4022   		{
;;;4023        	for(i=0;i<=NUMIST;i++)
00224a  2100              MOVS     r1,#0
00224c  e009              B        |L1.8802|
                  |L1.8782|
;;;4024   			{
;;;4025   	     	bps[i]._flags_tu=0;
00224e  ebc102c1          RSB      r2,r1,r1,LSL #3
002252  eb021201          ADD      r2,r2,r1,LSL #4
002256  eb080282          ADD      r2,r8,r2,LSL #2
00225a  f882702c          STRB     r7,[r2,#0x2c]
00225e  1c49              ADDS     r1,r1,#1              ;4023
002260  b2c9              UXTB     r1,r1                 ;4023
                  |L1.8802|
002262  4281              CMP      r1,r0                 ;4023
002264  ddf3              BLE      |L1.8782|
                  |L1.8806|
;;;4026   	     	}	
;;;4027   		}
;;;4028   	if(ipsBlckStat)
002266  4971              LDR      r1,|L1.9260|
002268  8809              LDRH     r1,[r1,#0]  ; ipsBlckStat
00226a  b169              CBZ      r1,|L1.8840|
;;;4029   		{
;;;4030        	for(i=0;i<=NUMIST;i++)
00226c  2100              MOVS     r1,#0
00226e  e009              B        |L1.8836|
                  |L1.8816|
;;;4031   			{
;;;4032   	     	bps[i]._flags_tu=1;
002270  ebc102c1          RSB      r2,r1,r1,LSL #3
002274  eb021201          ADD      r2,r2,r1,LSL #4
002278  eb080282          ADD      r2,r8,r2,LSL #2
00227c  f882a02c          STRB     r10,[r2,#0x2c]
002280  1c49              ADDS     r1,r1,#1              ;4030
002282  b2c9              UXTB     r1,r1                 ;4030
                  |L1.8836|
002284  4281              CMP      r1,r0                 ;4030
002286  ddf3              BLE      |L1.8816|
                  |L1.8840|
;;;4033   	     	}
;;;4034   		}
;;;4035   
;;;4036        for(i=0;i<=NUMIST;i++)
002288  2100              MOVS     r1,#0
;;;4037   		{
;;;4038   	    if(bps[i]._flags_tu==1) 	bps[i]._x_=-50;
00228a  f06f0331          MVN      r3,#0x31
00228e  e00d              B        |L1.8876|
                  |L1.8848|
002290  ebc102c1          RSB      r2,r1,r1,LSL #3
002294  eb021201          ADD      r2,r2,r1,LSL #4
002298  eb080282          ADD      r2,r8,r2,LSL #2
00229c  f892402c          LDRB     r4,[r2,#0x2c]
0022a0  2c01              CMP      r4,#1
0022a2  d101              BNE      |L1.8872|
0022a4  f8a23050          STRH     r3,[r2,#0x50]
                  |L1.8872|
0022a8  1c49              ADDS     r1,r1,#1              ;4036
0022aa  b2c9              UXTB     r1,r1                 ;4036
                  |L1.8876|
0022ac  4281              CMP      r1,r0                 ;4036
0022ae  ddef              BLE      |L1.8848|
                  |L1.8880|
;;;4039   	   	}	
;;;4040   		 
;;;4041     	}
;;;4042   
;;;4043   
;;;4044   for(i=0;i<NUMIST;i++)
0022b0  2000              MOVS     r0,#0
;;;4045        {
;;;4046        if(bps[i]._ist_blok_host_cnt!=0)
;;;4047             {
;;;4048             bps[i]._flags_tu=99;
0022b2  2463              MOVS     r4,#0x63
0022b4  f9bb1000          LDRSH    r1,[r11,#0]           ;3944
0022b8  e00d              B        |L1.8918|
                  |L1.8890|
0022ba  ebc002c0          RSB      r2,r0,r0,LSL #3       ;4046
0022be  eb021200          ADD      r2,r2,r0,LSL #4       ;4046
0022c2  eb080282          ADD      r2,r8,r2,LSL #2       ;4046
0022c6  6bd3              LDR      r3,[r2,#0x3c]         ;4046
0022c8  b11b              CBZ      r3,|L1.8914|
0022ca  f882402c          STRB     r4,[r2,#0x2c]
;;;4049   	     bps[i]._ist_blok_host_cnt--;
0022ce  1e5b              SUBS     r3,r3,#1
0022d0  63d3              STR      r3,[r2,#0x3c]
                  |L1.8914|
0022d2  1c40              ADDS     r0,r0,#1              ;4044
0022d4  b2c0              UXTB     r0,r0                 ;4044
                  |L1.8918|
0022d6  4288              CMP      r0,r1                 ;4044
0022d8  dbef              BLT      |L1.8890|
;;;4050             }
;;;4051        }
;;;4052   
;;;4053   
;;;4054   
;;;4055   
;;;4056   b1Hz_sh=0;
0022da  74f7              STRB     r7,[r6,#0x13]
;;;4057   
;;;4058   
;;;4059   num_of_wrks_bps=0;
0022dc  73f7              STRB     r7,[r6,#0xf]
;;;4060   tempUS=0;
0022de  2200              MOVS     r2,#0
;;;4061   for(i=0;i<NUMIST;i++)
0022e0  2000              MOVS     r0,#0
0022e2  e011              B        |L1.8968|
                  |L1.8932|
;;;4062   	{
;;;4063   	if(bps[i]._state==bsWRK)
0022e4  ebc003c0          RSB      r3,r0,r0,LSL #3
0022e8  eb031300          ADD      r3,r3,r0,LSL #4
0022ec  eb080383          ADD      r3,r8,r3,LSL #2
0022f0  789c              LDRB     r4,[r3,#2]
0022f2  2c01              CMP      r4,#1
0022f4  d106              BNE      |L1.8964|
;;;4064   		{
;;;4065   		num_of_wrks_bps++;
0022f6  7bf4              LDRB     r4,[r6,#0xf]  ; num_of_wrks_bps
0022f8  1c64              ADDS     r4,r4,#1
0022fa  73f4              STRB     r4,[r6,#0xf]
;;;4066   		if(bps[i]._Uii>tempUS)tempUS=bps[i]._Uii;
0022fc  69db              LDR      r3,[r3,#0x1c]
0022fe  4293              CMP      r3,r2
002300  dd00              BLE      |L1.8964|
002302  b29a              UXTH     r2,r3
                  |L1.8964|
002304  1c40              ADDS     r0,r0,#1              ;4061
002306  b2c0              UXTB     r0,r0                 ;4061
                  |L1.8968|
002308  4288              CMP      r0,r1                 ;4061
00230a  dbeb              BLT      |L1.8932|
;;;4067   		}
;;;4068   	}
;;;4069   Ubpsmax=tempUS;
00230c  87b2              STRH     r2,[r6,#0x3c]
;;;4070   
;;;4071   bPARALLEL_ENOUG=0;
00230e  7777              STRB     r7,[r6,#0x1d]
;;;4072   bPARALLEL_NOT_ENOUG=1;
002310  f886a01c          STRB     r10,[r6,#0x1c]
;;;4073   
;;;4074   for(i=0;i<NUMIST;i++)
002314  2000              MOVS     r0,#0
;;;4075   	{
;;;4076   	if(bps[i]._Ti>=TSIGN)
002316  4a46              LDR      r2,|L1.9264|
002318  f9b23000          LDRSH    r3,[r2,#0]
;;;4077   		{
;;;4078   		bPARALLEL_ENOUG=1;
;;;4079   		}
;;;4080   	if(bps[i]._Ti>=(TSIGN-5))
00231c  1f5c              SUBS     r4,r3,#5
00231e  e00f              B        |L1.9024|
                  |L1.8992|
002320  ebc002c0          RSB      r2,r0,r0,LSL #3       ;4076
002324  eb021200          ADD      r2,r2,r0,LSL #4       ;4076
002328  eb080282          ADD      r2,r8,r2,LSL #2       ;4076
00232c  6a92              LDR      r2,[r2,#0x28]         ;4076
00232e  429a              CMP      r2,r3                 ;4076
002330  db01              BLT      |L1.9014|
002332  f886a01d          STRB     r10,[r6,#0x1d]        ;4078
                  |L1.9014|
002336  42a2              CMP      r2,r4
002338  db00              BLT      |L1.9020|
;;;4081   		{
;;;4082   		bPARALLEL_NOT_ENOUG=0;
00233a  7737              STRB     r7,[r6,#0x1c]
                  |L1.9020|
00233c  1c40              ADDS     r0,r0,#1              ;4074
00233e  b2c0              UXTB     r0,r0                 ;4074
                  |L1.9024|
002340  4288              CMP      r0,r1                 ;4074
002342  dbed              BLT      |L1.8992|
;;;4083   		}
;;;4084   	}
;;;4085   
;;;4086   if(bPARALLEL_ENOUG==1)
002344  7f70              LDRB     r0,[r6,#0x1d]  ; bPARALLEL_ENOUG
002346  2801              CMP      r0,#1
002348  d008              BEQ      |L1.9052|
;;;4087   	{
;;;4088   	bPARALLEL=1;
;;;4089   	}
;;;4090   else if(bPARALLEL && bPARALLEL_NOT_ENOUG)
00234a  7fb0              LDRB     r0,[r6,#0x1e]  ; bPARALLEL
00234c  2800              CMP      r0,#0
00234e  d003              BEQ      |L1.9048|
002350  7f30              LDRB     r0,[r6,#0x1c]  ; bPARALLEL_NOT_ENOUG
002352  2800              CMP      r0,#0
002354  d000              BEQ      |L1.9048|
;;;4091   	{
;;;4092   	bPARALLEL=0;
002356  77b7              STRB     r7,[r6,#0x1e]
                  |L1.9048|
;;;4093   	}
;;;4094   }
002358  e8bd9ff0          POP      {r4-r12,pc}
                  |L1.9052|
00235c  f886a01e          STRB     r10,[r6,#0x1e]        ;4088
002360  e7fa              B        |L1.9048|
;;;4095   
                          ENDP

                  powerAntiAliasingHndl PROC
;;;4102   //-----------------------------------------------
;;;4103   void powerAntiAliasingHndl(void)
002362  b570              PUSH     {r4-r6,lr}
;;;4104   {
;;;4105   if((power_summary_tempo/10UL)==(power_summary_tempo_old/10UL))
002364  230a              MOVS     r3,#0xa
002366  4c34              LDR      r4,|L1.9272|
002368  4832              LDR      r0,|L1.9268|
;;;4106   	{
;;;4107   	if(powerSummaryCnt<15)powerSummaryCnt++;
;;;4108   	if(powerSummaryCnt>=10)
;;;4109   		{
;;;4110   		power_summary=power_summary_tempo;
;;;4111   		}
;;;4112   	}
;;;4113   else powerSummaryCnt=0;
00236a  2500              MOVS     r5,#0
00236c  6822              LDR      r2,[r4,#0]            ;4105  ; power_summary_tempo_old
00236e  6800              LDR      r0,[r0,#0]            ;4105  ; power_summary_tempo
002370  fbb2f6f3          UDIV     r6,r2,r3              ;4105
002374  fbb0f1f3          UDIV     r1,r0,r3              ;4105
002378  4a30              LDR      r2,|L1.9276|
00237a  42b1              CMP      r1,r6                 ;4105
00237c  d10a              BNE      |L1.9108|
00237e  7811              LDRB     r1,[r2,#0]            ;4107  ; powerSummaryCnt
002380  290f              CMP      r1,#0xf               ;4107
002382  d201              BCS      |L1.9096|
002384  1c49              ADDS     r1,r1,#1              ;4107
002386  7011              STRB     r1,[r2,#0]            ;4107
                  |L1.9096|
002388  7811              LDRB     r1,[r2,#0]            ;4108  ; powerSummaryCnt
00238a  290a              CMP      r1,#0xa               ;4108
00238c  d303              BCC      |L1.9110|
00238e  492c              LDR      r1,|L1.9280|
002390  6008              STR      r0,[r1,#0]            ;4110  ; power_summary
002392  e000              B        |L1.9110|
                  |L1.9108|
002394  7015              STRB     r5,[r2,#0]
                  |L1.9110|
;;;4114   power_summary_tempo_old=power_summary_tempo;
002396  6020              STR      r0,[r4,#0]  ; power_summary_tempo_old
;;;4115   
;;;4116   if((power_current_tempo/10UL)==(power_current_tempo_old/10UL))
002398  482a              LDR      r0,|L1.9284|
00239a  4c2b              LDR      r4,|L1.9288|
00239c  f9b00000          LDRSH    r0,[r0,#0]  ; power_current_tempo
0023a0  f9b42000          LDRSH    r2,[r4,#0]  ; power_current_tempo_old
0023a4  fbb0f1f3          UDIV     r1,r0,r3
0023a8  fbb2f3f3          UDIV     r3,r2,r3
;;;4117   	{
;;;4118   	if(powerCurrentCnt<15)powerCurrentCnt++;
0023ac  4a27              LDR      r2,|L1.9292|
0023ae  4299              CMP      r1,r3                 ;4116
0023b0  d10a              BNE      |L1.9160|
0023b2  7811              LDRB     r1,[r2,#0]  ; powerCurrentCnt
0023b4  290f              CMP      r1,#0xf
0023b6  d201              BCS      |L1.9148|
0023b8  1c49              ADDS     r1,r1,#1
0023ba  7011              STRB     r1,[r2,#0]
                  |L1.9148|
;;;4119   	if(powerCurrentCnt>=10)
0023bc  7811              LDRB     r1,[r2,#0]  ; powerCurrentCnt
0023be  290a              CMP      r1,#0xa
0023c0  d303              BCC      |L1.9162|
;;;4120   		{
;;;4121   		power_current=power_current_tempo;
0023c2  4923              LDR      r1,|L1.9296|
0023c4  8008              STRH     r0,[r1,#0]
0023c6  e000              B        |L1.9162|
                  |L1.9160|
;;;4122   		}
;;;4123   	}
;;;4124   else powerCurrentCnt=0;
0023c8  7015              STRB     r5,[r2,#0]
                  |L1.9162|
;;;4125   power_current_tempo_old=power_current_tempo;
0023ca  8020              STRH     r0,[r4,#0]
;;;4126   }
0023cc  bd70              POP      {r4-r6,pc}
;;;4127   
                          ENDP

                  ips_current_average_hndl PROC
;;;4128   //-----------------------------------------------
;;;4129   void ips_current_average_hndl(void)
0023ce  e92d4ff0          PUSH     {r4-r11,lr}
;;;4130   {
0023d2  b085              SUB      sp,sp,#0x14
;;;4131   if(++ica_timer_cnt>=10)
0023d4  4e1f              LDR      r6,|L1.9300|
;;;4132   	{
;;;4133   	ica_timer_cnt=0;
0023d6  2400              MOVS     r4,#0
;;;4134   	ica_plazma[0]++;
;;;4135   
;;;4136   	ica_my_current=bps_I;
;;;4137   
;;;4138   	if((ica_my_current>ica_your_current)&&((ica_my_current-ica_your_current)>=5)&&((ICA_EN==1)||((ICA_EN==2)&&(ica_cntrl_hndl_cnt>5))))
0023d8  4f1f              LDR      r7,|L1.9304|
0023da  7830              LDRB     r0,[r6,#0]            ;4131  ; ica_timer_cnt
;;;4139   		{
;;;4140   		ica_plazma[1]++;
;;;4141   		ica_u_necc--;
;;;4142   		}
;;;4143   	else if((ica_my_current<ica_your_current)&&((ica_your_current-ica_my_current)>=5)&&((ICA_EN==1)||((ICA_EN==2)&&(ica_cntrl_hndl_cnt>5))))
;;;4144   		{
;;;4145   		ica_plazma[1]--;
;;;4146   		ica_u_necc++;
;;;4147   		}
;;;4148   	gran(&ica_u_necc,-20,20);
0023dc  f06f0513          MVN      r5,#0x13
0023e0  1c40              ADDS     r0,r0,#1              ;4131
0023e2  b2c0              UXTB     r0,r0                 ;4131
0023e4  7030              STRB     r0,[r6,#0]            ;4131
0023e6  280a              CMP      r0,#0xa               ;4131
0023e8  d37a              BCC      |L1.9440|
0023ea  7034              STRB     r4,[r6,#0]            ;4133
0023ec  f8df906c          LDR      r9,|L1.9308|
0023f0  f8990000          LDRB     r0,[r9,#0]            ;4134  ; ica_plazma
0023f4  1c40              ADDS     r0,r0,#1              ;4134
0023f6  f8890000          STRB     r0,[r9,#0]            ;4134
0023fa  4819              LDR      r0,|L1.9312|
0023fc  f9b02000          LDRSH    r2,[r0,#0]            ;4136  ; bps_I
002400  4818              LDR      r0,|L1.9316|
002402  8002              STRH     r2,[r0,#0]            ;4136
002404  4818              LDR      r0,|L1.9320|
002406  f9b03000          LDRSH    r3,[r0,#0]            ;4138  ; ica_your_current
00240a  e02f              B        |L1.9324|
                  |L1.9228|
                          DCD      DOP_RELE_FUNC
                  |L1.9232|
                          DCD      speedChIsOn
                  |L1.9236|
                          DCD      ||area_number.18||
                  |L1.9240|
                          DCD      bps
                  |L1.9244|
                          DCD      NUMIST
                  |L1.9248|
                          DCD      mess_data
                  |L1.9252|
                          DCD      num_necc
                  |L1.9256|
                          DCD      main_1Hz_cnt
                  |L1.9260|
                          DCD      ipsBlckStat
                  |L1.9264|
                          DCD      TSIGN
                  |L1.9268|
                          DCD      power_summary_tempo
                  |L1.9272|
                          DCD      power_summary_tempo_old
                  |L1.9276|
                          DCD      powerSummaryCnt
                  |L1.9280|
                          DCD      power_summary
                  |L1.9284|
                          DCD      power_current_tempo
                  |L1.9288|
                          DCD      power_current_tempo_old
                  |L1.9292|
                          DCD      powerCurrentCnt
                  |L1.9296|
                          DCD      power_current
                  |L1.9300|
                          DCD      ica_timer_cnt
                  |L1.9304|
                          DCD      ICA_EN
                  |L1.9308|
                          DCD      ica_plazma
                  |L1.9312|
                          DCD      bps_I
                  |L1.9316|
                          DCD      ica_my_current
                  |L1.9320|
                          DCD      ica_your_current
                  |L1.9324|
00246c  4648              MOV      r0,r9                 ;4134
00246e  f8dfa3f0          LDR      r10,|L1.10336|
002472  7841              LDRB     r1,[r0,#1]            ;4140
002474  48fb              LDR      r0,|L1.10340|
002476  f9bac000          LDRSH    r12,[r10,#0]          ;4141
00247a  429a              CMP      r2,r3                 ;4138
00247c  f9b08000          LDRSH    r8,[r0,#0]            ;4138
002480  4638              MOV      r0,r7                 ;4138
002482  f9b00000          LDRSH    r0,[r0,#0]            ;4138
002486  dd13              BLE      |L1.9392|
002488  eba20b03          SUB      r11,r2,r3             ;4138
00248c  f1bb0f05          CMP      r11,#5                ;4138
002490  db0e              BLT      |L1.9392|
002492  2801              CMP      r0,#1                 ;4138
002494  d004              BEQ      |L1.9376|
002496  2802              CMP      r0,#2                 ;4138
002498  d10a              BNE      |L1.9392|
00249a  f1b80f05          CMP      r8,#5                 ;4138
00249e  dd07              BLE      |L1.9392|
                  |L1.9376|
0024a0  1c49              ADDS     r1,r1,#1              ;4140
0024a2  f8891001          STRB     r1,[r9,#1]            ;4140
0024a6  f1ac0c01          SUB      r12,r12,#1            ;4141
0024aa  f8aac000          STRH     r12,[r10,#0]          ;4141
0024ae  e012              B        |L1.9430|
                  |L1.9392|
0024b0  429a              CMP      r2,r3                 ;4143
0024b2  da10              BGE      |L1.9430|
0024b4  1a9a              SUBS     r2,r3,r2              ;4143
0024b6  2a05              CMP      r2,#5                 ;4143
0024b8  db0d              BLT      |L1.9430|
0024ba  2801              CMP      r0,#1                 ;4143
0024bc  d004              BEQ      |L1.9416|
0024be  2802              CMP      r0,#2                 ;4143
0024c0  d109              BNE      |L1.9430|
0024c2  f1b80f05          CMP      r8,#5                 ;4143
0024c6  dd06              BLE      |L1.9430|
                  |L1.9416|
0024c8  1e49              SUBS     r1,r1,#1              ;4145
0024ca  f8891001          STRB     r1,[r9,#1]            ;4145
0024ce  f10c0c01          ADD      r12,r12,#1            ;4146
0024d2  f8aac000          STRH     r12,[r10,#0]          ;4146
                  |L1.9430|
0024d6  2214              MOVS     r2,#0x14
0024d8  4629              MOV      r1,r5
0024da  48e1              LDR      r0,|L1.10336|
0024dc  f7fffffe          BL       gran
                  |L1.9440|
;;;4149   	}
;;;4150   
;;;4151   
;;;4152   if(ICA_EN==1)
0024e0  8838              LDRH     r0,[r7,#0]  ; ICA_EN
0024e2  2801              CMP      r0,#1
0024e4  d14c              BNE      |L1.9600|
;;;4153   	{
;;;4154   /*	if(main_kb_cnt==(TBAT*60)-21)
;;;4155   		{
;;;4156   		char modbus_buff[20],i;
;;;4157   		short crc_temp;
;;;4158   	
;;;4159   		modbus_buff[0] = ICA_MODBUS_ADDRESS;
;;;4160   		modbus_buff[1] = 6;
;;;4161   		modbus_buff[2] = 0;
;;;4162   		modbus_buff[3] = 30;
;;;4163   		modbus_buff[4] = (char)(TBAT/256);	
;;;4164   		modbus_buff[5] = (char)(TBAT%256);
;;;4165   	
;;;4166   		crc_temp= CRC16_2(modbus_buff,6);
;;;4167   	
;;;4168   		modbus_buff[6]= (char)crc_temp;
;;;4169   		modbus_buff[7]= (char)(crc_temp>>8);
;;;4170   	
;;;4171   		if(ICA_CH==0)
;;;4172   			{
;;;4173   			for (i=0;i<8;i++)
;;;4174   				{
;;;4175   				putchar_sc16is700(modbus_buff[i]);
;;;4176   				}
;;;4177   			}
;;;4178   		}
;;;4179   	else*/ if(ica_timer_cnt==8)
0024e6  7830              LDRB     r0,[r6,#0]  ; ica_timer_cnt
;;;4180   		{
;;;4181   		char modbus_buff[20],i;
;;;4182   		short crc_temp;
;;;4183   	
;;;4184   		modbus_buff[0] = ICA_MODBUS_ADDRESS;
0024e8  4fdf              LDR      r7,|L1.10344|
;;;4185   		modbus_buff[1] = 4;
;;;4186   		modbus_buff[2] = 0;
;;;4187   		modbus_buff[3] = 2;
;;;4188   		modbus_buff[4] = 0;	
;;;4189   		modbus_buff[5] = 1;
;;;4190   	
;;;4191   		crc_temp= CRC16_2(modbus_buff,6);
;;;4192   	
;;;4193   		modbus_buff[6]= (char)crc_temp;
;;;4194   		modbus_buff[7]= (char)(crc_temp>>8);
;;;4195   	
;;;4196   		if(ICA_CH==0)
0024ea  4ee0              LDR      r6,|L1.10348|
0024ec  2808              CMP      r0,#8                 ;4179
0024ee  d04a              BEQ      |L1.9606|
;;;4197   			{
;;;4198   			for (i=0;i<8;i++)
;;;4199   				{
;;;4200   				putchar_sc16is700(modbus_buff[i]);
;;;4201   				}
;;;4202   			}
;;;4203   		}
;;;4204   	else
;;;4205   		{
;;;4206   		char modbus_buff[20],i;
;;;4207   		short crc_temp, tempSSSS;
;;;4208   
;;;4209   		tempSSSS=cntrl_stat_old;
0024f0  4bdf              LDR      r3,|L1.10352|
0024f2  f9b30022          LDRSH    r0,[r3,#0x22]  ; cntrl_stat_old
;;;4210   		if(	(main_kb_cnt==(TBAT*60)-21) || (main_kb_cnt==(TBAT*60)-20) || (main_kb_cnt==(TBAT*60)-19)) tempSSSS=((short)TBAT)|0x4000;
0024f6  49df              LDR      r1,|L1.10356|
0024f8  f06f0c14          MVN      r12,#0x14
0024fc  f9b33040          LDRSH    r3,[r3,#0x40]  ; main_kb_cnt
002500  f9b12000          LDRSH    r2,[r1,#0]  ; TBAT
002504  ebc21102          RSB      r1,r2,r2,LSL #4
002508  eb0c0c81          ADD      r12,r12,r1,LSL #2
00250c  459c              CMP      r12,r3
00250e  d009              BEQ      |L1.9508|
002510  eb050581          ADD      r5,r5,r1,LSL #2
002514  429d              CMP      r5,r3
002516  d005              BEQ      |L1.9508|
002518  f06f0512          MVN      r5,#0x12
00251c  eb050181          ADD      r1,r5,r1,LSL #2
002520  4299              CMP      r1,r3
002522  d101              BNE      |L1.9512|
                  |L1.9508|
002524  f4424080          ORR      r0,r2,#0x4000
                  |L1.9512|
;;;4211   
;;;4212   
;;;4213   		modbus_buff[0] = ICA_MODBUS_ADDRESS;
002528  8839              LDRH     r1,[r7,#0]  ; ICA_MODBUS_ADDRESS
00252a  f88d1000          STRB     r1,[sp,#0]
;;;4214   		modbus_buff[1] = 6;
00252e  2106              MOVS     r1,#6
002530  f88d1001          STRB     r1,[sp,#1]
;;;4215   		modbus_buff[2] = 0;
002534  f88d4002          STRB     r4,[sp,#2]
;;;4216   		modbus_buff[3] = 100;
002538  2164              MOVS     r1,#0x64
00253a  f88d1003          STRB     r1,[sp,#3]
;;;4217   		modbus_buff[4] = (char)(tempSSSS/256);	
00253e  17c1              ASRS     r1,r0,#31
002540  eb006111          ADD      r1,r0,r1,LSR #24
002544  120a              ASRS     r2,r1,#8
002546  f88d2004          STRB     r2,[sp,#4]
;;;4218   		modbus_buff[5] = (char)(tempSSSS%256);
00254a  f88d0005          STRB     r0,[sp,#5]
;;;4219   	
;;;4220   		crc_temp= CRC16_2(modbus_buff,6);
00254e  2106              MOVS     r1,#6
002550  4668              MOV      r0,sp
002552  f7fffffe          BL       CRC16_2
;;;4221   	
;;;4222   		modbus_buff[6]= (char)crc_temp;
002556  f88d0006          STRB     r0,[sp,#6]
;;;4223   		modbus_buff[7]= (char)(crc_temp>>8);
00255a  1200              ASRS     r0,r0,#8
00255c  f88d0007          STRB     r0,[sp,#7]
;;;4224   	
;;;4225   		crc_temp= CRC16_2(modbus_buff,6);
002560  2106              MOVS     r1,#6
002562  4668              MOV      r0,sp
002564  f7fffffe          BL       CRC16_2
;;;4226   	
;;;4227   		if(ICA_CH==0)
002568  8830              LDRH     r0,[r6,#0]  ; ICA_CH
00256a  2800              CMP      r0,#0
00256c  d108              BNE      |L1.9600|
;;;4228   			{
;;;4229   			for (i=0;i<8;i++)
00256e  2400              MOVS     r4,#0
002570  466d              MOV      r5,sp                 ;4206
                  |L1.9586|
;;;4230   				{
;;;4231   				putchar_sc16is700(modbus_buff[i]);
002572  5d28              LDRB     r0,[r5,r4]
002574  f7fffffe          BL       putchar_sc16is700
002578  1c64              ADDS     r4,r4,#1              ;4229
00257a  b2e4              UXTB     r4,r4                 ;4229
00257c  2c08              CMP      r4,#8                 ;4229
00257e  d3f8              BCC      |L1.9586|
                  |L1.9600|
;;;4232   				}
;;;4233   			}
;;;4234   		}
;;;4235   	}
;;;4236   }
002580  b005              ADD      sp,sp,#0x14
002582  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.9606|
002586  8838              LDRH     r0,[r7,#0]            ;4184  ; ICA_MODBUS_ADDRESS
002588  f88d0000          STRB     r0,[sp,#0]            ;4184
00258c  2004              MOVS     r0,#4                 ;4185
00258e  f88d0001          STRB     r0,[sp,#1]            ;4185
002592  f88d4002          STRB     r4,[sp,#2]            ;4186
002596  2002              MOVS     r0,#2                 ;4187
002598  f88d0003          STRB     r0,[sp,#3]            ;4187
00259c  f88d4004          STRB     r4,[sp,#4]            ;4188
0025a0  2001              MOVS     r0,#1                 ;4189
0025a2  f88d0005          STRB     r0,[sp,#5]            ;4189
0025a6  2106              MOVS     r1,#6                 ;4191
0025a8  4668              MOV      r0,sp                 ;4191
0025aa  f7fffffe          BL       CRC16_2
0025ae  f88d0006          STRB     r0,[sp,#6]            ;4193
0025b2  1200              ASRS     r0,r0,#8              ;4194
0025b4  f88d0007          STRB     r0,[sp,#7]            ;4194
0025b8  8830              LDRH     r0,[r6,#0]            ;4196  ; ICA_CH
0025ba  2800              CMP      r0,#0                 ;4196
0025bc  d1e0              BNE      |L1.9600|
0025be  2400              MOVS     r4,#0                 ;4198
0025c0  466d              MOV      r5,sp                 ;4181
                  |L1.9666|
0025c2  5d28              LDRB     r0,[r5,r4]            ;4200
0025c4  f7fffffe          BL       putchar_sc16is700
0025c8  1c64              ADDS     r4,r4,#1              ;4198
0025ca  b2e4              UXTB     r4,r4                 ;4198
0025cc  2c08              CMP      r4,#8                 ;4198
0025ce  d3f8              BCC      |L1.9666|
0025d0  e7d6              B        |L1.9600|
;;;4237   
                          ENDP

                  inv_drv PROC
;;;4238   //-----------------------------------------------
;;;4239   void inv_drv(char in)
0025d2  b570              PUSH     {r4-r6,lr}
;;;4240   {
0025d4  4604              MOV      r4,r0
;;;4241   char temp,temp_;
;;;4242   //if (bps[in]._device!=dINV) return;
;;;4243   //plazma_inv[4];
;;;4244   
;;;4245   gran_char((signed char*)&first_inv_slot,1,7);
0025d6  2207              MOVS     r2,#7
0025d8  2101              MOVS     r1,#1
0025da  48a7              LDR      r0,|L1.10360|
0025dc  f7fffffe          BL       gran_char
;;;4246   
;;;4247   
;;;4248   temp=inv[in]._flags_tm_old^inv[in]._flags_tm;
0025e0  48a6              LDR      r0,|L1.10364|
0025e2  eb040144          ADD      r1,r4,r4,LSL #1
0025e6  eb001541          ADD      r5,r0,r1,LSL #5
0025ea  f8950047          LDRB     r0,[r5,#0x47]
0025ee  f8951046          LDRB     r1,[r5,#0x46]
0025f2  4048              EORS     r0,r0,r1
;;;4249   if(temp)plazma_inv[1] =temp;
0025f4  4a9e              LDR      r2,|L1.10352|
0025f6  328c              ADDS     r2,r2,#0x8c
0025f8  b100              CBZ      r0,|L1.9724|
0025fa  7050              STRB     r0,[r2,#1]
                  |L1.9724|
;;;4250   
;;;4251   temp_=inv[in]._flags_tm&temp;
0025fc  4001              ANDS     r1,r1,r0
;;;4252   if(temp_)plazma_inv[2] =temp_;
0025fe  b101              CBZ      r1,|L1.9730|
002600  7091              STRB     r1,[r2,#2]
                  |L1.9730|
;;;4253   
;;;4254   if( (temp&(1<<0)) && (temp_&(1<<0)) ) 
002602  ea000301          AND      r3,r0,r1
002606  07db              LSLS     r3,r3,#31
002608  d026              BEQ      |L1.9816|
;;;4255   	{
;;;4256   	plazma_inv[3]++;
00260a  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
00260c  1c40              ADDS     r0,r0,#1
00260e  70d0              STRB     r0,[r2,#3]
;;;4257   	if(in==0)snmp_trap_send("Invertor #1 Alarm, overload",14,1,1);
002610  b134              CBZ      r4,|L1.9760|
;;;4258   	else if(in==1)snmp_trap_send("Invertor #2 Alarm, overload",14,2,1);
002612  2c01              CMP      r4,#1
002614  d00b              BEQ      |L1.9774|
;;;4259   	else if(in==2)snmp_trap_send("Invertor #3 Alarm, overload",14,3,1);
002616  2c02              CMP      r4,#2
002618  d010              BEQ      |L1.9788|
;;;4260   	else if(in==3)snmp_trap_send("Invertor #4 Alarm, overload",14,4,1);
00261a  2c03              CMP      r4,#3
00261c  d015              BEQ      |L1.9802|
00261e  e11a              B        |L1.10326|
                  |L1.9760|
002620  2301              MOVS     r3,#1                 ;4257
002622  461a              MOV      r2,r3                 ;4257
002624  210e              MOVS     r1,#0xe               ;4257
002626  a096              ADR      r0,|L1.10368|
002628  f7fffffe          BL       snmp_trap_send
00262c  e113              B        |L1.10326|
                  |L1.9774|
00262e  2301              MOVS     r3,#1                 ;4258
002630  2202              MOVS     r2,#2                 ;4258
002632  210e              MOVS     r1,#0xe               ;4258
002634  a099              ADR      r0,|L1.10396|
002636  f7fffffe          BL       snmp_trap_send
00263a  e10c              B        |L1.10326|
                  |L1.9788|
00263c  2301              MOVS     r3,#1                 ;4259
00263e  2203              MOVS     r2,#3                 ;4259
002640  210e              MOVS     r1,#0xe               ;4259
002642  a09d              ADR      r0,|L1.10424|
002644  f7fffffe          BL       snmp_trap_send
002648  e105              B        |L1.10326|
                  |L1.9802|
00264a  2301              MOVS     r3,#1
00264c  2204              MOVS     r2,#4
00264e  210e              MOVS     r1,#0xe
002650  a0a0              ADR      r0,|L1.10452|
002652  f7fffffe          BL       snmp_trap_send
002656  e0fe              B        |L1.10326|
                  |L1.9816|
;;;4261   	}
;;;4262   else if( (temp&(1<<1)) && (temp_&(1<<1)) )
002658  0783              LSLS     r3,r0,#30
00265a  d528              BPL      |L1.9902|
00265c  078b              LSLS     r3,r1,#30
00265e  d526              BPL      |L1.9902|
;;;4263   	{
;;;4264   		plazma_inv[3]++;
002660  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
002662  1c40              ADDS     r0,r0,#1
002664  70d0              STRB     r0,[r2,#3]
;;;4265   	if(in==0)snmp_trap_send("Invertor #1 Alarm, overheat",14,1,2);
002666  b134              CBZ      r4,|L1.9846|
;;;4266   	else if(in==1)snmp_trap_send("Invertor #2 Alarm, overheat",14,2,2);
002668  2c01              CMP      r4,#1
00266a  d00b              BEQ      |L1.9860|
;;;4267   	else if(in==2)snmp_trap_send("Invertor #3 Alarm, overheat",14,3,2);
00266c  2c02              CMP      r4,#2
00266e  d010              BEQ      |L1.9874|
;;;4268   	else if(in==3)snmp_trap_send("Invertor #4 Alarm, overheat",14,4,2);
002670  2c03              CMP      r4,#3
002672  d015              BEQ      |L1.9888|
002674  e0ef              B        |L1.10326|
                  |L1.9846|
002676  2302              MOVS     r3,#2                 ;4265
002678  2201              MOVS     r2,#1                 ;4265
00267a  210e              MOVS     r1,#0xe               ;4265
00267c  a09c              ADR      r0,|L1.10480|
00267e  f7fffffe          BL       snmp_trap_send
002682  e0e8              B        |L1.10326|
                  |L1.9860|
002684  2302              MOVS     r3,#2                 ;4266
002686  461a              MOV      r2,r3                 ;4266
002688  210e              MOVS     r1,#0xe               ;4266
00268a  a0a0              ADR      r0,|L1.10508|
00268c  f7fffffe          BL       snmp_trap_send
002690  e0e1              B        |L1.10326|
                  |L1.9874|
002692  2302              MOVS     r3,#2                 ;4267
002694  2203              MOVS     r2,#3                 ;4267
002696  210e              MOVS     r1,#0xe               ;4267
002698  a0a3              ADR      r0,|L1.10536|
00269a  f7fffffe          BL       snmp_trap_send
00269e  e0da              B        |L1.10326|
                  |L1.9888|
0026a0  2302              MOVS     r3,#2
0026a2  2204              MOVS     r2,#4
0026a4  210e              MOVS     r1,#0xe
0026a6  a0a7              ADR      r0,|L1.10564|
0026a8  f7fffffe          BL       snmp_trap_send
0026ac  e0d3              B        |L1.10326|
                  |L1.9902|
;;;4269   	}
;;;4270   
;;;4271   else if( (temp&(1<<2)) && (temp_&(1<<2)) )
0026ae  0743              LSLS     r3,r0,#29
0026b0  d528              BPL      |L1.9988|
0026b2  074b              LSLS     r3,r1,#29
0026b4  d526              BPL      |L1.9988|
;;;4272   	{
;;;4273   		plazma_inv[3]++;
0026b6  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
0026b8  1c40              ADDS     r0,r0,#1
0026ba  70d0              STRB     r0,[r2,#3]
;;;4274   	if(in==0)snmp_trap_send("Invertor #1 Alarm, is warm",14,1,3);
0026bc  b134              CBZ      r4,|L1.9932|
;;;4275   	else if(in==1)snmp_trap_send("Invertor #2 Alarm, is warm",14,2,3);
0026be  2c01              CMP      r4,#1
0026c0  d00b              BEQ      |L1.9946|
;;;4276   	else if(in==2)snmp_trap_send("Invertor #3 Alarm, is warm",14,3,3);
0026c2  2c02              CMP      r4,#2
0026c4  d010              BEQ      |L1.9960|
;;;4277   	else if(in==3)snmp_trap_send("Invertor #4 Alarm, is warm",14,4,3);
0026c6  2c03              CMP      r4,#3
0026c8  d015              BEQ      |L1.9974|
0026ca  e0c4              B        |L1.10326|
                  |L1.9932|
0026cc  2303              MOVS     r3,#3                 ;4274
0026ce  2201              MOVS     r2,#1                 ;4274
0026d0  210e              MOVS     r1,#0xe               ;4274
0026d2  a0a3              ADR      r0,|L1.10592|
0026d4  f7fffffe          BL       snmp_trap_send
0026d8  e0bd              B        |L1.10326|
                  |L1.9946|
0026da  2303              MOVS     r3,#3                 ;4275
0026dc  2202              MOVS     r2,#2                 ;4275
0026de  210e              MOVS     r1,#0xe               ;4275
0026e0  a0a6              ADR      r0,|L1.10620|
0026e2  f7fffffe          BL       snmp_trap_send
0026e6  e0b6              B        |L1.10326|
                  |L1.9960|
0026e8  2303              MOVS     r3,#3                 ;4276
0026ea  461a              MOV      r2,r3                 ;4276
0026ec  210e              MOVS     r1,#0xe               ;4276
0026ee  a0aa              ADR      r0,|L1.10648|
0026f0  f7fffffe          BL       snmp_trap_send
0026f4  e0af              B        |L1.10326|
                  |L1.9974|
0026f6  2303              MOVS     r3,#3
0026f8  2204              MOVS     r2,#4
0026fa  210e              MOVS     r1,#0xe
0026fc  a0ad              ADR      r0,|L1.10676|
0026fe  f7fffffe          BL       snmp_trap_send
002702  e0a8              B        |L1.10326|
                  |L1.9988|
;;;4278   	}
;;;4279   
;;;4280   else if( (temp&(1<<3)) && (temp_&(1<<3)) ) 
002704  0703              LSLS     r3,r0,#28
002706  d528              BPL      |L1.10074|
002708  070b              LSLS     r3,r1,#28
00270a  d526              BPL      |L1.10074|
;;;4281   	{
;;;4282   		plazma_inv[3]++;
00270c  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
00270e  1c40              ADDS     r0,r0,#1
002710  70d0              STRB     r0,[r2,#3]
;;;4283   	if(in==0)snmp_trap_send("Invertor #1 Alarm, voltage is up",14,1,4);
002712  b134              CBZ      r4,|L1.10018|
;;;4284   	else if(in==1)snmp_trap_send("Invertor #2 Alarm, voltage is up",14,2,4);
002714  2c01              CMP      r4,#1
002716  d00b              BEQ      |L1.10032|
;;;4285   	else if(in==2)snmp_trap_send("Invertor #3 Alarm, voltage is up",14,3,4);
002718  2c02              CMP      r4,#2
00271a  d010              BEQ      |L1.10046|
;;;4286   	else if(in==3)snmp_trap_send("Invertor #4 Alarm, voltage is up",14,4,4);
00271c  2c03              CMP      r4,#3
00271e  d015              BEQ      |L1.10060|
002720  e099              B        |L1.10326|
                  |L1.10018|
002722  2304              MOVS     r3,#4                 ;4283
002724  2201              MOVS     r2,#1                 ;4283
002726  210e              MOVS     r1,#0xe               ;4283
002728  a0a9              ADR      r0,|L1.10704|
00272a  f7fffffe          BL       snmp_trap_send
00272e  e092              B        |L1.10326|
                  |L1.10032|
002730  2304              MOVS     r3,#4                 ;4284
002732  2202              MOVS     r2,#2                 ;4284
002734  210e              MOVS     r1,#0xe               ;4284
002736  a0af              ADR      r0,|L1.10740|
002738  f7fffffe          BL       snmp_trap_send
00273c  e08b              B        |L1.10326|
                  |L1.10046|
00273e  2304              MOVS     r3,#4                 ;4285
002740  2203              MOVS     r2,#3                 ;4285
002742  210e              MOVS     r1,#0xe               ;4285
002744  a0b4              ADR      r0,|L1.10776|
002746  f7fffffe          BL       snmp_trap_send
00274a  e084              B        |L1.10326|
                  |L1.10060|
00274c  2304              MOVS     r3,#4
00274e  461a              MOV      r2,r3
002750  210e              MOVS     r1,#0xe
002752  a0ba              ADR      r0,|L1.10812|
002754  f7fffffe          BL       snmp_trap_send
002758  e07d              B        |L1.10326|
                  |L1.10074|
;;;4287   	}
;;;4288   
;;;4289   else if( (temp&(1<<4)) && (temp_&(1<<4)) ) 
00275a  06c3              LSLS     r3,r0,#27
00275c  d528              BPL      |L1.10160|
00275e  06cb              LSLS     r3,r1,#27
002760  d526              BPL      |L1.10160|
;;;4290   	{
;;;4291   		plazma_inv[3]++;
002762  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
002764  1c40              ADDS     r0,r0,#1
002766  70d0              STRB     r0,[r2,#3]
;;;4292   	if(in==0)snmp_trap_send("Invertor #1 Alarm, voltage is down",14,1,5);
002768  b134              CBZ      r4,|L1.10104|
;;;4293   	else if(in==1)snmp_trap_send("Invertor #2 Alarm, voltage is down",14,2,5);
00276a  2c01              CMP      r4,#1
00276c  d00b              BEQ      |L1.10118|
;;;4294   	else if(in==2)snmp_trap_send("Invertor #3 Alarm, voltage is down",14,3,5);
00276e  2c02              CMP      r4,#2
002770  d010              BEQ      |L1.10132|
;;;4295   	else if(in==3)snmp_trap_send("Invertor #4 Alarm, voltage is down",14,4,5);
002772  2c03              CMP      r4,#3
002774  d015              BEQ      |L1.10146|
002776  e06e              B        |L1.10326|
                  |L1.10104|
002778  2305              MOVS     r3,#5                 ;4292
00277a  2201              MOVS     r2,#1                 ;4292
00277c  210e              MOVS     r1,#0xe               ;4292
00277e  a0b8              ADR      r0,|L1.10848|
002780  f7fffffe          BL       snmp_trap_send
002784  e067              B        |L1.10326|
                  |L1.10118|
002786  2305              MOVS     r3,#5                 ;4293
002788  2202              MOVS     r2,#2                 ;4293
00278a  210e              MOVS     r1,#0xe               ;4293
00278c  a0bd              ADR      r0,|L1.10884|
00278e  f7fffffe          BL       snmp_trap_send
002792  e060              B        |L1.10326|
                  |L1.10132|
002794  2305              MOVS     r3,#5                 ;4294
002796  2203              MOVS     r2,#3                 ;4294
002798  210e              MOVS     r1,#0xe               ;4294
00279a  a0c3              ADR      r0,|L1.10920|
00279c  f7fffffe          BL       snmp_trap_send
0027a0  e059              B        |L1.10326|
                  |L1.10146|
0027a2  2305              MOVS     r3,#5
0027a4  2204              MOVS     r2,#4
0027a6  210e              MOVS     r1,#0xe
0027a8  a0c8              ADR      r0,|L1.10956|
0027aa  f7fffffe          BL       snmp_trap_send
0027ae  e052              B        |L1.10326|
                  |L1.10160|
;;;4296   	}
;;;4297   
;;;4298   else if( (temp&(1<<5)) && (temp_&(1<<5)) )
0027b0  0683              LSLS     r3,r0,#26
0027b2  d528              BPL      |L1.10246|
0027b4  068b              LSLS     r3,r1,#26
0027b6  d526              BPL      |L1.10246|
;;;4299   	{
;;;4300   		plazma_inv[3]++;
0027b8  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
0027ba  1c40              ADDS     r0,r0,#1
0027bc  70d0              STRB     r0,[r2,#3]
;;;4301   	if(in==0)snmp_trap_send("Invertor #1 Alarm, output is offed",14,1,6);
0027be  b134              CBZ      r4,|L1.10190|
;;;4302   	else if(in==1)snmp_trap_send("Invertor #2 Alarm, output is offed",14,2,6);
0027c0  2c01              CMP      r4,#1
0027c2  d00b              BEQ      |L1.10204|
;;;4303   	else if(in==2)snmp_trap_send("Invertor #3 Alarm, output is offed",14,3,6);
0027c4  2c02              CMP      r4,#2
0027c6  d010              BEQ      |L1.10218|
;;;4304   	else if(in==3)snmp_trap_send("Invertor #4 Alarm, output is offed",14,4,6);
0027c8  2c03              CMP      r4,#3
0027ca  d015              BEQ      |L1.10232|
0027cc  e043              B        |L1.10326|
                  |L1.10190|
0027ce  2306              MOVS     r3,#6                 ;4301
0027d0  2201              MOVS     r2,#1                 ;4301
0027d2  210e              MOVS     r1,#0xe               ;4301
0027d4  a0c6              ADR      r0,|L1.10992|
0027d6  f7fffffe          BL       snmp_trap_send
0027da  e03c              B        |L1.10326|
                  |L1.10204|
0027dc  2306              MOVS     r3,#6                 ;4302
0027de  2202              MOVS     r2,#2                 ;4302
0027e0  210e              MOVS     r1,#0xe               ;4302
0027e2  a0cc              ADR      r0,|L1.11028|
0027e4  f7fffffe          BL       snmp_trap_send
0027e8  e035              B        |L1.10326|
                  |L1.10218|
0027ea  2306              MOVS     r3,#6                 ;4303
0027ec  2203              MOVS     r2,#3                 ;4303
0027ee  210e              MOVS     r1,#0xe               ;4303
0027f0  a0d1              ADR      r0,|L1.11064|
0027f2  f7fffffe          BL       snmp_trap_send
0027f6  e02e              B        |L1.10326|
                  |L1.10232|
0027f8  2306              MOVS     r3,#6
0027fa  2204              MOVS     r2,#4
0027fc  210e              MOVS     r1,#0xe
0027fe  a0d7              ADR      r0,|L1.11100|
002800  f7fffffe          BL       snmp_trap_send
002804  e027              B        |L1.10326|
                  |L1.10246|
;;;4305   	}
;;;4306   
;;;4307   else if((temp)&&(!temp_)) 
002806  b1f8              CBZ      r0,|L1.10312|
002808  b9f1              CBNZ     r1,|L1.10312|
;;;4308   	{
;;;4309   		plazma_inv[3]++;
00280a  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
00280c  1c40              ADDS     r0,r0,#1
00280e  70d0              STRB     r0,[r2,#3]
;;;4310   	if(in==0)snmp_trap_send("Invertor #1 is norm",14,1,0);
002810  b134              CBZ      r4,|L1.10272|
;;;4311   	else if(in==1)snmp_trap_send("Invertor #2 is norm",14,2,0);
002812  2c01              CMP      r4,#1
002814  d00b              BEQ      |L1.10286|
;;;4312   	else if(in==2)snmp_trap_send("Invertor #3 is norm",14,3,0);
002816  2c02              CMP      r4,#2
002818  d010              BEQ      |L1.10300|
;;;4313   	else if(in==3)snmp_trap_send("Invertor #4 is norm",14,4,0);
00281a  2c03              CMP      r4,#3
00281c  d015              BEQ      |L1.10314|
00281e  e01a              B        |L1.10326|
                  |L1.10272|
002820  2300              MOVS     r3,#0                 ;4310
002822  2201              MOVS     r2,#1                 ;4310
002824  210e              MOVS     r1,#0xe               ;4310
002826  a0d6              ADR      r0,|L1.11136|
002828  f7fffffe          BL       snmp_trap_send
00282c  e013              B        |L1.10326|
                  |L1.10286|
00282e  2300              MOVS     r3,#0                 ;4311
002830  2202              MOVS     r2,#2                 ;4311
002832  210e              MOVS     r1,#0xe               ;4311
002834  a0d7              ADR      r0,|L1.11156|
002836  f7fffffe          BL       snmp_trap_send
00283a  e00c              B        |L1.10326|
                  |L1.10300|
00283c  2300              MOVS     r3,#0                 ;4312
00283e  2203              MOVS     r2,#3                 ;4312
002840  210e              MOVS     r1,#0xe               ;4312
002842  a0d9              ADR      r0,|L1.11176|
002844  f7fffffe          BL       snmp_trap_send
                  |L1.10312|
002848  e005              B        |L1.10326|
                  |L1.10314|
00284a  2300              MOVS     r3,#0
00284c  2204              MOVS     r2,#4
00284e  210e              MOVS     r1,#0xe
002850  a0da              ADR      r0,|L1.11196|
002852  f7fffffe          BL       snmp_trap_send
                  |L1.10326|
;;;4314   	}
;;;4315   
;;;4316   inv[in]._flags_tm_old=inv[in]._flags_tm;
002856  f8150f46          LDRB     r0,[r5,#0x46]!
00285a  7068              STRB     r0,[r5,#1]
                  |L1.10332|
;;;4317   
;;;4318   }	
00285c  bd70              POP      {r4-r6,pc}
00285e  0000              DCW      0x0000
                  |L1.10336|
                          DCD      ica_u_necc
                  |L1.10340|
                          DCD      ica_cntrl_hndl_cnt
                  |L1.10344|
                          DCD      ICA_MODBUS_ADDRESS
                  |L1.10348|
                          DCD      ICA_CH
                  |L1.10352|
                          DCD      ||area_number.18||
                  |L1.10356|
                          DCD      TBAT
                  |L1.10360|
                          DCD      first_inv_slot
                  |L1.10364|
                          DCD      inv
                  |L1.10368|
002880  496e7665          DCB      "Invertor #1 Alarm, overload",0
002884  72746f72
002888  20233120
00288c  416c6172
002890  6d2c206f
002894  7665726c
002898  6f616400
                  |L1.10396|
00289c  496e7665          DCB      "Invertor #2 Alarm, overload",0
0028a0  72746f72
0028a4  20233220
0028a8  416c6172
0028ac  6d2c206f
0028b0  7665726c
0028b4  6f616400
                  |L1.10424|
0028b8  496e7665          DCB      "Invertor #3 Alarm, overload",0
0028bc  72746f72
0028c0  20233320
0028c4  416c6172
0028c8  6d2c206f
0028cc  7665726c
0028d0  6f616400
                  |L1.10452|
0028d4  496e7665          DCB      "Invertor #4 Alarm, overload",0
0028d8  72746f72
0028dc  20233420
0028e0  416c6172
0028e4  6d2c206f
0028e8  7665726c
0028ec  6f616400
                  |L1.10480|
0028f0  496e7665          DCB      "Invertor #1 Alarm, overheat",0
0028f4  72746f72
0028f8  20233120
0028fc  416c6172
002900  6d2c206f
002904  76657268
002908  65617400
                  |L1.10508|
00290c  496e7665          DCB      "Invertor #2 Alarm, overheat",0
002910  72746f72
002914  20233220
002918  416c6172
00291c  6d2c206f
002920  76657268
002924  65617400
                  |L1.10536|
002928  496e7665          DCB      "Invertor #3 Alarm, overheat",0
00292c  72746f72
002930  20233320
002934  416c6172
002938  6d2c206f
00293c  76657268
002940  65617400
                  |L1.10564|
002944  496e7665          DCB      "Invertor #4 Alarm, overheat",0
002948  72746f72
00294c  20233420
002950  416c6172
002954  6d2c206f
002958  76657268
00295c  65617400
                  |L1.10592|
002960  496e7665          DCB      "Invertor #1 Alarm, is warm",0
002964  72746f72
002968  20233120
00296c  416c6172
002970  6d2c2069
002974  73207761
002978  726d00  
00297b  00                DCB      0
                  |L1.10620|
00297c  496e7665          DCB      "Invertor #2 Alarm, is warm",0
002980  72746f72
002984  20233220
002988  416c6172
00298c  6d2c2069
002990  73207761
002994  726d00  
002997  00                DCB      0
                  |L1.10648|
002998  496e7665          DCB      "Invertor #3 Alarm, is warm",0
00299c  72746f72
0029a0  20233320
0029a4  416c6172
0029a8  6d2c2069
0029ac  73207761
0029b0  726d00  
0029b3  00                DCB      0
                  |L1.10676|
0029b4  496e7665          DCB      "Invertor #4 Alarm, is warm",0
0029b8  72746f72
0029bc  20233420
0029c0  416c6172
0029c4  6d2c2069
0029c8  73207761
0029cc  726d00  
0029cf  00                DCB      0
                  |L1.10704|
0029d0  496e7665          DCB      "Invertor #1 Alarm, voltage is up",0
0029d4  72746f72
0029d8  20233120
0029dc  416c6172
0029e0  6d2c2076
0029e4  6f6c7461
0029e8  67652069
0029ec  73207570
0029f0  00      
0029f1  00                DCB      0
0029f2  00                DCB      0
0029f3  00                DCB      0
                  |L1.10740|
0029f4  496e7665          DCB      "Invertor #2 Alarm, voltage is up",0
0029f8  72746f72
0029fc  20233220
002a00  416c6172
002a04  6d2c2076
002a08  6f6c7461
002a0c  67652069
002a10  73207570
002a14  00      
002a15  00                DCB      0
002a16  00                DCB      0
002a17  00                DCB      0
                  |L1.10776|
002a18  496e7665          DCB      "Invertor #3 Alarm, voltage is up",0
002a1c  72746f72
002a20  20233320
002a24  416c6172
002a28  6d2c2076
002a2c  6f6c7461
002a30  67652069
002a34  73207570
002a38  00      
002a39  00                DCB      0
002a3a  00                DCB      0
002a3b  00                DCB      0
                  |L1.10812|
002a3c  496e7665          DCB      "Invertor #4 Alarm, voltage is up",0
002a40  72746f72
002a44  20233420
002a48  416c6172
002a4c  6d2c2076
002a50  6f6c7461
002a54  67652069
002a58  73207570
002a5c  00      
002a5d  00                DCB      0
002a5e  00                DCB      0
002a5f  00                DCB      0
                  |L1.10848|
002a60  496e7665          DCB      "Invertor #1 Alarm, voltage is down",0
002a64  72746f72
002a68  20233120
002a6c  416c6172
002a70  6d2c2076
002a74  6f6c7461
002a78  67652069
002a7c  7320646f
002a80  776e00  
002a83  00                DCB      0
                  |L1.10884|
002a84  496e7665          DCB      "Invertor #2 Alarm, voltage is down",0
002a88  72746f72
002a8c  20233220
002a90  416c6172
002a94  6d2c2076
002a98  6f6c7461
002a9c  67652069
002aa0  7320646f
002aa4  776e00  
002aa7  00                DCB      0
                  |L1.10920|
002aa8  496e7665          DCB      "Invertor #3 Alarm, voltage is down",0
002aac  72746f72
002ab0  20233320
002ab4  416c6172
002ab8  6d2c2076
002abc  6f6c7461
002ac0  67652069
002ac4  7320646f
002ac8  776e00  
002acb  00                DCB      0
                  |L1.10956|
002acc  496e7665          DCB      "Invertor #4 Alarm, voltage is down",0
002ad0  72746f72
002ad4  20233420
002ad8  416c6172
002adc  6d2c2076
002ae0  6f6c7461
002ae4  67652069
002ae8  7320646f
002aec  776e00  
002aef  00                DCB      0
                  |L1.10992|
002af0  496e7665          DCB      "Invertor #1 Alarm, output is offed",0
002af4  72746f72
002af8  20233120
002afc  416c6172
002b00  6d2c206f
002b04  75747075
002b08  74206973
002b0c  206f6666
002b10  656400  
002b13  00                DCB      0
                  |L1.11028|
002b14  496e7665          DCB      "Invertor #2 Alarm, output is offed",0
002b18  72746f72
002b1c  20233220
002b20  416c6172
002b24  6d2c206f
002b28  75747075
002b2c  74206973
002b30  206f6666
002b34  656400  
002b37  00                DCB      0
                  |L1.11064|
002b38  496e7665          DCB      "Invertor #3 Alarm, output is offed",0
002b3c  72746f72
002b40  20233320
002b44  416c6172
002b48  6d2c206f
002b4c  75747075
002b50  74206973
002b54  206f6666
002b58  656400  
002b5b  00                DCB      0
                  |L1.11100|
002b5c  496e7665          DCB      "Invertor #4 Alarm, output is offed",0
002b60  72746f72
002b64  20233420
002b68  416c6172
002b6c  6d2c206f
002b70  75747075
002b74  74206973
002b78  206f6666
002b7c  656400  
002b7f  00                DCB      0
                  |L1.11136|
002b80  496e7665          DCB      "Invertor #1 is norm",0
002b84  72746f72
002b88  20233120
002b8c  6973206e
002b90  6f726d00
                  |L1.11156|
002b94  496e7665          DCB      "Invertor #2 is norm",0
002b98  72746f72
002b9c  20233220
002ba0  6973206e
002ba4  6f726d00
                  |L1.11176|
002ba8  496e7665          DCB      "Invertor #3 is norm",0
002bac  72746f72
002bb0  20233320
002bb4  6973206e
002bb8  6f726d00
                  |L1.11196|
002bbc  496e7665          DCB      "Invertor #4 is norm",0
002bc0  72746f72
002bc4  20233420
002bc8  6973206e
002bcc  6f726d00
                          ENDP

                  ipsBlckHndl PROC
;;;4320   //-----------------------------------------------
;;;4321   void ipsBlckHndl(char in)
002bd0  b510              PUSH     {r4,lr}
;;;4322   {
;;;4323   
;;;4324   ipsBlckStat=0;
002bd2  2000              MOVS     r0,#0
002bd4  4bff              LDR      r3,|L1.12244|
002bd6  8018              STRH     r0,[r3,#0]
;;;4325   if(ipsBlckSrc==1)
002bd8  48ff              LDR      r0,|L1.12248|
002bda  2401              MOVS     r4,#1
;;;4326   	{
;;;4327   	if(((ipsBlckLog==0)&&(adc_buff_[11]>2000)) || ((ipsBlckLog==1)&&(adc_buff_[11]<2000))) ipsBlckStat=1;
002bdc  f44f62fa          MOV      r2,#0x7d0
002be0  f9b01000          LDRSH    r1,[r0,#0]            ;4325  ; ipsBlckSrc
002be4  48fd              LDR      r0,|L1.12252|
002be6  2901              CMP      r1,#1                 ;4325
002be8  f9b00000          LDRSH    r0,[r0,#0]
002bec  d006              BEQ      |L1.11260|
;;;4328   	}
;;;4329   else if(ipsBlckSrc==2)
002bee  2902              CMP      r1,#2
002bf0  d10f              BNE      |L1.11282|
002bf2  49fb              LDR      r1,|L1.12256|
;;;4330   	{
;;;4331   	if(((ipsBlckLog==0)&&(adc_buff_[13]>2000)) || ((ipsBlckLog==1)&&(adc_buff_[13]<2000))) ipsBlckStat=1;
002bf4  f9b1101a          LDRSH    r1,[r1,#0x1a]
002bf8  b160              CBZ      r0,|L1.11284|
002bfa  e00d              B        |L1.11288|
                  |L1.11260|
002bfc  49f8              LDR      r1,|L1.12256|
002bfe  f9b11016          LDRSH    r1,[r1,#0x16]         ;4327
002c02  b908              CBNZ     r0,|L1.11272|
002c04  4291              CMP      r1,r2                 ;4327
002c06  dc03              BGT      |L1.11280|
                  |L1.11272|
002c08  2801              CMP      r0,#1                 ;4327
002c0a  d102              BNE      |L1.11282|
002c0c  4291              CMP      r1,r2                 ;4327
002c0e  da00              BGE      |L1.11282|
                  |L1.11280|
002c10  801c              STRH     r4,[r3,#0]            ;4327
                  |L1.11282|
;;;4332   	}
;;;4333   }
002c12  bd10              POP      {r4,pc}
                  |L1.11284|
002c14  4291              CMP      r1,r2                 ;4331
002c16  dc03              BGT      |L1.11296|
                  |L1.11288|
002c18  2801              CMP      r0,#1                 ;4331
002c1a  d1fa              BNE      |L1.11282|
002c1c  4291              CMP      r1,r2                 ;4331
002c1e  daf8              BGE      |L1.11282|
                  |L1.11296|
002c20  801c              STRH     r4,[r3,#0]            ;4331
002c22  bd10              POP      {r4,pc}
;;;4334   
                          ENDP

                  bps_drv PROC
;;;4335   //-----------------------------------------------
;;;4336   void bps_drv(char in)
002c24  e92d41f0          PUSH     {r4-r8,lr}
;;;4337   {
002c28  4606              MOV      r6,r0
;;;4338   char temp;
;;;4339   
;;;4340   if (bps[in]._device!=dSRC) return;
002c2a  ebc600c6          RSB      r0,r6,r6,LSL #3
002c2e  49ed              LDR      r1,|L1.12260|
002c30  eb001006          ADD      r0,r0,r6,LSL #4
002c34  f8112020          LDRB     r2,[r1,r0,LSL #2]
002c38  2a03              CMP      r2,#3
002c3a  d173              BNE      |L1.11556|
;;;4341   temp=bps[in]._flags_tm;
002c3c  eb010480          ADD      r4,r1,r0,LSL #2
002c40  f8945042          LDRB     r5,[r4,#0x42]
;;;4342   if(temp&(1<<AV_T))
002c44  07a8              LSLS     r0,r5,#30
002c46  d516              BPL      |L1.11382|
;;;4343   	{
;;;4344   	if(bps[in]._temp_av_cnt<1200) 
002c48  f9b41046          LDRSH    r1,[r4,#0x46]
002c4c  f44f6096          MOV      r0,#0x4b0
002c50  4281              CMP      r1,r0
002c52  da20              BGE      |L1.11414|
;;;4345   		{
;;;4346   		bps[in]._temp_av_cnt++;
002c54  1c49              ADDS     r1,r1,#1
002c56  b209              SXTH     r1,r1
002c58  f8a41046          STRH     r1,[r4,#0x46]
;;;4347   		if(bps[in]._temp_av_cnt>=1200)
002c5c  4281              CMP      r1,r0
002c5e  db1a              BLT      |L1.11414|
;;;4348   			{
;;;4349   			bps[in]._temp_av_cnt=1200;
002c60  f8a40046          STRH     r0,[r4,#0x46]
;;;4350   		   	if(!(bps[in]._av&(1<<0)))avar_bps_hndl(in,0,1);
002c64  7860              LDRB     r0,[r4,#1]
002c66  07c0              LSLS     r0,r0,#31
002c68  d115              BNE      |L1.11414|
002c6a  2201              MOVS     r2,#1
002c6c  2100              MOVS     r1,#0
002c6e  4630              MOV      r0,r6
002c70  f7fffffe          BL       avar_bps_hndl
002c74  e00f              B        |L1.11414|
                  |L1.11382|
;;;4351   			}
;;;4352   		}
;;;4353   	}
;;;4354   
;;;4355   else if(!(temp&(1<<AV_T)))
;;;4356   	{
;;;4357   	if(bps[in]._temp_av_cnt) 
002c76  f9b41046          LDRSH    r1,[r4,#0x46]
002c7a  b161              CBZ      r1,|L1.11414|
;;;4358   		{
;;;4359   		bps[in]._temp_av_cnt--;
002c7c  1e49              SUBS     r1,r1,#1
002c7e  b208              SXTH     r0,r1
002c80  f8a40046          STRH     r0,[r4,#0x46]
;;;4360   		if(!bps[in]._temp_av_cnt)
002c84  b938              CBNZ     r0,|L1.11414|
;;;4361   			{
;;;4362   			if(bps[in]._av&(1<<0))avar_bps_hndl(in,0,0);
002c86  7860              LDRB     r0,[r4,#1]
002c88  07c0              LSLS     r0,r0,#31
002c8a  d004              BEQ      |L1.11414|
002c8c  2200              MOVS     r2,#0
002c8e  4611              MOV      r1,r2
002c90  4630              MOV      r0,r6
002c92  f7fffffe          BL       avar_bps_hndl
                  |L1.11414|
;;;4363   			}
;;;4364   		} 	
;;;4365   
;;;4366   	}
;;;4367   
;;;4368   if((temp&(1<<AVUMAX)))
002c96  0729              LSLS     r1,r5,#28
;;;4369   	{
;;;4370   	if(bps[in]._umax_av_cnt<10) 
;;;4371   		{
;;;4372   		bps[in]._umax_av_cnt++;
;;;4373   		if(bps[in]._umax_av_cnt>=10)
;;;4374   			{ 
;;;4375   			bps[in]._umax_av_cnt=10;
002c98  f04f070a          MOV      r7,#0xa
002c9c  f04f0000          MOV      r0,#0                 ;4350
002ca0  d514              BPL      |L1.11468|
002ca2  f9b40048          LDRSH    r0,[r4,#0x48]         ;4370
002ca6  280a              CMP      r0,#0xa               ;4370
002ca8  da25              BGE      |L1.11510|
002caa  1c40              ADDS     r0,r0,#1              ;4372
002cac  b200              SXTH     r0,r0                 ;4372
002cae  f8a40048          STRH     r0,[r4,#0x48]         ;4372
002cb2  280a              CMP      r0,#0xa               ;4373
002cb4  db1f              BLT      |L1.11510|
002cb6  f8a47048          STRH     r7,[r4,#0x48]
;;;4376   			if(!(bps[in]._av&(1<<1)))avar_bps_hndl(in,1,1);
002cba  7860              LDRB     r0,[r4,#1]
002cbc  0780              LSLS     r0,r0,#30
002cbe  d41a              BMI      |L1.11510|
002cc0  2201              MOVS     r2,#1
002cc2  4611              MOV      r1,r2
002cc4  4630              MOV      r0,r6
002cc6  f7fffffe          BL       avar_bps_hndl
002cca  e014              B        |L1.11510|
                  |L1.11468|
;;;4377   		  	/*if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,1,1);
;;;4378   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;4379   				{
;;;4380   				apv_cnt[in,0]=APV_INIT;
;;;4381   				apv_cnt[in,1]=APV_INIT;
;;;4382   				apv_cnt[in,2]=APV_INIT;
;;;4383   				apv_flags[in]=afOFF;
;;;4384   				}				*/
;;;4385   						
;;;4386   			}
;;;4387   		} 
;;;4388   	}		
;;;4389   else if(!(temp&(1<<AVUMAX)))
;;;4390   	{
;;;4391   	if(bps[in]._umax_av_cnt>0) 
002ccc  f9b41048          LDRSH    r1,[r4,#0x48]
002cd0  2900              CMP      r1,#0
002cd2  dd0d              BLE      |L1.11504|
;;;4392   		{
;;;4393   		bps[in]._umax_av_cnt--;
002cd4  f1a10101          SUB      r1,r1,#1
002cd8  b208              SXTH     r0,r1
002cda  f8a40048          STRH     r0,[r4,#0x48]
;;;4394   		if(bps[in]._umax_av_cnt==0)
002cde  b950              CBNZ     r0,|L1.11510|
;;;4395   			{
;;;4396   			bps[in]._umax_av_cnt=0;
;;;4397   			avar_bps_hndl(in,1,0);
002ce0  f04f0200          MOV      r2,#0
002ce4  f04f0101          MOV      r1,#1
002ce8  4630              MOV      r0,r6
002cea  f7fffffe          BL       avar_bps_hndl
002cee  e002              B        |L1.11510|
                  |L1.11504|
;;;4398   	 //		apv_cnt[in,0]=0;
;;;4399   	//		apv_cnt[in,1]=0;
;;;4400   	 //		apv_cnt[in,2]=0;			
;;;4401   			}
;;;4402   		}
;;;4403   	else if(bps[in]._umax_av_cnt<0) bps[in]._umax_av_cnt=0;		 
002cf0  da01              BGE      |L1.11510|
002cf2  f8a40048          STRH     r0,[r4,#0x48]
                  |L1.11510|
;;;4404   	}
;;;4405   
;;;4406   if(temp&(1<<AVUMIN))
002cf6  06e8              LSLS     r0,r5,#27
002cf8  d515              BPL      |L1.11558|
;;;4407   	{
;;;4408   	if(bps[in]._umin_av_cnt<10) 
002cfa  f9b4004a          LDRSH    r0,[r4,#0x4a]
002cfe  280a              CMP      r0,#0xa
002d00  da1e              BGE      |L1.11584|
;;;4409   		{
;;;4410   		bps[in]._umin_av_cnt++;
002d02  1c40              ADDS     r0,r0,#1
002d04  b200              SXTH     r0,r0
002d06  f8a4004a          STRH     r0,[r4,#0x4a]
;;;4411   		if(bps[in]._umin_av_cnt>=10)
002d0a  280a              CMP      r0,#0xa
002d0c  db18              BLT      |L1.11584|
;;;4412   			{ 
;;;4413   			bps[in]._umin_av_cnt=10;
002d0e  f8a4704a          STRH     r7,[r4,#0x4a]
;;;4414   			if(!(bps[in]._av&(1<<2)))avar_bps_hndl(in,2,1);
002d12  7860              LDRB     r0,[r4,#1]
002d14  0740              LSLS     r0,r0,#29
002d16  d413              BMI      |L1.11584|
002d18  2201              MOVS     r2,#1
002d1a  2102              MOVS     r1,#2
002d1c  4630              MOV      r0,r6
002d1e  f7fffffe          BL       avar_bps_hndl
002d22  e00d              B        |L1.11584|
                  |L1.11556|
002d24  e041              B        |L1.11690|
                  |L1.11558|
;;;4415   		  	/*	if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,2,1);
;;;4416   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;4417   				{
;;;4418   				apv_cnt[in,0]=APV_INIT;
;;;4419   				apv_cnt[in,1]=APV_INIT;
;;;4420   				apv_cnt[in,2]=APV_INIT;
;;;4421   				apv_flags[in]=afOFF;
;;;4422   				}*/				
;;;4423   			}
;;;4424   		} 
;;;4425   	}	
;;;4426   	
;;;4427   else if(!(temp&(1<<AVUMIN)))
;;;4428   	{
;;;4429   	if(bps[in]._umin_av_cnt) 
002d26  f9b4004a          LDRSH    r0,[r4,#0x4a]
002d2a  b148              CBZ      r0,|L1.11584|
;;;4430   		{
;;;4431   		bps[in]._umin_av_cnt--;
002d2c  1e40              SUBS     r0,r0,#1
002d2e  b201              SXTH     r1,r0
002d30  f8a4104a          STRH     r1,[r4,#0x4a]
;;;4432   		if(bps[in]._umin_av_cnt==0)
002d34  b921              CBNZ     r1,|L1.11584|
;;;4433   			{
;;;4434   			bps[in]._umin_av_cnt=0;
;;;4435   			avar_bps_hndl(in,2,0);
002d36  2200              MOVS     r2,#0
002d38  2102              MOVS     r1,#2
002d3a  4630              MOV      r0,r6
002d3c  f7fffffe          BL       avar_bps_hndl
                  |L1.11584|
;;;4436   		//	apv_cnt[in,0]=0;
;;;4437   		//	apv_cnt[in,1]=0;
;;;4438   		//	apv_cnt[in,2]=0;
;;;4439   			}
;;;4440   		}
;;;4441   	else if(bps[in]._umin_av_cnt>10)bps[in]._umin_av_cnt--;	 
;;;4442   	}
;;;4443   
;;;4444   //bps[in]._state=bsOFF;
;;;4445   
;;;4446   if (bps[in]._av&0x0f)					bps[in]._state=bsAV;
002d40  7860              LDRB     r0,[r4,#1]
002d42  0700              LSLS     r0,r0,#28
002d44  d002              BEQ      |L1.11596|
002d46  2004              MOVS     r0,#4
002d48  70a0              STRB     r0,[r4,#2]
002d4a  e014              B        |L1.11638|
                  |L1.11596|
;;;4447   else if ( (net_av) && (bps[in]._cnt>20)/*&& 
002d4c  48a6              LDR      r0,|L1.12264|
002d4e  7800              LDRB     r0,[r0,#0]  ; net_av
002d50  b128              CBZ      r0,|L1.11614|
002d52  78e0              LDRB     r0,[r4,#3]
002d54  2814              CMP      r0,#0x14
002d56  d902              BLS      |L1.11614|
;;;4448   		(bps[in]._Uii<200)*/)				bps[in]._state=bsOFF_AV_NET;
002d58  2005              MOVS     r0,#5
002d5a  70a0              STRB     r0,[r4,#2]
002d5c  e00b              B        |L1.11638|
                  |L1.11614|
;;;4449   else if (bps[in]._flags_tm&BIN8(100000))	bps[in]._state=bsRDY;
002d5e  f8940042          LDRB     r0,[r4,#0x42]
002d62  0680              LSLS     r0,r0,#26
002d64  d502              BPL      |L1.11628|
002d66  2002              MOVS     r0,#2
002d68  70a0              STRB     r0,[r4,#2]
002d6a  e004              B        |L1.11638|
                  |L1.11628|
;;;4450   else if (bps[in]._cnt<20)				bps[in]._state=bsWRK;
002d6c  78e0              LDRB     r0,[r4,#3]
002d6e  2814              CMP      r0,#0x14
002d70  d201              BCS      |L1.11638|
002d72  2001              MOVS     r0,#1
002d74  70a0              STRB     r0,[r4,#2]
                  |L1.11638|
;;;4451   
;;;4452   
;;;4453   
;;;4454   //else if(bps[in]._flags_tm&BIN8(100000)) bps[in]._state=ssBL;
;;;4455   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))bps[in]._state=ssWRK;
;;;4456   //else bps[0]._state=ssNOT;
;;;4457   
;;;4458   //bps[in]._is_ready=0;
;;;4459   //bps[in]._is_wrk=0;
;;;4460   //if(bps[in]._av_net) bps[in]._flags_bp='N';//  
;;;4461   //else if(bps[in]._av_u_max) bps[in]._flags_bp='P';//  (u_.av_.bAS1T)) bps_state[0]=ssAV;
;;;4462   //else if(bps[in]._av_u_min) bps[in]._flags_bp='M';//  
;;;4463   //else if(bps[in]._av_temper) bps[in]._flags_bp='T';// 
;;;4464   //else if(bps[in]._flags_tm&BIN8(100000)) 
;;;4465   //	{
;;;4466   //	bps[in]._flags_bp='B';// 
;;;4467   //	bps[in]._is_ready=1;
;;;4468   //	}
;;;4469   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))
;;;4470   //     {
;;;4471   //     bps[in]._flags_bp='W';// 
;;;4472   //     bps[in]._is_ready=1;
;;;4473   //     bps[in]._is_wrk=1;
;;;4474        
;;;4475   //     }
;;;4476   //else bps[in]._is_ready=1;     
;;;4477   
;;;4478   
;;;4479   
;;;4480   
;;;4481   
;;;4482   /*
;;;4483   bps[in]._flags_tu&=BIN8(11111110);
;;;4484   if(bps[in]._ist_blok_cnt)
;;;4485   	{
;;;4486   	bps[in]._ist_blok_cnt--;
;;;4487   	bps[in]._flags_tu|=BIN8(1);
;;;4488   	}
;;;4489   
;;;4490   	   */ 
;;;4491   
;;;4492   //    
;;;4493   if(bps[in]._cnt>=10) bps[in]._flags_tu|=BIN8(10000000);
002d76  78e0              LDRB     r0,[r4,#3]
002d78  280a              CMP      r0,#0xa
002d7a  d306              BCC      |L1.11658|
002d7c  f894002c          LDRB     r0,[r4,#0x2c]
002d80  f0400080          ORR      r0,r0,#0x80
002d84  f884002c          STRB     r0,[r4,#0x2c]
002d88  e005              B        |L1.11670|
                  |L1.11658|
;;;4494   else bps[in]._flags_tu&=BIN8(1111111);
002d8a  f894002c          LDRB     r0,[r4,#0x2c]
002d8e  f000007f          AND      r0,r0,#0x7f
002d92  f884002c          STRB     r0,[r4,#0x2c]
                  |L1.11670|
;;;4495   	
;;;4496   bps[in]._vol_u=cntrl_stat+bps[in]._x_;	
002d96  4995              LDR      r1,|L1.12268|
002d98  f9b40050          LDRSH    r0,[r4,#0x50]
002d9c  f9b11020          LDRSH    r1,[r1,#0x20]  ; cntrl_stat
002da0  4408              ADD      r0,r0,r1
002da2  6320              STR      r0,[r4,#0x30]
;;;4497   bps[in]._vol_i=1000; 
002da4  f44f707a          MOV      r0,#0x3e8
002da8  6360              STR      r0,[r4,#0x34]
                  |L1.11690|
;;;4498   }
002daa  e8bd81f0          POP      {r4-r8,pc}
;;;4499   
                          ENDP

                  avt_hndl PROC
;;;4500   //-----------------------------------------------
;;;4501   void avt_hndl(void)
002dae  b570              PUSH     {r4-r6,lr}
;;;4502   {
;;;4503   char i;
;;;4504   for(i=0;i<12;i++)
002db0  2000              MOVS     r0,#0
;;;4505   	{
;;;4506   	if(eb2_data_short[6]&(1<<i))
002db2  498f              LDR      r1,|L1.12272|
002db4  2401              MOVS     r4,#1
;;;4507   		{
;;;4508   		avt_stat[i]=avtON;
002db6  4d8f              LDR      r5,|L1.12276|
002db8  f9b1200c          LDRSH    r2,[r1,#0xc]          ;4506
002dbc  2300              MOVS     r3,#0                 ;4504
                  |L1.11710|
002dbe  fa04f100          LSL      r1,r4,r0              ;4506
002dc2  420a              TST      r2,r1                 ;4506
002dc4  d001              BEQ      |L1.11722|
002dc6  542c              STRB     r4,[r5,r0]
002dc8  e000              B        |L1.11724|
                  |L1.11722|
;;;4509   		}
;;;4510   	else avt_stat[i]=avtOFF;
002dca  542b              STRB     r3,[r5,r0]
                  |L1.11724|
002dcc  1c40              ADDS     r0,r0,#1              ;4504
002dce  b2c0              UXTB     r0,r0                 ;4504
002dd0  280c              CMP      r0,#0xc               ;4504
002dd2  d3f4              BCC      |L1.11710|
;;;4511   	}
;;;4512   
;;;4513   if((avt_stat_old[0]!=avt_stat[0])&&(NUMAVT>=1))
002dd4  4e88              LDR      r6,|L1.12280|
002dd6  7828              LDRB     r0,[r5,#0]  ; avt_stat
002dd8  4c88              LDR      r4,|L1.12284|
002dda  7831              LDRB     r1,[r6,#0]  ; avt_stat_old
002ddc  4281              CMP      r1,r0
002dde  d00b              BEQ      |L1.11768|
002de0  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002de4  2901              CMP      r1,#1
002de6  db07              BLT      |L1.11768|
;;;4514   	{
;;;4515   	if(avt_stat[0]==avtON) 	snmp_trap_send("Avtomat #1 is ON ",11,1,1);
002de8  2801              CMP      r0,#1
002dea  d07e              BEQ      |L1.12010|
;;;4516   	else 				snmp_trap_send("Avtomat #1 is OFF",11,1,0);
002dec  2300              MOVS     r3,#0
002dee  2201              MOVS     r2,#1
002df0  210b              MOVS     r1,#0xb
002df2  a083              ADR      r0,|L1.12288|
002df4  f7fffffe          BL       snmp_trap_send
                  |L1.11768|
;;;4517   	}
;;;4518   if((avt_stat_old[1]!=avt_stat[1])&&(NUMAVT>=2))
002df8  7871              LDRB     r1,[r6,#1]  ; avt_stat_old
002dfa  7868              LDRB     r0,[r5,#1]  ; avt_stat
002dfc  4281              CMP      r1,r0
002dfe  d00b              BEQ      |L1.11800|
002e00  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002e04  2902              CMP      r1,#2
002e06  db07              BLT      |L1.11800|
;;;4519   	{
;;;4520   	if(avt_stat[1]==avtON) 	snmp_trap_send("Avtomat #2 is ON ",11,2,1);
002e08  2801              CMP      r0,#1
002e0a  d06f              BEQ      |L1.12012|
;;;4521   	else 				snmp_trap_send("Avtomat #2 is OFF",11,2,0);
002e0c  2300              MOVS     r3,#0
002e0e  2202              MOVS     r2,#2
002e10  210b              MOVS     r1,#0xb
002e12  a080              ADR      r0,|L1.12308|
002e14  f7fffffe          BL       snmp_trap_send
                  |L1.11800|
;;;4522   	}
;;;4523   if((avt_stat_old[2]!=avt_stat[2])&&(NUMAVT>=3))
002e18  78b1              LDRB     r1,[r6,#2]  ; avt_stat_old
002e1a  78a8              LDRB     r0,[r5,#2]  ; avt_stat
002e1c  4281              CMP      r1,r0
002e1e  d00b              BEQ      |L1.11832|
002e20  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002e24  2903              CMP      r1,#3
002e26  db07              BLT      |L1.11832|
;;;4524   	{
;;;4525   	if(avt_stat[2]==avtON) 	snmp_trap_send("Avtomat #3 is ON ",11,3,1);
002e28  2801              CMP      r0,#1
002e2a  d070              BEQ      |L1.12046|
;;;4526   	else 				snmp_trap_send("Avtomat #3 is OFF",11,3,0);
002e2c  2300              MOVS     r3,#0
002e2e  2203              MOVS     r2,#3
002e30  210b              MOVS     r1,#0xb
002e32  a07d              ADR      r0,|L1.12328|
002e34  f7fffffe          BL       snmp_trap_send
                  |L1.11832|
;;;4527   	}
;;;4528   if((avt_stat_old[3]!=avt_stat[3])&&(NUMAVT>=4))
002e38  78f1              LDRB     r1,[r6,#3]  ; avt_stat_old
002e3a  78e8              LDRB     r0,[r5,#3]  ; avt_stat
002e3c  4281              CMP      r1,r0
002e3e  d00b              BEQ      |L1.11864|
002e40  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002e44  2904              CMP      r1,#4
002e46  db07              BLT      |L1.11864|
;;;4529   	{
;;;4530   	if(avt_stat[3]==avtON) 	snmp_trap_send("Avtomat #4 is ON ",11,4,1);
002e48  2801              CMP      r0,#1
002e4a  d077              BEQ      |L1.12092|
;;;4531   	else 				snmp_trap_send("Avtomat #4 is OFF",11,4,0);
002e4c  2300              MOVS     r3,#0
002e4e  2204              MOVS     r2,#4
002e50  210b              MOVS     r1,#0xb
002e52  a07a              ADR      r0,|L1.12348|
002e54  f7fffffe          BL       snmp_trap_send
                  |L1.11864|
;;;4532   	}
;;;4533   if((avt_stat_old[4]!=avt_stat[4])&&(NUMAVT>=5))
002e58  7931              LDRB     r1,[r6,#4]  ; avt_stat_old
002e5a  7928              LDRB     r0,[r5,#4]  ; avt_stat
002e5c  4281              CMP      r1,r0
002e5e  d00b              BEQ      |L1.11896|
002e60  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002e64  2905              CMP      r1,#5
002e66  db07              BLT      |L1.11896|
;;;4534   	{
;;;4535   	if(avt_stat[4]==avtON) 	snmp_trap_send("Avtomat #5 is ON ",11,5,1);
002e68  2801              CMP      r0,#1
002e6a  d06e              BEQ      |L1.12106|
;;;4536   	else 				snmp_trap_send("Avtomat #5 is OFF",11,5,0);
002e6c  2300              MOVS     r3,#0
002e6e  2205              MOVS     r2,#5
002e70  210b              MOVS     r1,#0xb
002e72  a077              ADR      r0,|L1.12368|
002e74  f7fffffe          BL       snmp_trap_send
                  |L1.11896|
;;;4537   	}
;;;4538   if((avt_stat_old[5]!=avt_stat[5])&&(NUMAVT>=6))
002e78  7971              LDRB     r1,[r6,#5]  ; avt_stat_old
002e7a  7968              LDRB     r0,[r5,#5]  ; avt_stat
002e7c  4281              CMP      r1,r0
002e7e  d00b              BEQ      |L1.11928|
002e80  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002e84  2906              CMP      r1,#6
002e86  db07              BLT      |L1.11928|
;;;4539   	{
;;;4540   	if(avt_stat[5]==avtON) 	snmp_trap_send("Avtomat #6 is ON ",11,6,1);
002e88  2801              CMP      r0,#1
002e8a  d065              BEQ      |L1.12120|
;;;4541   	else 				snmp_trap_send("Avtomat #6 is OFF",11,6,0);
002e8c  2300              MOVS     r3,#0
002e8e  2206              MOVS     r2,#6
002e90  210b              MOVS     r1,#0xb
002e92  a074              ADR      r0,|L1.12388|
002e94  f7fffffe          BL       snmp_trap_send
                  |L1.11928|
;;;4542   	}
;;;4543   if((avt_stat_old[6]!=avt_stat[6])&&(NUMAVT>=7))
002e98  79b1              LDRB     r1,[r6,#6]  ; avt_stat_old
002e9a  79a8              LDRB     r0,[r5,#6]  ; avt_stat
002e9c  4281              CMP      r1,r0
002e9e  d00b              BEQ      |L1.11960|
002ea0  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002ea4  2907              CMP      r1,#7
002ea6  db07              BLT      |L1.11960|
;;;4544   	{
;;;4545   	if(avt_stat[6]==avtON) 	snmp_trap_send("Avtomat #7 is ON ",11,7,1);
002ea8  2801              CMP      r0,#1
002eaa  d05c              BEQ      |L1.12134|
;;;4546   	else 				snmp_trap_send("Avtomat #7 is OFF",11,7,0);
002eac  2300              MOVS     r3,#0
002eae  2207              MOVS     r2,#7
002eb0  210b              MOVS     r1,#0xb
002eb2  a071              ADR      r0,|L1.12408|
002eb4  f7fffffe          BL       snmp_trap_send
                  |L1.11960|
;;;4547   	}
;;;4548   if((avt_stat_old[7]!=avt_stat[7])&&(NUMAVT>=8))
002eb8  79f1              LDRB     r1,[r6,#7]  ; avt_stat_old
002eba  79e8              LDRB     r0,[r5,#7]  ; avt_stat
002ebc  4281              CMP      r1,r0
002ebe  d00b              BEQ      |L1.11992|
002ec0  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002ec4  2908              CMP      r1,#8
002ec6  db07              BLT      |L1.11992|
;;;4549   	{
;;;4550   	if(avt_stat[7]==avtON) 	snmp_trap_send("Avtomat #8 is ON ",11,8,1);
002ec8  2801              CMP      r0,#1
002eca  d053              BEQ      |L1.12148|
;;;4551   	else 				snmp_trap_send("Avtomat #8 is OFF",11,8,0);
002ecc  2300              MOVS     r3,#0
002ece  2208              MOVS     r2,#8
002ed0  210b              MOVS     r1,#0xb
002ed2  a06e              ADR      r0,|L1.12428|
002ed4  f7fffffe          BL       snmp_trap_send
                  |L1.11992|
;;;4552   	}
;;;4553   if((avt_stat_old[8]!=avt_stat[8])&&(NUMAVT>=9))
002ed8  7a31              LDRB     r1,[r6,#8]  ; avt_stat_old
002eda  7a28              LDRB     r0,[r5,#8]  ; avt_stat
002edc  4281              CMP      r1,r0
002ede  d00e              BEQ      |L1.12030|
002ee0  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002ee4  2909              CMP      r1,#9
002ee6  db0a              BLT      |L1.12030|
;;;4554   	{
;;;4555   	if(avt_stat[8]==avtON) 	snmp_trap_send("Avtomat #9 is ON ",11,9,1);
002ee8  e001              B        |L1.12014|
                  |L1.12010|
002eea  e011              B        |L1.12048|
                  |L1.12012|
002eec  e017              B        |L1.12062|
                  |L1.12014|
002eee  2801              CMP      r0,#1
002ef0  d047              BEQ      |L1.12162|
;;;4556   	else 				snmp_trap_send("Avtomat #9 is OFF",11,9,0);
002ef2  2300              MOVS     r3,#0
002ef4  2209              MOVS     r2,#9
002ef6  210b              MOVS     r1,#0xb
002ef8  a069              ADR      r0,|L1.12448|
002efa  f7fffffe          BL       snmp_trap_send
                  |L1.12030|
;;;4557   	}
;;;4558   
;;;4559   for(i=0;i<12;i++)
002efe  2000              MOVS     r0,#0
                  |L1.12032|
;;;4560   	{
;;;4561   	avt_stat_old[i]=avt_stat[i];
002f00  5c29              LDRB     r1,[r5,r0]
002f02  5431              STRB     r1,[r6,r0]
002f04  1c40              ADDS     r0,r0,#1              ;4559
002f06  b2c0              UXTB     r0,r0                 ;4559
002f08  280c              CMP      r0,#0xc               ;4559
002f0a  d3f9              BCC      |L1.12032|
                  |L1.12044|
;;;4562   	}
;;;4563   }
002f0c  e4a6              B        |L1.10332|
                  |L1.12046|
002f0e  e00e              B        |L1.12078|
                  |L1.12048|
002f10  2301              MOVS     r3,#1                 ;4515
002f12  461a              MOV      r2,r3                 ;4515
002f14  210b              MOVS     r1,#0xb               ;4515
002f16  a067              ADR      r0,|L1.12468|
002f18  f7fffffe          BL       snmp_trap_send
002f1c  e76c              B        |L1.11768|
                  |L1.12062|
002f1e  2301              MOVS     r3,#1                 ;4520
002f20  2202              MOVS     r2,#2                 ;4520
002f22  210b              MOVS     r1,#0xb               ;4520
002f24  a068              ADR      r0,|L1.12488|
002f26  f7fffffe          BL       snmp_trap_send
002f2a  e775              B        |L1.11800|
002f2c  e006              B        |L1.12092|
                  |L1.12078|
002f2e  2301              MOVS     r3,#1                 ;4525
002f30  2203              MOVS     r2,#3                 ;4525
002f32  210b              MOVS     r1,#0xb               ;4525
002f34  a069              ADR      r0,|L1.12508|
002f36  f7fffffe          BL       snmp_trap_send
002f3a  e77d              B        |L1.11832|
                  |L1.12092|
002f3c  2301              MOVS     r3,#1                 ;4530
002f3e  2204              MOVS     r2,#4                 ;4530
002f40  210b              MOVS     r1,#0xb               ;4530
002f42  a06b              ADR      r0,|L1.12528|
002f44  f7fffffe          BL       snmp_trap_send
002f48  e786              B        |L1.11864|
                  |L1.12106|
002f4a  2301              MOVS     r3,#1                 ;4535
002f4c  2205              MOVS     r2,#5                 ;4535
002f4e  210b              MOVS     r1,#0xb               ;4535
002f50  a06c              ADR      r0,|L1.12548|
002f52  f7fffffe          BL       snmp_trap_send
002f56  e78f              B        |L1.11896|
                  |L1.12120|
002f58  2301              MOVS     r3,#1                 ;4540
002f5a  2206              MOVS     r2,#6                 ;4540
002f5c  210b              MOVS     r1,#0xb               ;4540
002f5e  a06e              ADR      r0,|L1.12568|
002f60  f7fffffe          BL       snmp_trap_send
002f64  e798              B        |L1.11928|
                  |L1.12134|
002f66  2301              MOVS     r3,#1                 ;4545
002f68  2207              MOVS     r2,#7                 ;4545
002f6a  210b              MOVS     r1,#0xb               ;4545
002f6c  a06f              ADR      r0,|L1.12588|
002f6e  f7fffffe          BL       snmp_trap_send
002f72  e7a1              B        |L1.11960|
                  |L1.12148|
002f74  2301              MOVS     r3,#1                 ;4550
002f76  2208              MOVS     r2,#8                 ;4550
002f78  210b              MOVS     r1,#0xb               ;4550
002f7a  a071              ADR      r0,|L1.12608|
002f7c  f7fffffe          BL       snmp_trap_send
002f80  e7aa              B        |L1.11992|
                  |L1.12162|
002f82  2301              MOVS     r3,#1                 ;4555
002f84  2209              MOVS     r2,#9                 ;4555
002f86  210b              MOVS     r1,#0xb               ;4555
002f88  a072              ADR      r0,|L1.12628|
002f8a  f7fffffe          BL       snmp_trap_send
002f8e  e7b6              B        |L1.12030|
;;;4564   
                          ENDP

                  bat_hndl PROC
;;;4565   //-----------------------------------------------
;;;4566   void bat_hndl(void)
002f90  b570              PUSH     {r4-r6,lr}
;;;4567   {
;;;4568   /*if(mess_find(_MESS_BAT_MASK_ON))
;;;4569   	{
;;;4570   	if(mess_data[0]==_MESS_BAT_MASK_ON)
;;;4571   		{
;;;4572   		char i;
;;;4573   		for(i=0;i<2;i++)
;;;4574   			{
;;;4575   			if(mess_data[1]&(1<<i))
;;;4576   				{
;;;4577   				bat[i]._cnt_to_block=0;
;;;4578        			bat[i]._rel_stat=0;
;;;4579        			}
;;;4580   			}
;;;4581   		}
;;;4582   	}
;;;4583   if(mess_find(_MESS_BAT_MASK_OFF))
;;;4584   	{		
;;;4585   	if(mess_data[0]==_MESS_BAT_MASK_OFF)
;;;4586   		{
;;;4587   		char i;
;;;4588   		for(i=0;i<2;i++)
;;;4589   			{
;;;4590   			if((mess_data[1]&(1<<i)) && (bat[i]._cnt_to_block==0) && (bat[i]._rel_stat==0))
;;;4591   				{
;;;4592   				bat[i]._cnt_to_block=20;
;;;4593   				bat[i]._rel_stat=1;
;;;4594        			}
;;;4595   			}
;;;4596   		
;;;4597   		}		
;;;4598   	}*/
;;;4599   
;;;4600   if(mess_find_unvol(MESS2BAT_HNDL))
002f92  20c8              MOVS     r0,#0xc8
002f94  f7fffffe          BL       mess_find_unvol
;;;4601   	{ 
;;;4602   	char i;
;;;4603   	
;;;4604   	if(mess_data[0]==PARAM_BAT_ALL_OFF_AFTER_2SEC)
;;;4605   		{
;;;4606   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4607   			{
;;;4608   			if(bat[i]._cnt_to_block<50)bat[i]._cnt_to_block++;
002f98  4973              LDR      r1,|L1.12648|
002f9a  2200              MOVS     r2,#0                 ;4606
002f9c  b1b8              CBZ      r0,|L1.12238|
002f9e  4b73              LDR      r3,|L1.12652|
;;;4609   			}
;;;4610   		}
;;;4611   
;;;4612   	else if(mess_data[0]==PARAM_BAT_MASK_OFF_AFTER_2SEC)
;;;4613   		{
;;;4614   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4615   			{
;;;4616   			if(mess_data[1]&(1<<i))
002fa0  2401              MOVS     r4,#1
002fa2  6818              LDR      r0,[r3,#0]            ;4604  ; mess_data
002fa4  28c9              CMP      r0,#0xc9              ;4604
002fa6  d013              BEQ      |L1.12240|
002fa8  28ca              CMP      r0,#0xca              ;4612
002faa  d012              BEQ      |L1.12242|
;;;4617   				{
;;;4618   				if(bat[i]._cnt_to_block<50) bat[i]._cnt_to_block++;
;;;4619   				}
;;;4620   			else bat[i]._cnt_to_block=0;
;;;4621   			}
;;;4622   		}
;;;4623   	else 
;;;4624   	 	{
;;;4625   		for(i=0;i<MAX_NUM_OF_BAT;i++)
002fac  2000              MOVS     r0,#0
                  |L1.12206|
;;;4626   			{
;;;4627   			bat[i]._cnt_to_block=0;
002fae  eb000340          ADD      r3,r0,r0,LSL #1
002fb2  eb031300          ADD      r3,r3,r0,LSL #4
002fb6  f8012023          STRB     r2,[r1,r3,LSL #2]
002fba  1c40              ADDS     r0,r0,#1              ;4625
002fbc  b2c0              UXTB     r0,r0                 ;4625
002fbe  2802              CMP      r0,#2                 ;4625
002fc0  d3f5              BCC      |L1.12206|
                  |L1.12226|
;;;4628   			}
;;;4629   
;;;4630   		}
;;;4631   	for(i=0;i<MAX_NUM_OF_BAT;i++)
002fc2  2000              MOVS     r0,#0
                  |L1.12228|
;;;4632   		{
;;;4633   		if(bat[i]._cnt_to_block>20)bat[i]._rel_stat=1;
002fc4  eb000340          ADD      r3,r0,r0,LSL #1
002fc8  eb031300          ADD      r3,r3,r0,LSL #4
002fcc  e0d0              B        |L1.12656|
                  |L1.12238|
002fce  e110              B        |L1.12786|
                  |L1.12240|
002fd0  e0d7              B        |L1.12674|
                  |L1.12242|
002fd2  e0e7              B        |L1.12708|
                  |L1.12244|
                          DCD      ipsBlckStat
                  |L1.12248|
                          DCD      ipsBlckSrc
                  |L1.12252|
                          DCD      ipsBlckLog
                  |L1.12256|
                          DCD      ||.bss||+0x400
                  |L1.12260|
                          DCD      bps
                  |L1.12264|
                          DCD      net_av
                  |L1.12268|
                          DCD      ||area_number.18||
                  |L1.12272|
                          DCD      eb2_data_short
                  |L1.12276|
                          DCD      avt_stat
                  |L1.12280|
                          DCD      avt_stat_old
                  |L1.12284|
                          DCD      NUMAVT
                  |L1.12288|
003000  4176746f          DCB      "Avtomat #1 is OFF",0
003004  6d617420
003008  23312069
00300c  73204f46
003010  4600    
003012  00                DCB      0
003013  00                DCB      0
                  |L1.12308|
003014  4176746f          DCB      "Avtomat #2 is OFF",0
003018  6d617420
00301c  23322069
003020  73204f46
003024  4600    
003026  00                DCB      0
003027  00                DCB      0
                  |L1.12328|
003028  4176746f          DCB      "Avtomat #3 is OFF",0
00302c  6d617420
003030  23332069
003034  73204f46
003038  4600    
00303a  00                DCB      0
00303b  00                DCB      0
                  |L1.12348|
00303c  4176746f          DCB      "Avtomat #4 is OFF",0
003040  6d617420
003044  23342069
003048  73204f46
00304c  4600    
00304e  00                DCB      0
00304f  00                DCB      0
                  |L1.12368|
003050  4176746f          DCB      "Avtomat #5 is OFF",0
003054  6d617420
003058  23352069
00305c  73204f46
003060  4600    
003062  00                DCB      0
003063  00                DCB      0
                  |L1.12388|
003064  4176746f          DCB      "Avtomat #6 is OFF",0
003068  6d617420
00306c  23362069
003070  73204f46
003074  4600    
003076  00                DCB      0
003077  00                DCB      0
                  |L1.12408|
003078  4176746f          DCB      "Avtomat #7 is OFF",0
00307c  6d617420
003080  23372069
003084  73204f46
003088  4600    
00308a  00                DCB      0
00308b  00                DCB      0
                  |L1.12428|
00308c  4176746f          DCB      "Avtomat #8 is OFF",0
003090  6d617420
003094  23382069
003098  73204f46
00309c  4600    
00309e  00                DCB      0
00309f  00                DCB      0
                  |L1.12448|
0030a0  4176746f          DCB      "Avtomat #9 is OFF",0
0030a4  6d617420
0030a8  23392069
0030ac  73204f46
0030b0  4600    
0030b2  00                DCB      0
0030b3  00                DCB      0
                  |L1.12468|
0030b4  4176746f          DCB      "Avtomat #1 is ON ",0
0030b8  6d617420
0030bc  23312069
0030c0  73204f4e
0030c4  2000    
0030c6  00                DCB      0
0030c7  00                DCB      0
                  |L1.12488|
0030c8  4176746f          DCB      "Avtomat #2 is ON ",0
0030cc  6d617420
0030d0  23322069
0030d4  73204f4e
0030d8  2000    
0030da  00                DCB      0
0030db  00                DCB      0
                  |L1.12508|
0030dc  4176746f          DCB      "Avtomat #3 is ON ",0
0030e0  6d617420
0030e4  23332069
0030e8  73204f4e
0030ec  2000    
0030ee  00                DCB      0
0030ef  00                DCB      0
                  |L1.12528|
0030f0  4176746f          DCB      "Avtomat #4 is ON ",0
0030f4  6d617420
0030f8  23342069
0030fc  73204f4e
003100  2000    
003102  00                DCB      0
003103  00                DCB      0
                  |L1.12548|
003104  4176746f          DCB      "Avtomat #5 is ON ",0
003108  6d617420
00310c  23352069
003110  73204f4e
003114  2000    
003116  00                DCB      0
003117  00                DCB      0
                  |L1.12568|
003118  4176746f          DCB      "Avtomat #6 is ON ",0
00311c  6d617420
003120  23362069
003124  73204f4e
003128  2000    
00312a  00                DCB      0
00312b  00                DCB      0
                  |L1.12588|
00312c  4176746f          DCB      "Avtomat #7 is ON ",0
003130  6d617420
003134  23372069
003138  73204f4e
00313c  2000    
00313e  00                DCB      0
00313f  00                DCB      0
                  |L1.12608|
003140  4176746f          DCB      "Avtomat #8 is ON ",0
003144  6d617420
003148  23382069
00314c  73204f4e
003150  2000    
003152  00                DCB      0
003153  00                DCB      0
                  |L1.12628|
003154  4176746f          DCB      "Avtomat #9 is ON ",0
003158  6d617420
00315c  23392069
003160  73204f4e
003164  2000    
003166  00                DCB      0
003167  00                DCB      0
                  |L1.12648|
                          DCD      bat
                  |L1.12652|
                          DCD      mess_data
                  |L1.12656|
003170  f8115023          LDRB     r5,[r1,r3,LSL #2]
003174  2d14              CMP      r5,#0x14
003176  d932              BLS      |L1.12766|
003178  eb010383          ADD      r3,r1,r3,LSL #2
00317c  f883403c          STRB     r4,[r3,#0x3c]
003180  e031              B        |L1.12774|
                  |L1.12674|
003182  2000              MOVS     r0,#0                 ;4606
                  |L1.12676|
003184  eb000340          ADD      r3,r0,r0,LSL #1       ;4608
003188  eb031500          ADD      r5,r3,r0,LSL #4       ;4608
00318c  f8113025          LDRB     r3,[r1,r5,LSL #2]     ;4608
003190  2b32              CMP      r3,#0x32              ;4608
003192  d202              BCS      |L1.12698|
003194  1c5b              ADDS     r3,r3,#1              ;4608
003196  f8013025          STRB     r3,[r1,r5,LSL #2]     ;4608
                  |L1.12698|
00319a  1c40              ADDS     r0,r0,#1              ;4606
00319c  b2c0              UXTB     r0,r0                 ;4606
00319e  2802              CMP      r0,#2                 ;4606
0031a0  d3f0              BCC      |L1.12676|
0031a2  e70e              B        |L1.12226|
                  |L1.12708|
0031a4  2000              MOVS     r0,#0                 ;4614
0031a6  685e              LDR      r6,[r3,#4]            ;4616
                  |L1.12712|
0031a8  fa04f300          LSL      r3,r4,r0              ;4616
0031ac  421e              TST      r6,r3                 ;4616
0031ae  d00b              BEQ      |L1.12744|
0031b0  eb000340          ADD      r3,r0,r0,LSL #1       ;4618
0031b4  eb031500          ADD      r5,r3,r0,LSL #4       ;4618
0031b8  f8113025          LDRB     r3,[r1,r5,LSL #2]     ;4618
0031bc  2b32              CMP      r3,#0x32              ;4618
0031be  d209              BCS      |L1.12756|
0031c0  1c5b              ADDS     r3,r3,#1              ;4618
0031c2  f8013025          STRB     r3,[r1,r5,LSL #2]     ;4618
0031c6  e005              B        |L1.12756|
                  |L1.12744|
0031c8  eb000340          ADD      r3,r0,r0,LSL #1       ;4620
0031cc  eb031300          ADD      r3,r3,r0,LSL #4       ;4620
0031d0  f8012023          STRB     r2,[r1,r3,LSL #2]     ;4620
                  |L1.12756|
0031d4  1c40              ADDS     r0,r0,#1              ;4614
0031d6  b2c0              UXTB     r0,r0                 ;4614
0031d8  2802              CMP      r0,#2                 ;4614
0031da  d3e5              BCC      |L1.12712|
0031dc  e6f1              B        |L1.12226|
                  |L1.12766|
;;;4634   		else bat[i]._rel_stat=0;
0031de  eb010383          ADD      r3,r1,r3,LSL #2
0031e2  f883203c          STRB     r2,[r3,#0x3c]
                  |L1.12774|
0031e6  1c40              ADDS     r0,r0,#1              ;4631
0031e8  b2c0              UXTB     r0,r0                 ;4631
0031ea  2802              CMP      r0,#2                 ;4631
0031ec  f4ffaeea          BCC      |L1.12228|
;;;4635   		}
;;;4636   
;;;4637   	}
;;;4638   
;;;4639   else 
;;;4640   	{
;;;4641   	char i;
;;;4642   	for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4643   		{
;;;4644   		bat[i]._cnt_to_block=0;
;;;4645   		bat[i]._rel_stat=0;
;;;4646   		}
;;;4647   
;;;4648   	}
;;;4649   
;;;4650   /*if(mess_find_unvol(MESS2BAT_HNDL1))
;;;4651   	{
;;;4652   	if(PARAM_BAT_ON)
;;;4653   		{
;;;4654   		char i;
;;;4655   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4656   			{
;;;4657   			if(mess_data[1]&(1<<i))
;;;4658   				{
;;;4659   				bat[i]._cnt_to_block=0;
;;;4660   				bat[i]._rel_stat=0;
;;;4661   				}
;;;4662   			}
;;;4663   		}
;;;4664   	} */
;;;4665   }
0031f0  e68c              B        |L1.12044|
                  |L1.12786|
0031f2  2000              MOVS     r0,#0                 ;4642
                  |L1.12788|
0031f4  eb000340          ADD      r3,r0,r0,LSL #1       ;4644
0031f8  eb031300          ADD      r3,r3,r0,LSL #4       ;4644
0031fc  f8012023          STRB     r2,[r1,r3,LSL #2]     ;4644
003200  eb010383          ADD      r3,r1,r3,LSL #2       ;4645
003204  f883203c          STRB     r2,[r3,#0x3c]         ;4645
003208  1c40              ADDS     r0,r0,#1              ;4642
00320a  b2c0              UXTB     r0,r0                 ;4642
00320c  2802              CMP      r0,#2                 ;4642
00320e  d3f1              BCC      |L1.12788|
003210  e67c              B        |L1.12044|
;;;4666   
                          ENDP

                  klimat_hndl PROC
;;;5029   //-----------------------------------------------
;;;5030   void klimat_hndl(void)
003212  e92d41f0          PUSH     {r4-r8,lr}
;;;5031   {
;;;5032   
;;;5033   
;;;5034   if(t_box>TBOXMAX)
003216  4dfa              LDR      r5,|L1.13824|
003218  48fa              LDR      r0,|L1.13828|
;;;5035   	{
;;;5036   	av_tbox_cnt++;
00321a  4cfb              LDR      r4,|L1.13832|
00321c  f9b51000          LDRSH    r1,[r5,#0]            ;5034  ; t_box
003220  f9b02000          LDRSH    r2,[r0,#0]            ;5034  ; TBOXMAX
003224  f9b40000          LDRSH    r0,[r4,#0]
003228  4291              CMP      r1,r2                 ;5034
00322a  dd03              BLE      |L1.12852|
00322c  f1000001          ADD      r0,r0,#1
003230  8020              STRH     r0,[r4,#0]
003232  e003              B        |L1.12860|
                  |L1.12852|
;;;5037   	} 
;;;5038   else if(t_box<TBOXMAX)
003234  da02              BGE      |L1.12860|
;;;5039   	{
;;;5040   	av_tbox_cnt--;
003236  f1a00001          SUB      r0,r0,#1
00323a  8020              STRH     r0,[r4,#0]
                  |L1.12860|
;;;5041   	}
;;;5042   gran(&av_tbox_cnt,0,6);
00323c  2206              MOVS     r2,#6
00323e  2100              MOVS     r1,#0
003240  48f1              LDR      r0,|L1.13832|
003242  f7fffffe          BL       gran
;;;5043   
;;;5044   if(av_tbox_cnt>5)
003246  f9b40000          LDRSH    r0,[r4,#0]  ; av_tbox_cnt
;;;5045   	{
;;;5046   	av_tbox_stat=atsON;
00324a  49f0              LDR      r1,|L1.13836|
00324c  2601              MOVS     r6,#1
00324e  2805              CMP      r0,#5                 ;5044
003250  dd00              BLE      |L1.12884|
003252  700e              STRB     r6,[r1,#0]
                  |L1.12884|
003254  2400              MOVS     r4,#0                 ;5042
;;;5047   	}
;;;5048   if(av_tbox_cnt<1)
003256  2801              CMP      r0,#1
003258  da00              BGE      |L1.12892|
;;;5049   	{
;;;5050   	av_tbox_stat=atsOFF;
00325a  700c              STRB     r4,[r1,#0]
                  |L1.12892|
;;;5051   	}
;;;5052   
;;;5053   if(t_box<(TBOXREG-2))
00325c  49ec              LDR      r1,|L1.13840|
00325e  f9b50000          LDRSH    r0,[r5,#0]  ; t_box
;;;5054   	{
;;;5055   	if(t_box_cnt<30)
003262  4aec              LDR      r2,|L1.13844|
003264  f9b11000          LDRSH    r1,[r1,#0]            ;5053  ; TBOXREG
;;;5056   		{
;;;5057   		t_box_cnt++;
;;;5058   		if(t_box_cnt>=30)
;;;5059   			{
;;;5060   			main_vent_pos--;
003268  4feb              LDR      r7,|L1.13848|
00326a  1e8b              SUBS     r3,r1,#2              ;5053
00326c  4298              CMP      r0,r3                 ;5053
00326e  da0d              BGE      |L1.12940|
003270  f9921000          LDRSB    r1,[r2,#0]            ;5055  ; t_box_cnt
003274  291e              CMP      r1,#0x1e              ;5055
003276  da1a              BGE      |L1.12974|
003278  1c49              ADDS     r1,r1,#1              ;5057
00327a  b249              SXTB     r1,r1                 ;5057
00327c  7011              STRB     r1,[r2,#0]            ;5057
00327e  291e              CMP      r1,#0x1e              ;5058
003280  db15              BLT      |L1.12974|
003282  8839              LDRH     r1,[r7,#0]  ; main_vent_pos
003284  1e49              SUBS     r1,r1,#1
003286  8039              STRH     r1,[r7,#0]
;;;5061   			t_box_cnt=0;
003288  7014              STRB     r4,[r2,#0]
00328a  e010              B        |L1.12974|
                  |L1.12940|
;;;5062   			}
;;;5063   		}
;;;5064   	}
;;;5065   else if(t_box>(TBOXREG))
00328c  4288              CMP      r0,r1
00328e  dd0d              BLE      |L1.12972|
;;;5066   	{
;;;5067   	if(t_box_cnt<30)
003290  f9921000          LDRSB    r1,[r2,#0]  ; t_box_cnt
003294  291e              CMP      r1,#0x1e
003296  da0a              BGE      |L1.12974|
;;;5068   		{
;;;5069   		t_box_cnt++;
003298  1c49              ADDS     r1,r1,#1
00329a  b249              SXTB     r1,r1
00329c  7011              STRB     r1,[r2,#0]
;;;5070   		if(t_box_cnt>=30)
00329e  291e              CMP      r1,#0x1e
0032a0  db05              BLT      |L1.12974|
;;;5071   			{
;;;5072   			main_vent_pos++;
0032a2  8839              LDRH     r1,[r7,#0]  ; main_vent_pos
0032a4  1c49              ADDS     r1,r1,#1
0032a6  8039              STRH     r1,[r7,#0]
;;;5073   			t_box_cnt=0;
0032a8  7014              STRB     r4,[r2,#0]
0032aa  e000              B        |L1.12974|
                  |L1.12972|
;;;5074   			}
;;;5075   		}
;;;5076   	}
;;;5077   else
;;;5078   	{
;;;5079   	t_box_cnt=0;
0032ac  7014              STRB     r4,[r2,#0]
                  |L1.12974|
;;;5080   	}
;;;5081   
;;;5082   #ifndef UKU_KONTUR
;;;5083   if(t_box>TBOXVENTMAX)gran(&main_vent_pos,0,20); 
0032ae  49db              LDR      r1,|L1.13852|
0032b0  f9b11000          LDRSH    r1,[r1,#0]  ; TBOXVENTMAX
0032b4  4288              CMP      r0,r1
0032b6  dd05              BLE      |L1.12996|
0032b8  2214              MOVS     r2,#0x14
0032ba  2100              MOVS     r1,#0
0032bc  48d6              LDR      r0,|L1.13848|
0032be  f7fffffe          BL       gran
0032c2  e007              B        |L1.13012|
                  |L1.12996|
;;;5084   else gran(&main_vent_pos,0,pos_vent+9);
0032c4  48d6              LDR      r0,|L1.13856|
0032c6  2100              MOVS     r1,#0
0032c8  8800              LDRH     r0,[r0,#0]  ; pos_vent
0032ca  3009              ADDS     r0,r0,#9
0032cc  b202              SXTH     r2,r0
0032ce  48d2              LDR      r0,|L1.13848|
0032d0  f7fffffe          BL       gran
                  |L1.13012|
;;;5085   
;;;5086   if((mess_find_unvol(MESS2VENT_HNDL))&&(mess_data[0]==PARAM_VENT_CB))
0032d4  20f0              MOVS     r0,#0xf0
0032d6  f7fffffe          BL       mess_find_unvol
0032da  b128              CBZ      r0,|L1.13032|
0032dc  48d1              LDR      r0,|L1.13860|
0032de  6801              LDR      r1,[r0,#0]  ; mess_data
0032e0  29f1              CMP      r1,#0xf1
0032e2  d101              BNE      |L1.13032|
;;;5087   	{
;;;5088   	main_vent_pos=mess_data[1];
0032e4  6840              LDR      r0,[r0,#4]  ; mess_data
0032e6  8038              STRH     r0,[r7,#0]
                  |L1.13032|
;;;5089   	}
;;;5090   
;;;5091   
;;;5092   if(main_vent_pos<=1)mixer_vent_stat=mvsON;
0032e8  f9b71000          LDRSH    r1,[r7,#0]  ; main_vent_pos
0032ec  48ce              LDR      r0,|L1.13864|
0032ee  2901              CMP      r1,#1
0032f0  dc01              BGT      |L1.13046|
0032f2  7006              STRB     r6,[r0,#0]
0032f4  e000              B        |L1.13048|
                  |L1.13046|
;;;5093   else mixer_vent_stat=mvsOFF;
0032f6  7004              STRB     r4,[r0,#0]
                  |L1.13048|
;;;5094   #endif
;;;5095   
;;;5096   #ifdef UKU_KONTUR
;;;5097   
;;;5098   if(t_box>TBOXVENTON) t_box_vent_on_cnt++;
;;;5099   else if(t_box<TBOXVENTOFF) t_box_vent_on_cnt--;
;;;5100   gran(&t_box_vent_on_cnt,0,10);
;;;5101   
;;;5102   if(t_box_vent_on_cnt>9) vent_stat_k=vsON;
;;;5103   else if(t_box_vent_on_cnt<1) vent_stat_k=vsOFF;
;;;5104   
;;;5105   if(t_box<TBOXWARMON) t_box_warm_on_cnt++;
;;;5106   else if(t_box>TBOXWARMOFF) t_box_warm_on_cnt--;
;;;5107   gran(&t_box_warm_on_cnt,0,10);
;;;5108   
;;;5109   if(t_box_warm_on_cnt>9) warm_stat_k=wsON;
;;;5110   else if(t_box_warm_on_cnt<1) warm_stat_k=wsOFF;
;;;5111   
;;;5112   #endif
;;;5113   
;;;5114   if((TBATDISABLE>=50) && (TBATDISABLE<=90))
0032f8  48cc              LDR      r0,|L1.13868|
;;;5115   	{
;;;5116   	if(t_box>TBATDISABLE)
;;;5117   		{
;;;5118   		tbatdisable_cnt++;
;;;5119   		}
;;;5120   	if(t_box<TBATENABLE)
;;;5121   		{
;;;5122   		tbatdisable_cnt--;
;;;5123   		}
;;;5124   	gran(&tbatdisable_cnt,0,6);
;;;5125   
;;;5126   	if(tbatdisable_cnt>5)
;;;5127   		{
;;;5128   		tbatdisable_stat=tbdsOFF;
0032fa  f8df8334          LDR      r8,|L1.13872|
0032fe  f9b00000          LDRSH    r0,[r0,#0]            ;5114  ; TBATDISABLE
003302  f1a00132          SUB      r1,r0,#0x32           ;5114
003306  2928              CMP      r1,#0x28              ;5114
003308  d81f              BHI      |L1.13130|
00330a  f9b51000          LDRSH    r1,[r5,#0]            ;5116  ; t_box
00330e  4fc9              LDR      r7,|L1.13876|
003310  4281              CMP      r1,r0                 ;5116
003312  dd02              BLE      |L1.13082|
003314  8838              LDRH     r0,[r7,#0]            ;5118  ; tbatdisable_cnt
003316  1c40              ADDS     r0,r0,#1              ;5118
003318  8038              STRH     r0,[r7,#0]            ;5118
                  |L1.13082|
00331a  48c7              LDR      r0,|L1.13880|
00331c  f9b00000          LDRSH    r0,[r0,#0]            ;5120  ; TBATENABLE
003320  4281              CMP      r1,r0                 ;5120
003322  da02              BGE      |L1.13098|
003324  8838              LDRH     r0,[r7,#0]            ;5122  ; tbatdisable_cnt
003326  1e40              SUBS     r0,r0,#1              ;5122
003328  8038              STRH     r0,[r7,#0]            ;5122
                  |L1.13098|
00332a  2206              MOVS     r2,#6                 ;5124
00332c  2100              MOVS     r1,#0                 ;5124
00332e  48c1              LDR      r0,|L1.13876|
003330  f7fffffe          BL       gran
003334  f9b70000          LDRSH    r0,[r7,#0]            ;5126  ; tbatdisable_cnt
003338  2805              CMP      r0,#5                 ;5126
00333a  dd01              BLE      |L1.13120|
00333c  f8886000          STRB     r6,[r8,#0]
                  |L1.13120|
;;;5129   		}
;;;5130   	if(tbatdisable_cnt<1)
003340  2801              CMP      r0,#1
003342  da04              BGE      |L1.13134|
;;;5131   		{
;;;5132   		tbatdisable_stat=tbdsON;
003344  f8884000          STRB     r4,[r8,#0]
003348  e001              B        |L1.13134|
                  |L1.13130|
;;;5133   		}
;;;5134   	}
;;;5135   else 
;;;5136   	{
;;;5137   	tbatdisable_stat=tbdsON;
00334a  f8884000          STRB     r4,[r8,#0]
                  |L1.13134|
;;;5138   	}
;;;5139   
;;;5140   if((TLOADDISABLE>=50) && (TLOADDISABLE<=80))
00334e  48bb              LDR      r0,|L1.13884|
;;;5141   	{
;;;5142   	if(t_box>TLOADDISABLE)
;;;5143   		{
;;;5144   		tloaddisable_cnt++;
;;;5145   		}
;;;5146   	if(t_box<TLOADENABLE)
;;;5147   		{
;;;5148   		tloaddisable_cnt--;
;;;5149   		}
;;;5150   	gran(&tloaddisable_cnt,0,6);
;;;5151   
;;;5152   	if(tloaddisable_cnt>5)
;;;5153   		{
;;;5154   		tloaddisable_stat=tldsOFF;
003350  4fbb              LDR      r7,|L1.13888|
003352  f9b00000          LDRSH    r0,[r0,#0]            ;5140  ; TLOADDISABLE
003356  f1a00132          SUB      r1,r0,#0x32           ;5140
00335a  291e              CMP      r1,#0x1e              ;5140
00335c  d81d              BHI      |L1.13210|
00335e  f9b51000          LDRSH    r1,[r5,#0]            ;5142  ; t_box
003362  4db8              LDR      r5,|L1.13892|
003364  4281              CMP      r1,r0                 ;5142
003366  dd02              BLE      |L1.13166|
003368  8828              LDRH     r0,[r5,#0]            ;5144  ; tloaddisable_cnt
00336a  1c40              ADDS     r0,r0,#1              ;5144
00336c  8028              STRH     r0,[r5,#0]            ;5144
                  |L1.13166|
00336e  48b6              LDR      r0,|L1.13896|
003370  f9b00000          LDRSH    r0,[r0,#0]            ;5146  ; TLOADENABLE
003374  4281              CMP      r1,r0                 ;5146
003376  da02              BGE      |L1.13182|
003378  8828              LDRH     r0,[r5,#0]            ;5148  ; tloaddisable_cnt
00337a  1e40              SUBS     r0,r0,#1              ;5148
00337c  8028              STRH     r0,[r5,#0]            ;5148
                  |L1.13182|
00337e  2206              MOVS     r2,#6                 ;5150
003380  2100              MOVS     r1,#0                 ;5150
003382  48b0              LDR      r0,|L1.13892|
003384  f7fffffe          BL       gran
003388  f9b50000          LDRSH    r0,[r5,#0]            ;5152  ; tloaddisable_cnt
00338c  2805              CMP      r0,#5                 ;5152
00338e  dd00              BLE      |L1.13202|
003390  703e              STRB     r6,[r7,#0]
                  |L1.13202|
;;;5155   		}
;;;5156   	if(tloaddisable_cnt<1)
003392  2801              CMP      r0,#1
003394  da00              BGE      |L1.13208|
;;;5157   		{
;;;5158   		tloaddisable_stat=tldsON;
003396  703c              STRB     r4,[r7,#0]
                  |L1.13208|
;;;5159   		}
;;;5160   	}
;;;5161   else 
;;;5162   	{
;;;5163   	tloaddisable_stat=tldsON;
;;;5164   	}
;;;5165   
;;;5166   }
003398  e507              B        |L1.11690|
                  |L1.13210|
00339a  703c              STRB     r4,[r7,#0]            ;5163
00339c  e505              B        |L1.11690|
;;;5167   #endif
                          ENDP

                  bat_drv PROC
;;;5303   //-----------------------------------------------
;;;5304   void bat_drv(char in)
00339e  e92d4ffe          PUSH     {r1-r11,lr}
;;;5305   {
0033a2  4605              MOV      r5,r0
;;;5306   unsigned short /*tempUS,*/tempUS_;
;;;5307   unsigned long tempUL,tempUL_;
;;;5308   unsigned short b_zar;
;;;5309   //static unsigned short time_cnt[2];
;;;5310   
;;;5311   
;;;5312   
;;;5313   if(cntrl_stat_blok_cnt_plus[in])cntrl_stat_blok_cnt_plus[in]--;
0033a4  49a9              LDR      r1,|L1.13900|
0033a6  f9310015          LDRSH    r0,[r1,r5,LSL #1]
0033aa  b110              CBZ      r0,|L1.13234|
0033ac  1e40              SUBS     r0,r0,#1
0033ae  f8210015          STRH     r0,[r1,r5,LSL #1]
                  |L1.13234|
;;;5314   if(cntrl_stat_blok_cnt_minus[in])cntrl_stat_blok_cnt_minus[in]--;
0033b2  4aa6              LDR      r2,|L1.13900|
0033b4  1d12              ADDS     r2,r2,#4
0033b6  f9320015          LDRSH    r0,[r2,r5,LSL #1]
0033ba  b110              CBZ      r0,|L1.13250|
0033bc  1e40              SUBS     r0,r0,#1
0033be  f8220015          STRH     r0,[r2,r5,LSL #1]
                  |L1.13250|
;;;5315   
;;;5316   
;;;5317   if(bat[in]._Ib>IZMAX) cntrl_stat_blok_cnt_plus[in]=100;
0033c2  eb050045          ADD      r0,r5,r5,LSL #1
0033c6  4ba2              LDR      r3,|L1.13904|
0033c8  eb001005          ADD      r0,r0,r5,LSL #4
0033cc  eb030480          ADD      r4,r3,r0,LSL #2
0033d0  4ba0              LDR      r3,|L1.13908|
0033d2  9002              STR      r0,[sp,#8]
0033d4  f9b40008          LDRSH    r0,[r4,#8]
0033d8  f9b33000          LDRSH    r3,[r3,#0]  ; IZMAX
0033dc  f04f0b64          MOV      r11,#0x64
0033e0  4298              CMP      r0,r3
0033e2  dd01              BLE      |L1.13288|
0033e4  f821b015          STRH     r11,[r1,r5,LSL #1]
                  |L1.13288|
;;;5318   if(bat[in]._Ib<0)     cntrl_stat_blok_cnt_minus[in]=100;
0033e8  2800              CMP      r0,#0
0033ea  da01              BGE      |L1.13296|
0033ec  f822b015          STRH     r11,[r2,r5,LSL #1]
                  |L1.13296|
;;;5319   
;;;5320   if(cntrl_stat_blok_cnt_plus[in] && cntrl_stat_blok_cnt_minus[in])
;;;5321        {
;;;5322        if(!cntrl_stat_blok_cnt_)
0033f0  4896              LDR      r0,|L1.13900|
0033f2  f8313015          LDRH     r3,[r1,r5,LSL #1]     ;5320
0033f6  3884              SUBS     r0,r0,#0x84
0033f8  2700              MOVS     r7,#0
0033fa  b14b              CBZ      r3,|L1.13328|
0033fc  f8323015          LDRH     r3,[r2,r5,LSL #1]     ;5320
003400  b133              CBZ      r3,|L1.13328|
003402  f8b03064          LDRH     r3,[r0,#0x64]  ; cntrl_stat_blok_cnt_
003406  b1a3              CBZ      r3,|L1.13362|
;;;5323             {
;;;5324             cntrl_stat_blok_cnt_=600; 
;;;5325             cntrl_stat_blok_cnt_plus[in]=0;
;;;5326             cntrl_stat_blok_cnt_minus[in]=0;
;;;5327             }
;;;5328        else cntrl_stat_blok_cnt=3000;
003408  f64031b8          MOV      r1,#0xbb8
00340c  f8a01062          STRH     r1,[r0,#0x62]
                  |L1.13328|
;;;5329        }
;;;5330   cntrl_stat_blok_cnt=0;
003410  f8a07062          STRH     r7,[r0,#0x62]
;;;5331   
;;;5332   if(++(bat[in]._time_cnt)>=10)
003414  f894003e          LDRB     r0,[r4,#0x3e]
003418  1c40              ADDS     r0,r0,#1
00341a  b2c0              UXTB     r0,r0
00341c  f884003e          STRB     r0,[r4,#0x3e]
003420  280a              CMP      r0,#0xa
003422  d301              BCC      |L1.13352|
;;;5333   	{
;;;5334   	bat[in]._time_cnt=0;
003424  f884703e          STRB     r7,[r4,#0x3e]
                  |L1.13352|
;;;5335   	//bat[in]._zar_cnt++;
;;;5336   	}
;;;5337   
;;;5338   if(main_10Hz_cnt==50)
003428  4e8b              LDR      r6,|L1.13912|
00342a  8830              LDRH     r0,[r6,#0]  ; main_10Hz_cnt
00342c  2832              CMP      r0,#0x32
00342e  d009              BEQ      |L1.13380|
003430  e017              B        |L1.13410|
                  |L1.13362|
003432  f44f7316          MOV      r3,#0x258             ;5324
003436  f8a03064          STRH     r3,[r0,#0x64]         ;5324
00343a  f8217015          STRH     r7,[r1,r5,LSL #1]     ;5325
00343e  f8227015          STRH     r7,[r2,r5,LSL #1]     ;5326
003442  e7e5              B        |L1.13328|
                  |L1.13380|
;;;5339   	{
;;;5340   	if(!bat[in]._rel_stat)
003444  f894003c          LDRB     r0,[r4,#0x3c]
003448  b958              CBNZ     r0,|L1.13410|
;;;5341   		{
;;;5342   		
;;;5343   		if(bat[in]._Ub<80) 
00344a  f9b40002          LDRSH    r0,[r4,#2]
00344e  2850              CMP      r0,#0x50
003450  da07              BGE      |L1.13410|
;;;5344   			{
;;;5345   			
;;;5346   			if(!(bat[in]._av&1))
003452  f894003d          LDRB     r0,[r4,#0x3d]
003456  07c0              LSLS     r0,r0,#31
003458  d103              BNE      |L1.13410|
;;;5347   				{
;;;5348   				avar_bat_hndl(in,1);
00345a  2101              MOVS     r1,#1
00345c  4628              MOV      r0,r5
00345e  f7fffffe          BL       avar_bat_hndl
                  |L1.13410|
;;;5349   				//if(in==0)plazma_bat++;
;;;5350   				}
;;;5351   			}				
;;;5352   
;;;5353   		}
;;;5354   	}
;;;5355   
;;;5356   if(main_10Hz_cnt>200)
003462  f9b60000          LDRSH    r0,[r6,#0]  ; main_10Hz_cnt
;;;5357   	{
;;;5358   	if(abs(bat[in]._Ib)>IKB) 
003466  4e7d              LDR      r6,|L1.13916|
003468  28c8              CMP      r0,#0xc8              ;5356
00346a  dd0f              BLE      |L1.13452|
00346c  f9b40008          LDRSH    r0,[r4,#8]
003470  f7fffffe          BL       abs
003474  f9b61000          LDRSH    r1,[r6,#0]  ; IKB
003478  4288              CMP      r0,r1
00347a  dd07              BLE      |L1.13452|
;;;5359   		{
;;;5360   		if((bat[in]._av&1))avar_bat_hndl(in,0);
00347c  f894003d          LDRB     r0,[r4,#0x3d]
003480  07c0              LSLS     r0,r0,#31
003482  d003              BEQ      |L1.13452|
003484  2100              MOVS     r1,#0
003486  4628              MOV      r0,r5
003488  f7fffffe          BL       avar_bat_hndl
                  |L1.13452|
;;;5361   		}
;;;5362   	}
;;;5363   
;;;5364   #ifdef APSENERGIA
;;;5365   //if(bat[in]._Ib>(-IKB))
;;;5366   
;;;5367   
;;;5368   #endif
;;;5369   
;;;5370   if(bat[in]._Ib>(-IKB))
00348c  4873              LDR      r0,|L1.13916|
00348e  f9b41008          LDRSH    r1,[r4,#8]
003492  f9b00000          LDRSH    r0,[r0,#0]  ; IKB
003496  4240              RSBS     r0,r0,#0
003498  4281              CMP      r1,r0
00349a  dd11              BLE      |L1.13504|
;;;5371   	{
;;;5372   	if(bat[in]._cnt_wrk<10)
00349c  7b60              LDRB     r0,[r4,#0xd]
00349e  280a              CMP      r0,#0xa
0034a0  d20b              BCS      |L1.13498|
;;;5373   		{
;;;5374   		bat[in]._cnt_wrk++;
0034a2  1c40              ADDS     r0,r0,#1
0034a4  b2c0              UXTB     r0,r0
0034a6  7360              STRB     r0,[r4,#0xd]
;;;5375   		if((bat[in]._cnt_wrk>=10)&&(bat[in]._wrk)) 
0034a8  280a              CMP      r0,#0xa
0034aa  d36c              BCC      |L1.13702|
0034ac  7ba0              LDRB     r0,[r4,#0xe]
0034ae  b3f0              CBZ      r0,|L1.13614|
;;;5376   			{
;;;5377   			bat[in]._wrk=0;
0034b0  73a7              STRB     r7,[r4,#0xe]
;;;5378   			//beep_init(0x7L,'O');
;;;5379   			//wrk_mem_hndl(0);
;;;5380   			wrk_mem_hndl(in);
0034b2  4628              MOV      r0,r5
0034b4  f7fffffe          BL       wrk_mem_hndl
0034b8  e065              B        |L1.13702|
                  |L1.13498|
;;;5381   			//plazma++;
;;;5382   			}
;;;5383   		}
;;;5384   	else bat[in]._cnt_wrk=10;	
0034ba  200a              MOVS     r0,#0xa
0034bc  7360              STRB     r0,[r4,#0xd]
0034be  e062              B        |L1.13702|
                  |L1.13504|
;;;5385   	}	
;;;5386   
;;;5387   else if(bat[in]._Ib<(-IKB))
0034c0  da61              BGE      |L1.13702|
;;;5388   	{
;;;5389   	if(bat[in]._cnt_wrk)
0034c2  7b60              LDRB     r0,[r4,#0xd]
0034c4  b398              CBZ      r0,|L1.13614|
;;;5390   		{
;;;5391   		bat[in]._cnt_wrk--;
0034c6  1e40              SUBS     r0,r0,#1
0034c8  b2c0              UXTB     r0,r0
0034ca  7360              STRB     r0,[r4,#0xd]
;;;5392   		if((bat[in]._cnt_wrk==0)&&(bat[in]._wrk==0)) 
0034cc  bb78              CBNZ     r0,|L1.13614|
0034ce  7ba0              LDRB     r0,[r4,#0xe]
0034d0  bb68              CBNZ     r0,|L1.13614|
;;;5393   			{
;;;5394   			bat[in]._wrk=1;
0034d2  2001              MOVS     r0,#1
0034d4  73a0              STRB     r0,[r4,#0xe]
;;;5395   
;;;5396   				{
;;;5397   				char temp;
;;;5398   				signed short temp_temp;
;;;5399   				temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)];
0034d6  4862              LDR      r0,|L1.13920|
0034d8  8800              LDRH     r0,[r0,#0]  ; bat_u_old_cnt
0034da  1c40              ADDS     r0,r0,#1
0034dc  f0000007          AND      r0,r0,#7
0034e0  eb040040          ADD      r0,r4,r0,LSL #1
0034e4  8c00              LDRH     r0,[r0,#0x20]
0034e6  9000              STR      r0,[sp,#0]
;;;5400   			 
;;;5401   				temp=LPC_RTC->YEAR;
0034e8  4e5e              LDR      r6,|L1.13924|
0034ea  8bb0              LDRH     r0,[r6,#0x1c]
0034ec  9001              STR      r0,[sp,#4]
;;;5402   				gran_char((signed char*)&temp,1,99);
0034ee  f04f0263          MOV      r2,#0x63
0034f2  f04f0101          MOV      r1,#1
0034f6  a801              ADD      r0,sp,#4
0034f8  f7fffffe          BL       gran_char
;;;5403   				*((char*)(&(bat[in]._wrk_date[0])))=temp;
0034fc  f104041c          ADD      r4,r4,#0x1c
003500  f89d0004          LDRB     r0,[sp,#4]
003504  7620              STRB     r0,[r4,#0x18]
;;;5404   			
;;;5405   				temp=LPC_RTC->MONTH;
003506  7e30              LDRB     r0,[r6,#0x18]
003508  9001              STR      r0,[sp,#4]
;;;5406   				gran_char((signed char*)&temp,1,12);
00350a  f04f020c          MOV      r2,#0xc
00350e  f04f0101          MOV      r1,#1
003512  a801              ADD      r0,sp,#4
003514  f7fffffe          BL       gran_char
;;;5407   				*(((char*)(&(bat[in]._wrk_date[0])))+1)=temp;
003518  f89d0004          LDRB     r0,[sp,#4]
00351c  7660              STRB     r0,[r4,#0x19]
;;;5408   			
;;;5409   				temp=LPC_RTC->DOM;
00351e  7b30              LDRB     r0,[r6,#0xc]
003520  9001              STR      r0,[sp,#4]
;;;5410   				gran_char((signed char*)&temp,1,31);
003522  221f              MOVS     r2,#0x1f
003524  2101              MOVS     r1,#1
003526  a801              ADD      r0,sp,#4
003528  f7fffffe          BL       gran_char
;;;5411   				*(((char*)(&(bat[in]._wrk_date[0])))+2)=temp;			
00352c  e000              B        |L1.13616|
                  |L1.13614|
00352e  e02a              B        |L1.13702|
                  |L1.13616|
003530  f89d0004          LDRB     r0,[sp,#4]
003534  76a0              STRB     r0,[r4,#0x1a]
;;;5412   				
;;;5413   				*(((char*)(&(bat[in]._wrk_date[0])))+3)=*((char*)&temp_temp);
003536  f89d0000          LDRB     r0,[sp,#0]
00353a  76e0              STRB     r0,[r4,#0x1b]
;;;5414   
;;;5415   				temp=LPC_RTC->HOUR;
00353c  7a30              LDRB     r0,[r6,#8]
00353e  9001              STR      r0,[sp,#4]
;;;5416   				gran_char((signed char*)&temp,0,23);
003540  2217              MOVS     r2,#0x17
003542  2100              MOVS     r1,#0
003544  a801              ADD      r0,sp,#4
003546  f7fffffe          BL       gran_char
;;;5417   				*((char*)(&(bat[in]._wrk_date[1])))=temp;
00354a  f89d0004          LDRB     r0,[sp,#4]
00354e  7720              STRB     r0,[r4,#0x1c]
;;;5418                  	
;;;5419   				temp=LPC_RTC->MIN;
003550  7930              LDRB     r0,[r6,#4]
003552  9001              STR      r0,[sp,#4]
;;;5420   				gran_char((signed char*)&temp,0,59);
003554  223b              MOVS     r2,#0x3b
003556  2100              MOVS     r1,#0
003558  a801              ADD      r0,sp,#4
00355a  f7fffffe          BL       gran_char
;;;5421   				*(((char*)(&(bat[in]._wrk_date[1])))+1)=temp;
00355e  f89d0004          LDRB     r0,[sp,#4]
003562  7760              STRB     r0,[r4,#0x1d]
;;;5422   	          
;;;5423   				temp=LPC_RTC->SEC;
003564  7830              LDRB     r0,[r6,#0]
003566  9001              STR      r0,[sp,#4]
;;;5424   				gran_char((signed char*)&temp,0,59);
003568  223b              MOVS     r2,#0x3b
00356a  2100              MOVS     r1,#0
00356c  a801              ADD      r0,sp,#4
00356e  f7fffffe          BL       gran_char
;;;5425   				*(((char*)(&(bat[in]._wrk_date[1])))+2)=temp;
003572  f89d0004          LDRB     r0,[sp,#4]
003576  77a0              STRB     r0,[r4,#0x1e]
;;;5426   			
;;;5427   				*(((char*)(&(bat[in]._wrk_date[1])))+3)=*(((char*)&temp_temp)+1);
003578  f89d0001          LDRB     r0,[sp,#1]
00357c  77e0              STRB     r0,[r4,#0x1f]
;;;5428   				bat[in]._Iintegr=0;		//  
00357e  8027              STRH     r7,[r4,#0]
;;;5429   				bat[in]._Iintegr_=0;	//  
003580  8067              STRH     r7,[r4,#2]
003582  f1a4041c          SUB      r4,r4,#0x1c
                  |L1.13702|
;;;5430   				}
;;;5431   	
;;;5432   			}
;;;5433   
;;;5434   		}
;;;5435   	else bat[in]._cnt_wrk=0;	 
;;;5436   	
;;;5437   	}					
;;;5438   
;;;5439   /*
;;;5440   if(Ibat>=(-IKB))
;;;5441   	{
;;;5442   	if(cnt_wrk<10)
;;;5443   		{
;;;5444   		cnt_wrk++;
;;;5445   		if((cnt_wrk>=10)&&(wrk!=wrkOFF)) 
;;;5446   			{
;;;5447   			wrk=wrkOFF;
;;;5448   			//beep_init(0x7L,'O');
;;;5449   			wrk_mem_hndl(ibat_integr);
;;;5450   			}
;;;5451   		}
;;;5452   	else cnt_wrk=10;	
;;;5453   	}	
;;;5454   
;;;5455   else if((Ibat<(-IKB))&&(spc_stat!=spc_KE))
;;;5456   	{
;;;5457   	if(cnt_wrk)
;;;5458   		{
;;;5459   		cnt_wrk--;
;;;5460   		if((cnt_wrk==0)&&(wrk!=wrkON)) 
;;;5461   			{
;;;5462   			char temp;
;;;5463   			signed short temp_temp;
;;;5464   			temp_temp=ubat_old[((ubat_old_cnt+1)&0x07)];
;;;5465   			 
;;;5466   			wrk=wrkON;
;;;5467   			
;;;5468   			temp=_year;
;;;5469   			gran_char(&temp,1,99);
;;;5470   			*((char*)(&(wrk_date[0])))=temp;
;;;5471   			
;;;5472   			temp=_month;
;;;5473   			gran_char(&temp,1,12);
;;;5474   			*(((char*)(&(wrk_date[0])))+1)=temp;
;;;5475   			
;;;5476   			temp=_date;
;;;5477   			gran_char(&temp,1,31);
;;;5478   			*(((char*)(&(wrk_date[0])))+2)=temp;			
;;;5479   				
;;;5480   			*(((char*)(&(wrk_date[0])))+3)=*((char*)&temp_temp);
;;;5481   
;;;5482   			temp=_hour;
;;;5483   			gran_char(&temp,0,23);
;;;5484   			*((char*)(&(wrk_date[1])))=temp;
;;;5485                  
;;;5486   			temp=_min;
;;;5487   			gran_char(&temp,0,59);
;;;5488   			*(((char*)(&(wrk_date[1])))+1)=temp;
;;;5489   	          
;;;5490   			temp=_sec;
;;;5491   			gran_char(&temp,0,59);
;;;5492   			*(((char*)(&(wrk_date[1])))+2)=temp;
;;;5493   			
;;;5494   			*(((char*)(&(wrk_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;5495   
;;;5496   			
;;;5497   			//beep_init(0xFL,'O'); 
;;;5498   			ibat_integr=0;
;;;5499   			ibat_integr_=0;
;;;5500   			}
;;;5501   		}
;;;5502   	else cnt_wrk=0;	 
;;;5503   	
;;;5504   	}
;;;5505   if(wrk==wrkON)
;;;5506   	{
;;;5507   	ibat_integr_+=-Ibat;
;;;5508   	if(ibat_integr_>=SEC_IN_HOUR*10L)
;;;5509   		{
;;;5510   		ibat_integr_-=SEC_IN_HOUR*10L;
;;;5511   		ibat_integr++;
;;;5512   		}
;;;5513   	}
;;;5514   
;;;5515   */
;;;5516   
;;;5517   
;;;5518   /*if(bat[in]._cnt_to_block)
;;;5519   	{
;;;5520   	bat[in]._cnt_to_block--;
;;;5521   	if(!(bat[in]._cnt_to_block))
;;;5522   		{
;;;5523   		//bat[in]._rel_stat=1;
;;;5524   		}
;;;5525   	}
;;;5526   */
;;;5527   
;;;5528   
;;;5529   
;;;5530   
;;;5531   //unsigned int tempUI,tempUI_;
;;;5532   //unsigned int b_zar; 
;;;5533   //char i;
;;;5534   //Ibat[0]=5000;                     
;;;5535   
;;;5536   
;;;5537                               
;;;5538   if(bat[in]._time_cnt==0)
;;;5539   	{
;;;5540   	bat[in]._zar_cnt+=(signed long)bat[in]._Ib;
;;;5541   	
;;;5542   	if(bat[in]._zar_cnt>=AH_CONSTANT)
003586  f64848a0          MOV      r8,#0x8ca0
00358a  f894003e          LDRB     r0,[r4,#0x3e]         ;5538
00358e  bba8              CBNZ     r0,|L1.13820|
003590  f9b41008          LDRSH    r1,[r4,#8]            ;5540
003594  6960              LDR      r0,[r4,#0x14]         ;5540
003596  4408              ADD      r0,r0,r1              ;5540
003598  6160              STR      r0,[r4,#0x14]         ;5540
;;;5543   		{
;;;5544   		if(BAT_C_REAL[in]==0x5555) tempUS_=BAT_C_NOM[in];
;;;5545   		else tempUS_=BAT_C_REAL[in];
;;;5546   		
;;;5547   		b_zar=lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
00359a  f8df90cc          LDR      r9,|L1.13928|
00359e  f8dfa0cc          LDR      r10,|L1.13932|
0035a2  4540              CMP      r0,r8                 ;5542
0035a4  db66              BLT      |L1.13940|
0035a6  f93a1015          LDRSH    r1,[r10,r5,LSL #1]    ;5544
0035aa  f5a140aa          SUB      r0,r1,#0x5500         ;5544
0035ae  3855              SUBS     r0,r0,#0x55           ;5544
0035b0  d103              BNE      |L1.13754|
0035b2  482f              LDR      r0,|L1.13936|
0035b4  f8306015          LDRH     r6,[r0,r5,LSL #1]     ;5544
0035b8  e001              B        |L1.13758|
                  |L1.13754|
0035ba  f83a6015          LDRH     r6,[r10,r5,LSL #1]    ;5545
                  |L1.13758|
0035be  f8390015          LDRH     r0,[r9,r5,LSL #1]
0035c2  f7fffffe          BL       lc640_read_int
0035c6  b280              UXTH     r0,r0
;;;5548   
;;;5549   		if(b_zar<(tempUS_/**10*/))
0035c8  42b0              CMP      r0,r6
0035ca  d20e              BCS      |L1.13802|
;;;5550   			{
;;;5551   			bat[in]._zar_cnt-=AH_CONSTANT;
0035cc  6961              LDR      r1,[r4,#0x14]
0035ce  f5a14100          SUB      r1,r1,#0x8000
0035d2  f5a1614a          SUB      r1,r1,#0xca0
0035d6  6161              STR      r1,[r4,#0x14]
;;;5552   
;;;5553   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],b_zar+1);
0035d8  f9392015          LDRSH    r2,[r9,r5,LSL #1]
0035dc  f1000001          ADD      r0,r0,#1
0035e0  b201              SXTH     r1,r0
0035e2  4610              MOV      r0,r2
0035e4  f7fffffe          BL       lc640_write_int
0035e8  e06e              B        |L1.14024|
                  |L1.13802|
;;;5554   			}
;;;5555   		else if(b_zar>(tempUS_/**10*/))  
0035ea  d96d              BLS      |L1.14024|
;;;5556   			{
;;;5557   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],tempUS_);
0035ec  f9390015          LDRSH    r0,[r9,r5,LSL #1]
0035f0  b231              SXTH     r1,r6
0035f2  f7fffffe          BL       lc640_write_int
;;;5558   			bat[in]._zar_cnt=AH_CONSTANT;
0035f6  f8c48014          STR      r8,[r4,#0x14]
0035fa  e065              B        |L1.14024|
                  |L1.13820|
0035fc  e08f              B        |L1.14110|
0035fe  e039              B        |L1.13940|
                  |L1.13824|
                          DCD      t_box
                  |L1.13828|
                          DCD      TBOXMAX
                  |L1.13832|
                          DCD      av_tbox_cnt
                  |L1.13836|
                          DCD      av_tbox_stat
                  |L1.13840|
                          DCD      TBOXREG
                  |L1.13844|
                          DCD      t_box_cnt
                  |L1.13848|
                          DCD      main_vent_pos
                  |L1.13852|
                          DCD      TBOXVENTMAX
                  |L1.13856|
                          DCD      pos_vent
                  |L1.13860|
                          DCD      mess_data
                  |L1.13864|
                          DCD      mixer_vent_stat
                  |L1.13868|
                          DCD      TBATDISABLE
                  |L1.13872|
                          DCD      tbatdisable_stat
                  |L1.13876|
                          DCD      tbatdisable_cnt
                  |L1.13880|
                          DCD      TBATENABLE
                  |L1.13884|
                          DCD      TLOADDISABLE
                  |L1.13888|
                          DCD      tloaddisable_stat
                  |L1.13892|
                          DCD      tloaddisable_cnt
                  |L1.13896|
                          DCD      TLOADENABLE
                  |L1.13900|
                          DCD      ||area_number.18||+0x84
                  |L1.13904|
                          DCD      bat
                  |L1.13908|
                          DCD      IZMAX
                  |L1.13912|
                          DCD      main_10Hz_cnt
                  |L1.13916|
                          DCD      IKB
                  |L1.13920|
                          DCD      bat_u_old_cnt
                  |L1.13924|
                          DCD      0x40024020
                  |L1.13928|
                          DCD      ADR_EE_BAT_ZAR_CNT
                  |L1.13932|
                          DCD      BAT_C_REAL
                  |L1.13936|
                          DCD      BAT_C_NOM
                  |L1.13940|
;;;5559   
;;;5560   			}
;;;5561   
;;;5562   		}
;;;5563   
;;;5564   	else if(bat[in]._zar_cnt<=-AH_CONSTANT)
003674  49f8              LDR      r1,|L1.14936|
003676  4288              CMP      r0,r1
003678  dc26              BGT      |L1.14024|
;;;5565   		{
;;;5566   		if(BAT_C_REAL[in]==0x5555) tempUS_=BAT_C_NOM[in];
00367a  f93a1015          LDRSH    r1,[r10,r5,LSL #1]
00367e  f5a140aa          SUB      r0,r1,#0x5500
003682  3855              SUBS     r0,r0,#0x55
003684  d103              BNE      |L1.13966|
003686  48f5              LDR      r0,|L1.14940|
003688  f8306015          LDRH     r6,[r0,r5,LSL #1]
00368c  e001              B        |L1.13970|
                  |L1.13966|
;;;5567   		else tempUS_=BAT_C_REAL[in];
00368e  f83a6015          LDRH     r6,[r10,r5,LSL #1]
                  |L1.13970|
;;;5568   		
;;;5569   		b_zar=lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
003692  f8390015          LDRH     r0,[r9,r5,LSL #1]
003696  f7fffffe          BL       lc640_read_int
00369a  b280              UXTH     r0,r0
;;;5570   
;;;5571   		if(b_zar>tempUS_)
00369c  42b0              CMP      r0,r6
00369e  d905              BLS      |L1.13996|
;;;5572   			{
;;;5573   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],tempUS_);
0036a0  f9390015          LDRSH    r0,[r9,r5,LSL #1]
0036a4  b231              SXTH     r1,r6
0036a6  f7fffffe          BL       lc640_write_int
;;;5574   			b_zar=tempUS_;
0036aa  4630              MOV      r0,r6
                  |L1.13996|
;;;5575   			}
;;;5576   		if(b_zar)
0036ac  b150              CBZ      r0,|L1.14020|
;;;5577   			{
;;;5578   			bat[in]._zar_cnt+=AH_CONSTANT;
0036ae  6961              LDR      r1,[r4,#0x14]
0036b0  4441              ADD      r1,r1,r8
0036b2  6161              STR      r1,[r4,#0x14]
;;;5579   
;;;5580   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],b_zar-1);
0036b4  f9392015          LDRSH    r2,[r9,r5,LSL #1]
0036b8  1e40              SUBS     r0,r0,#1
0036ba  b201              SXTH     r1,r0
0036bc  4610              MOV      r0,r2
0036be  f7fffffe          BL       lc640_write_int
0036c2  e001              B        |L1.14024|
                  |L1.14020|
;;;5581   			}
;;;5582   		else 
;;;5583   			{
;;;5584   			bat[in]._zar_cnt=-AH_CONSTANT;
0036c4  48e4              LDR      r0,|L1.14936|
0036c6  6160              STR      r0,[r4,#0x14]
                  |L1.14024|
;;;5585   			}
;;;5586   
;;;5587   		}
;;;5588   
;;;5589   			
;;;5590   	tempUL=(unsigned long)lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
0036c8  f8390015          LDRH     r0,[r9,r5,LSL #1]
0036cc  f7fffffe          BL       lc640_read_int
0036d0  4601              MOV      r1,r0
;;;5591   	
;;;5592   	if(BAT_C_REAL[in]==0x5555) tempUL_=(unsigned long)BAT_C_NOM[in];
0036d2  f93a0015          LDRSH    r0,[r10,r5,LSL #1]
0036d6  f5a042aa          SUB      r2,r0,#0x5500
0036da  3a55              SUBS     r2,r2,#0x55
0036dc  d102              BNE      |L1.14052|
0036de  48df              LDR      r0,|L1.14940|
0036e0  f9300015          LDRSH    r0,[r0,r5,LSL #1]
                  |L1.14052|
;;;5593   	else tempUL_=(unsigned long)BAT_C_REAL[in];
;;;5594   		           	
;;;5595   	tempUL*=1000L;
0036e4  f44f727a          MOV      r2,#0x3e8
0036e8  4351              MULS     r1,r2,r1
;;;5596   
;;;5597   
;;;5598   	if(tempUL_==0) tempUL=0;
0036ea  b150              CBZ      r0,|L1.14082|
;;;5599   	else tempUL/=tempUL_;
0036ec  fbb1f0f0          UDIV     r0,r1,r0
                  |L1.14064|
;;;5600   
;;;5601   	tempUL/=10L;
0036f0  210a              MOVS     r1,#0xa
0036f2  fbb0f0f1          UDIV     r0,r0,r1
;;;5602   
;;;5603   	bat[in]._zar=(unsigned short)tempUL;
0036f6  8220              STRH     r0,[r4,#0x10]
;;;5604   
;;;5605   	if(BAT_TYPE==1)
0036f8  48d9              LDR      r0,|L1.14944|
0036fa  8800              LDRH     r0,[r0,#0]  ; BAT_TYPE
0036fc  2801              CMP      r0,#1
0036fe  d002              BEQ      |L1.14086|
003700  e007              B        |L1.14098|
                  |L1.14082|
003702  2000              MOVS     r0,#0                 ;5598
003704  e7f4              B        |L1.14064|
                  |L1.14086|
;;;5606   		{
;;;5607   		bat[in]._zar=lakb[in]._s_o_c;
003706  49d7              LDR      r1,|L1.14948|
003708  9802              LDR      r0,[sp,#8]
00370a  eb010080          ADD      r0,r1,r0,LSL #2
00370e  8a40              LDRH     r0,[r0,#0x12]
003710  8220              STRH     r0,[r4,#0x10]
                  |L1.14098|
;;;5608   		}
;;;5609   	
;;;5610   	gran((signed short*)&bat[in]._zar,0,100);
003712  f1040010          ADD      r0,r4,#0x10
003716  2264              MOVS     r2,#0x64
003718  2100              MOVS     r1,#0
00371a  f7fffffe          BL       gran
                  |L1.14110|
;;;5611        }
;;;5612   
;;;5613   
;;;5614   //         
;;;5615   if(bat[in]._wrk==1)
00371e  7ba0              LDRB     r0,[r4,#0xe]
003720  2801              CMP      r0,#1
003722  d112              BNE      |L1.14154|
;;;5616   	{
;;;5617   	if(bat[in]._Iintegr<36000)
003724  8ba0              LDRH     r0,[r4,#0x1c]
003726  4540              CMP      r0,r8
003728  d20e              BCS      |L1.14152|
;;;5618   		{          
;;;5619   		bat[in]._Iintegr+=abs(bat[in]._Ib);
00372a  f9b40008          LDRSH    r0,[r4,#8]
00372e  f7fffffe          BL       abs
003732  8ba1              LDRH     r1,[r4,#0x1c]
003734  4408              ADD      r0,r0,r1
003736  b280              UXTH     r0,r0
003738  83a0              STRH     r0,[r4,#0x1c]
;;;5620   		if(bat[in]._Iintegr>=36000)
00373a  4540              CMP      r0,r8
00373c  d305              BCC      |L1.14154|
;;;5621   			{
;;;5622   			bat[in]._Iintegr=0;		//  
00373e  83a7              STRH     r7,[r4,#0x1c]
;;;5623   			bat[in]._Iintegr_++;	//  
003740  8be0              LDRH     r0,[r4,#0x1e]
003742  1c40              ADDS     r0,r0,#1
003744  83e0              STRH     r0,[r4,#0x1e]
003746  e000              B        |L1.14154|
                  |L1.14152|
;;;5624   			}
;;;5625   		}
;;;5626   	else 
;;;5627   		{
;;;5628   		bat[in]._Iintegr=0;
003748  83a7              STRH     r7,[r4,#0x1c]
                  |L1.14154|
;;;5629   		}	
;;;5630   	} 
;;;5631   	    
;;;5632   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;5633   if((t_ext[0]>TBATSIGN)&&(!ND_EXT[0]))	
00374a  f8df931c          LDR      r9,|L1.14952|
00374e  49c7              LDR      r1,|L1.14956|
003750  f8dfa31c          LDR      r10,|L1.14960|
003754  f9b90000          LDRSH    r0,[r9,#0]  ; t_ext
003758  f9b11000          LDRSH    r1,[r1,#0]  ; TBATSIGN
00375c  4288              CMP      r0,r1
00375e  dd02              BLE      |L1.14182|
003760  f89a0000          LDRB     r0,[r10,#0]  ; ND_EXT
003764  b3e8              CBZ      r0,|L1.14306|
                  |L1.14182|
;;;5634   	{
;;;5635   	bat[in]._sign_temper_cnt++;
;;;5636   	}
;;;5637   else 
;;;5638   	{
;;;5639   	bat[in]._sign_temper_cnt--;
003766  f8b40040          LDRH     r0,[r4,#0x40]
00376a  1e40              SUBS     r0,r0,#1
00376c  f8a40040          STRH     r0,[r4,#0x40]
                  |L1.14192|
;;;5640   	}
;;;5641   #else
;;;5642   if((bat[in]._Tb>TBATSIGN)&&(!bat[in]._nd))	
;;;5643   	{
;;;5644   	bat[in]._sign_temper_cnt++;
;;;5645   	}
;;;5646   else 
;;;5647   	{
;;;5648   	bat[in]._sign_temper_cnt--;
;;;5649   	}
;;;5650   #endif
;;;5651   gran(&bat[in]._sign_temper_cnt,0,600);
003770  f1040040          ADD      r0,r4,#0x40
003774  f44f7216          MOV      r2,#0x258
003778  2100              MOVS     r1,#0
00377a  f7fffffe          BL       gran
;;;5652   if(bat[in]._sign_temper_cnt>=590)	bat[in]._temper_stat|=(1<<0);
00377e  f9b40040          LDRSH    r0,[r4,#0x40]
003782  f240264e          MOV      r6,#0x24e
003786  42b0              CMP      r0,r6
003788  db05              BLT      |L1.14230|
00378a  f894103f          LDRB     r1,[r4,#0x3f]
00378e  f0410101          ORR      r1,r1,#1
003792  f884103f          STRB     r1,[r4,#0x3f]
                  |L1.14230|
;;;5653   if(bat[in]._sign_temper_cnt<=10)	bat[in]._temper_stat&=~(1<<0);
003796  280a              CMP      r0,#0xa
003798  dc05              BGT      |L1.14246|
00379a  f894003f          LDRB     r0,[r4,#0x3f]
00379e  f0200001          BIC      r0,r0,#1
0037a2  f884003f          STRB     r0,[r4,#0x3f]
                  |L1.14246|
;;;5654   
;;;5655   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;5656   if((t_ext[0]>TBATMAX)&&(!ND_EXT[0]))	
0037a6  49b3              LDR      r1,|L1.14964|
0037a8  f9b90000          LDRSH    r0,[r9,#0]  ; t_ext
0037ac  f9b11000          LDRSH    r1,[r1,#0]  ; TBATMAX
0037b0  4288              CMP      r0,r1
0037b2  dd02              BLE      |L1.14266|
0037b4  f89a0000          LDRB     r0,[r10,#0]  ; ND_EXT
0037b8  b3a0              CBZ      r0,|L1.14372|
                  |L1.14266|
;;;5657   	{
;;;5658   	bat[in]._max_temper_cnt++;
;;;5659   	}
;;;5660   else 
;;;5661   	{
;;;5662   	bat[in]._max_temper_cnt--;
0037ba  f8b40042          LDRH     r0,[r4,#0x42]
0037be  1e40              SUBS     r0,r0,#1
0037c0  f8a40042          STRH     r0,[r4,#0x42]
                  |L1.14276|
;;;5663   	}
;;;5664   #else
;;;5665   if((bat[in]._Tb>TBATMAX)&&(!bat[in]._nd))	
;;;5666   	{
;;;5667   	bat[in]._max_temper_cnt++;
;;;5668   	}
;;;5669   else 
;;;5670   	{
;;;5671   	bat[in]._max_temper_cnt--;
;;;5672   	}
;;;5673   #endif
;;;5674   
;;;5675   gran(&bat[in]._max_temper_cnt,0,600);
0037c4  f44f7916          MOV      r9,#0x258
0037c8  f1040042          ADD      r0,r4,#0x42
0037cc  464a              MOV      r2,r9
0037ce  2100              MOVS     r1,#0
0037d0  f7fffffe          BL       gran
;;;5676   if(bat[in]._max_temper_cnt>=590)	bat[in]._temper_stat|=(1<<1);
0037d4  f9b40042          LDRSH    r0,[r4,#0x42]
0037d8  42b0              CMP      r0,r6
0037da  db07              BLT      |L1.14316|
0037dc  f894103f          LDRB     r1,[r4,#0x3f]
0037e0  e000              B        |L1.14308|
                  |L1.14306|
0037e2  e020              B        |L1.14374|
                  |L1.14308|
0037e4  f0410102          ORR      r1,r1,#2
0037e8  f884103f          STRB     r1,[r4,#0x3f]
                  |L1.14316|
;;;5677   if(bat[in]._max_temper_cnt<=10)	bat[in]._temper_stat&=~(1<<1);
0037ec  280a              CMP      r0,#0xa
0037ee  dc05              BGT      |L1.14332|
0037f0  f894003f          LDRB     r0,[r4,#0x3f]
0037f4  f0200002          BIC      r0,r0,#2
0037f8  f884003f          STRB     r0,[r4,#0x3f]
                  |L1.14332|
;;;5678   
;;;5679   
;;;5680   
;;;5681   //  
;;;5682   if(bat[in]._resurs_cnt<36000)
0037fc  6c60              LDR      r0,[r4,#0x44]
0037fe  4540              CMP      r0,r8
003800  da1d              BGE      |L1.14398|
;;;5683   	{               
;;;5684   	bat[in]._resurs_cnt++;
003802  1c40              ADDS     r0,r0,#1
003804  6460              STR      r0,[r4,#0x44]
;;;5685   	if(bat[in]._resurs_cnt>=36000)
003806  4540              CMP      r0,r8
003808  db1a              BLT      |L1.14400|
;;;5686   		{
;;;5687   		bat[in]._resurs_cnt=0;
00380a  6467              STR      r7,[r4,#0x44]
;;;5688   		lc640_write_int(ADR_EE_BAT_RESURS[in],lc640_read_int(ADR_EE_BAT_RESURS[in])+1);
00380c  4e9a              LDR      r6,|L1.14968|
00380e  f8360015          LDRH     r0,[r6,r5,LSL #1]
003812  f7fffffe          BL       lc640_read_int
003816  1c40              ADDS     r0,r0,#1
003818  b201              SXTH     r1,r0
00381a  f9360015          LDRSH    r0,[r6,r5,LSL #1]
00381e  f7fffffe          BL       lc640_write_int
003822  e00d              B        |L1.14400|
                  |L1.14372|
003824  e005              B        |L1.14386|
                  |L1.14374|
003826  f8b40040          LDRH     r0,[r4,#0x40]         ;5635
00382a  1c40              ADDS     r0,r0,#1              ;5635
00382c  f8a40040          STRH     r0,[r4,#0x40]         ;5635
003830  e79e              B        |L1.14192|
                  |L1.14386|
003832  f8b40042          LDRH     r0,[r4,#0x42]         ;5658
003836  1c40              ADDS     r0,r0,#1              ;5658
003838  f8a40042          STRH     r0,[r4,#0x42]         ;5658
00383c  e7c2              B        |L1.14276|
                  |L1.14398|
;;;5689   		}
;;;5690   	}
;;;5691   else bat[in]._resurs_cnt=0;
00383e  6467              STR      r7,[r4,#0x44]
                  |L1.14400|
;;;5692   
;;;5693   
;;;5694   #ifndef UKU_220_V2
;;;5695   #ifndef UKU_GLONASS
;;;5696   #ifndef UKU_6U
;;;5697   //#ifndef UKU_220
;;;5698   if(UBM_AV)
003840  4e8e              LDR      r6,|L1.14972|
003842  8830              LDRH     r0,[r6,#0]  ; UBM_AV
003844  2800              CMP      r0,#0
003846  d056              BEQ      |L1.14582|
;;;5699        {
;;;5700        signed short temp_SS;
;;;5701   #ifdef UKU_220
;;;5702   temp_SS=bat[in]._Ub/2;
;;;5703   #else
;;;5704        if(U0B<600)
003848  488d              LDR      r0,|L1.14976|
00384a  f9b00000          LDRSH    r0,[r0,#0]  ; U0B
00384e  4548              CMP      r0,r9
003850  da06              BGE      |L1.14432|
;;;5705             {
;;;5706             temp_SS=bat[in]._Ub/4;
003852  f9b40002          LDRSH    r0,[r4,#2]
003856  17c1              ASRS     r1,r0,#31
003858  eb007091          ADD      r0,r0,r1,LSR #30
00385c  1080              ASRS     r0,r0,#2
00385e  e005              B        |L1.14444|
                  |L1.14432|
;;;5707             }
;;;5708        else temp_SS=bat[in]._Ub/5;
003860  f9b40002          LDRSH    r0,[r4,#2]
003864  2105              MOVS     r1,#5
003866  fb90f0f1          SDIV     r0,r0,r1
00386a  b200              SXTH     r0,r0
                  |L1.14444|
;;;5709   	
;;;5710   	temp_SS+=temp_SS;     
00386c  0040              LSLS     r0,r0,#1
;;;5711   #endif
;;;5712        temp_SS-=(bat[in]._Ubm);
00386e  88a1              LDRH     r1,[r4,#4]
003870  1a40              SUBS     r0,r0,r1
003872  b200              SXTH     r0,r0
;;;5713   
;;;5714        temp_SS=abs(temp_SS);
003874  f7fffffe          BL       abs
;;;5715   
;;;5716        temp_SS*=10;
003878  eb000080          ADD      r0,r0,r0,LSL #2
00387c  0040              LSLS     r0,r0,#1
00387e  b200              SXTH     r0,r0
;;;5717   
;;;5718        temp_SS/=12;
003880  210c              MOVS     r1,#0xc
003882  fb90f0f1          SDIV     r0,r0,r1
003886  b200              SXTH     r0,r0
;;;5719   
;;;5720        bat[in]._dUbm=temp_SS;
003888  80e0              STRH     r0,[r4,#6]
;;;5721   
;;;5722   
;;;5723        if(	(bat[in]._dUbm>UBM_AV) &&
00388a  f9b61000          LDRSH    r1,[r6,#0]  ; UBM_AV
00388e  4288              CMP      r0,r1
003890  dd33              BLE      |L1.14586|
;;;5724   		(abs(bat[in]._Ib)<(5*IKB)) &&
003892  f9b40008          LDRSH    r0,[r4,#8]
003896  f7fffffe          BL       abs
00389a  4601              MOV      r1,r0
00389c  4879              LDR      r0,|L1.14980|
00389e  f9b00000          LDRSH    r0,[r0,#0]  ; IKB
0038a2  eb000080          ADD      r0,r0,r0,LSL #2
0038a6  4281              CMP      r1,r0
0038a8  da27              BGE      |L1.14586|
;;;5725   		(bat[in]._Ub>((short)(((long)USIGN*115)/100))) &&
0038aa  4877              LDR      r0,|L1.14984|
0038ac  2173              MOVS     r1,#0x73
0038ae  f9b00000          LDRSH    r0,[r0,#0]  ; USIGN
0038b2  4348              MULS     r0,r1,r0
0038b4  fb90f0fb          SDIV     r0,r0,r11
0038b8  f9b41002          LDRSH    r1,[r4,#2]
0038bc  b200              SXTH     r0,r0
0038be  4288              CMP      r0,r1
0038c0  da1b              BGE      |L1.14586|
;;;5726   		(!(bat[in]._av & 2))  )
0038c2  f894003d          LDRB     r0,[r4,#0x3d]
0038c6  0780              LSLS     r0,r0,#30
0038c8  d417              BMI      |L1.14586|
;;;5727   		{
;;;5728   		bat[in]._cnt_as++;
0038ca  f8b40048          LDRH     r0,[r4,#0x48]
0038ce  1c40              ADDS     r0,r0,#1
0038d0  b200              SXTH     r0,r0
0038d2  f8a40048          STRH     r0,[r4,#0x48]
;;;5729   		if(bat[in]._cnt_as==3000)
0038d6  f5a06130          SUB      r1,r0,#0xb00
0038da  39b8              SUBS     r1,r1,#0xb8
0038dc  d103              BNE      |L1.14566|
;;;5730   			{
;;;5731   			avar_bat_as_hndl(in,1);
0038de  2101              MOVS     r1,#1
0038e0  4628              MOV      r0,r5
0038e2  f7fffffe          BL       avar_bat_as_hndl
                  |L1.14566|
;;;5732   			}
;;;5733   		if(bat[in]._cnt_as>=3005) bat[in]._cnt_as=3005;
0038e6  f9b41048          LDRSH    r1,[r4,#0x48]
0038ea  f64030bd          MOV      r0,#0xbbd
0038ee  4281              CMP      r1,r0
0038f0  db01              BLT      |L1.14582|
0038f2  f8a40048          STRH     r0,[r4,#0x48]
                  |L1.14582|
;;;5734   		}
;;;5735   	else 
;;;5736   		{
;;;5737   		bat[in]._cnt_as=0;
;;;5738   		}
;;;5739        
;;;5740        }
;;;5741   #endif 
;;;5742   #endif 
;;;5743   #endif
;;;5744   
;;;5745   }
0038f6  e8bd8ffe          POP      {r1-r11,pc}
                  |L1.14586|
0038fa  f8a47048          STRH     r7,[r4,#0x48]         ;5737
0038fe  e7fa              B        |L1.14582|
;;;5746   
                          ENDP

                  u_necc_hndl PROC
;;;5753   //-----------------------------------------------
;;;5754   void u_necc_hndl(void)
003900  b538              PUSH     {r3-r5,lr}
;;;5755   {
;;;5756   signed long temp_L;
;;;5757   signed long temp_SL;
;;;5758   //signed short temp_SS;
;;;5759   
;;;5760   //char i;
;;;5761   
;;;5762   //temp_SS=0;
;;;5763   signed short t[2];
;;;5764   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;5765   
;;;5766   if(!TERMOKOMPENS)
003902  4862              LDR      r0,|L1.14988|
;;;5767   	{
;;;5768   	//u_necc=U0B;
;;;5769   	u_necc=UB20;
003904  4c63              LDR      r4,|L1.14996|
003906  8801              LDRH     r1,[r0,#0]            ;5766  ; TERMOKOMPENS
003908  4861              LDR      r0,|L1.14992|
00390a  f9b02000          LDRSH    r2,[r0,#0]
00390e  b131              CBZ      r1,|L1.14622|
;;;5770   	}
;;;5771   else
;;;5772   	{
;;;5773   	if(ND_EXT[0])t[0]=20;
003910  4857              LDR      r0,|L1.14960|
003912  7800              LDRB     r0,[r0,#0]  ; ND_EXT
003914  b128              CBZ      r0,|L1.14626|
003916  2014              MOVS     r0,#0x14
003918  f8ad0000          STRH     r0,[sp,#0]
00391c  e005              B        |L1.14634|
                  |L1.14622|
00391e  8022              STRH     r2,[r4,#0]            ;5769
003920  e022              B        |L1.14696|
                  |L1.14626|
;;;5774   	else t[0]=t_ext[0];
003922  4851              LDR      r0,|L1.14952|
003924  8800              LDRH     r0,[r0,#0]  ; t_ext
003926  f8ad0000          STRH     r0,[sp,#0]
                  |L1.14634|
;;;5775   
;;;5776   	mat_temper=t[0];
00392a  4b5b              LDR      r3,|L1.15000|
00392c  f9bd1000          LDRSH    r1,[sp,#0]
003930  6019              STR      r1,[r3,#0]  ; mat_temper
;;;5777   			
;;;5778   	if(mat_temper<0)temp_SL=UB0; 
003932  485a              LDR      r0,|L1.15004|
003934  2900              CMP      r1,#0
003936  f9b00000          LDRSH    r0,[r0,#0]
00393a  db0d              BLT      |L1.14680|
;;;5779   	else 
;;;5780   		{
;;;5781   		if(mat_temper>40)mat_temper=40; 
00393c  2928              CMP      r1,#0x28
00393e  dd01              BLE      |L1.14660|
003940  2128              MOVS     r1,#0x28
003942  6019              STR      r1,[r3,#0]  ; mat_temper
                  |L1.14660|
;;;5782   		temp_SL=(UB20-UB0)*10;
003944  1a11              SUBS     r1,r2,r0
003946  eb010181          ADD      r1,r1,r1,LSL #2
00394a  0049              LSLS     r1,r1,#1
;;;5783   		temp_SL*=mat_temper;
00394c  681a              LDR      r2,[r3,#0]  ; mat_temper
00394e  4351              MULS     r1,r2,r1
;;;5784   		temp_SL/=200;
003950  22c8              MOVS     r2,#0xc8
003952  fb91f1f2          SDIV     r1,r1,r2
;;;5785   		temp_SL+=UB0;
003956  4408              ADD      r0,r0,r1
                  |L1.14680|
;;;5786   		}
;;;5787   	if(spc_stat==spcVZ)
003958  4951              LDR      r1,|L1.15008|
00395a  7d09              LDRB     r1,[r1,#0x14]  ; spc_stat
00395c  2902              CMP      r1,#2
00395e  d102              BNE      |L1.14694|
;;;5788   		{
;;;5789   		temp_SL=UVZ;
003960  4850              LDR      r0,|L1.15012|
003962  f9b00000          LDRSH    r0,[r0,#0]  ; UVZ
                  |L1.14694|
;;;5790   		}
;;;5791   	u_necc=(unsigned int)temp_SL;
003966  8020              STRH     r0,[r4,#0]
                  |L1.14696|
;;;5792   	///u_necc=3456;
;;;5793   	}  
;;;5794   
;;;5795   //u_necc=2355;
;;;5796   
;;;5797   if(speedChIsOn)
003968  484f              LDR      r0,|L1.15016|
00396a  8800              LDRH     r0,[r0,#0]  ; speedChIsOn
00396c  b110              CBZ      r0,|L1.14708|
;;;5798   	{
;;;5799   	u_necc=speedChrgVolt;
00396e  484f              LDR      r0,|L1.15020|
003970  8800              LDRH     r0,[r0,#0]  ; speedChrgVolt
003972  8020              STRH     r0,[r4,#0]
                  |L1.14708|
;;;5800   	}
;;;5801   
;;;5802   if(mess_find_unvol(MESS2UNECC_HNDL))
003974  20be              MOVS     r0,#0xbe
003976  f7fffffe          BL       mess_find_unvol
00397a  b128              CBZ      r0,|L1.14728|
;;;5803   	{		
;;;5804   	if(mess_data[0]==PARAM_UNECC_SET)
00397c  484c              LDR      r0,|L1.15024|
00397e  6801              LDR      r1,[r0,#0]  ; mess_data
003980  29bf              CMP      r1,#0xbf
003982  d101              BNE      |L1.14728|
;;;5805   		{
;;;5806   		u_necc=mess_data[1];
003984  6840              LDR      r0,[r0,#4]  ; mess_data
003986  8020              STRH     r0,[r4,#0]
                  |L1.14728|
;;;5807   		}		
;;;5808   	}
;;;5809   //if(ICA_EN)u_necc+=ica_u_necc;
;;;5810   #endif
;;;5811   
;;;5812   
;;;5813   #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;5814   
;;;5815   #ifndef UKU_TELECORE2015
;;;5816   #ifndef UKU_TELECORE2017
;;;5817   if(unh_cnt0<10)
;;;5818   	{
;;;5819   	unh_cnt0++;
;;;5820   	if(unh_cnt0>=10)
;;;5821   		{
;;;5822   		unh_cnt0=0;
;;;5823   		b1Hz_unh=1;
;;;5824   		}
;;;5825   	}
;;;5826   
;;;5827   if(unh_cnt1<5)
;;;5828   	{
;;;5829   	unh_cnt1++;
;;;5830   	if(unh_cnt1==5)
;;;5831   		{
;;;5832   		unh_cnt1=0;
;;;5833   //		b2Hz_unh=1;
;;;5834   		}
;;;5835   	} 
;;;5836   
;;;5837   
;;;5838   
;;;5839   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;5840   	{		
;;;5841   	if(mess_data[0]==PARAM_UNECC_SET)
;;;5842   		{
;;;5843   		u_necc=mess_data[1];
;;;5844   		}		
;;;5845   	}
;;;5846   
;;;5847   
;;;5848   else if(b1Hz_unh)
;;;5849   	{
;;;5850   	
;;;5851   	if((BAT_IS_ON[0]!=bisON) && (BAT_IS_ON[1]!=bisON))
;;;5852   		{
;;;5853   		
;;;5854   		u_necc=U0B;
;;;5855   		}
;;;5856   	else 
;;;5857   		{
;;;5858   		if(BAT_TYPE==0) //  
;;;5859   			{
;;;5860   			for(i=0;i<2;i++)
;;;5861   				{
;;;5862   				if(BAT_IS_ON[i]==bisON)
;;;5863   					{
;;;5864   					if(bat[i]._nd)t[i]=20;
;;;5865   					else t[i]=bat[i]._Tb;
;;;5866   					}
;;;5867   				else
;;;5868   					{
;;;5869   					t[i]=-20;
;;;5870   					}
;;;5871   				}
;;;5872   			if(t[0]>t[1])mat_temper=t[0];
;;;5873   			else mat_temper=t[1];
;;;5874   			
;;;5875   		
;;;5876   			if(mat_temper<0)temp_SL=UB0; 
;;;5877   			else 
;;;5878   				{
;;;5879   				if(mat_temper>40)mat_temper=40; 
;;;5880   				temp_SL=(UB20-UB0)*10;
;;;5881   				temp_SL*=mat_temper;
;;;5882   				temp_SL/=200;
;;;5883   				temp_SL+=UB0;
;;;5884   				}
;;;5885   			if(spc_stat==spcVZ)
;;;5886   				{
;;;5887   				temp_SL=UVZ;
;;;5888   				}
;;;5889   			u_necc=(unsigned int)temp_SL;
;;;5890   			}
;;;5891   		else if(BAT_TYPE==1) //  
;;;5892   			{
;;;5893   			u_necc=U0B;
;;;5894   					
;;;5895   			u_necc=bat[0]._Ub+10;
;;;5896   
;;;5897   			
;;;5898   			if(spc_stat==spcVZ)
;;;5899   				{
;;;5900   				u_necc=UVZ;
;;;5901   				}
;;;5902   			if(u_necc>=UB0) u_necc=UB0;
;;;5903   			if(u_necc>=UB20) u_necc=UB20;
;;;5904   			}
;;;5905   		}  
;;;5906   	}
;;;5907   #endif
;;;5908   #endif
;;;5909   
;;;5910   #ifdef UKU_TELECORE2015
;;;5911   
;;;5912   if(unh_cnt0<10)
;;;5913   	{
;;;5914   	unh_cnt0++;
;;;5915   	if(unh_cnt0>=10)
;;;5916   		{
;;;5917   		unh_cnt0=0;
;;;5918   		b1Hz_unh=1;
;;;5919   		}
;;;5920   	}
;;;5921   
;;;5922   if(unh_cnt1<5)
;;;5923   	{
;;;5924   	unh_cnt1++;
;;;5925   	if(unh_cnt1==5)
;;;5926   		{
;;;5927   		unh_cnt1=0;
;;;5928   //		b2Hz_unh=1;
;;;5929   		}
;;;5930   	} 
;;;5931   
;;;5932   
;;;5933   
;;;5934   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;5935   	{		
;;;5936   	if(mess_data[0]==PARAM_UNECC_SET)
;;;5937   		{
;;;5938   		u_necc=mess_data[1];
;;;5939   		}		
;;;5940   	}
;;;5941   
;;;5942   
;;;5943   else if(b1Hz_unh)
;;;5944   	{
;;;5945   	b1Hz_unh=0;
;;;5946   
;;;5947   	if(BAT_TYPE==0)
;;;5948   		{
;;;5949   		if(bat[0]._nd)mat_temper=20;
;;;5950   		else mat_temper=bat[0]._Tb;
;;;5951   
;;;5952   			
;;;5953   		if(mat_temper<0)temp_SL=UB0; 
;;;5954   		else 
;;;5955   			{
;;;5956   			if(mat_temper>40)mat_temper=40; 
;;;5957   			temp_SL=(UB20-UB0)*10;
;;;5958   			temp_SL*=mat_temper;
;;;5959   			temp_SL/=200;
;;;5960   			temp_SL+=UB0;
;;;5961   			}
;;;5962   		if(spc_stat==spcVZ)
;;;5963   			{
;;;5964   			temp_SL=UVZ;
;;;5965   			}
;;;5966   		u_necc=(unsigned int)temp_SL;
;;;5967   	///u_necc=3456;
;;;5968   		}
;;;5969   	else if(BAT_TYPE==1)
;;;5970   		{
;;;5971   		
;;;5972   		gran(&DU_LI_BAT,1,30);
;;;5973   		u_necc=li_bat._Ub+DU_LI_BAT;
;;;5974   		gran(&u_necc,0,UB0);
;;;5975   		gran(&u_necc,0,UB20);
;;;5976   		gran(&u_necc,0,540);		
;;;5977   
;;;5978   
;;;5979   		if(li_bat._batStat!=bsOK)
;;;5980   			{
;;;5981   			u_necc=U0B;
;;;5982   			}
;;;5983   		if(spc_stat==spcVZ)
;;;5984   			{
;;;5985   			u_necc=UVZ;
;;;5986   			}
;;;5987   		/* 
;;;5988   		u_necc=U0B;
;;;5989   		
;;;5990   
;;;5991   	
;;;5992   		u_necc=UB0;
;;;5993   		u_necc=li_bat._Ub+10;
;;;5994   		if((li_bat._Ub<450)||(li_bat._Ub>550))
;;;5995   			{
;;;5996   			lakb_error_cnt++;
;;;5997   			if(lakb_error_cnt>=30)
;;;5998   				{
;;;5999   				lakb_error_cnt=30;
;;;6000   				u_necc=U0B;
;;;6001   				}
;;;6002   			}
;;;6003   		else lakb_error_cnt=0;*/
;;;6004   		}
;;;6005   	else if(BAT_TYPE==2)
;;;6006   		{
;;;6007   		u_necc=U0B;
;;;6008   		
;;;6009   		if(spc_stat==spcVZ)
;;;6010   			{
;;;6011   			u_necc=UVZ;
;;;6012   			}
;;;6013   	
;;;6014   		u_necc=UB0;
;;;6015   		}
;;;6016   
;;;6017   	else if(BAT_TYPE==3)
;;;6018   		{
;;;6019   		u_necc=U0B;
;;;6020   		
;;;6021   		if(spc_stat==spcVZ)
;;;6022   			{
;;;6023   			u_necc=UVZ;
;;;6024   			}
;;;6025   
;;;6026   		gran(&DU_LI_BAT,1,30);
;;;6027   
;;;6028   
;;;6029   		if(lakbNotErrorNum==0)
;;;6030   			{
;;;6031   			u_necc=U0B;
;;;6032   			}
;;;6033   		else 
;;;6034   			{
;;;6035   			signed short i;
;;;6036   			//signed short u_necc_max;
;;;6037   			//u_necc_max=0;
;;;6038   			char soc_flag=0;
;;;6039   
;;;6040   			for(i=(NUMBAT_TELECORE-1);i>=0;i--)
;;;6041   				{
;;;6042   				if(lakb[i]._communicationFullErrorStat==0)u_necc=lakb[i]._tot_bat_volt+DU_LI_BAT;
;;;6043   				if(lakb[i]._s_o_c_percent<QSODERG_LI_BAT)soc_flag=1;
;;;6044   				}
;;;6045   
;;;6046   			if(soc_flag==0)u_necc=USODERG_LI_BAT;
;;;6047   			}
;;;6048   		gran(&u_necc,0,UB0);
;;;6049   		//gran(&u_necc,0,UB20);
;;;6050   		gran(&u_necc,0,540);
;;;6051   		}
;;;6052   	}
;;;6053   
;;;6054   #endif 
;;;6055   
;;;6056   #ifdef UKU_TELECORE2017
;;;6057   
;;;6058   if(unh_cnt0<10)
;;;6059   	{
;;;6060   	unh_cnt0++;
;;;6061   	if(unh_cnt0>=10)
;;;6062   		{
;;;6063   		unh_cnt0=0;
;;;6064   		b1Hz_unh=1;
;;;6065   		}
;;;6066   	}
;;;6067   
;;;6068   if(unh_cnt1<5)
;;;6069   	{
;;;6070   	unh_cnt1++;
;;;6071   	if(unh_cnt1==5)
;;;6072   		{
;;;6073   		unh_cnt1=0;
;;;6074   //		b2Hz_unh=1;
;;;6075   		}
;;;6076   	} 
;;;6077   
;;;6078   
;;;6079   
;;;6080   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;6081   	{		
;;;6082   	if(mess_data[0]==PARAM_UNECC_SET)
;;;6083   		{
;;;6084   		u_necc=mess_data[1];
;;;6085   		}		
;;;6086   	}
;;;6087   
;;;6088   
;;;6089   else if(b1Hz_unh)
;;;6090   	{
;;;6091   	b1Hz_unh=0;
;;;6092   
;;;6093   	if(BAT_TYPE==0)
;;;6094   		{
;;;6095   		if(bat[0]._nd)mat_temper=20;
;;;6096   		else mat_temper=bat[0]._Tb;
;;;6097   
;;;6098   			
;;;6099   		if(mat_temper<0)temp_SL=UB0; 
;;;6100   		else 
;;;6101   			{
;;;6102   			if(mat_temper>40)mat_temper=40; 
;;;6103   			temp_SL=(UB20-UB0)*10;
;;;6104   			temp_SL*=mat_temper;
;;;6105   			temp_SL/=200;
;;;6106   			temp_SL+=UB0;
;;;6107   			}
;;;6108   		if(spc_stat==spcVZ)
;;;6109   			{
;;;6110   			temp_SL=UVZ;
;;;6111   			}
;;;6112   		u_necc=(unsigned int)temp_SL;
;;;6113   	///u_necc=3456;
;;;6114   		}
;;;6115   	else if(BAT_TYPE==1)
;;;6116   		{
;;;6117   		
;;;6118   		gran(&DU_LI_BAT,1,30);
;;;6119   		u_necc=li_bat._Ub+DU_LI_BAT;
;;;6120   		gran(&u_necc,0,UB0);
;;;6121   		gran(&u_necc,0,UB20);
;;;6122   		gran(&u_necc,0,540);		
;;;6123   
;;;6124   
;;;6125   		if(li_bat._batStat!=bsOK)
;;;6126   			{
;;;6127   			u_necc=U0B;
;;;6128   			}
;;;6129   		if(spc_stat==spcVZ)
;;;6130   			{
;;;6131   			u_necc=UVZ;
;;;6132   			}
;;;6133   		}
;;;6134   	else if(BAT_TYPE==2)
;;;6135   		{
;;;6136   		u_necc=U0B;
;;;6137   		
;;;6138   		if(spc_stat==spcVZ)
;;;6139   			{
;;;6140   			u_necc=UVZ;
;;;6141   			}
;;;6142   	
;;;6143   		u_necc=UB0;
;;;6144   		}
;;;6145   
;;;6146   	else if(BAT_TYPE==3)
;;;6147   		{
;;;6148   		u_necc=U0B;
;;;6149   		
;;;6150   		if(spc_stat==spcVZ)
;;;6151   			{
;;;6152   			u_necc=UVZ;
;;;6153   			}
;;;6154   
;;;6155   		gran(&DU_LI_BAT,1,30);
;;;6156   
;;;6157   
;;;6158   		if(lakbNotErrorNum==0)
;;;6159   			{
;;;6160   			u_necc=U0B;
;;;6161   			}
;;;6162   		else 
;;;6163   			{
;;;6164   			signed short i;
;;;6165   			//signed short u_necc_max;
;;;6166   			//u_necc_max=0;
;;;6167   			char soc_flag=0;
;;;6168   
;;;6169   			for(i=(NUMBAT_TELECORE-1);i>=0;i--)
;;;6170   				{
;;;6171   				if(lakb[i]._communicationFullErrorStat==0)u_necc=lakb[i]._tot_bat_volt+DU_LI_BAT;
;;;6172   				if(lakb[i]._s_o_c_percent<QSODERG_LI_BAT)soc_flag=1;
;;;6173   				}
;;;6174   
;;;6175   			if(soc_flag==0)u_necc=USODERG_LI_BAT;
;;;6176   			}
;;;6177   		gran(&u_necc,0,UB0);
;;;6178   		//gran(&u_necc,0,UB20);
;;;6179   		gran(&u_necc,0,540);
;;;6180   		}
;;;6181   	}
;;;6182   
;;;6183   #endif 
;;;6184   //u_necc=2356;
;;;6185   #endif//gran(&u_necc,400,UMAX);
;;;6186   
;;;6187   temp_L=(signed long) u_necc;
003988  f9b40000          LDRSH    r0,[r4,#0]  ; u_necc
;;;6188   temp_L*=98L;
00398c  2162              MOVS     r1,#0x62
00398e  4341              MULS     r1,r0,r1
;;;6189   temp_L/=100L;
003990  2264              MOVS     r2,#0x64
003992  fb91f1f2          SDIV     r1,r1,r2
;;;6190   u_necc_dn=(signed short)temp_L;
003996  4b47              LDR      r3,|L1.15028|
003998  8019              STRH     r1,[r3,#0]
;;;6191   
;;;6192   temp_L=(signed long) u_necc;
;;;6193   temp_L*=102L;
00399a  2166              MOVS     r1,#0x66
00399c  4348              MULS     r0,r1,r0
;;;6194   temp_L/=100L;
00399e  fb90f0f2          SDIV     r0,r0,r2
;;;6195   u_necc_up=(signed short)temp_L;
0039a2  4945              LDR      r1,|L1.15032|
0039a4  8008              STRH     r0,[r1,#0]
;;;6196   
;;;6197   
;;;6198   }
0039a6  bd38              POP      {r3-r5,pc}
;;;6199   
                          ENDP

                  num_necc_hndl PROC
;;;6201   //-----------------------------------------------
;;;6202   void num_necc_hndl(void)
0039a8  e92d41f0          PUSH     {r4-r8,lr}
;;;6203   {
;;;6204   
;;;6205   static short num_necc_block_cnt;
;;;6206   if(num_necc_block_cnt) num_necc_block_cnt--;
0039ac  4c3c              LDR      r4,|L1.15008|
0039ae  f9b40026          LDRSH    r0,[r4,#0x26]  ; num_necc_block_cnt
0039b2  b108              CBZ      r0,|L1.14776|
0039b4  1e40              SUBS     r0,r0,#1
0039b6  84e0              STRH     r0,[r4,#0x26]
                  |L1.14776|
;;;6207   
;;;6208   Isumm_=Isumm;
0039b8  4840              LDR      r0,|L1.15036|
0039ba  4d41              LDR      r5,|L1.15040|
0039bc  8800              LDRH     r0,[r0,#0]  ; Isumm
0039be  8028              STRH     r0,[r5,#0]
;;;6209   
;;;6210   if(bat[0]._Ib<0) Isumm_+=(abs(bat[0]._Ib))/10;
0039c0  4e40              LDR      r6,|L1.15044|
0039c2  270a              MOVS     r7,#0xa
0039c4  f9b60008          LDRSH    r0,[r6,#8]  ; bat
0039c8  2800              CMP      r0,#0
0039ca  da06              BGE      |L1.14810|
0039cc  f7fffffe          BL       abs
0039d0  fb90f0f7          SDIV     r0,r0,r7
0039d4  8829              LDRH     r1,[r5,#0]  ; Isumm_
0039d6  4408              ADD      r0,r0,r1
0039d8  8028              STRH     r0,[r5,#0]
                  |L1.14810|
;;;6211   if(bat[1]._Ib<0) Isumm_+=(abs(bat[1]._Ib))/10;
0039da  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
0039de  2800              CMP      r0,#0
0039e0  da06              BGE      |L1.14832|
0039e2  f7fffffe          BL       abs
0039e6  fb90f0f7          SDIV     r0,r0,r7
0039ea  8829              LDRH     r1,[r5,#0]  ; Isumm_
0039ec  4408              ADD      r0,r0,r1
0039ee  8028              STRH     r0,[r5,#0]
                  |L1.14832|
;;;6212   
;;;6213   num_necc_up=(Isumm_/((signed short)IMAX))+1;
0039f0  4835              LDR      r0,|L1.15048|
0039f2  f9b51000          LDRSH    r1,[r5,#0]  ; Isumm_
0039f6  f9b00000          LDRSH    r0,[r0,#0]  ; IMAX
0039fa  fb91f0f0          SDIV     r0,r1,r0
0039fe  1c40              ADDS     r0,r0,#1
003a00  b2c0              UXTB     r0,r0
003a02  7420              STRB     r0,[r4,#0x10]
;;;6214   ////Isumm_+=(signed short)((IMAX*(10-KIMAX))/10);
;;;6215   ////Isumm_+=(signed short)(IMAX-IMIN);
;;;6216   
;;;6217   num_necc_down=(Isumm_/((signed short)IMIN))+1;
003a04  4a31              LDR      r2,|L1.15052|
003a06  f9b22000          LDRSH    r2,[r2,#0]  ; IMIN
003a0a  fb91f1f2          SDIV     r1,r1,r2
003a0e  1c49              ADDS     r1,r1,#1
003a10  b2ca              UXTB     r2,r1
003a12  7462              STRB     r2,[r4,#0x11]
;;;6218   
;;;6219   if(num_necc_up>num_necc)
003a14  492e              LDR      r1,|L1.15056|
;;;6220   	{
;;;6221   	num_necc=num_necc_up;
;;;6222   	num_necc_block_cnt=60;
003a16  253c              MOVS     r5,#0x3c
003a18  f9b13000          LDRSH    r3,[r1,#0]            ;6219  ; num_necc
003a1c  4298              CMP      r0,r3                 ;6219
003a1e  dd02              BLE      |L1.14886|
003a20  8008              STRH     r0,[r1,#0]            ;6221
003a22  84e5              STRH     r5,[r4,#0x26]
003a24  e005              B        |L1.14898|
                  |L1.14886|
;;;6223   	}
;;;6224   else if(num_necc_down<num_necc)
003a26  429a              CMP      r2,r3
003a28  da03              BGE      |L1.14898|
;;;6225   	{
;;;6226   	if(!num_necc_block_cnt)
003a2a  8ce0              LDRH     r0,[r4,#0x26]  ; num_necc_block_cnt
003a2c  b908              CBNZ     r0,|L1.14898|
;;;6227   		{
;;;6228   		num_necc=num_necc_down;
003a2e  800a              STRH     r2,[r1,#0]
;;;6229   		num_necc_block_cnt=60;
003a30  84e5              STRH     r5,[r4,#0x26]
                  |L1.14898|
;;;6230   		}
;;;6231   	}
;;;6232   
;;;6233   if(PAR) num_necc=NUMIST;
003a32  4828              LDR      r0,|L1.15060|
003a34  8802              LDRH     r2,[r0,#0]  ; PAR
003a36  4828              LDR      r0,|L1.15064|
003a38  b10a              CBZ      r2,|L1.14910|
003a3a  8802              LDRH     r2,[r0,#0]  ; NUMIST
003a3c  800a              STRH     r2,[r1,#0]
                  |L1.14910|
;;;6234   
;;;6235   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;6236   if(bPARALLEL) num_necc=NUMIST;
003a3e  7fa2              LDRB     r2,[r4,#0x1e]  ; bPARALLEL
003a40  b10a              CBZ      r2,|L1.14918|
003a42  8802              LDRH     r2,[r0,#0]  ; NUMIST
003a44  800a              STRH     r2,[r1,#0]
                  |L1.14918|
;;;6237   #endif
;;;6238   
;;;6239   gran(&num_necc,1,NUMIST);
003a46  f9b02000          LDRSH    r2,[r0,#0]  ; NUMIST
003a4a  e8bd41f0          POP      {r4-r8,lr}
003a4e  2101              MOVS     r1,#1
003a50  481f              LDR      r0,|L1.15056|
003a52  f7ffbffe          B.W      gran
003a56  0000              DCW      0x0000
                  |L1.14936|
                          DCD      0xffff7360
                  |L1.14940|
                          DCD      BAT_C_NOM
                  |L1.14944|
                          DCD      BAT_TYPE
                  |L1.14948|
                          DCD      lakb
                  |L1.14952|
                          DCD      t_ext
                  |L1.14956|
                          DCD      TBATSIGN
                  |L1.14960|
                          DCD      ND_EXT
                  |L1.14964|
                          DCD      TBATMAX
                  |L1.14968|
                          DCD      ADR_EE_BAT_RESURS
                  |L1.14972|
                          DCD      UBM_AV
                  |L1.14976|
                          DCD      U0B
                  |L1.14980|
                          DCD      IKB
                  |L1.14984|
                          DCD      USIGN
                  |L1.14988|
                          DCD      TERMOKOMPENS
                  |L1.14992|
                          DCD      UB20
                  |L1.14996|
                          DCD      u_necc
                  |L1.15000|
                          DCD      mat_temper
                  |L1.15004|
                          DCD      UB0
                  |L1.15008|
                          DCD      ||area_number.18||
                  |L1.15012|
                          DCD      UVZ
                  |L1.15016|
                          DCD      speedChIsOn
                  |L1.15020|
                          DCD      speedChrgVolt
                  |L1.15024|
                          DCD      mess_data
                  |L1.15028|
                          DCD      u_necc_dn
                  |L1.15032|
                          DCD      u_necc_up
                  |L1.15036|
                          DCD      Isumm
                  |L1.15040|
                          DCD      Isumm_
                  |L1.15044|
                          DCD      bat
                  |L1.15048|
                          DCD      IMAX
                  |L1.15052|
                          DCD      IMIN
                  |L1.15056|
                          DCD      num_necc
                  |L1.15060|
                          DCD      PAR
                  |L1.15064|
                          DCD      NUMIST
                          ENDP

                  cntrl_hndl PROC
;;;6245   //-----------------------------------------------
;;;6246   void cntrl_hndl(void)
003adc  e92d5ff0          PUSH     {r4-r12,lr}
;;;6247   {
;;;6248   
;;;6249   IZMAX_=IZMAX;
003ae0  48f8              LDR      r0,|L1.16068|
003ae2  4cf9              LDR      r4,|L1.16072|
003ae4  f9b01000          LDRSH    r1,[r0,#0]  ; IZMAX
003ae8  8761              STRH     r1,[r4,#0x3a]
;;;6250   
;;;6251   //cntrl_hndl_plazma=10;
;;;6252   
;;;6253   if(speedChIsOn)IZMAX_=speedChrgCurr;
003aea  48f8              LDR      r0,|L1.16076|
003aec  8800              LDRH     r0,[r0,#0]  ; speedChIsOn
003aee  b110              CBZ      r0,|L1.15094|
003af0  48f7              LDR      r0,|L1.16080|
003af2  8800              LDRH     r0,[r0,#0]  ; speedChrgCurr
003af4  8760              STRH     r0,[r4,#0x3a]
                  |L1.15094|
;;;6254   
;;;6255   if(cntrl_stat_blok_cnt)cntrl_stat_blok_cnt--;
003af6  f9b40062          LDRSH    r0,[r4,#0x62]  ; cntrl_stat_blok_cnt
003afa  b110              CBZ      r0,|L1.15106|
003afc  1e40              SUBS     r0,r0,#1
003afe  f8a40062          STRH     r0,[r4,#0x62]
                  |L1.15106|
;;;6256   if(cntrl_stat_blok_cnt_)cntrl_stat_blok_cnt_--;
003b02  f9b40064          LDRSH    r0,[r4,#0x64]  ; cntrl_stat_blok_cnt_
003b06  b110              CBZ      r0,|L1.15118|
003b08  1e40              SUBS     r0,r0,#1
003b0a  f8a40064          STRH     r0,[r4,#0x64]
                  |L1.15118|
;;;6257   
;;;6258   if((bat[0]._temper_stat&0x03)||(bat[1]._temper_stat&0x03))IZMAX_=IZMAX/10;
003b0e  48f1              LDR      r0,|L1.16084|
003b10  f04f080a          MOV      r8,#0xa
003b14  f890203f          LDRB     r2,[r0,#0x3f]  ; bat
003b18  0792              LSLS     r2,r2,#30
003b1a  d103              BNE      |L1.15140|
003b1c  f890008b          LDRB     r0,[r0,#0x8b]  ; bat
003b20  0780              LSLS     r0,r0,#30
003b22  d002              BEQ      |L1.15146|
                  |L1.15140|
003b24  fb91f0f8          SDIV     r0,r1,r8
003b28  8760              STRH     r0,[r4,#0x3a]
                  |L1.15146|
;;;6259   
;;;6260   
;;;6261   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;6262   if((REG_SPEED<1)||(REG_SPEED>5)) REG_SPEED=1;
003b2a  48eb              LDR      r0,|L1.16088|
003b2c  2601              MOVS     r6,#1
003b2e  f9b01000          LDRSH    r1,[r0,#0]  ; REG_SPEED
003b32  1e49              SUBS     r1,r1,#1
003b34  2905              CMP      r1,#5
003b36  d300              BCC      |L1.15162|
003b38  8006              STRH     r6,[r0,#0]
                  |L1.15162|
;;;6263   if(ch_cnt0<(10*REG_SPEED))
003b3a  f9b00000          LDRSH    r0,[r0,#0]  ; REG_SPEED
003b3e  2500              MOVS     r5,#0                 ;6253
003b40  eb000180          ADD      r1,r0,r0,LSL #2
003b44  79e0              LDRB     r0,[r4,#7]  ; ch_cnt0
003b46  ebb00f41          CMP      r0,r1,LSL #1
003b4a  da07              BGE      |L1.15196|
;;;6264   	{
;;;6265   	ch_cnt0++;
003b4c  1c40              ADDS     r0,r0,#1
003b4e  b2c0              UXTB     r0,r0
003b50  71e0              STRB     r0,[r4,#7]
;;;6266   	if(ch_cnt0>=10*REG_SPEED)
003b52  ebb00f41          CMP      r0,r1,LSL #1
003b56  db01              BLT      |L1.15196|
;;;6267   		{
;;;6268   		ch_cnt0=0;
003b58  71e5              STRB     r5,[r4,#7]
;;;6269   		b1Hz_ch=1;
003b5a  7226              STRB     r6,[r4,#8]
                  |L1.15196|
;;;6270   		}
;;;6271   	}
;;;6272   #endif
;;;6273   #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;6274   if(ch_cnt0<10)
;;;6275   	{
;;;6276   	ch_cnt0++;
;;;6277   	if(ch_cnt0>=10)
;;;6278   		{
;;;6279   		ch_cnt0=0;
;;;6280   		b1Hz_ch=1;
;;;6281   		}
;;;6282   	}
;;;6283   #endif
;;;6284   
;;;6285   
;;;6286   if(mess_find_unvol(MESS2CNTRL_HNDL))
003b5c  20e1              MOVS     r0,#0xe1
003b5e  f7fffffe          BL       mess_find_unvol
;;;6287   	{
;;;6288   	if(mess_data[0]==PARAM_CNTRL_STAT_PLUS)
;;;6289   		{
;;;6290   		cntrl_stat=cntrl_stat_old+mess_data[1];
;;;6291   		}
;;;6292   	else if(mess_data[0]==PARAM_CNTRL_STAT_MINUS)
;;;6293   		{
;;;6294   		cntrl_stat=cntrl_stat_old-mess_data[1];
;;;6295   		}
;;;6296   	else if(mess_data[0]==PARAM_CNTRL_STAT_STEP_DOWN)
;;;6297   		{
;;;6298   		static char cntrlStatIsDownCnt;
;;;6299   		cntrl_stat--;
;;;6300   
;;;6301   		if((cntrl_stat<=30)||(load_U<USIGN))
;;;6302   			{
;;;6303   			if(++cntrlStatIsDownCnt==250)mess_send(MESS2KB_HNDL,PARAM_CNTRL_IS_DOWN,0,10);
;;;6304   			}
;;;6305   		else 
;;;6306   			{
;;;6307   			cntrlStatIsDownCnt=0;
;;;6308   			}
;;;6309   
;;;6310   		}
;;;6311   	else if(mess_data[0]==PARAM_CNTRL_STAT_SET)
;;;6312   		{
;;;6313   		cntrl_stat=mess_data[1];
;;;6314   		}
;;;6315   
;;;6316   	else if(mess_data[0]==PARAM_CNTRL_STAT_FAST_REG)
;;;6317   		{
;;;6318   		#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;6319   		if(load_U>u_necc)
003b62  f8df9378          LDR      r9,|L1.16092|
;;;6320   			{
;;;6321   			cntrl_hndl_plazma=11;
;;;6322   			if(((bps_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
003b66  4ade              LDR      r2,|L1.16096|
;;;6323   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;6324   			}
;;;6325   		else if(bps_U<u_necc)
;;;6326   			{
;;;6327   			cntrl_hndl_plazma=12;	
;;;6328   			if(((u_necc-bps_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;6329   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;6330   			}
;;;6331   		#elif defined(UKU_220)
;;;6332   		if(load_U>u_necc)
;;;6333   			{
;;;6334   			cntrl_hndl_plazma=13;
;;;6335   			if(((load_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
;;;6336   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;6337   			}
;;;6338   		else if(load_U<u_necc)
;;;6339   			{
;;;6340   			cntrl_hndl_plazma=14;	
;;;6341   			if(((u_necc-load_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;6342   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;6343   			}
;;;6344   		#elif defined(UKU_220_V2)
;;;6345   		if(load_U>u_necc)
;;;6346   			{
;;;6347   			cntrl_hndl_plazma=15;
;;;6348   			if(((load_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
;;;6349   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;6350   			}
;;;6351   		else if(load_U<u_necc)
;;;6352   			{
;;;6353   			cntrl_hndl_plazma=16;	
;;;6354   			if(((u_necc-load_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;6355   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;6356   			}
;;;6357   		#else
;;;6358   
;;;6359   		if(load_U>u_necc)
;;;6360   			{
;;;6361   			cntrl_hndl_plazma=17;
;;;6362   			if(((load_U-u_necc)>10)&&(cntrl_stat>0))cntrl_stat-=5;
;;;6363   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;6364   			}
;;;6365   		else if(load_U<u_necc)
;;;6366   			{
;;;6367   			cntrl_hndl_plazma=18;	
;;;6368   			if(((u_necc-load_U)>10)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;6369   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;6370   			}
;;;6371   		#endif	
;;;6372   	 	}
;;;6373   	}
;;;6374   
;;;6375   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;6376   else if((b1Hz_ch)&&((!bIBAT_SMKLBR)||(bps[8]._cnt>40)))
003b68  f8dfb378          LDR      r11,|L1.16100|
;;;6377   	{
;;;6378   	cntrl_stat_new=cntrl_stat_old;
;;;6379   	cntrl_hndl_plazma=19;
;;;6380   	if((Ibmax/10)>(2*IZMAX_))
;;;6381   		{
;;;6382   		cntrl_hndl_plazma=20;
;;;6383             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;6384   		else	cntrl_stat_new-=10;
;;;6385   		}		
;;;6386   	else if(((Ibmax/10)<(IZMAX_*2))&&(Ibmax>(IZMAX_*15)))
;;;6387   		{
;;;6388   		cntrl_hndl_plazma=21;
;;;6389             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;6390             else	cntrl_stat_new-=3;
;;;6391   		}   
;;;6392   	else if((Ibmax<(IZMAX_*15))&&((Ibmax/10)>IZMAX_))
;;;6393   		{
;;;6394   		cntrl_hndl_plazma=22;
;;;6395   		cntrl_stat_new--;
;;;6396   		}
;;;6397   		
;;;6398   	else if(bps_U<u_necc)
;;;6399   		{
;;;6400   		cntrl_hndl_plazma=23;
;;;6401   		if(bps_U<(u_necc-(UB0-UB20)))
;;;6402   			{
;;;6403   			cntrl_hndl_plazma=24;
;;;6404   			if(Ibmax<0)
;;;6405   				{
;;;6406   				cntrl_hndl_plazma=25;
;;;6407                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;6408   				else cntrl_stat_new+=10;
;;;6409   				}
;;;6410   			else if(Ibmax<(IZMAX_*5))
;;;6411   				{
;;;6412   				cntrl_hndl_plazma=26;
;;;6413                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;6414   				else	cntrl_stat_new+=2;
;;;6415   				}
;;;6416   			else if(Ibmax<((IZMAX_*10)/*-10*/))//(Ibmax<((IZMAX_*95)/10))
;;;6417   				{
;;;6418   				cntrl_hndl_plazma=27;
;;;6419   				cntrl_stat_new++;
;;;6420   				}					
;;;6421   			}
;;;6422   		else if(bps_U<(u_necc-((UB0-UB20)/4)))
;;;6423   			{
;;;6424   			cntrl_hndl_plazma=28;
;;;6425   			if(Ibmax<(IZMAX_*5))
;;;6426   				{
;;;6427   				cntrl_hndl_plazma=29;
;;;6428                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;6429   				else	cntrl_stat_new+=2;
;;;6430   				}
;;;6431   			else if(Ibmax<((IZMAX_*10)/*-10*/))//(Ibmax<((IZMAX_*95)/10))
;;;6432   				{
;;;6433   				cntrl_hndl_plazma=30;
;;;6434   				cntrl_stat_new++;
;;;6435   				}					
;;;6436   			}	
;;;6437   		else if(bps_U<(u_necc-1))
;;;6438   			{
;;;6439   			cntrl_hndl_plazma=31;
;;;6440   			if(Ibmax<((IZMAX_*10)/*-10*/))//(Ibmax<((IZMAX_*95)/10))
;;;6441   				{
;;;6442   				cntrl_hndl_plazma=32;
;;;6443   				cntrl_stat_new++;
;;;6444   				}					
;;;6445   			}					
;;;6446   		}	
;;;6447   	else if((bps_U>u_necc)/*&&(!cntrl_blok)*/)
;;;6448   		{ 	
;;;6449   		cntrl_hndl_plazma=33;
;;;6450   		if(bps_U>(u_necc+(UB0-UB20)))
;;;6451   			{
;;;6452   			cntrl_hndl_plazma=34;
;;;6453                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;6454   			else	cntrl_stat_new-=10;
;;;6455   			}
;;;6456   		else if(bps_U>(u_necc+((UB0-UB20)/4)))
;;;6457   			{
;;;6458   			cntrl_hndl_plazma=35;
;;;6459                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;6460   			else cntrl_stat_new-=2;
;;;6461   			}	
;;;6462   		else if(bps_U>(u_necc+1))
;;;6463   			{
;;;6464   			cntrl_hndl_plazma=36;
;;;6465   			cntrl_stat_new--;
;;;6466   			}					
;;;6467   		}
;;;6468   
;;;6469   	gran(&cntrl_stat_new,10,1010);			
;;;6470   	cntrl_stat_old=cntrl_stat_new;
;;;6471   	cntrl_stat=cntrl_stat_new;
;;;6472   	
;;;6473   	if(ICA_EN==0)
;;;6474   		{
;;;6475   		if(ica_cntrl_hndl_cnt)
003b6c  4fde              LDR      r7,|L1.16104|
003b6e  b388              CBZ      r0,|L1.15316|
003b70  49de              LDR      r1,|L1.16108|
003b72  6808              LDR      r0,[r1,#0]            ;6288  ; mess_data
003b74  2864              CMP      r0,#0x64              ;6288
003b76  d009              BEQ      |L1.15244|
003b78  2869              CMP      r0,#0x69              ;6292
003b7a  d00c              BEQ      |L1.15254|
003b7c  4bdc              LDR      r3,|L1.16112|
003b7e  286e              CMP      r0,#0x6e              ;6296
003b80  d00e              BEQ      |L1.15264|
003b82  28e5              CMP      r0,#0xe5              ;6311
003b84  d029              BEQ      |L1.15322|
003b86  28e6              CMP      r0,#0xe6              ;6316
003b88  d02a              BEQ      |L1.15328|
003b8a  e160              B        |L1.15950|
                  |L1.15244|
003b8c  6848              LDR      r0,[r1,#4]            ;6290  ; mess_data
003b8e  8c61              LDRH     r1,[r4,#0x22]         ;6290  ; cntrl_stat_old
003b90  4408              ADD      r0,r0,r1              ;6290
003b92  8420              STRH     r0,[r4,#0x20]         ;6290
003b94  e15b              B        |L1.15950|
                  |L1.15254|
003b96  6848              LDR      r0,[r1,#4]            ;6294  ; mess_data
003b98  8c61              LDRH     r1,[r4,#0x22]         ;6294  ; cntrl_stat_old
003b9a  1a08              SUBS     r0,r1,r0              ;6294
003b9c  8420              STRH     r0,[r4,#0x20]         ;6294
003b9e  e156              B        |L1.15950|
                  |L1.15264|
003ba0  8c20              LDRH     r0,[r4,#0x20]         ;6299  ; cntrl_stat
003ba2  1e40              SUBS     r0,r0,#1              ;6299
003ba4  b200              SXTH     r0,r0                 ;6299
003ba6  8420              STRH     r0,[r4,#0x20]         ;6299
003ba8  281e              CMP      r0,#0x1e              ;6301
003baa  dd06              BLE      |L1.15290|
003bac  49d1              LDR      r1,|L1.16116|
003bae  f9b30000          LDRSH    r0,[r3,#0]            ;6301  ; load_U
003bb2  f9b11000          LDRSH    r1,[r1,#0]            ;6301  ; USIGN
003bb6  4288              CMP      r0,r1                 ;6301
003bb8  da0d              BGE      |L1.15318|
                  |L1.15290|
003bba  7860              LDRB     r0,[r4,#1]            ;6303  ; cntrlStatIsDownCnt
003bbc  1c40              ADDS     r0,r0,#1              ;6303
003bbe  b2c0              UXTB     r0,r0                 ;6303
003bc0  7060              STRB     r0,[r4,#1]            ;6303
003bc2  28fa              CMP      r0,#0xfa              ;6303
003bc4  d105              BNE      |L1.15314|
003bc6  230a              MOVS     r3,#0xa               ;6303
003bc8  2200              MOVS     r2,#0                 ;6303
003bca  21e7              MOVS     r1,#0xe7              ;6303
003bcc  20e6              MOVS     r0,#0xe6              ;6303
003bce  f7fffffe          BL       mess_send
                  |L1.15314|
003bd2  e13c              B        |L1.15950|
                  |L1.15316|
003bd4  e03c              B        |L1.15440|
                  |L1.15318|
003bd6  7065              STRB     r5,[r4,#1]            ;6307
003bd8  e139              B        |L1.15950|
                  |L1.15322|
003bda  6848              LDR      r0,[r1,#4]            ;6313  ; mess_data
003bdc  8420              STRH     r0,[r4,#0x20]         ;6313
003bde  e136              B        |L1.15950|
                  |L1.15328|
003be0  f9b31000          LDRSH    r1,[r3,#0]            ;6319  ; load_U
003be4  f9b90000          LDRSH    r0,[r9,#0]            ;6319  ; u_necc
003be8  4281              CMP      r1,r0                 ;6319
003bea  dd15              BLE      |L1.15384|
003bec  210b              MOVS     r1,#0xb               ;6321
003bee  77e1              STRB     r1,[r4,#0x1f]         ;6321
003bf0  f9b21000          LDRSH    r1,[r2,#0]            ;6322  ; bps_U
003bf4  1a08              SUBS     r0,r1,r0              ;6322
003bf6  2828              CMP      r0,#0x28              ;6322
003bf8  dd06              BLE      |L1.15368|
003bfa  f9b40020          LDRSH    r0,[r4,#0x20]         ;6322  ; cntrl_stat
003bfe  2800              CMP      r0,#0                 ;6322
003c00  dd02              BLE      |L1.15368|
003c02  1f40              SUBS     r0,r0,#5              ;6322
003c04  8420              STRH     r0,[r4,#0x20]         ;6322
003c06  e122              B        |L1.15950|
                  |L1.15368|
003c08  f9b40020          LDRSH    r0,[r4,#0x20]         ;6323  ; cntrl_stat
003c0c  b1f8              CBZ      r0,|L1.15438|
003c0e  7a21              LDRB     r1,[r4,#8]            ;6323  ; b1Hz_ch
003c10  b1e9              CBZ      r1,|L1.15438|
003c12  1e40              SUBS     r0,r0,#1              ;6323
003c14  8420              STRH     r0,[r4,#0x20]         ;6323
003c16  e11a              B        |L1.15950|
                  |L1.15384|
003c18  f9b21000          LDRSH    r1,[r2,#0]            ;6325  ; bps_U
003c1c  4281              CMP      r1,r0                 ;6325
003c1e  da16              BGE      |L1.15438|
003c20  220c              MOVS     r2,#0xc               ;6327
003c22  77e2              STRB     r2,[r4,#0x1f]         ;6327
003c24  1a40              SUBS     r0,r0,r1              ;6328
003c26  2828              CMP      r0,#0x28              ;6328
003c28  dd08              BLE      |L1.15420|
003c2a  f9b40020          LDRSH    r0,[r4,#0x20]         ;6328  ; cntrl_stat
003c2e  f24031f7          MOV      r1,#0x3f7             ;6328
003c32  4288              CMP      r0,r1                 ;6328
003c34  da02              BGE      |L1.15420|
003c36  1d40              ADDS     r0,r0,#5              ;6328
003c38  8420              STRH     r0,[r4,#0x20]         ;6328
003c3a  e108              B        |L1.15950|
                  |L1.15420|
003c3c  f9b40020          LDRSH    r0,[r4,#0x20]         ;6329  ; cntrl_stat
003c40  f5b07f7f          CMP      r0,#0x3fc             ;6329
003c44  da03              BGE      |L1.15438|
003c46  7a21              LDRB     r1,[r4,#8]            ;6329  ; b1Hz_ch
003c48  b109              CBZ      r1,|L1.15438|
003c4a  1c40              ADDS     r0,r0,#1              ;6329
003c4c  8420              STRH     r0,[r4,#0x20]         ;6329
                  |L1.15438|
003c4e  e0fe              B        |L1.15950|
                  |L1.15440|
003c50  7a20              LDRB     r0,[r4,#8]            ;6376  ; b1Hz_ch
003c52  b380              CBZ      r0,|L1.15542|
003c54  48a8              LDR      r0,|L1.16120|
003c56  8800              LDRH     r0,[r0,#0]            ;6376  ; bIBAT_SMKLBR
003c58  b118              CBZ      r0,|L1.15458|
003c5a  f89b02e3          LDRB     r0,[r11,#0x2e3]       ;6376  ; bps
003c5e  2828              CMP      r0,#0x28              ;6376
003c60  d929              BLS      |L1.15542|
                  |L1.15458|
003c62  f9b40022          LDRSH    r0,[r4,#0x22]         ;6378  ; cntrl_stat_old
003c66  86e0              STRH     r0,[r4,#0x36]         ;6378
003c68  2113              MOVS     r1,#0x13              ;6379
003c6a  77e1              STRB     r1,[r4,#0x1f]         ;6379
003c6c  f9b41038          LDRSH    r1,[r4,#0x38]         ;6380  ; Ibmax
003c70  8f63              LDRH     r3,[r4,#0x3a]         ;6380  ; IZMAX_
003c72  fb91fcf8          SDIV     r12,r1,r8             ;6380
003c76  ebbc0f43          CMP      r12,r3,LSL #1         ;6380
003c7a  dd0c              BLE      |L1.15510|
003c7c  f04f0114          MOV      r1,#0x14              ;6382
003c80  77e1              STRB     r1,[r4,#0x1f]         ;6382
003c82  f8b41062          LDRH     r1,[r4,#0x62]         ;6383  ; cntrl_stat_blok_cnt
003c86  b119              CBZ      r1,|L1.15504|
003c88  f1a00001          SUB      r0,r0,#1              ;6383
003c8c  86e0              STRH     r0,[r4,#0x36]         ;6383
003c8e  e0bb              B        |L1.15880|
                  |L1.15504|
003c90  380a              SUBS     r0,r0,#0xa            ;6384
003c92  86e0              STRH     r0,[r4,#0x36]         ;6384
003c94  e0b8              B        |L1.15880|
                  |L1.15510|
003c96  da0f              BGE      |L1.15544|
003c98  ebc31803          RSB      r8,r3,r3,LSL #4       ;6386
003c9c  4588              CMP      r8,r1                 ;6386
003c9e  da0b              BGE      |L1.15544|
003ca0  2115              MOVS     r1,#0x15              ;6388
003ca2  77e1              STRB     r1,[r4,#0x1f]         ;6388
003ca4  f8b41062          LDRH     r1,[r4,#0x62]         ;6389  ; cntrl_stat_blok_cnt
003ca8  b111              CBZ      r1,|L1.15536|
003caa  1e40              SUBS     r0,r0,#1              ;6389
003cac  86e0              STRH     r0,[r4,#0x36]         ;6389
003cae  e0ab              B        |L1.15880|
                  |L1.15536|
003cb0  1ec0              SUBS     r0,r0,#3              ;6390
003cb2  86e0              STRH     r0,[r4,#0x36]         ;6390
003cb4  e0a8              B        |L1.15880|
                  |L1.15542|
003cb6  e0ca              B        |L1.15950|
                  |L1.15544|
003cb8  ebc31803          RSB      r8,r3,r3,LSL #4       ;6392
003cbc  4588              CMP      r8,r1                 ;6392
003cbe  dd06              BLE      |L1.15566|
003cc0  459c              CMP      r12,r3                ;6392
003cc2  dd04              BLE      |L1.15566|
003cc4  2116              MOVS     r1,#0x16              ;6394
003cc6  77e1              STRB     r1,[r4,#0x1f]         ;6394
003cc8  1e40              SUBS     r0,r0,#1              ;6395
003cca  86e0              STRH     r0,[r4,#0x36]         ;6395
003ccc  e09c              B        |L1.15880|
                  |L1.15566|
003cce  f9b2c000          LDRSH    r12,[r2,#0]           ;6398  ; bps_U
003cd2  f9b92000          LDRSH    r2,[r9,#0]            ;6398  ; u_necc
003cd6  f8df8224          LDR      r8,|L1.16124|
003cda  f8df9224          LDR      r9,|L1.16128|
003cde  4594              CMP      r12,r2                ;6398
003ce0  da63              BGE      |L1.15786|
003ce2  f04f0a17          MOV      r10,#0x17             ;6400
003ce6  f884a01f          STRB     r10,[r4,#0x1f]        ;6400
003cea  f9b88000          LDRSH    r8,[r8,#0]            ;6401  ; UB0
003cee  f9b99000          LDRSH    r9,[r9,#0]            ;6401  ; UB20
003cf2  eba80809          SUB      r8,r8,r9              ;6401
003cf6  eba20908          SUB      r9,r2,r8              ;6401
003cfa  45e1              CMP      r9,r12                ;6401
003cfc  dd25              BLE      |L1.15690|
003cfe  2218              MOVS     r2,#0x18              ;6403
003d00  77e2              STRB     r2,[r4,#0x1f]         ;6403
003d02  2900              CMP      r1,#0                 ;6404
003d04  da0a              BGE      |L1.15644|
003d06  2119              MOVS     r1,#0x19              ;6406
003d08  77e1              STRB     r1,[r4,#0x1f]         ;6406
003d0a  f8b41062          LDRH     r1,[r4,#0x62]         ;6407  ; cntrl_stat_blok_cnt
003d0e  b111              CBZ      r1,|L1.15638|
003d10  1c40              ADDS     r0,r0,#1              ;6407
003d12  86e0              STRH     r0,[r4,#0x36]         ;6407
003d14  e078              B        |L1.15880|
                  |L1.15638|
003d16  300a              ADDS     r0,r0,#0xa            ;6408
003d18  86e0              STRH     r0,[r4,#0x36]         ;6408
003d1a  e075              B        |L1.15880|
                  |L1.15644|
003d1c  eb030283          ADD      r2,r3,r3,LSL #2       ;6410
003d20  428a              CMP      r2,r1                 ;6410
003d22  dd0a              BLE      |L1.15674|
003d24  211a              MOVS     r1,#0x1a              ;6412
003d26  77e1              STRB     r1,[r4,#0x1f]         ;6412
003d28  f8b41062          LDRH     r1,[r4,#0x62]         ;6413  ; cntrl_stat_blok_cnt
003d2c  b111              CBZ      r1,|L1.15668|
003d2e  1c40              ADDS     r0,r0,#1              ;6413
003d30  86e0              STRH     r0,[r4,#0x36]         ;6413
003d32  e069              B        |L1.15880|
                  |L1.15668|
003d34  1c80              ADDS     r0,r0,#2              ;6414
003d36  86e0              STRH     r0,[r4,#0x36]         ;6414
003d38  e066              B        |L1.15880|
                  |L1.15674|
003d3a  ebb10f42          CMP      r1,r2,LSL #1          ;6416
003d3e  da63              BGE      |L1.15880|
003d40  211b              MOVS     r1,#0x1b              ;6418
003d42  77e1              STRB     r1,[r4,#0x1f]         ;6418
003d44  1c40              ADDS     r0,r0,#1              ;6419
003d46  86e0              STRH     r0,[r4,#0x36]         ;6419
003d48  e05e              B        |L1.15880|
                  |L1.15690|
003d4a  ea4f79e8          ASR      r9,r8,#31             ;6422
003d4e  eb087899          ADD      r8,r8,r9,LSR #30      ;6422
003d52  eba208a8          SUB      r8,r2,r8,ASR #2       ;6422
003d56  45e0              CMP      r8,r12                ;6422
003d58  dd18              BLE      |L1.15756|
003d5a  221c              MOVS     r2,#0x1c              ;6424
003d5c  77e2              STRB     r2,[r4,#0x1f]         ;6424
003d5e  eb030283          ADD      r2,r3,r3,LSL #2       ;6425
003d62  428a              CMP      r2,r1                 ;6425
003d64  dd0a              BLE      |L1.15740|
003d66  211d              MOVS     r1,#0x1d              ;6427
003d68  77e1              STRB     r1,[r4,#0x1f]         ;6427
003d6a  f8b41062          LDRH     r1,[r4,#0x62]         ;6428  ; cntrl_stat_blok_cnt
003d6e  b111              CBZ      r1,|L1.15734|
003d70  1c40              ADDS     r0,r0,#1              ;6428
003d72  86e0              STRH     r0,[r4,#0x36]         ;6428
003d74  e048              B        |L1.15880|
                  |L1.15734|
003d76  1c80              ADDS     r0,r0,#2              ;6429
003d78  86e0              STRH     r0,[r4,#0x36]         ;6429
003d7a  e045              B        |L1.15880|
                  |L1.15740|
003d7c  ebb10f42          CMP      r1,r2,LSL #1          ;6431
003d80  da42              BGE      |L1.15880|
003d82  211e              MOVS     r1,#0x1e              ;6433
003d84  77e1              STRB     r1,[r4,#0x1f]         ;6433
003d86  1c40              ADDS     r0,r0,#1              ;6434
003d88  86e0              STRH     r0,[r4,#0x36]         ;6434
003d8a  e03d              B        |L1.15880|
                  |L1.15756|
003d8c  1e52              SUBS     r2,r2,#1              ;6437
003d8e  4594              CMP      r12,r2                ;6437
003d90  da3a              BGE      |L1.15880|
003d92  221f              MOVS     r2,#0x1f              ;6439
003d94  77e2              STRB     r2,[r4,#0x1f]         ;6439
003d96  eb030283          ADD      r2,r3,r3,LSL #2       ;6440
003d9a  ebb10f42          CMP      r1,r2,LSL #1          ;6440
003d9e  da33              BGE      |L1.15880|
003da0  2120              MOVS     r1,#0x20              ;6442
003da2  77e1              STRB     r1,[r4,#0x1f]         ;6442
003da4  1c40              ADDS     r0,r0,#1              ;6443
003da6  86e0              STRH     r0,[r4,#0x36]         ;6443
003da8  e02e              B        |L1.15880|
                  |L1.15786|
003daa  dd2d              BLE      |L1.15880|
003dac  2121              MOVS     r1,#0x21              ;6449
003dae  77e1              STRB     r1,[r4,#0x1f]         ;6449
003db0  f9b81000          LDRSH    r1,[r8,#0]            ;6450  ; UB0
003db4  f9b93000          LDRSH    r3,[r9,#0]            ;6450  ; UB20
003db8  1ac9              SUBS     r1,r1,r3              ;6450
003dba  188b              ADDS     r3,r1,r2              ;6450
003dbc  4563              CMP      r3,r12                ;6450
003dbe  da0a              BGE      |L1.15830|
003dc0  2122              MOVS     r1,#0x22              ;6452
003dc2  77e1              STRB     r1,[r4,#0x1f]         ;6452
003dc4  f8b41062          LDRH     r1,[r4,#0x62]         ;6453  ; cntrl_stat_blok_cnt
003dc8  b111              CBZ      r1,|L1.15824|
003dca  1e40              SUBS     r0,r0,#1              ;6453
003dcc  86e0              STRH     r0,[r4,#0x36]         ;6453
003dce  e01b              B        |L1.15880|
                  |L1.15824|
003dd0  380a              SUBS     r0,r0,#0xa            ;6454
003dd2  86e0              STRH     r0,[r4,#0x36]         ;6454
003dd4  e018              B        |L1.15880|
                  |L1.15830|
003dd6  17cb              ASRS     r3,r1,#31             ;6456
003dd8  eb017193          ADD      r1,r1,r3,LSR #30      ;6456
003ddc  eb0201a1          ADD      r1,r2,r1,ASR #2       ;6456
003de0  4561              CMP      r1,r12                ;6456
003de2  da0a              BGE      |L1.15866|
003de4  2123              MOVS     r1,#0x23              ;6458
003de6  77e1              STRB     r1,[r4,#0x1f]         ;6458
003de8  f8b41062          LDRH     r1,[r4,#0x62]         ;6459  ; cntrl_stat_blok_cnt
003dec  b111              CBZ      r1,|L1.15860|
003dee  1e40              SUBS     r0,r0,#1              ;6459
003df0  86e0              STRH     r0,[r4,#0x36]         ;6459
003df2  e009              B        |L1.15880|
                  |L1.15860|
003df4  1e80              SUBS     r0,r0,#2              ;6460
003df6  86e0              STRH     r0,[r4,#0x36]         ;6460
003df8  e006              B        |L1.15880|
                  |L1.15866|
003dfa  1c52              ADDS     r2,r2,#1              ;6462
003dfc  4594              CMP      r12,r2                ;6462
003dfe  dd03              BLE      |L1.15880|
003e00  2124              MOVS     r1,#0x24              ;6464
003e02  77e1              STRB     r1,[r4,#0x1f]         ;6464
003e04  1e40              SUBS     r0,r0,#1              ;6465
003e06  86e0              STRH     r0,[r4,#0x36]         ;6465
                  |L1.15880|
003e08  482f              LDR      r0,|L1.16072|
003e0a  f24032f2          MOV      r2,#0x3f2             ;6469
003e0e  210a              MOVS     r1,#0xa               ;6469
003e10  3036              ADDS     r0,r0,#0x36           ;6469
003e12  f7fffffe          BL       gran
003e16  8ee0              LDRH     r0,[r4,#0x36]         ;6470  ; cntrl_stat_new
003e18  8460              STRH     r0,[r4,#0x22]         ;6470
003e1a  8420              STRH     r0,[r4,#0x20]         ;6471
003e1c  4839              LDR      r0,|L1.16132|
003e1e  f9b00000          LDRSH    r0,[r0,#0]            ;6473  ; ICA_EN
003e22  b958              CBNZ     r0,|L1.15932|
003e24  8839              LDRH     r1,[r7,#0]  ; ica_cntrl_hndl_cnt
003e26  b149              CBZ      r1,|L1.15932|
;;;6476   			{
;;;6477   			cntrl_stat = ica_cntrl_hndl;
003e28  4937              LDR      r1,|L1.16136|
003e2a  8809              LDRH     r1,[r1,#0]  ; ica_cntrl_hndl
003e2c  8421              STRH     r1,[r4,#0x20]
;;;6478   			cntrl_stat_new=10*PWM_START;
003e2e  4937              LDR      r1,|L1.16140|
003e30  8809              LDRH     r1,[r1,#0]  ; PWM_START
003e32  eb010181          ADD      r1,r1,r1,LSL #2
003e36  0049              LSLS     r1,r1,#1
003e38  86e1              STRH     r1,[r4,#0x36]
;;;6479   			cntrl_stat_old=10*PWM_START;
003e3a  8461              STRH     r1,[r4,#0x22]
                  |L1.15932|
;;;6480   			}
;;;6481   		}
;;;6482   	
;;;6483   	if((ICA_EN==1)||(ICA_EN==2))
003e3c  2801              CMP      r0,#1
003e3e  d001              BEQ      |L1.15940|
003e40  2802              CMP      r0,#2
003e42  d104              BNE      |L1.15950|
                  |L1.15940|
;;;6484   		{
;;;6485   		cntrl_stat=cntrl_stat_new+ica_u_necc;
003e44  4932              LDR      r1,|L1.16144|
003e46  8ee0              LDRH     r0,[r4,#0x36]  ; cntrl_stat_new
003e48  8809              LDRH     r1,[r1,#0]  ; ica_u_necc
003e4a  4408              ADD      r0,r0,r1
003e4c  8420              STRH     r0,[r4,#0x20]
                  |L1.15950|
;;;6486   		}		
;;;6487   	}
;;;6488   #else
;;;6489   else if((b1Hz_ch)&&((!bIBAT_SMKLBR)||(bps[8]._cnt>40)))
;;;6490   	{
;;;6491   	cntrl_hndl_plazma=37;
;;;6492   	cntrl_stat_new=cntrl_stat_old;
;;;6493   	
;;;6494   	if((Ibmax/10)>(2*IZMAX_))
;;;6495   		{
;;;6496   		cntrl_hndl_plazma=38;
;;;6497             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;6498   		else	cntrl_stat_new-=10;
;;;6499   		}		
;;;6500   	else if(((Ibmax/10)<(IZMAX_*2))&&(Ibmax>(IZMAX_*15)))
;;;6501   		{
;;;6502   		cntrl_hndl_plazma=39;
;;;6503             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;6504             else	cntrl_stat_new-=3;
;;;6505   		}   
;;;6506   	else if((Ibmax<(IZMAX_*15))&&((Ibmax/10)>IZMAX_))
;;;6507   		{
;;;6508   		cntrl_hndl_plazma=40;
;;;6509   		cntrl_stat_new--;
;;;6510   		}
;;;6511   		
;;;6512   	else if(load_U<u_necc)
;;;6513   		{
;;;6514   		cntrl_hndl_plazma=41;
;;;6515   		if(load_U<(u_necc-(UB0-UB20)))
;;;6516   			{
;;;6517   			cntrl_hndl_plazma=42;
;;;6518   			if(Ibmax<0)
;;;6519   				{
;;;6520   				cntrl_hndl_plazma=43;
;;;6521                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;6522   				else cntrl_stat_new+=10;
;;;6523   				}
;;;6524   			else if(Ibmax<(IZMAX_*5))
;;;6525   				{
;;;6526   				cntrl_hndl_plazma=44;
;;;6527                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;6528   				else	cntrl_stat_new+=2;
;;;6529   				}
;;;6530   			else if(Ibmax<((IZMAX_*95)/10))
;;;6531   				{
;;;6532   				cntrl_hndl_plazma=45;
;;;6533   				cntrl_stat_new++;
;;;6534   				}					
;;;6535   			}
;;;6536   		else if(load_U<(u_necc-((UB0-UB20)/4)))
;;;6537   			{
;;;6538   			cntrl_hndl_plazma=46;
;;;6539   			if(Ibmax<(IZMAX_*5))
;;;6540   				{
;;;6541   				cntrl_hndl_plazma=47;
;;;6542                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;6543   				else	cntrl_stat_new+=2;
;;;6544   				}
;;;6545   			else if(Ibmax<((IZMAX_*95)/10))
;;;6546   				{
;;;6547   				cntrl_hndl_plazma=48;
;;;6548   				cntrl_stat_new++;
;;;6549   				}					
;;;6550   			}	
;;;6551   		else if(load_U<(u_necc-1))
;;;6552   			{
;;;6553   			cntrl_hndl_plazma=49;
;;;6554   			if(Ibmax<((IZMAX_*95)/10))
;;;6555   				{
;;;6556   				cntrl_hndl_plazma=50;
;;;6557   				cntrl_stat_new++;
;;;6558   				}					
;;;6559   			}					
;;;6560   		}	
;;;6561   	else if((load_U>u_necc)/*&&(!cntrl_blok)*/)
;;;6562   		{
;;;6563   		cntrl_hndl_plazma=51;
;;;6564   		if(load_U>(u_necc+(UB0-UB20)))
;;;6565   			{
;;;6566   			cntrl_hndl_plazma=52;
;;;6567                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;6568   			else	cntrl_stat_new-=10;
;;;6569   			}
;;;6570   		else if(load_U>(u_necc+((UB0-UB20)/4)))
;;;6571   			{
;;;6572   			cntrl_hndl_plazma=53;
;;;6573                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;6574   			else cntrl_stat_new-=2;
;;;6575   			}	
;;;6576   		else if(load_U>(u_necc+1))
;;;6577   			{
;;;6578   			cntrl_hndl_plazma=54;
;;;6579   			cntrl_stat_new--;
;;;6580   			}					
;;;6581   		}
;;;6582   
;;;6583   	gran(&cntrl_stat_new,10,1010);			
;;;6584   	cntrl_stat_old=cntrl_stat_new;
;;;6585   	cntrl_stat=cntrl_stat_new;	
;;;6586   	}
;;;6587   #endif
;;;6588   
;;;6589   iiii=0;
003e4e  72a5              STRB     r5,[r4,#0xa]
;;;6590   for(i=0;i<NUMIST;i++)
003e50  7265              STRB     r5,[r4,#9]
003e52  4830              LDR      r0,|L1.16148|
003e54  465a              MOV      r2,r11                ;6376
003e56  f9b01000          LDRSH    r1,[r0,#0]
003e5a  e00b              B        |L1.15988|
                  |L1.15964|
;;;6591        {
;;;6592        if(bps[i]._cnt<30)iiii=1;
003e5c  ebc003c0          RSB      r3,r0,r0,LSL #3
003e60  eb031300          ADD      r3,r3,r0,LSL #4
003e64  eb020383          ADD      r3,r2,r3,LSL #2
003e68  78db              LDRB     r3,[r3,#3]
003e6a  2b1e              CMP      r3,#0x1e
003e6c  d200              BCS      |L1.15984|
003e6e  72a6              STRB     r6,[r4,#0xa]
                  |L1.15984|
003e70  1c40              ADDS     r0,r0,#1              ;6590
003e72  7260              STRB     r0,[r4,#9]            ;6590
                  |L1.15988|
003e74  7a60              LDRB     r0,[r4,#9]            ;6590  ; i
003e76  4288              CMP      r0,r1                 ;6590
003e78  dbf0              BLT      |L1.15964|
;;;6593        }
;;;6594   
;;;6595   if(iiii==0)
003e7a  7aa0              LDRB     r0,[r4,#0xa]  ; iiii
003e7c  b920              CBNZ     r0,|L1.16008|
;;;6596        {
;;;6597        cntrl_stat=600;	
003e7e  f44f7016          MOV      r0,#0x258
003e82  8420              STRH     r0,[r4,#0x20]
;;;6598        cntrl_stat_old=600;
003e84  8460              STRH     r0,[r4,#0x22]
;;;6599        cntrl_stat_new=600;
003e86  86e0              STRH     r0,[r4,#0x36]
                  |L1.16008|
;;;6600   	#ifdef UKU_TELECORE2015
;;;6601   	//cntrl_stat=0;
;;;6602   	//cntrl_stat_old=0;
;;;6603   	//cntrl_stat_new=0;
;;;6604   	#endif
;;;6605        }
;;;6606   
;;;6607   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;6608   if(ica_cntrl_hndl_cnt)	ica_cntrl_hndl_cnt--;
003e88  f9b70000          LDRSH    r0,[r7,#0]  ; ica_cntrl_hndl_cnt
003e8c  b108              CBZ      r0,|L1.16018|
003e8e  1e40              SUBS     r0,r0,#1
003e90  8038              STRH     r0,[r7,#0]
                  |L1.16018|
;;;6609   
;;;6610   
;;;6611   #endif
;;;6612   
;;;6613   
;;;6614   gran(&cntrl_stat,10,1010); 
003e92  480d              LDR      r0,|L1.16072|
003e94  f24032f2          MOV      r2,#0x3f2
003e98  210a              MOVS     r1,#0xa
003e9a  3020              ADDS     r0,r0,#0x20
003e9c  f7fffffe          BL       gran
;;;6615   b1Hz_ch=0;
003ea0  7225              STRB     r5,[r4,#8]
                  |L1.16034|
;;;6616   }
003ea2  e8bd9ff0          POP      {r4-r12,pc}
;;;6617   #endif
                          ENDP

                  ext_drv PROC
;;;7106   //-----------------------------------------------
;;;7107   void ext_drv(void)
003ea6  e92d5ff0          PUSH     {r4-r12,lr}
;;;7108   {
;;;7109   char i;
;;;7110   
;;;7111   
;;;7112   for(i=0;i<NUMSK;i++)
003eaa  2000              MOVS     r0,#0
003eac  4a1c              LDR      r2,|L1.16160|
;;;7113   	{
;;;7114   	#ifdef UKU_MGTS
;;;7115   	if(adc_buff_[sk_buff_RSTKM[i]]<2000)
;;;7116   	#endif
;;;7117   	#ifdef UKU_RSTKM
;;;7118   	if(adc_buff_[sk_buff_RSTKM[i]]<2000)
;;;7119   	#endif
;;;7120   	#ifdef UKU_3U
;;;7121   	if(adc_buff_[sk_buff_3U[i]]<2000)
;;;7122   	#endif
;;;7123   	#ifdef UKU_GLONASS
;;;7124   	if(adc_buff_[sk_buff_GLONASS[i]]<2000)
;;;7125   	#endif
;;;7126   	#ifdef UKU_KONTUR
;;;7127   	if(adc_buff_[sk_buff_KONTUR[i]]<2000)
;;;7128   	#endif
;;;7129   	#ifdef UKU_6U
;;;7130   	if(adc_buff_[sk_buff_6U[i]]<2000)
;;;7131   	#endif
;;;7132   	#ifdef UKU_220
;;;7133   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;7134   	#endif
;;;7135   	#ifdef UKU_220_V2
;;;7136   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;7137   	#endif
;;;7138   	#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;7139   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;7140   	#endif
;;;7141   	#ifdef UKU_TELECORE2015	
;;;7142   	if(adc_buff_[sk_buff_TELECORE2015[i]]<2000)	 //TODO
;;;7143   	#endif
;;;7144   	#ifdef UKU_TELECORE2017
;;;7145   	if(adc_buff_[sk_buff_TELECORE2015[i]]<2000)	 //TODO
;;;7146   	#endif		
;;;7147   		{
;;;7148   		if(sk_cnt[i]<10)
003eae  4b1a              LDR      r3,|L1.16152|
;;;7149   			{
;;;7150   			sk_cnt[i]++;
;;;7151   			if(sk_cnt[i]>=10)
;;;7152   				{
;;;7153   				sk_stat[i]=ssON;
003eb0  4d1a              LDR      r5,|L1.16156|
003eb2  f04f0a01          MOV      r10,#1
;;;7154   				}
;;;7155   			}
;;;7156   		else 
;;;7157   			{
;;;7158   			sk_cnt[i]=10;
003eb6  f04f0b0a          MOV      r11,#0xa
003eba  2600              MOVS     r6,#0                 ;7112
003ebc  f9b24000          LDRSH    r4,[r2,#0]            ;7112
003ec0  e053              B        |L1.16234|
003ec2  0000              DCW      0x0000
                  |L1.16068|
                          DCD      IZMAX
                  |L1.16072|
                          DCD      ||area_number.18||
                  |L1.16076|
                          DCD      speedChIsOn
                  |L1.16080|
                          DCD      speedChrgCurr
                  |L1.16084|
                          DCD      bat
                  |L1.16088|
                          DCD      REG_SPEED
                  |L1.16092|
                          DCD      u_necc
                  |L1.16096|
                          DCD      bps_U
                  |L1.16100|
                          DCD      bps
                  |L1.16104|
                          DCD      ica_cntrl_hndl_cnt
                  |L1.16108|
                          DCD      mess_data
                  |L1.16112|
                          DCD      load_U
                  |L1.16116|
                          DCD      USIGN
                  |L1.16120|
                          DCD      bIBAT_SMKLBR
                  |L1.16124|
                          DCD      UB0
                  |L1.16128|
                          DCD      UB20
                  |L1.16132|
                          DCD      ICA_EN
                  |L1.16136|
                          DCD      ica_cntrl_hndl
                  |L1.16140|
                          DCD      PWM_START
                  |L1.16144|
                          DCD      ica_u_necc
                  |L1.16148|
                          DCD      NUMIST
                  |L1.16152|
                          DCD      sk_cnt
                  |L1.16156|
                          DCD      sk_stat
                  |L1.16160|
                          DCD      NUMSK
                  |L1.16164|
003f24  49ff              LDR      r1,|L1.17188|
003f26  5c09              LDRB     r1,[r1,r0]            ;7139
003f28  4fff              LDR      r7,|L1.17192|
003f2a  f9371011          LDRSH    r1,[r7,r1,LSL #1]     ;7139
003f2e  f5b16ffa          CMP      r1,#0x7d0             ;7139
003f32  da0d              BGE      |L1.16208|
003f34  5619              LDRSB    r1,[r3,r0]            ;7148
003f36  290a              CMP      r1,#0xa               ;7148
003f38  da07              BGE      |L1.16202|
003f3a  1c49              ADDS     r1,r1,#1              ;7150
003f3c  b249              SXTB     r1,r1                 ;7150
003f3e  5419              STRB     r1,[r3,r0]            ;7150
003f40  290a              CMP      r1,#0xa               ;7151
003f42  db10              BLT      |L1.16230|
003f44  f805a000          STRB     r10,[r5,r0]           ;7153
003f48  e00d              B        |L1.16230|
                  |L1.16202|
003f4a  f803b000          STRB     r11,[r3,r0]
003f4e  e00a              B        |L1.16230|
                  |L1.16208|
;;;7159   			}
;;;7160                  
;;;7161   		}
;;;7162   	else
;;;7163   		{
;;;7164   		if(sk_cnt[i]>0)
003f50  5619              LDRSB    r1,[r3,r0]
003f52  2900              CMP      r1,#0
003f54  dd06              BLE      |L1.16228|
;;;7165   			{
;;;7166   			sk_cnt[i]--;
003f56  1e49              SUBS     r1,r1,#1
003f58  b249              SXTB     r1,r1
003f5a  5419              STRB     r1,[r3,r0]
;;;7167   			if(sk_cnt[i]<=0)
003f5c  2900              CMP      r1,#0
003f5e  dc02              BGT      |L1.16230|
;;;7168   				{
;;;7169   				sk_stat[i]=ssOFF;
003f60  542e              STRB     r6,[r5,r0]
003f62  e000              B        |L1.16230|
                  |L1.16228|
;;;7170   				}
;;;7171   			}
;;;7172   		else 
;;;7173   			{
;;;7174   			sk_cnt[i]=0;
003f64  541e              STRB     r6,[r3,r0]
                  |L1.16230|
003f66  1c40              ADDS     r0,r0,#1              ;7112
003f68  b2c0              UXTB     r0,r0                 ;7112
                  |L1.16234|
003f6a  42a0              CMP      r0,r4                 ;7112
003f6c  dbda              BLT      |L1.16164|
;;;7175   			}
;;;7176   		}
;;;7177   	}
;;;7178   
;;;7179   for(i=0;i<NUMSK;i++)
003f6e  2400              MOVS     r4,#0
;;;7180   	{
;;;7181   	if(((SK_SIGN[i]==0)&&(sk_stat[i]==ssON))||((SK_SIGN[i])&&(sk_stat[i]==ssOFF)) )
;;;7182   		{
;;;7183   		if(sk_av_cnt[i]<10)
003f70  f8df93b8          LDR      r9,|L1.17196|
;;;7184   			{
;;;7185   			sk_av_cnt[i]++;
;;;7186   			if(sk_av_cnt[i]>=10)
;;;7187   				{
;;;7188   				sk_av_stat[i]=sasON;
003f74  4fee              LDR      r7,|L1.17200|
;;;7189   				}
;;;7190   			}
;;;7191   		else 
;;;7192   			{
;;;7193   			sk_av_cnt[i]=10;
;;;7194   			}
;;;7195   		}
;;;7196   	else
;;;7197   		{
;;;7198   		if(sk_av_cnt[i]>=0)
;;;7199   			{
;;;7200   			sk_av_cnt[i]--;
;;;7201   			if(sk_av_cnt[i]<=0)
;;;7202   				{
;;;7203   				sk_av_stat[i]=sasOFF;
;;;7204   				}
;;;7205   			}
;;;7206   		else 
;;;7207   			{
;;;7208   			sk_av_cnt[i]=0;
;;;7209   			}
;;;7210   		}
;;;7211   
;;;7212   #ifndef UKU_KONTUR
;;;7213   	if(sk_av_stat_old[i]!=sk_av_stat[i])
003f76  f8df83bc          LDR      r8,|L1.17204|
003f7a  e07e              B        |L1.16506|
                  |L1.16252|
003f7c  48ee              LDR      r0,|L1.17208|
003f7e  f9300014          LDRSH    r0,[r0,r4,LSL #1]     ;7181
003f82  b910              CBNZ     r0,|L1.16266|
003f84  5d29              LDRB     r1,[r5,r4]            ;7181
003f86  2901              CMP      r1,#1                 ;7181
003f88  d00e              BEQ      |L1.16296|
                  |L1.16266|
003f8a  b108              CBZ      r0,|L1.16272|
003f8c  5d28              LDRB     r0,[r5,r4]            ;7181
003f8e  b158              CBZ      r0,|L1.16296|
                  |L1.16272|
003f90  f9190004          LDRSB    r0,[r9,r4]            ;7198
003f94  2800              CMP      r0,#0                 ;7198
003f96  db17              BLT      |L1.16328|
003f98  1e40              SUBS     r0,r0,#1              ;7200
003f9a  b240              SXTB     r0,r0                 ;7200
003f9c  f8090004          STRB     r0,[r9,r4]            ;7200
003fa0  2800              CMP      r0,#0                 ;7201
003fa2  dc13              BGT      |L1.16332|
003fa4  553e              STRB     r6,[r7,r4]            ;7203
003fa6  e011              B        |L1.16332|
                  |L1.16296|
003fa8  f9190004          LDRSB    r0,[r9,r4]            ;7183
003fac  280a              CMP      r0,#0xa               ;7183
003fae  da08              BGE      |L1.16322|
003fb0  1c40              ADDS     r0,r0,#1              ;7185
003fb2  b240              SXTB     r0,r0                 ;7185
003fb4  f8090004          STRB     r0,[r9,r4]            ;7185
003fb8  280a              CMP      r0,#0xa               ;7186
003fba  db07              BLT      |L1.16332|
003fbc  f807a004          STRB     r10,[r7,r4]           ;7188
003fc0  e004              B        |L1.16332|
                  |L1.16322|
003fc2  f809b004          STRB     r11,[r9,r4]           ;7193
003fc6  e001              B        |L1.16332|
                  |L1.16328|
003fc8  f8096004          STRB     r6,[r9,r4]            ;7208
                  |L1.16332|
003fcc  f8181004          LDRB     r1,[r8,r4]
003fd0  5d38              LDRB     r0,[r7,r4]
003fd2  4281              CMP      r1,r0
003fd4  d04c              BEQ      |L1.16496|
;;;7214   		{
;;;7215   		plazma_sk++;
003fd6  4ad9              LDR      r2,|L1.17212|
003fd8  8e91              LDRH     r1,[r2,#0x34]  ; plazma_sk
003fda  1c49              ADDS     r1,r1,#1
003fdc  8691              STRH     r1,[r2,#0x34]
;;;7216   		if(sk_av_stat[i]==sasON)
003fde  2801              CMP      r0,#1
003fe0  d007              BEQ      |L1.16370|
;;;7217   			{
;;;7218   			if(i==0)snmp_trap_send("SK #1 Alarm",15,1,1);
;;;7219   			else if(i==1)
;;;7220   				{
;;;7221   				#ifndef UKU_TELEKORE2017
;;;7222   				snmp_trap_send("SK #2 Alarm",15,2,1);
;;;7223   				#endif
;;;7224   				#ifdef UKU_TELEKORE2017
;;;7225   				snmp_trap_send("Door open",15,2,1);
;;;7226   				#endif
;;;7227   				}
;;;7228   			else if(i==2)snmp_trap_send("SK #3 Alarm",15,3,1);
;;;7229   			else if(i==3)snmp_trap_send("SK #4 Alarm",15,4,1);
;;;7230   			}
;;;7231   		else 
;;;7232   			{
;;;7233   			if(i==0)snmp_trap_send("SK #1 Alarm is off",15,1,0);
003fe2  b354              CBZ      r4,|L1.16442|
;;;7234   			else if(i==1)
003fe4  2c01              CMP      r4,#1
003fe6  d02f              BEQ      |L1.16456|
;;;7235   				{
;;;7236   				#ifndef UKU_TELEKORE2017
;;;7237   				snmp_trap_send("SK #2 Alarm is off",15,2,0);
;;;7238   				#endif
;;;7239   				#ifdef UKU_TELEKORE2017
;;;7240   				snmp_trap_send("Door open clear",15,2,0);
;;;7241   				#endif
;;;7242   				}
;;;7243   			else if(i==2)snmp_trap_send("SK #3 Alarm is off",15,3,0);
003fe8  2c02              CMP      r4,#2
003fea  d034              BEQ      |L1.16470|
;;;7244   			else if(i==3)snmp_trap_send("SK #4 Alarm is off",15,4,0);
003fec  2c03              CMP      r4,#3
003fee  d039              BEQ      |L1.16484|
003ff0  e03e              B        |L1.16496|
                  |L1.16370|
003ff2  b134              CBZ      r4,|L1.16386|
003ff4  2c01              CMP      r4,#1                 ;7219
003ff6  d00b              BEQ      |L1.16400|
003ff8  2c02              CMP      r4,#2                 ;7228
003ffa  d010              BEQ      |L1.16414|
003ffc  2c03              CMP      r4,#3                 ;7229
003ffe  d015              BEQ      |L1.16428|
004000  e036              B        |L1.16496|
                  |L1.16386|
004002  2301              MOVS     r3,#1                 ;7218
004004  461a              MOV      r2,r3                 ;7218
004006  210f              MOVS     r1,#0xf               ;7218
004008  a0cd              ADR      r0,|L1.17216|
00400a  f7fffffe          BL       snmp_trap_send
00400e  e02f              B        |L1.16496|
                  |L1.16400|
004010  2301              MOVS     r3,#1                 ;7222
004012  2202              MOVS     r2,#2                 ;7222
004014  210f              MOVS     r1,#0xf               ;7222
004016  a0cd              ADR      r0,|L1.17228|
004018  f7fffffe          BL       snmp_trap_send
00401c  e028              B        |L1.16496|
                  |L1.16414|
00401e  2301              MOVS     r3,#1                 ;7228
004020  2203              MOVS     r2,#3                 ;7228
004022  210f              MOVS     r1,#0xf               ;7228
004024  a0cc              ADR      r0,|L1.17240|
004026  f7fffffe          BL       snmp_trap_send
00402a  e021              B        |L1.16496|
                  |L1.16428|
00402c  2301              MOVS     r3,#1                 ;7229
00402e  2204              MOVS     r2,#4                 ;7229
004030  210f              MOVS     r1,#0xf               ;7229
004032  a0cc              ADR      r0,|L1.17252|
004034  f7fffffe          BL       snmp_trap_send
004038  e01a              B        |L1.16496|
                  |L1.16442|
00403a  2300              MOVS     r3,#0                 ;7233
00403c  2201              MOVS     r2,#1                 ;7233
00403e  210f              MOVS     r1,#0xf               ;7233
004040  a0cb              ADR      r0,|L1.17264|
004042  f7fffffe          BL       snmp_trap_send
004046  e013              B        |L1.16496|
                  |L1.16456|
004048  2300              MOVS     r3,#0                 ;7237
00404a  2202              MOVS     r2,#2                 ;7237
00404c  210f              MOVS     r1,#0xf               ;7237
00404e  a0cd              ADR      r0,|L1.17284|
004050  f7fffffe          BL       snmp_trap_send
004054  e00c              B        |L1.16496|
                  |L1.16470|
004056  2300              MOVS     r3,#0                 ;7243
004058  2203              MOVS     r2,#3                 ;7243
00405a  210f              MOVS     r1,#0xf               ;7243
00405c  a0ce              ADR      r0,|L1.17304|
00405e  f7fffffe          BL       snmp_trap_send
004062  e005              B        |L1.16496|
                  |L1.16484|
004064  2300              MOVS     r3,#0
004066  2204              MOVS     r2,#4
004068  210f              MOVS     r1,#0xf
00406a  a0d0              ADR      r0,|L1.17324|
00406c  f7fffffe          BL       snmp_trap_send
                  |L1.16496|
;;;7245   			}
;;;7246   	 	}
;;;7247   #endif
;;;7248   
;;;7249   #ifdef UKU_KONTUR
;;;7250   	if(sk_av_stat_old[i]!=sk_av_stat[i])
;;;7251   		{
;;;7252   		plazma_sk++;
;;;7253   		if(sk_av_stat[i]==sasON)
;;;7254   			{
;;;7255   			if(i==0)snmp_trap_send("Door is opened",15,1,1);
;;;7256   			else if(i==1)snmp_trap_send("Smoke Alarm",15,2,1);
;;;7257   			else if(i==2)snmp_trap_send("Shock Sensor Alarm",15,3,1);
;;;7258   			else if(i==3)snmp_trap_send("SK #4 Alarm",15,4,1);
;;;7259   			}
;;;7260   		else 
;;;7261   			{
;;;7262   			if(i==0)snmp_trap_send("Door is closed",15,1,0);
;;;7263   			else if(i==1)snmp_trap_send("Smoke Alarm is off",15,2,0);
;;;7264   			else if(i==2)snmp_trap_send("Shock Sensor Alarm is off",15,3,0);
;;;7265   			else if(i==3)snmp_trap_send("SK #4 Alarm is off",15,4,0);
;;;7266   			}
;;;7267   	 	}
;;;7268   #endif
;;;7269   	sk_av_stat_old[i]=sk_av_stat[i];
004070  5d38              LDRB     r0,[r7,r4]
004072  f8080004          STRB     r0,[r8,r4]
004076  1c64              ADDS     r4,r4,#1              ;7179
004078  b2e4              UXTB     r4,r4                 ;7179
                  |L1.16506|
00407a  48d1              LDR      r0,|L1.17344|
00407c  f9b00000          LDRSH    r0,[r0,#0]            ;7179  ; NUMSK
004080  4284              CMP      r4,r0                 ;7179
004082  f6ffaf7b          BLT      |L1.16252|
;;;7270   	}
;;;7271   }
004086  e70c              B        |L1.16034|
;;;7272   
                          ENDP

                  zar_superviser_start PROC
;;;7309   //-----------------------------------------------
;;;7310   void zar_superviser_start(void)
004088  4ace              LDR      r2,|L1.17348|
;;;7311   {
;;;7312   sign_U[0]=1;
00408a  2001              MOVS     r0,#1
00408c  7010              STRB     r0,[r2,#0]
;;;7313   sign_I[0]=1;
00408e  49ce              LDR      r1,|L1.17352|
004090  7008              STRB     r0,[r1,#0]
;;;7314   sign_U[1]=1;
004092  7050              STRB     r0,[r2,#1]
;;;7315   sign_I[1]=1;
004094  7048              STRB     r0,[r1,#1]
;;;7316   
;;;7317   }
004096  4770              BX       lr
;;;7318   
                          ENDP

                  zar_superviser_drv PROC
;;;7274   //-----------------------------------------------
;;;7275   void zar_superviser_drv(void)
004098  e92d5ff0          PUSH     {r4-r12,lr}
;;;7276   {
;;;7277   
;;;7278   if(((bat[0]._Ub>u_necc_up) || (bat[0]._Ub<u_necc_dn))&&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_U[0]=0;
00409c  48cc              LDR      r0,|L1.17360|
00409e  f8df9334          LDR      r9,|L1.17364|
0040a2  f8df8328          LDR      r8,|L1.17356|
0040a6  f9b0c000          LDRSH    r12,[r0,#0]  ; u_necc_up
0040aa  f9b90000          LDRSH    r0,[r9,#0]
0040ae  4ca3              LDR      r4,|L1.17212|
0040b0  ebc01100          RSB      r1,r0,r0,LSL #4
0040b4  f9b87002          LDRSH    r7,[r8,#2]  ; bat
0040b8  f06f0a1d          MVN      r10,#0x1d
0040bc  f06f0b95          MVN      r11,#0x95
0040c0  2500              MOVS     r5,#0
0040c2  4ec0              LDR      r6,|L1.17348|
0040c4  f9b40040          LDRSH    r0,[r4,#0x40]
0040c8  eb0a0281          ADD      r2,r10,r1,LSL #2
0040cc  eb0b0381          ADD      r3,r11,r1,LSL #2
0040d0  4567              CMP      r7,r12
0040d2  dc05              BGT      |L1.16608|
0040d4  f8dfc300          LDR      r12,|L1.17368|
0040d8  f9bcc000          LDRSH    r12,[r12,#0]  ; u_necc_dn
0040dc  4567              CMP      r7,r12
0040de  da04              BGE      |L1.16618|
                  |L1.16608|
0040e0  4282              CMP      r2,r0
0040e2  dd02              BLE      |L1.16618|
0040e4  4283              CMP      r3,r0
0040e6  da00              BGE      |L1.16618|
0040e8  7035              STRB     r5,[r6,#0]
                  |L1.16618|
;;;7279   
;;;7280   if(((bat[0]._Ib>(2*IKB)) || (bat[0]._Ib<(-IKB*2))) &&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_I[0]=0;
0040ea  4fbc              LDR      r7,|L1.17372|
0040ec  f9b8c008          LDRSH    r12,[r8,#8]  ; bat
0040f0  f9b7e000          LDRSH    lr,[r7,#0]  ; IKB
0040f4  4fb4              LDR      r7,|L1.17352|
0040f6  ebbc0f4e          CMP      r12,lr,LSL #1
0040fa  dc04              BGT      |L1.16646|
0040fc  f1ce0e00          RSB      lr,lr,#0
004100  ebbc0f4e          CMP      r12,lr,LSL #1
004104  da04              BGE      |L1.16656|
                  |L1.16646|
004106  4282              CMP      r2,r0
004108  dd02              BLE      |L1.16656|
00410a  4283              CMP      r3,r0
00410c  da00              BGE      |L1.16656|
00410e  703d              STRB     r5,[r7,#0]
                  |L1.16656|
;;;7281   																 
;;;7282   if((main_kb_cnt==((TBAT*60)-10)) &&(spc_stat==spcOFF))
004110  f06f0209          MVN      r2,#9
004114  eb020181          ADD      r1,r2,r1,LSL #2
004118  4281              CMP      r1,r0
00411a  d11f              BNE      |L1.16732|
00411c  7d20              LDRB     r0,[r4,#0x14]  ; spc_stat
00411e  b9e8              CBNZ     r0,|L1.16732|
;;;7283   	{
;;;7284   	if((sign_U[0]==1) && (sign_I[0]==1) && (lc640_read_int(EE_BAT1_ZAR_CNT)!=BAT_C_REAL[0]) && (NUMBAT) && (!(bat[0]._av&1)))
004120  7830              LDRB     r0,[r6,#0]  ; sign_U
004122  2801              CMP      r0,#1
004124  d11a              BNE      |L1.16732|
004126  7838              LDRB     r0,[r7,#0]  ; sign_I
004128  2801              CMP      r0,#1
00412a  d117              BNE      |L1.16732|
00412c  f44f70d6          MOV      r0,#0x1ac
004130  f7fffffe          BL       lc640_read_int
004134  49aa              LDR      r1,|L1.17376|
004136  f9b11000          LDRSH    r1,[r1,#0]  ; BAT_C_REAL
00413a  4288              CMP      r0,r1
00413c  d00e              BEQ      |L1.16732|
00413e  48a9              LDR      r0,|L1.17380|
004140  8800              LDRH     r0,[r0,#0]  ; NUMBAT
004142  b158              CBZ      r0,|L1.16732|
004144  f898003d          LDRB     r0,[r8,#0x3d]  ; bat
004148  07c0              LSLS     r0,r0,#31
00414a  d107              BNE      |L1.16732|
;;;7285   		{
;;;7286   		lc640_write_int(EE_BAT1_ZAR_CNT,BAT_C_REAL[0]);
00414c  f44f70d6          MOV      r0,#0x1ac
004150  f7fffffe          BL       lc640_write_int
;;;7287   		superviser_cnt++;
004154  48a4              LDR      r0,|L1.17384|
004156  7801              LDRB     r1,[r0,#0]  ; superviser_cnt
004158  1c49              ADDS     r1,r1,#1
00415a  7001              STRB     r1,[r0,#0]
                  |L1.16732|
;;;7288   		}
;;;7289   	
;;;7290   	}
;;;7291   
;;;7292   if(((bat[0]._Ub>u_necc_up) || (bat[1]._Ub<u_necc_dn))&&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_U[1]=0;
00415c  489c              LDR      r0,|L1.17360|
00415e  f9b81002          LDRSH    r1,[r8,#2]  ; bat
004162  f9b00000          LDRSH    r0,[r0,#0]  ; u_necc_up
004166  4281              CMP      r1,r0
004168  dc06              BGT      |L1.16760|
00416a  489b              LDR      r0,|L1.17368|
00416c  f9b8104e          LDRSH    r1,[r8,#0x4e]  ; bat
004170  f9b00000          LDRSH    r0,[r0,#0]  ; u_necc_dn
004174  4281              CMP      r1,r0
004176  da0e              BGE      |L1.16790|
                  |L1.16760|
004178  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
00417c  f9b41040          LDRSH    r1,[r4,#0x40]  ; main_kb_cnt
004180  ebc01000          RSB      r0,r0,r0,LSL #4
004184  eb0a0280          ADD      r2,r10,r0,LSL #2
004188  428a              CMP      r2,r1
00418a  dd04              BLE      |L1.16790|
00418c  eb0b0080          ADD      r0,r11,r0,LSL #2
004190  4288              CMP      r0,r1
004192  da00              BGE      |L1.16790|
004194  7075              STRB     r5,[r6,#1]
                  |L1.16790|
;;;7293   
;;;7294   if(((bat[1]._Ib>(2*IKB)) || (bat[1]._Ib<(-IKB*2))) &&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_I[1]=0;
004196  4991              LDR      r1,|L1.17372|
004198  f9b80054          LDRSH    r0,[r8,#0x54]  ; bat
00419c  f9b11000          LDRSH    r1,[r1,#0]  ; IKB
0041a0  ebb00f41          CMP      r0,r1,LSL #1
0041a4  dc03              BGT      |L1.16814|
0041a6  4249              RSBS     r1,r1,#0
0041a8  ebb00f41          CMP      r0,r1,LSL #1
0041ac  da0e              BGE      |L1.16844|
                  |L1.16814|
0041ae  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
0041b2  f9b41040          LDRSH    r1,[r4,#0x40]  ; main_kb_cnt
0041b6  ebc01000          RSB      r0,r0,r0,LSL #4
0041ba  eb0a0280          ADD      r2,r10,r0,LSL #2
0041be  428a              CMP      r2,r1
0041c0  dd04              BLE      |L1.16844|
0041c2  eb0b0080          ADD      r0,r11,r0,LSL #2
0041c6  4288              CMP      r0,r1
0041c8  da00              BGE      |L1.16844|
0041ca  707d              STRB     r5,[r7,#1]
                  |L1.16844|
;;;7295   																 
;;;7296   if((main_kb_cnt==((TBAT*60)-10)) &&(spc_stat==spcOFF))
0041cc  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
0041d0  ebc01100          RSB      r1,r0,r0,LSL #4
0041d4  f06f0009          MVN      r0,#9
0041d8  eb000081          ADD      r0,r0,r1,LSL #2
0041dc  f9b41040          LDRSH    r1,[r4,#0x40]  ; main_kb_cnt
0041e0  4288              CMP      r0,r1
0041e2  d120              BNE      |L1.16934|
0041e4  7d20              LDRB     r0,[r4,#0x14]  ; spc_stat
0041e6  b9f0              CBNZ     r0,|L1.16934|
;;;7297   	{
;;;7298   	if((sign_U[1]==1) && (sign_I[1]==1) && (lc640_read_int(EE_BAT2_ZAR_CNT)!=BAT_C_REAL[1]) && (NUMBAT==2) && (!(bat[1]._av&1)))
0041e8  7870              LDRB     r0,[r6,#1]  ; sign_U
0041ea  2801              CMP      r0,#1
0041ec  d11b              BNE      |L1.16934|
0041ee  7878              LDRB     r0,[r7,#1]  ; sign_I
0041f0  2801              CMP      r0,#1
0041f2  d118              BNE      |L1.16934|
0041f4  f44f75e5          MOV      r5,#0x1ca
0041f8  4628              MOV      r0,r5
0041fa  f7fffffe          BL       lc640_read_int
0041fe  4978              LDR      r1,|L1.17376|
004200  f9b11002          LDRSH    r1,[r1,#2]  ; BAT_C_REAL
004204  4288              CMP      r0,r1
004206  d00e              BEQ      |L1.16934|
004208  4876              LDR      r0,|L1.17380|
00420a  8800              LDRH     r0,[r0,#0]  ; NUMBAT
00420c  2802              CMP      r0,#2
00420e  d10a              BNE      |L1.16934|
004210  f8980089          LDRB     r0,[r8,#0x89]  ; bat
004214  07c0              LSLS     r0,r0,#31
004216  d106              BNE      |L1.16934|
;;;7299   		{
;;;7300   		lc640_write_int(EE_BAT2_ZAR_CNT,BAT_C_REAL[1]);
004218  4628              MOV      r0,r5
00421a  f7fffffe          BL       lc640_write_int
;;;7301   		superviser_cnt++;
00421e  4872              LDR      r0,|L1.17384|
004220  7801              LDRB     r1,[r0,#0]  ; superviser_cnt
004222  1c49              ADDS     r1,r1,#1
004224  7001              STRB     r1,[r0,#0]
                  |L1.16934|
;;;7302   		}
;;;7303   	
;;;7304   	}
;;;7305   
;;;7306   if(main_kb_cnt==((TBAT*60)-2)) zar_superviser_start();
004226  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
00422a  f06f0101          MVN      r1,#1
00422e  ebc01000          RSB      r0,r0,r0,LSL #4
004232  eb010080          ADD      r0,r1,r0,LSL #2
004236  f9b41040          LDRSH    r1,[r4,#0x40]  ; main_kb_cnt
00423a  4288              CMP      r0,r1
00423c  d102              BNE      |L1.16964|
00423e  e8bd5ff0          POP      {r4-r12,lr}
004242  e7fe              B        zar_superviser_start
                  |L1.16964|
;;;7307   }
004244  e62d              B        |L1.16034|
;;;7308   
                          ENDP

                  npn_hndl PROC
;;;7319   //-----------------------------------------------
;;;7320   void npn_hndl(void)
004246  e92d03f0          PUSH     {r4-r9}
;;;7321   {
;;;7322   if(NPN_OUT!=npnoOFF)
00424a  4868              LDR      r0,|L1.17388|
;;;7323   	{
;;;7324   /*	if(NPN_SIGN==npnsAVNET)
;;;7325   		{
;;;7326   		if(net_av==1)
;;;7327   			{
;;;7328   			if(npn_tz_cnt<TZNPN)
;;;7329   				{
;;;7330   				npn_tz_cnt++;
;;;7331   				if(npn_tz_cnt==TZNPN)
;;;7332   					{
;;;7333   					npn_stat=npnsOFF;
;;;7334   					}
;;;7335   				}
;;;7336   			}
;;;7337   		else
;;;7338   			{
;;;7339   			if(npn_tz_cnt)
;;;7340   				{
;;;7341   				npn_tz_cnt--;
;;;7342   				if(npn_tz_cnt==0)
;;;7343   					{
;;;7344   					npn_stat=npnsON;
;;;7345   					}
;;;7346   				}
;;;7347   			}
;;;7348   		}*/
;;;7349   /*	if(NPN_SIGN==npnsULOAD)
;;;7350   		{
;;;7351   		if(load_U<UONPN)
;;;7352   			{
;;;7353   			if(npn_tz_cnt<TZNPN)
;;;7354   				{
;;;7355   				npn_tz_cnt++;
;;;7356   				if(npn_tz_cnt==TZNPN)
;;;7357   					{
;;;7358   					npn_stat=npnsOFF;
;;;7359   					}
;;;7360   				}
;;;7361   			}
;;;7362   		else if(load_U>UVNPN)
;;;7363   			{
;;;7364   			if(npn_tz_cnt)
;;;7365   				{
;;;7366   				npn_tz_cnt--;
;;;7367   				if(npn_tz_cnt==0)
;;;7368   					{
;;;7369   					npn_stat=npnsON;
;;;7370   					}
;;;7371   				}
;;;7372   			}
;;;7373   		}*/
;;;7374   
;;;7375   	if((load_U<UONPN)&&((net_Ua<UMN)||(net_Ub<UMN)||(net_Uc<UMN)))
;;;7376   		{
;;;7377   		if(npn_tz_cnt<TZNPN)
00424c  4f68              LDR      r7,|L1.17392|
;;;7378   			{
;;;7379   			npn_tz_cnt++;
;;;7380   			if(npn_tz_cnt==TZNPN)
;;;7381   				{
;;;7382   				npn_stat=npnsOFF;
00424e  4e69              LDR      r6,|L1.17396|
004250  7800              LDRB     r0,[r0,#0]            ;7322  ; NPN_OUT
004252  f04f0c00          MOV      r12,#0                ;7322
;;;7383   				}
;;;7384   			}
;;;7385   		}
;;;7386   	else if((load_U>UVNPN)&&(net_Ua>UMN)&&(net_Ub>UMN)&&(net_Uc>UMN))
;;;7387   		{
;;;7388   		if(npn_tz_cnt)
;;;7389   			{
;;;7390   			npn_tz_cnt--;
;;;7391   			if(npn_tz_cnt==0)
;;;7392   				{
;;;7393   				npn_stat=npnsON;
004256  f04f0801          MOV      r8,#1
00425a  b3e8              CBZ      r0,|L1.17112|
00425c  4866              LDR      r0,|L1.17400|
00425e  4639              MOV      r1,r7                 ;7377
004260  f9b05000          LDRSH    r5,[r0,#0]            ;7375  ; load_U
004264  4865              LDR      r0,|L1.17404|
004266  f9b11000          LDRSH    r1,[r1,#0]            ;7377
00426a  f9b09000          LDRSH    r9,[r0,#0]            ;7375  ; UONPN
00426e  4864              LDR      r0,|L1.17408|
004270  454d              CMP      r5,r9                 ;7375
004272  f9b02000          LDRSH    r2,[r0,#0]            ;7375
004276  4863              LDR      r0,|L1.17412|
004278  f9b03000          LDRSH    r3,[r0,#0]            ;7375
00427c  4862              LDR      r0,|L1.17416|
00427e  f9b04000          LDRSH    r4,[r0,#0]            ;7375
004282  4862              LDR      r0,|L1.17420|
004284  f9b00000          LDRSH    r0,[r0,#0]            ;7375
004288  da12              BGE      |L1.17072|
00428a  4282              CMP      r2,r0                 ;7375
00428c  db03              BLT      |L1.17046|
00428e  4283              CMP      r3,r0                 ;7375
004290  db01              BLT      |L1.17046|
004292  4284              CMP      r4,r0                 ;7375
004294  da0c              BGE      |L1.17072|
                  |L1.17046|
004296  485e              LDR      r0,|L1.17424|
004298  f9b02000          LDRSH    r2,[r0,#0]            ;7377  ; TZNPN
00429c  4291              CMP      r1,r2                 ;7377
00429e  da20              BGE      |L1.17122|
0042a0  1c49              ADDS     r1,r1,#1              ;7379
0042a2  b208              SXTH     r0,r1                 ;7379
0042a4  8038              STRH     r0,[r7,#0]            ;7379
0042a6  4290              CMP      r0,r2                 ;7380
0042a8  d11b              BNE      |L1.17122|
0042aa  f886c000          STRB     r12,[r6,#0]           ;7382
0042ae  e018              B        |L1.17122|
                  |L1.17072|
0042b0  f8dfc160          LDR      r12,|L1.17428|
0042b4  f9bcc000          LDRSH    r12,[r12,#0]          ;7386  ; UVNPN
0042b8  4565              CMP      r5,r12                ;7386
0042ba  dd12              BLE      |L1.17122|
0042bc  4282              CMP      r2,r0                 ;7386
0042be  dd10              BLE      |L1.17122|
0042c0  4283              CMP      r3,r0                 ;7386
0042c2  dd0e              BLE      |L1.17122|
0042c4  4284              CMP      r4,r0                 ;7386
0042c6  dd0c              BLE      |L1.17122|
0042c8  b159              CBZ      r1,|L1.17122|
0042ca  1e49              SUBS     r1,r1,#1              ;7390
0042cc  b208              SXTH     r0,r1                 ;7390
0042ce  8038              STRH     r0,[r7,#0]            ;7390
0042d0  b938              CBNZ     r0,|L1.17122|
0042d2  f8868000          STRB     r8,[r6,#0]
0042d6  e004              B        |L1.17122|
                  |L1.17112|
0042d8  e7ff              B        |L1.17114|
                  |L1.17114|
;;;7394   				}
;;;7395   			}
;;;7396   		}
;;;7397   	}
;;;7398   else
;;;7399   	{
;;;7400   	npn_tz_cnt=0;
0042da  f8a7c000          STRH     r12,[r7,#0]
;;;7401   	npn_stat=npnsON;
0042de  f8868000          STRB     r8,[r6,#0]
                  |L1.17122|
;;;7402   	}
;;;7403   
;;;7404   if(npn_stat==npnsOFF) mess_send(MESS2RELE_HNDL,PARAM_RELE_NPN,1,15);
0042e2  7830              LDRB     r0,[r6,#0]  ; npn_stat
0042e4  2800              CMP      r0,#0
0042e6  d107              BNE      |L1.17144|
0042e8  e8bd03f0          POP      {r4-r9}
0042ec  230f              MOVS     r3,#0xf
0042ee  2201              MOVS     r2,#1
0042f0  216e              MOVS     r1,#0x6e
0042f2  20d2              MOVS     r0,#0xd2
0042f4  f7ffbffe          B.W      mess_send
                  |L1.17144|
;;;7405   
;;;7406   
;;;7407   }
0042f8  e8bd03f0          POP      {r4-r9}
0042fc  4770              BX       lr
;;;7408   
                          ENDP

                  speedChargeHndl PROC
;;;7409   //-----------------------------------------------
;;;7410   void speedChargeHndl(void)
0042fe  b5f8              PUSH     {r3-r7,lr}
;;;7411   {
;;;7412   if(speedChIsOn)
004300  4f45              LDR      r7,|L1.17432|
;;;7413   	{
;;;7414   	speedChTimeCnt++;
;;;7415   	if(speedChTimeCnt>=((signed long)speedChrgTimeInHour*3600L))
;;;7416   		{
;;;7417   		speedChIsOn=0;
;;;7418   		}
;;;7419   	if(speedChrgBlckStat)
004302  4d46              LDR      r5,|L1.17436|
004304  2400              MOVS     r4,#0                 ;7412
004306  8838              LDRH     r0,[r7,#0]            ;7412  ; speedChIsOn
004308  b158              CBZ      r0,|L1.17186|
00430a  4a45              LDR      r2,|L1.17440|
00430c  6811              LDR      r1,[r2,#0]            ;7414  ; speedChTimeCnt
00430e  1c49              ADDS     r1,r1,#1              ;7414
004310  6011              STR      r1,[r2,#0]            ;7414  ; speedChTimeCnt
004312  4844              LDR      r0,|L1.17444|
004314  f9b00000          LDRSH    r0,[r0,#0]            ;7415  ; speedChrgTimeInHour
004318  ebc01340          RSB      r3,r0,r0,LSL #5       ;7415
00431c  ebc32000          RSB      r0,r3,r0,LSL #8       ;7415
004320  e082              B        |L1.17448|
                  |L1.17186|
004322  e089              B        |L1.17464|
                  |L1.17188|
                          DCD      ||area_number.12||
                  |L1.17192|
                          DCD      ||.bss||+0x400
                  |L1.17196|
                          DCD      sk_av_cnt
                  |L1.17200|
                          DCD      sk_av_stat
                  |L1.17204|
                          DCD      sk_av_stat_old
                  |L1.17208|
                          DCD      SK_SIGN
                  |L1.17212|
                          DCD      ||area_number.18||
                  |L1.17216|
004340  534b2023          DCB      "SK #1 Alarm",0
004344  3120416c
004348  61726d00
                  |L1.17228|
00434c  534b2023          DCB      "SK #2 Alarm",0
004350  3220416c
004354  61726d00
                  |L1.17240|
004358  534b2023          DCB      "SK #3 Alarm",0
00435c  3320416c
004360  61726d00
                  |L1.17252|
004364  534b2023          DCB      "SK #4 Alarm",0
004368  3420416c
00436c  61726d00
                  |L1.17264|
004370  534b2023          DCB      "SK #1 Alarm is off",0
004374  3120416c
004378  61726d20
00437c  6973206f
004380  666600  
004383  00                DCB      0
                  |L1.17284|
004384  534b2023          DCB      "SK #2 Alarm is off",0
004388  3220416c
00438c  61726d20
004390  6973206f
004394  666600  
004397  00                DCB      0
                  |L1.17304|
004398  534b2023          DCB      "SK #3 Alarm is off",0
00439c  3320416c
0043a0  61726d20
0043a4  6973206f
0043a8  666600  
0043ab  00                DCB      0
                  |L1.17324|
0043ac  534b2023          DCB      "SK #4 Alarm is off",0
0043b0  3420416c
0043b4  61726d20
0043b8  6973206f
0043bc  666600  
0043bf  00                DCB      0
                  |L1.17344|
                          DCD      NUMSK
                  |L1.17348|
                          DCD      sign_U
                  |L1.17352|
                          DCD      sign_I
                  |L1.17356|
                          DCD      bat
                  |L1.17360|
                          DCD      u_necc_up
                  |L1.17364|
                          DCD      TBAT
                  |L1.17368|
                          DCD      u_necc_dn
                  |L1.17372|
                          DCD      IKB
                  |L1.17376|
                          DCD      BAT_C_REAL
                  |L1.17380|
                          DCD      NUMBAT
                  |L1.17384|
                          DCD      superviser_cnt
                  |L1.17388|
                          DCD      NPN_OUT
                  |L1.17392|
                          DCD      npn_tz_cnt
                  |L1.17396|
                          DCD      npn_stat
                  |L1.17400|
                          DCD      load_U
                  |L1.17404|
                          DCD      UONPN
                  |L1.17408|
                          DCD      net_Ua
                  |L1.17412|
                          DCD      net_Ub
                  |L1.17416|
                          DCD      net_Uc
                  |L1.17420|
                          DCD      UMN
                  |L1.17424|
                          DCD      TZNPN
                  |L1.17428|
                          DCD      UVNPN
                  |L1.17432|
                          DCD      speedChIsOn
                  |L1.17436|
                          DCD      speedChrgBlckStat
                  |L1.17440|
                          DCD      speedChTimeCnt
                  |L1.17444|
                          DCD      speedChrgTimeInHour
                  |L1.17448|
004428  ebb11f00          CMP      r1,r0,LSL #4          ;7415
00442c  db00              BLT      |L1.17456|
00442e  803c              STRH     r4,[r7,#0]            ;7417
                  |L1.17456|
004430  8828              LDRH     r0,[r5,#0]  ; speedChrgBlckStat
004432  b108              CBZ      r0,|L1.17464|
;;;7420   		{
;;;7421   		speedChIsOn=0;
004434  803c              STRH     r4,[r7,#0]
;;;7422   		speedChTimeCnt=0;
004436  6014              STR      r4,[r2,#0]  ; speedChTimeCnt
                  |L1.17464|
;;;7423   		}
;;;7424   	}
;;;7425   
;;;7426   
;;;7427   
;;;7428   if(speedChrgAvtEn)
004438  48ff              LDR      r0,|L1.18488|
;;;7429   	{
;;;7430   	if(!speedChIsOn)
;;;7431   		{
;;;7432   		if((load_U<u_necc)&&((u_necc-load_U)>speedChrgDU)&&(abs(Ib_ips_termokompensat/10-IZMAX)<5)&&(!speedChrgBlckStat))
;;;7433   			{
;;;7434   			speedChIsOn=1;
00443a  2601              MOVS     r6,#1
00443c  8800              LDRH     r0,[r0,#0]            ;7428  ; speedChrgAvtEn
00443e  b300              CBZ      r0,|L1.17538|
004440  8838              LDRH     r0,[r7,#0]            ;7430  ; speedChIsOn
004442  b9f0              CBNZ     r0,|L1.17538|
004444  48fd              LDR      r0,|L1.18492|
004446  49fe              LDR      r1,|L1.18496|
004448  f9b00000          LDRSH    r0,[r0,#0]            ;7432  ; load_U
00444c  f9b11000          LDRSH    r1,[r1,#0]            ;7432  ; u_necc
004450  4288              CMP      r0,r1                 ;7432
004452  da16              BGE      |L1.17538|
004454  1a08              SUBS     r0,r1,r0              ;7432
004456  49fb              LDR      r1,|L1.18500|
004458  f9b11000          LDRSH    r1,[r1,#0]            ;7432  ; speedChrgDU
00445c  4288              CMP      r0,r1                 ;7432
00445e  dd10              BLE      |L1.17538|
004460  48f9              LDR      r0,|L1.18504|
004462  210a              MOVS     r1,#0xa               ;7432
004464  f9b00000          LDRSH    r0,[r0,#0]            ;7432  ; Ib_ips_termokompensat
004468  fb90f0f1          SDIV     r0,r0,r1              ;7432
00446c  49f7              LDR      r1,|L1.18508|
00446e  8809              LDRH     r1,[r1,#0]            ;7432  ; IZMAX
004470  1a40              SUBS     r0,r0,r1              ;7432
004472  b200              SXTH     r0,r0                 ;7432
004474  f7fffffe          BL       abs
004478  2805              CMP      r0,#5                 ;7432
00447a  da02              BGE      |L1.17538|
00447c  8828              LDRH     r0,[r5,#0]            ;7432  ; speedChrgBlckStat
00447e  b900              CBNZ     r0,|L1.17538|
004480  803e              STRH     r6,[r7,#0]
                  |L1.17538|
;;;7435   			}
;;;7436   		}
;;;7437   	}
;;;7438   
;;;7439   
;;;7440   
;;;7441   if((speedChrgBlckSrc!=1)&&(speedChrgBlckSrc!=2)) speedChrgBlckStat=0;
004482  48f3              LDR      r0,|L1.18512|
004484  f9b00000          LDRSH    r0,[r0,#0]  ; speedChrgBlckSrc
004488  2801              CMP      r0,#1
00448a  d003              BEQ      |L1.17556|
00448c  2802              CMP      r0,#2
00448e  d001              BEQ      |L1.17556|
004490  802c              STRH     r4,[r5,#0]
004492  e026              B        |L1.17634|
                  |L1.17556|
;;;7442   else
;;;7443   	{
;;;7444   	speedChrgBlckStat=0;
004494  802c              STRH     r4,[r5,#0]
;;;7445   	if(speedChrgBlckSrc==1)
;;;7446   		{
;;;7447   		if(((speedChrgBlckLog==0)&&(adc_buff_[11]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[11]<2000))) speedChrgBlckStat=1;
004496  4bef              LDR      r3,|L1.18516|
004498  49ef              LDR      r1,|L1.18520|
00449a  f44f62fa          MOV      r2,#0x7d0
00449e  2801              CMP      r0,#1                 ;7445
0044a0  d002              BEQ      |L1.17576|
;;;7448   		}
;;;7449   	else if(speedChrgBlckSrc==2)
0044a2  2802              CMP      r0,#2
0044a4  d00f              BEQ      |L1.17606|
0044a6  e01c              B        |L1.17634|
                  |L1.17576|
0044a8  f9b30000          LDRSH    r0,[r3,#0]            ;7447  ; speedChrgBlckLog
0044ac  b918              CBNZ     r0,|L1.17590|
0044ae  f9b13016          LDRSH    r3,[r1,#0x16]         ;7447  ; adc_buff_
0044b2  4293              CMP      r3,r2                 ;7447
0044b4  dc05              BGT      |L1.17602|
                  |L1.17590|
0044b6  2801              CMP      r0,#1                 ;7447
0044b8  d113              BNE      |L1.17634|
0044ba  f9b10016          LDRSH    r0,[r1,#0x16]         ;7447  ; adc_buff_
0044be  4290              CMP      r0,r2                 ;7447
0044c0  da0f              BGE      |L1.17634|
                  |L1.17602|
0044c2  802e              STRH     r6,[r5,#0]            ;7447
0044c4  e00d              B        |L1.17634|
                  |L1.17606|
;;;7450   		{
;;;7451   		if(((speedChrgBlckLog==0)&&(adc_buff_[13]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[13]<2000))) speedChrgBlckStat=1;
0044c6  f9b30000          LDRSH    r0,[r3,#0]  ; speedChrgBlckLog
0044ca  b918              CBNZ     r0,|L1.17620|
0044cc  f9b1301a          LDRSH    r3,[r1,#0x1a]  ; adc_buff_
0044d0  4293              CMP      r3,r2
0044d2  dc05              BGT      |L1.17632|
                  |L1.17620|
0044d4  2801              CMP      r0,#1
0044d6  d104              BNE      |L1.17634|
0044d8  f9b1001a          LDRSH    r0,[r1,#0x1a]  ; adc_buff_
0044dc  4290              CMP      r0,r2
0044de  da00              BGE      |L1.17634|
                  |L1.17632|
0044e0  802e              STRH     r6,[r5,#0]
                  |L1.17634|
;;;7452   		}
;;;7453   	}
;;;7454   
;;;7455   
;;;7456   if(speedChrgBlckStat==1)
0044e2  8828              LDRH     r0,[r5,#0]  ; speedChrgBlckStat
;;;7457   	{
;;;7458   
;;;7459   	//speedChargeStartStop();
;;;7460   
;;;7461   	speedChrgShowCnt++;
0044e4  49dd              LDR      r1,|L1.18524|
0044e6  2801              CMP      r0,#1                 ;7456
0044e8  d001              BEQ      |L1.17646|
;;;7462   	if(speedChrgShowCnt>=30)	
;;;7463   		{
;;;7464   		speedChrgShowCnt=0;
;;;7465   		show_mess(	"          ",
;;;7466   					"               ",
;;;7467   					"     !!!    ",
;;;7468   					"                    ",
;;;7469   					5000);
;;;7470   		}
;;;7471   	}
;;;7472   else speedChrgShowCnt=0;
0044ea  700c              STRB     r4,[r1,#0]
                  |L1.17644|
;;;7473   
;;;7474   
;;;7475   }
0044ec  bdf8              POP      {r3-r7,pc}
                  |L1.17646|
0044ee  7808              LDRB     r0,[r1,#0]            ;7461  ; speedChrgShowCnt
0044f0  1c40              ADDS     r0,r0,#1              ;7461
0044f2  b2c0              UXTB     r0,r0                 ;7461
0044f4  7008              STRB     r0,[r1,#0]            ;7461
0044f6  281e              CMP      r0,#0x1e              ;7462
0044f8  d3f8              BCC      |L1.17644|
0044fa  700c              STRB     r4,[r1,#0]            ;7464
0044fc  f2413388          MOV      r3,#0x1388            ;7465
004500  9300              STR      r3,[sp,#0]            ;7465
004502  a3d7              ADR      r3,|L1.18528|
004504  a2dc              ADR      r2,|L1.18552|
004506  a1e2              ADR      r1,|L1.18576|
004508  a0e7              ADR      r0,|L1.18600|
00450a  f7fffffe          BL       show_mess
00450e  bdf8              POP      {r3-r7,pc}
;;;7476   
                          ENDP

                  speedChargeStartStop PROC
;;;7477   //-----------------------------------------------
;;;7478   void speedChargeStartStop(void)
004510  b508              PUSH     {r3,lr}
;;;7479   {
;;;7480   if(speedChIsOn)
004512  48eb              LDR      r0,|L1.18624|
004514  2100              MOVS     r1,#0
004516  8802              LDRH     r2,[r0,#0]  ; speedChIsOn
004518  b10a              CBZ      r2,|L1.17694|
;;;7481   	{
;;;7482   	speedChIsOn=0;
00451a  8001              STRH     r1,[r0,#0]
;;;7483   	}
;;;7484   
;;;7485   else
;;;7486   	{
;;;7487   	if(speedChrgBlckStat==0)
;;;7488   		{
;;;7489   		speedChIsOn=1;
;;;7490   		speedChTimeCnt=0;
;;;7491   		}
;;;7492   	else
;;;7493   		{
;;;7494   		show_mess(	"          ",
;;;7495   	          		"               ",
;;;7496   	          		"    !   ",
;;;7497   	          		"                    ",2000);	 
;;;7498   		}
;;;7499   	}
;;;7500   }
00451c  bd08              POP      {r3,pc}
                  |L1.17694|
00451e  4ae9              LDR      r2,|L1.18628|
004520  8812              LDRH     r2,[r2,#0]            ;7487  ; speedChrgBlckStat
004522  b14a              CBZ      r2,|L1.17720|
004524  f44f63fa          MOV      r3,#0x7d0             ;7494
004528  9300              STR      r3,[sp,#0]            ;7494
00452a  a3cd              ADR      r3,|L1.18528|
00452c  a2e6              ADR      r2,|L1.18632|
00452e  a1ec              ADR      r1,|L1.18656|
004530  a0f1              ADR      r0,|L1.18680|
004532  f7fffffe          BL       show_mess
004536  bd08              POP      {r3,pc}
                  |L1.17720|
004538  2201              MOVS     r2,#1                 ;7489
00453a  8002              STRH     r2,[r0,#0]            ;7489
00453c  48f4              LDR      r0,|L1.18704|
00453e  6001              STR      r1,[r0,#0]            ;7490  ; speedChTimeCnt
004540  bd08              POP      {r3,pc}
;;;7501   
                          ENDP

                  numOfForvardBps_hndl PROC
;;;7502   //-----------------------------------------------
;;;7503   void	numOfForvardBps_hndl(void)			//       
004542  e92d41f0          PUSH     {r4-r8,lr}
;;;7504   {
;;;7505   
;;;7506   numOfForvardBps_old=numOfForvardBps;
004546  4cf3              LDR      r4,|L1.18708|
004548  7e60              LDRB     r0,[r4,#0x19]  ; numOfForvardBps
00454a  76a0              STRB     r0,[r4,#0x1a]
;;;7507   
;;;7508   numOfForvardBps=0;
00454c  2500              MOVS     r5,#0
00454e  7665              STRB     r5,[r4,#0x19]
;;;7509   
;;;7510   //FORVARDBPSCHHOUR=10;
;;;7511   
;;;7512   if((FORVARDBPSCHHOUR<=0)||(FORVARDBPSCHHOUR>500))
004550  4ef1              LDR      r6,|L1.18712|
004552  f9b60000          LDRSH    r0,[r6,#0]  ; FORVARDBPSCHHOUR
004556  2800              CMP      r0,#0
004558  dd02              BLE      |L1.17760|
00455a  f5b07ffa          CMP      r0,#0x1f4
00455e  dd02              BLE      |L1.17766|
                  |L1.17760|
;;;7513   	{
;;;7514   	FORVARDBPSCHHOUR=0;
004560  8035              STRH     r5,[r6,#0]
                  |L1.17762|
;;;7515   	return;
;;;7516   	}
;;;7517   
;;;7518   numOfForvardBps_minCnt++;
;;;7519   
;;;7520   
;;;7521   if(numOfForvardBps_minCnt>=60)
;;;7522   	{
;;;7523   	numOfForvardBps_minCnt=0;
;;;7524   	numOfForvardBps_hourCnt=lc640_read_int(EE_FORVBPSHOURCNT);
;;;7525   	numOfForvardBps_hourCnt++;
;;;7526   	if(numOfForvardBps_hourCnt>=(FORVARDBPSCHHOUR*NUMIST))
;;;7527   		{
;;;7528   		numOfForvardBps_hourCnt=0;
;;;7529   		}
;;;7530   	lc640_write_int(EE_FORVBPSHOURCNT,numOfForvardBps_hourCnt);
;;;7531   	}
;;;7532   
;;;7533   numOfForvardBps=numOfForvardBps_hourCnt/FORVARDBPSCHHOUR;
;;;7534   
;;;7535   //if(numOfForvardBps)
;;;7536   //numOfForvardBps_old=numOfForvardBps; 
;;;7537   }
004562  e8bd81f0          POP      {r4-r8,pc}
                  |L1.17766|
004566  7ee0              LDRB     r0,[r4,#0x1b]         ;7518  ; numOfForvardBps_minCnt
004568  1c40              ADDS     r0,r0,#1              ;7518
00456a  b2c0              UXTB     r0,r0                 ;7518
00456c  76e0              STRB     r0,[r4,#0x1b]         ;7518
00456e  283c              CMP      r0,#0x3c              ;7521
004570  d318              BCC      |L1.17828|
004572  76e5              STRB     r5,[r4,#0x1b]         ;7523
004574  f44f7794          MOV      r7,#0x128             ;7524
004578  4638              MOV      r0,r7                 ;7524
00457a  f7fffffe          BL       lc640_read_int
00457e  1c40              ADDS     r0,r0,#1              ;7525
004580  b200              SXTH     r0,r0                 ;7525
004582  f8a40066          STRH     r0,[r4,#0x66]         ;7525
004586  4ae5              LDR      r2,|L1.18716|
004588  f9b61000          LDRSH    r1,[r6,#0]            ;7526  ; FORVARDBPSCHHOUR
00458c  f9b22000          LDRSH    r2,[r2,#0]            ;7526  ; NUMIST
004590  4351              MULS     r1,r2,r1              ;7526
004592  4281              CMP      r1,r0                 ;7526
004594  dc01              BGT      |L1.17818|
004596  f8a45066          STRH     r5,[r4,#0x66]         ;7528
                  |L1.17818|
00459a  f9b41066          LDRSH    r1,[r4,#0x66]         ;7530  ; numOfForvardBps_hourCnt
00459e  4638              MOV      r0,r7                 ;7530
0045a0  f7fffffe          BL       lc640_write_int
                  |L1.17828|
0045a4  f9b40066          LDRSH    r0,[r4,#0x66]         ;7533  ; numOfForvardBps_hourCnt
0045a8  f9b61000          LDRSH    r1,[r6,#0]            ;7533  ; FORVARDBPSCHHOUR
0045ac  fb90f0f1          SDIV     r0,r0,r1              ;7533
0045b0  7660              STRB     r0,[r4,#0x19]         ;7533
0045b2  e7d6              B        |L1.17762|
;;;7538   
                          ENDP

                  numOfForvardBps_init PROC
;;;7539   //-----------------------------------------------
;;;7540   void	numOfForvardBps_init(void)			//         
0045b4  b510              PUSH     {r4,lr}
;;;7541   {									//    -   
;;;7542   lc640_write_int(EE_FORVBPSHOURCNT,0);
0045b6  2100              MOVS     r1,#0
0045b8  f44f7094          MOV      r0,#0x128
0045bc  f7fffffe          BL       lc640_write_int
;;;7543   numOfForvardBps_minCnt=58;
0045c0  49d4              LDR      r1,|L1.18708|
0045c2  203a              MOVS     r0,#0x3a
0045c4  76c8              STRB     r0,[r1,#0x1b]
;;;7544   }
0045c6  bd10              POP      {r4,pc}
;;;7545   
                          ENDP

                  outVoltContrHndl PROC
;;;7546   //-----------------------------------------------
;;;7547   void outVoltContrHndl(void)
0045c8  b570              PUSH     {r4-r6,lr}
;;;7548   { 
;;;7549   if((load_U>U_OUT_KONTR_MAX)||(load_U<U_OUT_KONTR_MIN))
0045ca  4c9c              LDR      r4,|L1.18492|
0045cc  48d4              LDR      r0,|L1.18720|
;;;7550   	{
;;;7551   	outVoltContrHndlCnt_=0;
;;;7552   	if(outVoltContrHndlCnt<U_OUT_KONTR_DELAY)
0045ce  4ad5              LDR      r2,|L1.18724|
0045d0  f9b41000          LDRSH    r1,[r4,#0]            ;7549  ; load_U
0045d4  f9b06000          LDRSH    r6,[r0,#0]            ;7549  ; U_OUT_KONTR_MAX
0045d8  2500              MOVS     r5,#0                 ;7551
0045da  f9b20000          LDRSH    r0,[r2,#0]
0045de  4bd2              LDR      r3,|L1.18728|
0045e0  42b1              CMP      r1,r6                 ;7549
0045e2  dc04              BGT      |L1.17902|
0045e4  4ed1              LDR      r6,|L1.18732|
0045e6  f9b66000          LDRSH    r6,[r6,#0]            ;7549  ; U_OUT_KONTR_MIN
0045ea  42b1              CMP      r1,r6                 ;7549
0045ec  da0e              BGE      |L1.17932|
                  |L1.17902|
0045ee  801d              STRH     r5,[r3,#0]            ;7551
0045f0  49cf              LDR      r1,|L1.18736|
0045f2  f9b11000          LDRSH    r1,[r1,#0]  ; U_OUT_KONTR_DELAY
0045f6  4288              CMP      r0,r1
0045f8  da19              BGE      |L1.17966|
;;;7553   		{
;;;7554   		outVoltContrHndlCnt++;
0045fa  1c40              ADDS     r0,r0,#1
0045fc  b200              SXTH     r0,r0
0045fe  8010              STRH     r0,[r2,#0]
;;;7555   		if(outVoltContrHndlCnt==U_OUT_KONTR_DELAY)
004600  4288              CMP      r0,r1
004602  d114              BNE      |L1.17966|
;;;7556   			{
;;;7557   			avar_uout_hndl(1);
004604  2001              MOVS     r0,#1
004606  f7fffffe          BL       avar_uout_hndl
00460a  e010              B        |L1.17966|
                  |L1.17932|
;;;7558   			}
;;;7559   		}
;;;7560   	}
;;;7561   else
;;;7562   	{
;;;7563   	if(outVoltContrHndlCnt)
00460c  b178              CBZ      r0,|L1.17966|
;;;7564   		{
;;;7565   		if(outVoltContrHndlCnt_<5)
00460e  f9b30000          LDRSH    r0,[r3,#0]  ; outVoltContrHndlCnt_
004612  2805              CMP      r0,#5
004614  da0b              BGE      |L1.17966|
;;;7566   			{
;;;7567   			outVoltContrHndlCnt_++;
004616  1c40              ADDS     r0,r0,#1
004618  b200              SXTH     r0,r0
00461a  8018              STRH     r0,[r3,#0]
;;;7568   			if(outVoltContrHndlCnt_>=5)
00461c  2805              CMP      r0,#5
00461e  db06              BLT      |L1.17966|
;;;7569   				{
;;;7570   				outVoltContrHndlCnt=0;
004620  8015              STRH     r5,[r2,#0]
;;;7571   				if(uout_av)avar_uout_hndl(0);
004622  48c4              LDR      r0,|L1.18740|
004624  7800              LDRB     r0,[r0,#0]  ; uout_av
004626  b110              CBZ      r0,|L1.17966|
004628  2000              MOVS     r0,#0
00462a  f7fffffe          BL       avar_uout_hndl
                  |L1.17966|
;;;7572   				}
;;;7573   			}
;;;7574   		}
;;;7575   	}
;;;7576   
;;;7577   if (load_U<(USIGN*10)) 
00462e  48c2              LDR      r0,|L1.18744|
004630  f9b41000          LDRSH    r1,[r4,#0]  ; load_U
004634  f9b00000          LDRSH    r0,[r0,#0]  ; USIGN
004638  eb000080          ADD      r0,r0,r0,LSL #2
00463c  ebb10f40          CMP      r1,r0,LSL #1
004640  da0b              BGE      |L1.18010|
;;;7578   	{
;;;7579   	if(!bSILENT)
004642  48be              LDR      r0,|L1.18748|
004644  6800              LDR      r0,[r0,#0]  ; bSILENT
004646  2800              CMP      r0,#0
004648  d107              BNE      |L1.18010|
;;;7580   		{
;;;7581   		mess_send(MESS2RELE_HNDL,PARAM_RELE_BAT_IS_DISCHARGED,1,20);
00464a  e8bd4070          POP      {r4-r6,lr}
00464e  2314              MOVS     r3,#0x14
004650  2201              MOVS     r2,#1
004652  2172              MOVS     r1,#0x72
004654  20d2              MOVS     r0,#0xd2
004656  f7ffbffe          B.W      mess_send
                  |L1.18010|
;;;7582   		}
;;;7583   
;;;7584   	//bU_BAT2REL_AV_BAT=1;
;;;7585   	}
;;;7586   
;;;7587   
;;;7588   }
00465a  bd70              POP      {r4-r6,pc}
;;;7589   
                          ENDP

                  vent_resurs_hndl PROC
;;;7590   //-----------------------------------------------
;;;7591   void vent_resurs_hndl(void)
00465c  e92d41f0          PUSH     {r4-r8,lr}
;;;7592   {
;;;7593   char i;
;;;7594   char crc_in,crc_eval;
;;;7595   
;;;7596   for(i=0;i<NUMIST;i++)
004660  2200              MOVS     r2,#0
004662  48ae              LDR      r0,|L1.18716|
;;;7597   	{
;;;7598   	if((bps[i]._buff[7]&0xc0)==0x00)
004664  4fb6              LDR      r7,|L1.18752|
004666  f9b06000          LDRSH    r6,[r0,#0]            ;7596
00466a  e066              B        |L1.18234|
                  |L1.18028|
00466c  ebc200c2          RSB      r0,r2,r2,LSL #3
004670  eb001002          ADD      r0,r0,r2,LSL #4
004674  eb070080          ADD      r0,r7,r0,LSL #2
004678  7b41              LDRB     r1,[r0,#0xd]
00467a  098b              LSRS     r3,r1,#6
00467c  d006              BEQ      |L1.18060|
;;;7599   		{
;;;7600   		bps[i]._vent_resurs_temp[0]=bps[i]._buff[7];
;;;7601   		}
;;;7602   	else if((bps[i]._buff[7]&0xc0)==0x40)
00467e  2301              MOVS     r3,#1
004680  ebb31f91          CMP      r3,r1,LSR #6
004684  d105              BNE      |L1.18066|
;;;7603   		{
;;;7604   		bps[i]._vent_resurs_temp[1]=bps[i]._buff[7];
004686  f8801055          STRB     r1,[r0,#0x55]
00468a  e00f              B        |L1.18092|
                  |L1.18060|
00468c  f8801054          STRB     r1,[r0,#0x54]         ;7600
004690  e00c              B        |L1.18092|
                  |L1.18066|
;;;7605   		}
;;;7606   	else if((bps[i]._buff[7]&0xc0)==0x80)
004692  2302              MOVS     r3,#2
004694  ebb31f91          CMP      r3,r1,LSR #6
004698  d102              BNE      |L1.18080|
;;;7607   		{
;;;7608   		bps[i]._vent_resurs_temp[2]=bps[i]._buff[7];
00469a  f8801056          STRB     r1,[r0,#0x56]
00469e  e005              B        |L1.18092|
                  |L1.18080|
;;;7609   		}
;;;7610   	else if((bps[i]._buff[7]&0xc0)==0xc0)
0046a0  2303              MOVS     r3,#3
0046a2  ebb31f91          CMP      r3,r1,LSR #6
0046a6  d101              BNE      |L1.18092|
;;;7611   		{
;;;7612   		bps[i]._vent_resurs_temp[3]=bps[i]._buff[7];
0046a8  f8801057          STRB     r1,[r0,#0x57]
                  |L1.18092|
;;;7613   		}
;;;7614   	crc_in=0;
;;;7615   	crc_in|=(bps[i]._vent_resurs_temp[0]&0x30)>>4;
0046ac  f8101f54          LDRB     r1,[r0,#0x54]!
0046b0  f3c11401          UBFX     r4,r1,#4,#2
;;;7616   	crc_in|=(bps[i]._vent_resurs_temp[1]&0x30)>>2;
0046b4  7843              LDRB     r3,[r0,#1]
0046b6  f0030530          AND      r5,r3,#0x30
0046ba  ea440595          ORR      r5,r4,r5,LSR #2
;;;7617   	crc_in|=(bps[i]._vent_resurs_temp[2]&0x30);
0046be  7884              LDRB     r4,[r0,#2]
0046c0  f0040c30          AND      r12,r4,#0x30
0046c4  ea4c0c05          ORR      r12,r12,r5
;;;7618   	crc_in|=(bps[i]._vent_resurs_temp[3]&0x30)<<2;
0046c8  78c5              LDRB     r5,[r0,#3]
0046ca  f1a00054          SUB      r0,r0,#0x54
0046ce  f0050830          AND      r8,r5,#0x30
0046d2  ea4c0c88          ORR      r12,r12,r8,LSL #2
;;;7619   
;;;7620   	crc_eval =bps[i]._vent_resurs_temp[0]&0x0f;
0046d6  f001010f          AND      r1,r1,#0xf
;;;7621   	crc_eval^=bps[i]._vent_resurs_temp[1]&0x0f;
0046da  f003030f          AND      r3,r3,#0xf
0046de  ea830801          EOR      r8,r3,r1
;;;7622   	crc_eval^=bps[i]._vent_resurs_temp[2]&0x0f;
0046e2  f004040f          AND      r4,r4,#0xf
0046e6  ea840808          EOR      r8,r4,r8
;;;7623   	crc_eval^=bps[i]._vent_resurs_temp[3]&0x0f;
0046ea  f005050f          AND      r5,r5,#0xf
0046ee  ea850808          EOR      r8,r5,r8
;;;7624   
;;;7625   	if(crc_eval==crc_in)
0046f2  45e0              CMP      r8,r12
0046f4  d10c              BNE      |L1.18192|
;;;7626   		{
;;;7627   		unsigned short temp_US;
;;;7628   		temp_US=0;
;;;7629   
;;;7630   		temp_US|=(bps[i]._vent_resurs_temp[3]&0x0f);
;;;7631   		temp_US<<=4;
0046f6  012d              LSLS     r5,r5,#4
;;;7632   		temp_US|=(bps[i]._vent_resurs_temp[2]&0x0f);
0046f8  432c              ORRS     r4,r4,r5
;;;7633   		temp_US<<=4;
0046fa  0124              LSLS     r4,r4,#4
;;;7634   		temp_US|=(bps[i]._vent_resurs_temp[1]&0x0f);
0046fc  4323              ORRS     r3,r3,r4
;;;7635   		temp_US<<=4;
0046fe  051b              LSLS     r3,r3,#20
004700  0c1b              LSRS     r3,r3,#16
;;;7636   		temp_US|=(bps[i]._vent_resurs_temp[0]&0x0f);
004702  4319              ORRS     r1,r1,r3
;;;7637   
;;;7638   		if(bps[i]._vent_resurs!=temp_US)bps[i]._vent_resurs=temp_US;
004704  f8b03058          LDRH     r3,[r0,#0x58]
004708  428b              CMP      r3,r1
00470a  d001              BEQ      |L1.18192|
00470c  f8a01058          STRH     r1,[r0,#0x58]
                  |L1.18192|
;;;7639   		}
;;;7640   
;;;7641   	if(bps[i]._vent_resurs>TVENTMAX*10)
004710  498c              LDR      r1,|L1.18756|
004712  f8b03058          LDRH     r3,[r0,#0x58]
004716  f9b11000          LDRSH    r1,[r1,#0]  ; TVENTMAX
00471a  eb010181          ADD      r1,r1,r1,LSL #2
00471e  ebb30f41          CMP      r3,r1,LSL #1
004722  dd04              BLE      |L1.18222|
;;;7642   		{
;;;7643   		bps[i]._av|=(1<<4);
004724  7841              LDRB     r1,[r0,#1]
004726  f0410110          ORR      r1,r1,#0x10
00472a  7041              STRB     r1,[r0,#1]
00472c  e003              B        |L1.18230|
                  |L1.18222|
;;;7644   		}
;;;7645   	else bps[i]._av&=~(1<<4);
00472e  7841              LDRB     r1,[r0,#1]
004730  f0210110          BIC      r1,r1,#0x10
004734  7041              STRB     r1,[r0,#1]
                  |L1.18230|
004736  1c52              ADDS     r2,r2,#1              ;7596
004738  b2d2              UXTB     r2,r2                 ;7596
                  |L1.18234|
00473a  42b2              CMP      r2,r6                 ;7596
00473c  db96              BLT      |L1.18028|
;;;7646   	}
;;;7647   }
00473e  e710              B        |L1.17762|
;;;7648   
                          ENDP

                  vent_hndl PROC
;;;7649   //-----------------------------------------------
;;;7650   void vent_hndl(void)
004740  e92d4ff0          PUSH     {r4-r11,lr}
;;;7651   {
004744  b087              SUB      sp,sp,#0x1c
;;;7652   if(RELEVENTSIGN==rvsAKB)
004746  4880              LDR      r0,|L1.18760|
;;;7653   	{
;;;7654   	if(vent_stat==0)
004748  4c72              LDR      r4,|L1.18708|
;;;7655   		{
;;;7656   		if	(
;;;7657   			(BAT_IS_ON[0]==bisON)&&((bat[0]._Tb>TVENTON)||(bat[0]._nd))
00474a  4980              LDR      r1,|L1.18764|
;;;7658   			||
;;;7659   			(BAT_IS_ON[1]==bisON)&&((bat[1]._Tb>TVENTON)||(bat[1]._nd))
;;;7660   			)
;;;7661   			{
;;;7662   			vent_stat=1;
;;;7663   			}
;;;7664   		}
;;;7665   	else if(vent_stat==1)
;;;7666   		{
;;;7667   		if	(
;;;7668   			((BAT_IS_ON[0]!=bisON)||((BAT_IS_ON[0]==bisON)&&(bat[0]._Tb<TVENTOFF)&&(!bat[0]._nd)))
00474c  4a80              LDR      r2,|L1.18768|
00474e  7800              LDRB     r0,[r0,#0]            ;7652  ; RELEVENTSIGN
004750  f9943000          LDRSB    r3,[r4,#0]            ;7654
004754  f9b11000          LDRSH    r1,[r1,#0]            ;7657
004758  f9b22000          LDRSH    r2,[r2,#0]
00475c  b140              CBZ      r0,|L1.18288|
;;;7669   			&&
;;;7670   			((BAT_IS_ON[1]!=bisON)||((BAT_IS_ON[1]==bisON)&&(bat[1]._Tb<TVENTOFF)&&(!bat[1]._nd)))
;;;7671   			)
;;;7672   			{
;;;7673   			vent_stat=0;
;;;7674   			}
;;;7675   		}
;;;7676   	}
;;;7677   else if(RELEVENTSIGN==rvsBPS)
00475e  2802              CMP      r0,#2
004760  d039              BEQ      |L1.18390|
;;;7678   	{
;;;7679   /*	if	(
;;;7680   		(((bps[0]._flags_tm&0x06)||(bps[0]._cnt>=30)))||
;;;7681   		(((bps[1]._flags_tm&0x06)||(bps[1]._cnt>=30))&&(NUMIST>1))||
;;;7682   		(((bps[2]._flags_tm&0x06)||(bps[2]._cnt>=30))&&(NUMIST>2))||
;;;7683   		(((bps[3]._flags_tm&0x06)||(bps[3]._cnt>=30))&&(NUMIST>3))||
;;;7684   		(((bps[4]._flags_tm&0x06)||(bps[4]._cnt>=30))&&(NUMIST>4))||
;;;7685   		(((bps[5]._flags_tm&0x06)||(bps[5]._cnt>=30))&&(NUMIST>5))||
;;;7686   		(((bps[6]._flags_tm&0x06)||(bps[6]._cnt>=30))&&(NUMIST>6))
;;;7687   		)
;;;7688   		{
;;;7689   		vent_stat=1;
;;;7690   		}
;;;7691   	else vent_stat=0;
;;;7692   	*/
;;;7693   
;;;7694   	if	(
;;;7695   		((NUMIST)&&((bps[0]._Ti>TVENTON)||(bps[0]._cnt>=30)))
;;;7696   		||
;;;7697   		((NUMIST>1)&&((bps[1]._Ti>TVENTON)||(bps[1]._cnt>=30)))
;;;7698   		||
;;;7699   		((NUMIST>2)&&((bps[2]._Ti>TVENTON)||(bps[2]._cnt>=30)))
;;;7700   		||
;;;7701   		((NUMIST>3)&&((bps[3]._Ti>TVENTON)||(bps[3]._cnt>=30)))
;;;7702   		||
;;;7703   		((NUMIST>4)&&((bps[4]._Ti>TVENTON)||(bps[4]._cnt>=30)))
;;;7704   		||
;;;7705   		((NUMIST>5)&&((bps[5]._Ti>TVENTON)||(bps[5]._cnt>=30)))
;;;7706   		||
;;;7707   		((NUMIST>6)&&((bps[6]._Ti>TVENTON)||(bps[6]._cnt>=30)))
;;;7708   		||
;;;7709   		((NUMIST>7)&&((bps[7]._Ti>TVENTON)||(bps[7]._cnt>=30)))
;;;7710   		)
;;;7711   		{
;;;7712   		vent_stat=1;
;;;7713   		}
;;;7714   	else if(vent_stat==1)
;;;7715   		{
;;;7716   		if	(
;;;7717   			((!NUMIST)||((NUMIST)&&(bps[0]._Ti<TVENTOFF)&&(bps[0]._cnt<10)))
;;;7718   			&&
;;;7719   			((NUMIST<2)||((NUMIST>=2)&&(bps[1]._Ti<TVENTOFF)&&(bps[1]._cnt<10)))
;;;7720   			&&
;;;7721   			((NUMIST<3)||((NUMIST>=3)&&(bps[2]._Ti<TVENTOFF)&&(bps[2]._cnt<10)))
;;;7722   			&&
;;;7723   			((NUMIST<4)||((NUMIST>=4)&&(bps[3]._Ti<TVENTOFF)&&(bps[3]._cnt<10)))
;;;7724   			&&
;;;7725   			((NUMIST<5)||((NUMIST>=5)&&(bps[4]._Ti<TVENTOFF)&&(bps[4]._cnt<10)))
;;;7726   			&&
;;;7727   			((NUMIST<6)||((NUMIST>=6)&&(bps[5]._Ti<TVENTOFF)&&(bps[5]._cnt<10)))
;;;7728   			&&
;;;7729   			((NUMIST<7)||((NUMIST>=7)&&(bps[6]._Ti<TVENTOFF)&&(bps[6]._cnt<10)))
;;;7730   			&&
;;;7731   			((NUMIST<8)||((NUMIST>=8)&&(bps[7]._Ti<TVENTOFF)&&(bps[7]._cnt<10)))
;;;7732   			)
;;;7733   			{
;;;7734   			vent_stat=0;
;;;7735   			}
;;;7736   		}
;;;7737   	}
;;;7738   else if(RELEVENTSIGN==rvsEXT)
004762  2801              CMP      r0,#1
004764  d064              BEQ      |L1.18480|
;;;7739   	{
;;;7740   	if	(
;;;7741   		((NUMDT)&&((t_ext[0]>TVENTON)||(ND_EXT[0])))
;;;7742   		||
;;;7743   		((NUMDT>1)&&((t_ext[1]>TVENTON)||(ND_EXT[1])))
;;;7744   		||
;;;7745   		((NUMDT>2)&&((t_ext[2]>TVENTON)||(ND_EXT[2])))
;;;7746   		)
;;;7747   		{
;;;7748   		vent_stat=1;
;;;7749   		}
;;;7750   	else if(vent_stat==1)
;;;7751   		{
;;;7752   		if	(
;;;7753   			((!NUMDT)||((NUMDT)&&(t_ext[0]<TVENTOFF)&&(!ND_EXT[0])))
;;;7754   			&&
;;;7755   			((NUMDT<2)||((NUMDT>=2)&&(t_ext[1]<TVENTOFF)&&(!ND_EXT[1])))
;;;7756   			&&
;;;7757   			((NUMDT<3)||((NUMDT>=3)&&(t_ext[2]<TVENTOFF)&&(!ND_EXT[2])))
;;;7758   			)
;;;7759   			{
;;;7760   			vent_stat=0;
;;;7761   			}
;;;7762   		}
;;;7763   	}
;;;7764   else vent_stat=1;
004766  2001              MOVS     r0,#1
004768  7020              STRB     r0,[r4,#0]
                  |L1.18282|
;;;7765   }
00476a  b007              ADD      sp,sp,#0x1c
00476c  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.18288|
004770  4f78              LDR      r7,|L1.18772|
004772  f8df81e4          LDR      r8,|L1.18776|
004776  f9b7000a          LDRSH    r0,[r7,#0xa]          ;7657
00477a  7b3d              LDRB     r5,[r7,#0xc]          ;7657
00477c  f9b76056          LDRSH    r6,[r7,#0x56]         ;7659
004780  f898c000          LDRB     r12,[r8,#0]           ;7656
004784  f8977058          LDRB     r7,[r7,#0x58]         ;7659
004788  f8988001          LDRB     r8,[r8,#1]            ;7659
00478c  b12b              CBZ      r3,|L1.18330|
00478e  2b01              CMP      r3,#1                 ;7665
004790  d1eb              BNE      |L1.18282|
004792  f1bc0f55          CMP      r12,#0x55             ;7667
004796  d114              BNE      |L1.18370|
004798  e00f              B        |L1.18362|
                  |L1.18330|
00479a  f1bc0f55          CMP      r12,#0x55             ;7656
00479e  d102              BNE      |L1.18342|
0047a0  4288              CMP      r0,r1                 ;7657
0047a2  dc07              BGT      |L1.18356|
0047a4  b935              CBNZ     r5,|L1.18356|
                  |L1.18342|
0047a6  f1b80f55          CMP      r8,#0x55              ;7659
0047aa  d1de              BNE      |L1.18282|
0047ac  428e              CMP      r6,r1                 ;7659
0047ae  dc01              BGT      |L1.18356|
0047b0  2f00              CMP      r7,#0                 ;7659
0047b2  d0da              BEQ      |L1.18282|
                  |L1.18356|
0047b4  2001              MOVS     r0,#1                 ;7662
0047b6  7020              STRB     r0,[r4,#0]            ;7662
0047b8  e7d7              B        |L1.18282|
                  |L1.18362|
0047ba  4290              CMP      r0,r2                 ;7668
0047bc  dad5              BGE      |L1.18282|
0047be  2d00              CMP      r5,#0                 ;7668
0047c0  d1d3              BNE      |L1.18282|
                  |L1.18370|
0047c2  f1b80f55          CMP      r8,#0x55              ;7670
0047c6  d103              BNE      |L1.18384|
0047c8  4296              CMP      r6,r2                 ;7670
0047ca  dace              BGE      |L1.18282|
0047cc  2f00              CMP      r7,#0                 ;7670
0047ce  d1cc              BNE      |L1.18282|
                  |L1.18384|
0047d0  2000              MOVS     r0,#0                 ;7673
0047d2  7020              STRB     r0,[r4,#0]            ;7673
0047d4  e7c9              B        |L1.18282|
                  |L1.18390|
0047d6  4e5a              LDR      r6,|L1.18752|
0047d8  4850              LDR      r0,|L1.18716|
0047da  6ab5              LDR      r5,[r6,#0x28]         ;7695
0047dc  f9b00000          LDRSH    r0,[r0,#0]            ;7694  ; NUMIST
0047e0  78f6              LDRB     r6,[r6,#3]            ;7695
0047e2  b118              CBZ      r0,|L1.18412|
0047e4  428d              CMP      r5,r1                 ;7695
0047e6  dc24              BGT      |L1.18482|
0047e8  2e1e              CMP      r6,#0x1e              ;7695
0047ea  d222              BCS      |L1.18482|
                  |L1.18412|
0047ec  f8dfc150          LDR      r12,|L1.18752|
0047f0  2801              CMP      r0,#1                 ;7697
0047f2  f8dc7084          LDR      r7,[r12,#0x84]        ;7697
0047f6  f89cc05f          LDRB     r12,[r12,#0x5f]       ;7697
0047fa  f8cdc018          STR      r12,[sp,#0x18]        ;7697
0047fe  dd06              BLE      |L1.18446|
004800  428f              CMP      r7,r1                 ;7697
004802  dc16              BGT      |L1.18482|
004804  f8ddc018          LDR      r12,[sp,#0x18]        ;7697
004808  f1bc0f1e          CMP      r12,#0x1e             ;7697
00480c  d211              BCS      |L1.18482|
                  |L1.18446|
00480e  f8dfc130          LDR      r12,|L1.18752|
004812  2802              CMP      r0,#2                 ;7699
004814  f8dc80e0          LDR      r8,[r12,#0xe0]        ;7699
004818  f8cd8014          STR      r8,[sp,#0x14]         ;7699
00481c  f89cc0bb          LDRB     r12,[r12,#0xbb]       ;7699
004820  f8cdc010          STR      r12,[sp,#0x10]        ;7699
004824  dd06              BLE      |L1.18484|
004826  f8ddc014          LDR      r12,[sp,#0x14]        ;7699
00482a  458c              CMP      r12,r1                ;7699
00482c  dc01              BGT      |L1.18482|
00482e  e095              B        |L1.18780|
                  |L1.18480|
004830  e12a              B        |L1.19080|
                  |L1.18482|
004832  e0e9              B        |L1.18952|
                  |L1.18484|
004834  e097              B        |L1.18790|
004836  0000              DCW      0x0000
                  |L1.18488|
                          DCD      speedChrgAvtEn
                  |L1.18492|
                          DCD      load_U
                  |L1.18496|
                          DCD      u_necc
                  |L1.18500|
                          DCD      speedChrgDU
                  |L1.18504|
                          DCD      Ib_ips_termokompensat
                  |L1.18508|
                          DCD      IZMAX
                  |L1.18512|
                          DCD      speedChrgBlckSrc
                  |L1.18516|
                          DCD      speedChrgBlckLog
                  |L1.18520|
                          DCD      ||.bss||+0x400
                  |L1.18524|
                          DCD      speedChrgShowCnt
                  |L1.18528|
004860  20202020          DCB      "                    ",0
004864  20202020
004868  20202020
00486c  20202020
004870  20202020
004874  00      
004875  00                DCB      0
004876  00                DCB      0
004877  00                DCB      0
                  |L1.18552|
004878  20202020          DCB      "     ",199,192,207,208,197,217,197,205,"!!!    ",0
00487c  20c7c0cf
004880  d0c5d9c5
004884  cd212121
004888  20202020
00488c  00      
00488d  00                DCB      0
00488e  00                DCB      0
00488f  00                DCB      0
                  |L1.18576|
004890  20202020          DCB      "       ",199,192,208,223,196,"        ",0
004894  202020c7
004898  c0d0dfc4
00489c  20202020
0048a0  20202020
0048a4  00      
0048a5  00                DCB      0
0048a6  00                DCB      0
0048a7  00                DCB      0
                  |L1.18600|
0048a8  20202020          DCB      "     ",211,209,202,206,208,197,205,205,219,201,"     ",0
0048ac  20d3d1ca
0048b0  ced0c5cd
0048b4  cddbc920
0048b8  20202020
0048bc  00      
0048bd  00                DCB      0
0048be  00                DCB      0
0048bf  00                DCB      0
                  |L1.18624|
                          DCD      speedChIsOn
                  |L1.18628|
                          DCD      speedChrgBlckStat
                  |L1.18632|
0048c8  20202020          DCB      "    ",231,224,225,235,238,234,232,240,238,226,224,237,"!"
0048cc  e7e0e1eb
0048d0  eeeae8f0
0048d4  eee2e0ed
0048d8  21      
0048d9  20202000          DCB      "   ",0
0048dd  00                DCB      0
0048de  00                DCB      0
0048df  00                DCB      0
                  |L1.18656|
0048e0  20202020          DCB      "       ",231,224,240,255,228,"        ",0
0048e4  202020e7
0048e8  e0f0ffe4
0048ec  20202020
0048f0  20202020
0048f4  00      
0048f5  00                DCB      0
0048f6  00                DCB      0
0048f7  00                DCB      0
                  |L1.18680|
0048f8  20202020          DCB      "     ",211,241,234,238,240,229,237,237,251,233,"     ",0
0048fc  20d3f1ea
004900  eef0e5ed
004904  edfbe920
004908  20202020
00490c  00      
00490d  00                DCB      0
00490e  00                DCB      0
00490f  00                DCB      0
                  |L1.18704|
                          DCD      speedChTimeCnt
                  |L1.18708|
                          DCD      ||area_number.18||
                  |L1.18712|
                          DCD      FORVARDBPSCHHOUR
                  |L1.18716|
                          DCD      NUMIST
                  |L1.18720|
                          DCD      U_OUT_KONTR_MAX
                  |L1.18724|
                          DCD      outVoltContrHndlCnt
                  |L1.18728|
                          DCD      outVoltContrHndlCnt_
                  |L1.18732|
                          DCD      U_OUT_KONTR_MIN
                  |L1.18736|
                          DCD      U_OUT_KONTR_DELAY
                  |L1.18740|
                          DCD      uout_av
                  |L1.18744|
                          DCD      USIGN
                  |L1.18748|
                          DCD      bSILENT
                  |L1.18752|
                          DCD      bps
                  |L1.18756|
                          DCD      TVENTMAX
                  |L1.18760|
                          DCD      RELEVENTSIGN
                  |L1.18764|
                          DCD      TVENTON
                  |L1.18768|
                          DCD      TVENTOFF
                  |L1.18772|
                          DCD      bat
                  |L1.18776|
                          DCD      BAT_IS_ON
                  |L1.18780|
00495c  f8ddc010          LDR      r12,[sp,#0x10]        ;7699
004960  f1bc0f1e          CMP      r12,#0x1e             ;7699
004964  d250              BCS      |L1.18952|
                  |L1.18790|
004966  f8dfc1a8          LDR      r12,|L1.19216|
00496a  2803              CMP      r0,#3                 ;7701
00496c  f8dc813c          LDR      r8,[r12,#0x13c]       ;7701
004970  f8cd800c          STR      r8,[sp,#0xc]          ;7701
004974  f89cc117          LDRB     r12,[r12,#0x117]      ;7701
004978  f8cdc008          STR      r12,[sp,#8]           ;7701
00497c  dd08              BLE      |L1.18832|
00497e  f8ddc00c          LDR      r12,[sp,#0xc]         ;7701
004982  458c              CMP      r12,r1                ;7701
004984  dc40              BGT      |L1.18952|
004986  f8ddc008          LDR      r12,[sp,#8]           ;7701
00498a  f1bc0f1e          CMP      r12,#0x1e             ;7701
00498e  d23b              BCS      |L1.18952|
                  |L1.18832|
004990  f8df817c          LDR      r8,|L1.19216|
004994  2804              CMP      r0,#4                 ;7703
004996  f8d8c198          LDR      r12,[r8,#0x198]       ;7703
00499a  f8988173          LDRB     r8,[r8,#0x173]        ;7703
00499e  f8cd8004          STR      r8,[sp,#4]            ;7703
0049a2  dd06              BLE      |L1.18866|
0049a4  458c              CMP      r12,r1                ;7703
0049a6  dc2f              BGT      |L1.18952|
0049a8  f8dd8004          LDR      r8,[sp,#4]            ;7703
0049ac  f1b80f1e          CMP      r8,#0x1e              ;7703
0049b0  d22a              BCS      |L1.18952|
                  |L1.18866|
0049b2  f8df915c          LDR      r9,|L1.19216|
0049b6  2805              CMP      r0,#5                 ;7705
0049b8  f8d981f4          LDR      r8,[r9,#0x1f4]        ;7705
0049bc  f89991cf          LDRB     r9,[r9,#0x1cf]        ;7705
0049c0  f8cd9000          STR      r9,[sp,#0]            ;7705
0049c4  dd06              BLE      |L1.18900|
0049c6  4588              CMP      r8,r1                 ;7705
0049c8  dc1e              BGT      |L1.18952|
0049ca  f8dd9000          LDR      r9,[sp,#0]            ;7705
0049ce  f1b90f1e          CMP      r9,#0x1e              ;7705
0049d2  d219              BCS      |L1.18952|
                  |L1.18900|
0049d4  f8dfa138          LDR      r10,|L1.19216|
0049d8  2806              CMP      r0,#6                 ;7707
0049da  f89ae22b          LDRB     lr,[r10,#0x22b]       ;7707
0049de  f8da9250          LDR      r9,[r10,#0x250]       ;7707
0049e2  dd04              BLE      |L1.18926|
0049e4  4589              CMP      r9,r1                 ;7707
0049e6  dc0f              BGT      |L1.18952|
0049e8  f1be0f1e          CMP      lr,#0x1e              ;7707
0049ec  d20c              BCS      |L1.18952|
                  |L1.18926|
0049ee  f8dfb120          LDR      r11,|L1.19216|
0049f2  2807              CMP      r0,#7                 ;7709
0049f4  f8dba2ac          LDR      r10,[r11,#0x2ac]      ;7709
0049f8  f89bb287          LDRB     r11,[r11,#0x287]      ;7709
0049fc  dd07              BLE      |L1.18958|
0049fe  458a              CMP      r10,r1                ;7709
004a00  dc02              BGT      |L1.18952|
004a02  f1bb0f1e          CMP      r11,#0x1e             ;7709
004a06  d302              BCC      |L1.18958|
                  |L1.18952|
004a08  2001              MOVS     r0,#1                 ;7712
004a0a  7020              STRB     r0,[r4,#0]            ;7712
                  |L1.18956|
004a0c  e6ad              B        |L1.18282|
                  |L1.18958|
004a0e  2b01              CMP      r3,#1                 ;7714
004a10  d1fc              BNE      |L1.18956|
004a12  b118              CBZ      r0,|L1.18972|
004a14  4295              CMP      r5,r2                 ;7717
004a16  daf9              BGE      |L1.18956|
004a18  2e0a              CMP      r6,#0xa               ;7717
004a1a  d2f7              BCS      |L1.18956|
                  |L1.18972|
004a1c  2802              CMP      r0,#2                 ;7719
004a1e  db04              BLT      |L1.18986|
004a20  4297              CMP      r7,r2                 ;7719
004a22  daf3              BGE      |L1.18956|
004a24  9906              LDR      r1,[sp,#0x18]         ;7719
004a26  290a              CMP      r1,#0xa               ;7719
004a28  d2f0              BCS      |L1.18956|
                  |L1.18986|
004a2a  2803              CMP      r0,#3                 ;7721
004a2c  db05              BLT      |L1.19002|
004a2e  9905              LDR      r1,[sp,#0x14]         ;7721
004a30  4291              CMP      r1,r2                 ;7721
004a32  daeb              BGE      |L1.18956|
004a34  9904              LDR      r1,[sp,#0x10]         ;7721
004a36  290a              CMP      r1,#0xa               ;7721
004a38  d2e8              BCS      |L1.18956|
                  |L1.19002|
004a3a  2804              CMP      r0,#4                 ;7723
004a3c  db05              BLT      |L1.19018|
004a3e  9903              LDR      r1,[sp,#0xc]          ;7723
004a40  4291              CMP      r1,r2                 ;7723
004a42  dae3              BGE      |L1.18956|
004a44  9902              LDR      r1,[sp,#8]            ;7723
004a46  290a              CMP      r1,#0xa               ;7723
004a48  d2e0              BCS      |L1.18956|
                  |L1.19018|
004a4a  2805              CMP      r0,#5                 ;7725
004a4c  db04              BLT      |L1.19032|
004a4e  4594              CMP      r12,r2                ;7725
004a50  dadc              BGE      |L1.18956|
004a52  9901              LDR      r1,[sp,#4]            ;7725
004a54  290a              CMP      r1,#0xa               ;7725
004a56  d2d9              BCS      |L1.18956|
                  |L1.19032|
004a58  2806              CMP      r0,#6                 ;7727
004a5a  db04              BLT      |L1.19046|
004a5c  4590              CMP      r8,r2                 ;7727
004a5e  dad5              BGE      |L1.18956|
004a60  9900              LDR      r1,[sp,#0]            ;7727
004a62  290a              CMP      r1,#0xa               ;7727
004a64  d2d2              BCS      |L1.18956|
                  |L1.19046|
004a66  2807              CMP      r0,#7                 ;7729
004a68  db04              BLT      |L1.19060|
004a6a  4591              CMP      r9,r2                 ;7729
004a6c  dace              BGE      |L1.18956|
004a6e  f1be0f0a          CMP      lr,#0xa               ;7729
004a72  d2cb              BCS      |L1.18956|
                  |L1.19060|
004a74  2808              CMP      r0,#8                 ;7731
004a76  db04              BLT      |L1.19074|
004a78  4592              CMP      r10,r2                ;7731
004a7a  dac7              BGE      |L1.18956|
004a7c  f1bb0f0a          CMP      r11,#0xa              ;7731
004a80  d2c4              BCS      |L1.18956|
                  |L1.19074|
004a82  2000              MOVS     r0,#0                 ;7734
004a84  7020              STRB     r0,[r4,#0]            ;7734
                  |L1.19078|
004a86  e670              B        |L1.18282|
                  |L1.19080|
004a88  4822              LDR      r0,|L1.19220|
004a8a  4d23              LDR      r5,|L1.19224|
004a8c  4e23              LDR      r6,|L1.19228|
004a8e  f9b00000          LDRSH    r0,[r0,#0]            ;7740  ; NUMDT
004a92  f9b55000          LDRSH    r5,[r5,#0]            ;7741
004a96  7836              LDRB     r6,[r6,#0]            ;7741
004a98  b110              CBZ      r0,|L1.19104|
004a9a  428d              CMP      r5,r1                 ;7741
004a9c  dc1d              BGT      |L1.19162|
004a9e  b9e6              CBNZ     r6,|L1.19162|
                  |L1.19104|
004aa0  4f1d              LDR      r7,|L1.19224|
004aa2  f8dfc078          LDR      r12,|L1.19228|
004aa6  2801              CMP      r0,#1                 ;7743
004aa8  f9b77002          LDRSH    r7,[r7,#2]            ;7743
004aac  f89cc001          LDRB     r12,[r12,#1]          ;7743
004ab0  dd04              BLE      |L1.19132|
004ab2  428f              CMP      r7,r1                 ;7743
004ab4  dc11              BGT      |L1.19162|
004ab6  f1bc0f00          CMP      r12,#0                ;7743
004aba  d10e              BNE      |L1.19162|
                  |L1.19132|
004abc  f8df8058          LDR      r8,|L1.19224|
004ac0  f8df9058          LDR      r9,|L1.19228|
004ac4  2802              CMP      r0,#2                 ;7745
004ac6  f9b88004          LDRSH    r8,[r8,#4]            ;7745
004aca  f8999002          LDRB     r9,[r9,#2]            ;7745
004ace  dd07              BLE      |L1.19168|
004ad0  4588              CMP      r8,r1                 ;7745
004ad2  dc02              BGT      |L1.19162|
004ad4  f1b90f00          CMP      r9,#0                 ;7745
004ad8  d002              BEQ      |L1.19168|
                  |L1.19162|
004ada  2001              MOVS     r0,#1                 ;7748
004adc  7020              STRB     r0,[r4,#0]            ;7748
004ade  e644              B        |L1.18282|
                  |L1.19168|
004ae0  2b01              CMP      r3,#1                 ;7750
004ae2  d193              BNE      |L1.18956|
004ae4  b118              CBZ      r0,|L1.19182|
004ae6  4295              CMP      r5,r2                 ;7753
004ae8  da90              BGE      |L1.18956|
004aea  2e00              CMP      r6,#0                 ;7753
004aec  d18e              BNE      |L1.18956|
                  |L1.19182|
004aee  2802              CMP      r0,#2                 ;7755
004af0  db04              BLT      |L1.19196|
004af2  4297              CMP      r7,r2                 ;7755
004af4  da8a              BGE      |L1.18956|
004af6  f1bc0f00          CMP      r12,#0                ;7755
004afa  d187              BNE      |L1.18956|
                  |L1.19196|
004afc  2803              CMP      r0,#3                 ;7757
004afe  db04              BLT      |L1.19210|
004b00  4590              CMP      r8,r2                 ;7757
004b02  dac0              BGE      |L1.19078|
004b04  f1b90f00          CMP      r9,#0                 ;7757
004b08  d1bd              BNE      |L1.19078|
                  |L1.19210|
004b0a  2000              MOVS     r0,#0                 ;7760
004b0c  7020              STRB     r0,[r4,#0]            ;7760
004b0e  e62c              B        |L1.18282|
;;;7766   
                          ENDP

                  |L1.19216|
                          DCD      bps
                  |L1.19220|
                          DCD      NUMDT
                  |L1.19224|
                          DCD      t_ext
                  |L1.19228|
                          DCD      ND_EXT

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  adc_buff
                          %        1024
                  adc_buff_
                          %        32
                  main_power_buffer
                          %        32

                          AREA ||area_number.4||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.4||, ||.bss||
                  adc_buff_max
                          %        24

                          AREA ||area_number.5||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.5||, ||.bss||
                  net_buff
                          %        64

                          AREA ||.constdata||, DATA, READONLY, ALIGN=0

                  sk_buff_KONTUR
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.8||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.8||, ||.constdata||
                  sk_buff_RSTKM
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.9||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.9||, ||.constdata||
                  sk_buff_GLONASS
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.10||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.10||, ||.constdata||
                  sk_buff_3U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.11||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.11||, ||.constdata||
                  sk_buff_6U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.12||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.12||, ||.constdata||
                  sk_buff_220
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.13||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.13||, ||.constdata||
                  sk_buff_TELECORE2015
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||.data||, DATA, ALIGN=1

                  adc_buff_min
000000  13881388          DCW      0x1388,0x1388
000004  13881388          DCW      0x1388,0x1388
000008  13881388          DCW      0x1388,0x1388
00000c  13881388          DCW      0x1388,0x1388
000010  13881388          DCW      0x1388,0x1388
                          DCDU     0x00000000

                          AREA ||area_number.15||, DATA, ALIGN=1

                          EXPORTAS ||area_number.15||, ||.data||
                  unet_buff_min
000000  1388              DCW      0x1388

                          AREA ||area_number.16||, DATA, ALIGN=0

                          EXPORTAS ||area_number.16||, ||.data||
                  adc_stat
000000  01                DCB      0x01

                          AREA ||area_number.17||, DATA, ALIGN=1

                          EXPORTAS ||area_number.17||, ||.data||
                  bat_ver_cnt
000000  0096              DCW      0x0096

                          AREA ||area_number.18||, DATA, ALIGN=2

                          EXPORTAS ||area_number.18||, ||.data||
                  vent_stat
000000  00                DCB      0x00
                  cntrlStatIsDownCnt
000001  00                DCB      0x00
                  adc_self_ch_cnt
000002  00                DCB      0x00
                  adc_ch_net
000003  00                DCB      0x00
                  adc_ch
000004  00                DCB      0x00
                  adc_ch_cnt
000005  00                DCB      0x00
                  adc_window_flag
000006  00                DCB      0x00
                  ch_cnt0
000007  00                DCB      0x00
                  b1Hz_ch
000008  00                DCB      0x00
                  i
000009  00                DCB      0x00
                  iiii
00000a  00                DCB      0x00
                  bAVG
00000b  00                DCB      0x00
                  avg_num
00000c  00                DCB      0x00
                  kb_full_ver
00000d  00                DCB      0x00
                  kb_start_ips
00000e  00                DCB      0x00
                  num_of_wrks_bps
00000f  00                DCB      0x00
                  num_necc_up
000010  00                DCB      0x00
                  num_necc_down
000011  00                DCB      0x00
                  sh_cnt0
000012  00                DCB      0x00
                  b1Hz_sh
000013  00                DCB      0x00
                  spc_stat
000014  00                DCB      0x00
                  spc_bat
000015  00                DCB      0x00
                  spc_phase
000016  00                DCB      0x00
                  bAVZ
000017  00                DCB      0x00
                  ke_start_stat
000018  00                DCB      0x00
                  numOfForvardBps
000019  00                DCB      0x00
                  numOfForvardBps_old
00001a  00                DCB      0x00
                  numOfForvardBps_minCnt
00001b  00                DCB      0x00
                  bPARALLEL_NOT_ENOUG
00001c  00                DCB      0x00
                  bPARALLEL_ENOUG
00001d  00                DCB      0x00
                  bPARALLEL
00001e  00                DCB      0x00
                  cntrl_hndl_plazma
00001f  00                DCB      0x00
                  cntrl_stat
000020  0258              DCW      0x0258
                  cntrl_stat_old
000022  0258              DCW      0x0258
                  avg_main_cnt
000024  0014              DCW      0x0014
                  num_necc_block_cnt
000026  0000              DCB      0x00,0x00
                  net_buff_
000028  0000              DCB      0x00,0x00
                  adc_result
00002a  0000              DCB      0x00,0x00
                  adc_gorb_cnt
00002c  0000              DCB      0x00,0x00
                  adc_zero_cnt
00002e  0000              DCB      0x00,0x00
                  adc_window_cnt
000030  0000              DCB      0x00,0x00
                  adc_net_buff_cnt
000032  0000              DCB      0x00,0x00
                  plazma_sk
000034  0000              DCB      0x00,0x00
                  cntrl_stat_new
000036  0000              DCB      0x00,0x00
                  Ibmax
000038  0000              DCB      0x00,0x00
                  IZMAX_
00003a  0000              DCB      0x00,0x00
                  Ubpsmax
00003c  0000              DCB      0x00,0x00
                  samokalibr_cnt
00003e  0000              DCB      0x00,0x00
                  main_kb_cnt
000040  0000              DCB      0x00,0x00
                  kb_cnt_1lev
000042  0000              DCB      0x00,0x00
                  kb_cnt_2lev
000044  0000              DCB      0x00,0x00
                  kb_start
000046  0000              DCB      0x00,0x00
                  ibat_ips
000048  0000              DCB      0x00,0x00
                  ibat_ips_
00004a  0000              DCB      0x00,0x00
                  bps_on_mask
00004c  0000              DCB      0x00,0x00
                  bps_off_mask
00004e  0000              DCB      0x00,0x00
                  vz_cnt_s
000050  0000              DCB      0x00,0x00
                  vz_cnt_s_
000052  0000              DCB      0x00,0x00
                  vz_cnt_h
000054  0000              DCB      0x00,0x00
                  vz_cnt_h_
000056  0000              DCB      0x00,0x00
                  cnt_end_ke
000058  0000              DCB      0x00,0x00
                  __ee_vz_cnt
00005a  0000              DCB      0x00,0x00
                  __ee_spc_stat
00005c  0000              DCB      0x00,0x00
                  __ee_spc_bat
00005e  0000              DCB      0x00,0x00
                  __ee_spc_phase
000060  0000              DCB      0x00,0x00
                  cntrl_stat_blok_cnt
000062  0000              DCB      0x00,0x00
                  cntrl_stat_blok_cnt_
000064  0000              DCB      0x00,0x00
                  numOfForvardBps_hourCnt
000066  0000              DCB      0x00,0x00
                  ibat
                          DCD      0x00000000
                  ibat_
                          DCD      0x00000000
                  i_avg_max
                          DCD      0x00000000
                  i_avg_min
                          DCD      0x00000000
                  i_avg_summ
                          DCD      0x00000000
                  i_avg
                          DCD      0x00000000
                  avg
                          DCD      0x00000000
                  cntrl_stat_blok_cnt_plus
                          DCD      0x00000000
                  cntrl_stat_blok_cnt_minus
                          DCD      0x00000000
                  plazma_inv
                          DCD      0x00000000
                  net_metr_buff_
                          DCD      0x00000000
000094  0000              DCB      0x00,0x00
                  adc_self_ch_buff
000096  0000              DCB      0x00,0x00
                          DCD      0x00000000
                  adc_self_ch_disp
                          DCD      0x00000000
0000a0  00000000          DCB      0x00,0x00,0x00,0x00
                  ke_date
                          %        8

                          AREA ||area_number.19||, DATA, ALIGN=1

                          EXPORTAS ||area_number.19||, ||.data||
                  unet_buff_max
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.20||, DATA, ALIGN=0

                          EXPORTAS ||area_number.20||, ||.data||
                  adc_cnt
000000  00                DCB      0x00

                          AREA ||area_number.21||, DATA, ALIGN=0

                          EXPORTAS ||area_number.21||, ||.data||
                  adc_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.22||, DATA, ALIGN=1

                          EXPORTAS ||area_number.22||, ||.data||
                  zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.23||, DATA, ALIGN=0

                          EXPORTAS ||area_number.23||, ||.data||
                  net_buff_cnt
000000  00                DCB      0x00

                          AREA ||area_number.24||, DATA, ALIGN=1

                          EXPORTAS ||area_number.24||, ||.data||
                  ADWR
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.25||, DATA, ALIGN=1

                          EXPORTAS ||area_number.25||, ||.data||
                  period_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.26||, DATA, ALIGN=1

                          EXPORTAS ||area_number.26||, ||.data||
                  non_zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.27||, DATA, ALIGN=0

                          EXPORTAS ||area_number.27||, ||.data||
                  rele_stat
000000  00                DCB      0x00

                          AREA ||area_number.28||, DATA, ALIGN=0

                          EXPORTAS ||area_number.28||, ||.data||
                  bRELE_OUT
000000  00                DCB      0x00

                          AREA ||area_number.29||, DATA, ALIGN=2

                          EXPORTAS ||area_number.29||, ||.data||
                  main_power_buffer_
                          DCD      0x00000000

                          AREA ||area_number.30||, DATA, ALIGN=1

                          EXPORTAS ||area_number.30||, ||.data||
                  main_power_buffer_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.31||, DATA, ALIGN=1

                          EXPORTAS ||area_number.31||, ||.data||
                  adc_buff_out_
                          DCDU     0x00000000
000004  0000              DCB      0x00,0x00

                          AREA ||area_number.32||, DATA, ALIGN=1

                          EXPORTAS ||area_number.32||, ||.data||
                  plazma_adc_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.33||, DATA, ALIGN=0

                          EXPORTAS ||area_number.33||, ||.data||
                  unh_cnt0
000000  00                DCB      0x00

                          AREA ||area_number.34||, DATA, ALIGN=0

                          EXPORTAS ||area_number.34||, ||.data||
                  unh_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.35||, DATA, ALIGN=0

                          EXPORTAS ||area_number.35||, ||.data||
                  b1Hz_unh
000000  00                DCB      0x00

                          AREA ||area_number.36||, DATA, ALIGN=0

                          EXPORTAS ||area_number.36||, ||.data||
                  ch_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.37||, DATA, ALIGN=0

                          EXPORTAS ||area_number.37||, ||.data||
                  b1_30Hz_ch
000000  00                DCB      0x00

                          AREA ||area_number.38||, DATA, ALIGN=0

                          EXPORTAS ||area_number.38||, ||.data||
                  ch_cnt2
000000  00                DCB      0x00

                          AREA ||area_number.39||, DATA, ALIGN=0

                          EXPORTAS ||area_number.39||, ||.data||
                  b1_10Hz_ch
000000  00                DCB      0x00

                          AREA ||area_number.40||, DATA, ALIGN=1

                          EXPORTAS ||area_number.40||, ||.data||
                  IZMAX_70
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.41||, DATA, ALIGN=1

                          EXPORTAS ||area_number.41||, ||.data||
                  IZMAX_130
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.42||, DATA, ALIGN=1

                          EXPORTAS ||area_number.42||, ||.data||
                  cntrl_stat_blck_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.43||, DATA, ALIGN=0

                          EXPORTAS ||area_number.43||, ||.data||
                  avg_cnt
000000  00                DCB      0x00

                          AREA ||area_number.44||, DATA, ALIGN=0

                          EXPORTAS ||area_number.44||, ||.data||
                  bps_all_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.45||, DATA, ALIGN=0

                          EXPORTAS ||area_number.45||, ||.data||
                  bps_mask_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.46||, DATA, ALIGN=0

                          EXPORTAS ||area_number.46||, ||.data||
                  bps_mask_on_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.47||, DATA, ALIGN=0

                          EXPORTAS ||area_number.47||, ||.data||
                  bps_hndl_2sec_cnt
000000  00                DCB      0x00

                          AREA ||area_number.48||, DATA, ALIGN=0

                          EXPORTAS ||area_number.48||, ||.data||
                  plazma_bat
000000  00                DCB      0x00

                          AREA ||area_number.49||, DATA, ALIGN=0

                          EXPORTAS ||area_number.49||, ||.data||
                  plazma_cntrl_stat
000000  00                DCB      0x00
