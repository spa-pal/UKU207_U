; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\avar_hndl.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\avar_hndl.d --feedback=.\EXE\UKU_220_IPS_TERMOKOMPENSAT.fed --cpu=Cortex-M3 --apcs=interwork -O1 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU_220_IPS_TERMOKOMPENSAT -DUKU2071x -DUKU_ZVU --omf_browse=.\EXE\avar_hndl.crf avar_hndl.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  avar_hndl PROC
;;;78     //-----------------------------------------------
;;;79     void avar_hndl(void)
000000  b530              PUSH     {r4,r5,lr}
;;;80     {
;;;81     //static unsigned avar_stat_old;
;;;82     char i;
;;;83     //unsigned avar_stat_new,avar_stat_offed;
;;;84     
;;;85     if(net_av)		SET_REG(avar_stat,1,0,1);
000002  48ff              LDR      r0,|L1.1024|
000004  4aff              LDR      r2,|L1.1028|
000006  7801              LDRB     r1,[r0,#0]  ; net_av
000008  6810              LDR      r0,[r2,#0]
00000a  b119              CBZ      r1,|L1.20|
00000c  f0400001          ORR      r0,r0,#1
000010  6010              STR      r0,[r2,#0]  ; avar_stat
000012  e002              B        |L1.26|
                  |L1.20|
;;;86     else	   			SET_REG(avar_stat,0,0,1);
000014  f0200001          BIC      r0,r0,#1
000018  6010              STR      r0,[r2,#0]  ; avar_stat
                  |L1.26|
;;;87     #ifndef UKU_220_IPS_TERMOKOMPENSAT //o_10
;;;88     for(i=0;i<2;i++)
;;;89     	{
;;;90     	if(bat[i]._av&3)	SET_REG(avar_stat,1,1+i,1);
;;;91     	else	   			SET_REG(avar_stat,0,1+i,1);
;;;92     	}
;;;93     #endif //o_10
;;;94     for(i=0;i<18;i++)
00001a  f04f0000          MOV      r0,#0
;;;95     	{
;;;96     	if(bps[i]._av&0xef)	SET_REG(avar_stat,1,3+i,1);
00001e  4cfa              LDR      r4,|L1.1032|
000020  f04f0501          MOV      r5,#1
                  |L1.36|
000024  eb0001c0          ADD      r1,r0,r0,LSL #3
000028  eb011100          ADD      r1,r1,r0,LSL #4
00002c  eb040181          ADD      r1,r4,r1,LSL #2
000030  7849              LDRB     r1,[r1,#1]
000032  f0110fef          TST      r1,#0xef
000036  d00a              BEQ      |L1.78|
000038  f1000303          ADD      r3,r0,#3
00003c  fa05f103          LSL      r1,r5,r3
000040  6813              LDR      r3,[r2,#0]  ; avar_stat
000042  ea230301          BIC      r3,r3,r1
000046  ea430301          ORR      r3,r3,r1
00004a  6013              STR      r3,[r2,#0]  ; avar_stat
00004c  e007              B        |L1.94|
                  |L1.78|
;;;97     	else	   		SET_REG(avar_stat,0,3+i,1);
00004e  f1000103          ADD      r1,r0,#3
000052  6813              LDR      r3,[r2,#0]  ; avar_stat
000054  fa05f101          LSL      r1,r5,r1
000058  ea230301          BIC      r3,r3,r1
00005c  6013              STR      r3,[r2,#0]  ; avar_stat
                  |L1.94|
00005e  f1000001          ADD      r0,r0,#1              ;94
000062  b2c0              UXTB     r0,r0                 ;94
000064  2812              CMP      r0,#0x12              ;94
000066  d3dd              BCC      |L1.36|
;;;98     	}
;;;99     
;;;100    /*for(i=0;i<6;i++)
;;;101    	{
;;;102    	if(av_inv[i])	SET_REG(avar_stat,1,15+i,1);
;;;103    	else	   		SET_REG(avar_stat,0,15+i,1);
;;;104    	}*/
;;;105    
;;;106    /*for(i=0;i<4;i++)
;;;107    	{
;;;108    	if(av_dt[i])	SET_REG(avar_stat,1,21+i,1);
;;;109    	else	   		SET_REG(avar_stat,0,21+i,1);
;;;110    	}  */
;;;111    #ifndef UKU_ZVU
;;;112    for(i=0;i<4;i++)
;;;113    	{
;;;114    //	if(sk_av_stat[i]==sasON)	SET_REG(avar_stat,1,24+i,1);
;;;115    //	else	   		SET_REG(avar_stat,0,24+i,1);
;;;116    	}
;;;117    #endif //UKU_ZVU
;;;118    #ifndef UKU_FSO
;;;119    for(i=0;i<4;i++)
000068  f04f0000          MOV      r0,#0
                  |L1.108|
00006c  f1000001          ADD      r0,r0,#1
000070  b2c0              UXTB     r0,r0
000072  2804              CMP      r0,#4
000074  d3fa              BCC      |L1.108|
;;;120    	{
;;;121    //	if(sk_av_stat[i]==sasON)	SET_REG(avar_stat,1,24+i,1);
;;;122    //	else	   		SET_REG(avar_stat,0,24+i,1);
;;;123    	}
;;;124    #endif //UKU_FSO
;;;125    //if(uout_av)			SET_REG(avar_stat,1,28,1);
;;;126    //else	   			SET_REG(avar_stat,0,28,1);
;;;127    
;;;128    
;;;129    avar_stat_new=(avar_stat^avar_stat_old)&avar_stat;
000076  6891              LDR      r1,[r2,#8]  ; avar_stat_old
000078  6810              LDR      r0,[r2,#0]  ; avar_stat
00007a  ea200301          BIC      r3,r0,r1
00007e  60d3              STR      r3,[r2,#0xc]  ; avar_stat_new
;;;130    
;;;131    avar_ind_stat|=avar_stat_new;
000080  6854              LDR      r4,[r2,#4]  ; avar_ind_stat
000082  ea440403          ORR      r4,r4,r3
000086  6054              STR      r4,[r2,#4]  ; avar_ind_stat
;;;132    
;;;133    if((SK_ZVUK_EN[0])) avar_ind_stat&=(~(1UL<<24));
000088  4be0              LDR      r3,|L1.1036|
00008a  881d              LDRH     r5,[r3,#0]  ; SK_ZVUK_EN
00008c  b115              CBZ      r5,|L1.148|
00008e  f0247480          BIC      r4,r4,#0x1000000
000092  6054              STR      r4,[r2,#4]  ; avar_ind_stat
                  |L1.148|
;;;134    if((SK_ZVUK_EN[1])) avar_ind_stat&=(~(1UL<<25));
000094  885c              LDRH     r4,[r3,#2]  ; SK_ZVUK_EN
000096  b11c              CBZ      r4,|L1.160|
000098  6854              LDR      r4,[r2,#4]  ; avar_ind_stat
00009a  f0247400          BIC      r4,r4,#0x2000000
00009e  6054              STR      r4,[r2,#4]  ; avar_ind_stat
                  |L1.160|
;;;135    if((SK_ZVUK_EN[2])) avar_ind_stat&=(~(1UL<<26));
0000a0  889c              LDRH     r4,[r3,#4]  ; SK_ZVUK_EN
0000a2  b11c              CBZ      r4,|L1.172|
0000a4  6854              LDR      r4,[r2,#4]  ; avar_ind_stat
0000a6  f0246480          BIC      r4,r4,#0x4000000
0000aa  6054              STR      r4,[r2,#4]  ; avar_ind_stat
                  |L1.172|
;;;136    if((SK_ZVUK_EN[3])) avar_ind_stat&=(~(1UL<<27));	
0000ac  88db              LDRH     r3,[r3,#6]  ; SK_ZVUK_EN
0000ae  b11b              CBZ      r3,|L1.184|
0000b0  6853              LDR      r3,[r2,#4]  ; avar_ind_stat
0000b2  f0236300          BIC      r3,r3,#0x8000000
0000b6  6053              STR      r3,[r2,#4]  ; avar_ind_stat
                  |L1.184|
;;;137    
;;;138    
;;;139    avar_stat_offed=~((avar_stat^avar_stat_old)&avar_stat_old);
0000b8  ea210100          BIC      r1,r1,r0
0000bc  ea6f0101          MVN      r1,r1
0000c0  6111              STR      r1,[r2,#0x10]  ; avar_stat_offed
;;;140    
;;;141    if(!AV_OFF_AVT)avar_stat_offed|=0xeffffffe;
0000c2  4bd3              LDR      r3,|L1.1040|
0000c4  881b              LDRH     r3,[r3,#0]  ; AV_OFF_AVT
0000c6  b91b              CBNZ     r3,|L1.208|
0000c8  4bd2              LDR      r3,|L1.1044|
0000ca  ea410103          ORR      r1,r1,r3
0000ce  6111              STR      r1,[r2,#0x10]  ; avar_stat_offed
                  |L1.208|
;;;142    
;;;143    avar_ind_stat&=avar_stat_offed; 
0000d0  6913              LDR      r3,[r2,#0x10]  ; avar_stat_offed
0000d2  6851              LDR      r1,[r2,#4]  ; avar_ind_stat
0000d4  ea010103          AND      r1,r1,r3
0000d8  6051              STR      r1,[r2,#4]  ; avar_ind_stat
;;;144    
;;;145    avar_stat_old=avar_stat;
0000da  6090              STR      r0,[r2,#8]  ; avar_stat_old
;;;146    
;;;147    //oleg_start
;;;148    
;;;149    
;;;150    
;;;151    rki_avar1_stat=(sk_alarm<<8)|(status_izm_r&0x3F);
0000dc  48ce              LDR      r0,|L1.1048|
0000de  49cf              LDR      r1,|L1.1052|
0000e0  8800              LDRH     r0,[r0,#0]  ; status_izm_r
0000e2  6809              LDR      r1,[r1,#0]  ; sk_alarm
0000e4  f000003f          AND      r0,r0,#0x3f
0000e8  ea402001          ORR      r0,r0,r1,LSL #8
0000ec  6150              STR      r0,[r2,#0x14]  ; rki_avar1_stat
;;;152    rki_avar1_stat_new=(rki_avar1_stat^rki_avar1_stat_old)&rki_avar1_stat;
0000ee  69d3              LDR      r3,[r2,#0x1c]  ; rki_avar1_stat_old
0000f0  ea200103          BIC      r1,r0,r3
0000f4  6211              STR      r1,[r2,#0x20]  ; rki_avar1_stat_new
;;;153    rki_avar1_ind_stat|=rki_avar1_stat_new;
0000f6  6994              LDR      r4,[r2,#0x18]  ; rki_avar1_ind_stat
0000f8  ea440401          ORR      r4,r4,r1
;;;154    rki_avar1_stat_offed=~((rki_avar1_stat^rki_avar1_stat_old)&rki_avar1_stat_old);
0000fc  ea230300          BIC      r3,r3,r0
000100  ea6f0103          MVN      r1,r3
000104  6251              STR      r1,[r2,#0x24]  ; rki_avar1_stat_offed
;;;155    rki_avar1_ind_stat&=rki_avar1_stat_offed;
000106  ea040401          AND      r4,r4,r1
00010a  6194              STR      r4,[r2,#0x18]  ; rki_avar1_ind_stat
;;;156    rki_avar1_stat_old=rki_avar1_stat;
00010c  61d0              STR      r0,[r2,#0x1c]  ; rki_avar1_stat_old
;;;157    /*
;;;158    rki_avarI1_stat=status_di1;
;;;159    rki_avarI1_stat_new=(rki_avarI1_stat^rki_avarI1_stat_old)&rki_avarI1_stat;
;;;160    rki_avarI1_ind_stat|=rki_avarI1_stat_new;
;;;161    rki_avarI1_stat_offed=~((rki_avarI1_stat^rki_avarI1_stat_old)&rki_avarI1_stat_old);
;;;162    rki_avarI1_ind_stat&=rki_avarI1_stat_offed;
;;;163    rki_avarI1_stat_old=rki_avarI1_stat;
;;;164    
;;;165    rki_avarI2_stat=status_di2;
;;;166    rki_avarI2_stat_new=(rki_avarI2_stat^rki_avarI2_stat_old)&rki_avarI2_stat;
;;;167    rki_avarI2_ind_stat|=rki_avarI2_stat_new;
;;;168    rki_avarI2_stat_offed=~((rki_avarI2_stat^rki_avarI2_stat_old)&rki_avarI2_stat_old);
;;;169    rki_avarI2_ind_stat&=rki_avarI2_stat_offed;
;;;170    rki_avarI2_stat_old=rki_avarI2_stat;
;;;171    */
;;;172    //oleg_end
;;;173    }
00010e  bd30              POP      {r4,r5,pc}
;;;174    
                          ENDP

                  reload_hndl PROC
;;;175    //-----------------------------------------------
;;;176    void reload_hndl(void)
000110  b5f8              PUSH     {r3-r7,lr}
;;;177    {
;;;178    
;;;179    char data[4];
;;;180    unsigned int event_ptr,lc640_adr/*,event_ptr_find*/,event_cnt;
;;;181    
;;;182    event_ptr=lc640_read_int(PTR_EVENT_LOG);
000112  f44f6560          MOV      r5,#0xe00
000116  4628              MOV      r0,r5
000118  f7fffffe          BL       lc640_read_int
;;;183    event_ptr++;	
00011c  f1000001          ADD      r0,r0,#1
000120  4604              MOV      r4,r0
;;;184    if(event_ptr>63)event_ptr=0;	
000122  2c3f              CMP      r4,#0x3f
000124  d901              BLS      |L1.298|
000126  f04f0400          MOV      r4,#0
                  |L1.298|
;;;185    lc640_write_int(PTR_EVENT_LOG,event_ptr);	
00012a  b221              SXTH     r1,r4
00012c  4628              MOV      r0,r5
00012e  f7fffffe          BL       lc640_write_int
;;;186    	
;;;187    event_cnt=lc640_read_int(CNT_EVENT_LOG);
000132  f6406602          MOV      r6,#0xe02
000136  4630              MOV      r0,r6
000138  f7fffffe          BL       lc640_read_int
;;;188    if(event_cnt!=63)event_cnt=event_ptr;
00013c  283f              CMP      r0,#0x3f
00013e  d000              BEQ      |L1.322|
000140  4620              MOV      r0,r4
                  |L1.322|
;;;189    lc640_write_int(CNT_EVENT_LOG,event_cnt); 
000142  b201              SXTH     r1,r0
000144  4630              MOV      r0,r6
000146  f7fffffe          BL       lc640_write_int
;;;190    	
;;;191    lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
00014a  4628              MOV      r0,r5
00014c  f7fffffe          BL       lc640_read_int
000150  f44f6180          MOV      r1,#0x400
000154  eb011440          ADD      r4,r1,r0,LSL #5
;;;192    	
;;;193    data[0]='U';
000158  f04f0055          MOV      r0,#0x55
00015c  f88d0000          STRB     r0,[sp,#0]
;;;194    data[1]=0;
000160  f04f0600          MOV      r6,#0
000164  f88d6001          STRB     r6,[sp,#1]
;;;195    data[2]='R';
000168  f04f0052          MOV      r0,#0x52
00016c  f88d0002          STRB     r0,[sp,#2]
;;;196    data[3]=0;
000170  f88d6003          STRB     r6,[sp,#3]
;;;197    lc640_write_long_ptr(lc640_adr,data);
000174  4669              MOV      r1,sp
000176  4620              MOV      r0,r4
000178  f7fffffe          BL       lc640_write_long_ptr
;;;198    
;;;199    data[0]=0;
;;;200    data[1]=0;
;;;201    data[2]=0;
;;;202    data[3]=0;
00017c  9600              STR      r6,[sp,#0]
;;;203    lc640_write_long_ptr(lc640_adr+4,data);
00017e  4669              MOV      r1,sp
000180  1d20              ADDS     r0,r4,#4
000182  f7fffffe          BL       lc640_write_long_ptr
;;;204    
;;;205    data[0]=LPC_RTC->YEAR;
000186  4da6              LDR      r5,|L1.1056|
000188  8ba8              LDRH     r0,[r5,#0x1c]
00018a  f88d0000          STRB     r0,[sp,#0]
;;;206    data[1]=LPC_RTC->MONTH;
00018e  7e28              LDRB     r0,[r5,#0x18]
000190  f88d0001          STRB     r0,[sp,#1]
;;;207    data[2]=LPC_RTC->DOM;
000194  7b28              LDRB     r0,[r5,#0xc]
000196  f88d0002          STRB     r0,[sp,#2]
;;;208    data[3]=0;
00019a  f88d6003          STRB     r6,[sp,#3]
;;;209    lc640_write_long_ptr(lc640_adr+8,data);
00019e  4669              MOV      r1,sp
0001a0  f1040008          ADD      r0,r4,#8
0001a4  f7fffffe          BL       lc640_write_long_ptr
;;;210    
;;;211    data[0]=LPC_RTC->HOUR;
0001a8  7a28              LDRB     r0,[r5,#8]
0001aa  f88d0000          STRB     r0,[sp,#0]
;;;212    data[1]=LPC_RTC->MIN;
0001ae  7928              LDRB     r0,[r5,#4]
0001b0  f88d0001          STRB     r0,[sp,#1]
;;;213    data[2]=LPC_RTC->SEC;
0001b4  7828              LDRB     r0,[r5,#0]
0001b6  f88d0002          STRB     r0,[sp,#2]
;;;214    data[3]=LPC_SC->RSID;
0001ba  489a              LDR      r0,|L1.1060|
0001bc  f8d00180          LDR      r0,[r0,#0x180]
0001c0  f88d0003          STRB     r0,[sp,#3]
;;;215    
;;;216    lc640_write_long_ptr(lc640_adr+12,data);
0001c4  4669              MOV      r1,sp
0001c6  f104000c          ADD      r0,r4,#0xc
0001ca  f7fffffe          BL       lc640_write_long_ptr
;;;217    	
;;;218    data[0]='A';
0001ce  f04f0541          MOV      r5,#0x41
0001d2  f88d5000          STRB     r5,[sp,#0]
;;;219    data[1]='A';
0001d6  f88d5001          STRB     r5,[sp,#1]
;;;220    data[2]='A';
0001da  f88d5002          STRB     r5,[sp,#2]
;;;221    data[3]='A';
0001de  f88d5003          STRB     r5,[sp,#3]
;;;222    lc640_write_long_ptr(lc640_adr+16,data);
0001e2  4669              MOV      r1,sp
0001e4  f1040010          ADD      r0,r4,#0x10
0001e8  f7fffffe          BL       lc640_write_long_ptr
;;;223    	
;;;224    data[0]='A';
0001ec  f88d5000          STRB     r5,[sp,#0]
;;;225    data[1]='A';
0001f0  f88d5001          STRB     r5,[sp,#1]
;;;226    data[2]='A';
0001f4  f88d5002          STRB     r5,[sp,#2]
;;;227    data[3]='A';
0001f8  f88d5003          STRB     r5,[sp,#3]
;;;228    lc640_write_long_ptr(lc640_adr+20,data);
0001fc  4669              MOV      r1,sp
0001fe  f1040014          ADD      r0,r4,#0x14
000202  f7fffffe          BL       lc640_write_long_ptr
;;;229    	
;;;230    data[0]='A';
000206  f88d5000          STRB     r5,[sp,#0]
;;;231    data[1]='A';
00020a  f88d5001          STRB     r5,[sp,#1]
;;;232    data[2]='A';
00020e  f88d5002          STRB     r5,[sp,#2]
;;;233    data[3]='A';
000212  f88d5003          STRB     r5,[sp,#3]
;;;234    lc640_write_long_ptr(lc640_adr+24,data);
000216  4669              MOV      r1,sp
000218  f1040018          ADD      r0,r4,#0x18
00021c  f7fffffe          BL       lc640_write_long_ptr
;;;235    	
;;;236    data[0]='A';
000220  f88d5000          STRB     r5,[sp,#0]
;;;237    data[1]='A';
000224  f88d5001          STRB     r5,[sp,#1]
;;;238    data[2]='A';
000228  f88d5002          STRB     r5,[sp,#2]
;;;239    data[3]='A';
00022c  f88d5003          STRB     r5,[sp,#3]
;;;240    lc640_write_long_ptr(lc640_adr+28,data);				
000230  4669              MOV      r1,sp
000232  f104001c          ADD      r0,r4,#0x1c
000236  f7fffffe          BL       lc640_write_long_ptr
;;;241    	
;;;242    	
;;;243    }
00023a  bdf8              POP      {r3-r7,pc}
;;;244    
                          ENDP

                  avar_unet_hndl PROC
;;;245    //-----------------------------------------------
;;;246    void avar_unet_hndl(char in)
00023c  e92d4ff8          PUSH     {r3-r11,lr}
;;;247    {
000240  4604              MOV      r4,r0
;;;248    
;;;249    char data[4];
;;;250    unsigned int event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;251    
;;;252    
;;;253    if(in==1)
;;;254    	{
;;;255    	net_av|=1; //o_10
000242  496f              LDR      r1,|L1.1024|
;;;256    	net_av_2min_timer=1200;
;;;257    
;;;258    	//beep_init(0x01L,'O');
;;;259    	//a.av.bAN=1;
;;;260    
;;;261    
;;;262    	//beep_init(0x33333333,'A');
;;;263    	 
;;;264    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;265    	event_ptr++;	
;;;266    	if(event_ptr>63)event_ptr=0;	
;;;267    	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;268    	
;;;269         event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;270    	if(event_cnt!=63)event_cnt=event_ptr;
;;;271    	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;272    	
;;;273    	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;274    	
;;;275    	data[0]='P';
;;;276    	data[1]=0;
;;;277    	data[2]='A';
;;;278    	data[3]=0;
;;;279    	lc640_write_long_ptr(lc640_adr,data);
;;;280    
;;;281    	data[0]=0;//*((char*)&Unet_store);
;;;282    	data[1]=0;//*(((char*)&Unet_store)+1);
;;;283    	data[2]=0;
;;;284    	data[3]=0;
;;;285    	lc640_write_long_ptr(lc640_adr+4,data);
;;;286    
;;;287    	data[0]=LPC_RTC->YEAR;
000244  4d78              LDR      r5,|L1.1064|
000246  f04f0600          MOV      r6,#0                 ;266
00024a  7808              LDRB     r0,[r1,#0]            ;255
00024c  f04f0b50          MOV      r11,#0x50             ;275
000250  f04f0841          MOV      r8,#0x41              ;277
000254  f44f6260          MOV      r2,#0xe00             ;264
000258  f6406a02          MOV      r10,#0xe02            ;269
00025c  f44f6780          MOV      r7,#0x400             ;273
000260  2c01              CMP      r4,#1                 ;253
000262  d008              BEQ      |L1.630|
;;;288    	data[1]=LPC_RTC->MONTH;
;;;289    	data[2]=LPC_RTC->DOM;
;;;290    	data[3]=0;
;;;291    	lc640_write_long_ptr(lc640_adr+8,data);
;;;292    
;;;293    	data[0]=LPC_RTC->HOUR;
;;;294    	data[1]=LPC_RTC->MIN;
;;;295    	data[2]=LPC_RTC->SEC;
;;;296    	data[3]=0;
;;;297    	lc640_write_long_ptr(lc640_adr+12,data);
;;;298    	
;;;299    	data[0]='A';
;;;300    	data[1]='A';
;;;301    	data[2]='A';
;;;302    	data[3]='A';
;;;303    	lc640_write_long_ptr(lc640_adr+16,data);
;;;304    	
;;;305    	data[0]='A';
;;;306    	data[1]='A';
;;;307    	data[2]='A';
;;;308    	data[3]='A';
;;;309    	lc640_write_long_ptr(lc640_adr+20,data);
;;;310    	
;;;311    	data[0]='A';
;;;312    	data[1]='A';
;;;313    	data[2]='A';
;;;314    	data[3]='A';
;;;315    	lc640_write_long_ptr(lc640_adr+24,data);
;;;316    	
;;;317    	data[0]='A';
;;;318    	data[1]='A';
;;;319    	data[2]='A';
;;;320    	data[3]='A';
;;;321    	lc640_write_long_ptr(lc640_adr+28,data);				
;;;322    	
;;;323    /*	memo_out0[0]=0x55;
;;;324         memo_out0[1]=0x00+2;
;;;325         memo_out0[2]=1;
;;;326         memo_out0[3]=0x0b;
;;;327         memo_out0[4]=0x55;
;;;328         memo_out0[5]=0x55; 
;;;329         	
;;;330         memo_out0[6]=crc_87(memo_out0,6);
;;;331    	memo_out0[7]=crc_95(memo_out0,6);
;;;332         usart_out_adr0(memo_out0,8); 
;;;333    	*/
;;;334    	snmp_trap_send("Main power alarm, voltage reduced",2,1,0);
;;;335    	}
;;;336    
;;;337    else if(in==2)
;;;338    	{
;;;339    	net_av|=2;	  //o_10
;;;340    
;;;341    	//beep_init(0x01L,'O');
;;;342    	//a.av.bAN=1;
;;;343    
;;;344    
;;;345    	//beep_init(0x33333333,'A');
;;;346    	 
;;;347    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;348    	event_ptr++;	
;;;349    	if(event_ptr>63)event_ptr=0;	
;;;350    	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;351    	
;;;352         event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;353    	if(event_cnt!=63)event_cnt=event_ptr;
;;;354    	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;355    	
;;;356    	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;357    	
;;;358    	data[0]='P';
;;;359    	data[1]=0;
;;;360    	data[2]='B';
000264  f04f0942          MOV      r9,#0x42
000268  2c02              CMP      r4,#2                 ;337
00026a  d07d              BEQ      |L1.872|
;;;361    	data[3]=0;
;;;362    	lc640_write_long_ptr(lc640_adr,data);
;;;363    
;;;364    	data[0]=0;//*((char*)&Unet_store);
;;;365    	data[1]=0;//*(((char*)&Unet_store)+1);
;;;366    	data[2]=0;
;;;367    	data[3]=0;
;;;368    	lc640_write_long_ptr(lc640_adr+4,data);
;;;369    
;;;370    	data[0]=LPC_RTC->YEAR;
;;;371    	data[1]=LPC_RTC->MONTH;
;;;372    	data[2]=LPC_RTC->DOM;
;;;373    	data[3]=0;
;;;374    	lc640_write_long_ptr(lc640_adr+8,data);
;;;375    
;;;376    	data[0]=LPC_RTC->HOUR;
;;;377    	data[1]=LPC_RTC->MIN;
;;;378    	data[2]=LPC_RTC->SEC;
;;;379    	data[3]=0;
;;;380    	lc640_write_long_ptr(lc640_adr+12,data);
;;;381    	
;;;382    	data[0]='A';
;;;383    	data[1]='A';
;;;384    	data[2]='A';
;;;385    	data[3]='A';
;;;386    	lc640_write_long_ptr(lc640_adr+16,data);
;;;387    	
;;;388    	data[0]='A';
;;;389    	data[1]='A';
;;;390    	data[2]='A';
;;;391    	data[3]='A';
;;;392    	lc640_write_long_ptr(lc640_adr+20,data);
;;;393    	
;;;394    	data[0]='A';
;;;395    	data[1]='A';
;;;396    	data[2]='A';
;;;397    	data[3]='A';
;;;398    	lc640_write_long_ptr(lc640_adr+24,data);
;;;399    	
;;;400    	data[0]='A';
;;;401    	data[1]='A';
;;;402    	data[2]='A';
;;;403    	data[3]='A';
;;;404    	lc640_write_long_ptr(lc640_adr+28,data);				
;;;405    	
;;;406    	snmp_trap_send("Main power alarm, voltage increased",2,2,0);
;;;407    	}
;;;408    //o_10_s
;;;409    else if(in==0 || in==4)	
00026c  2c00              CMP      r4,#0
                  |L1.622|
00026e  d07c              BEQ      |L1.874|
000270  2c04              CMP      r4,#4
000272  d0fc              BEQ      |L1.622|
000274  e1fc              B        |L1.1648|
                  |L1.630|
000276  f0400001          ORR      r0,r0,#1              ;255
00027a  7008              STRB     r0,[r1,#0]            ;255
00027c  486b              LDR      r0,|L1.1068|
00027e  f44f6196          MOV      r1,#0x4b0             ;256
000282  8001              STRH     r1,[r0,#0]            ;256
000284  4614              MOV      r4,r2                 ;264
000286  4620              MOV      r0,r4                 ;264
000288  f7fffffe          BL       lc640_read_int
00028c  f1000001          ADD      r0,r0,#1              ;265
000290  4681              MOV      r9,r0                 ;265
000292  f1b90f3f          CMP      r9,#0x3f              ;266
000296  d901              BLS      |L1.668|
000298  f04f0900          MOV      r9,#0                 ;266
                  |L1.668|
00029c  fa0ff189          SXTH     r1,r9                 ;267
0002a0  4620              MOV      r0,r4                 ;267
0002a2  f7fffffe          BL       lc640_write_int
0002a6  4650              MOV      r0,r10                ;269
0002a8  f7fffffe          BL       lc640_read_int
0002ac  283f              CMP      r0,#0x3f              ;270
0002ae  d000              BEQ      |L1.690|
0002b0  4648              MOV      r0,r9                 ;270
                  |L1.690|
0002b2  b201              SXTH     r1,r0                 ;271
0002b4  4650              MOV      r0,r10                ;271
0002b6  f7fffffe          BL       lc640_write_int
0002ba  4620              MOV      r0,r4                 ;273
0002bc  f7fffffe          BL       lc640_read_int
0002c0  eb071440          ADD      r4,r7,r0,LSL #5       ;273
0002c4  f88db000          STRB     r11,[sp,#0]           ;275
0002c8  f88d6001          STRB     r6,[sp,#1]            ;276
0002cc  f88d8002          STRB     r8,[sp,#2]            ;277
0002d0  f88d6003          STRB     r6,[sp,#3]            ;278
0002d4  4669              MOV      r1,sp                 ;279
0002d6  4620              MOV      r0,r4                 ;279
0002d8  f7fffffe          BL       lc640_write_long_ptr
0002dc  9600              STR      r6,[sp,#0]            ;284
0002de  4669              MOV      r1,sp                 ;285
0002e0  1d20              ADDS     r0,r4,#4              ;285
0002e2  f7fffffe          BL       lc640_write_long_ptr
0002e6  f1050520          ADD      r5,r5,#0x20           ;287
0002ea  8ba8              LDRH     r0,[r5,#0x1c]         ;287
0002ec  f88d0000          STRB     r0,[sp,#0]            ;287
0002f0  7e28              LDRB     r0,[r5,#0x18]         ;288
0002f2  f88d0001          STRB     r0,[sp,#1]            ;288
0002f6  7b28              LDRB     r0,[r5,#0xc]          ;289
0002f8  f88d0002          STRB     r0,[sp,#2]            ;289
0002fc  f88d6003          STRB     r6,[sp,#3]            ;290
000300  4669              MOV      r1,sp                 ;291
000302  f1040008          ADD      r0,r4,#8              ;291
000306  f7fffffe          BL       lc640_write_long_ptr
00030a  7a28              LDRB     r0,[r5,#8]            ;293
00030c  f88d0000          STRB     r0,[sp,#0]            ;293
000310  7928              LDRB     r0,[r5,#4]            ;294
000312  f88d0001          STRB     r0,[sp,#1]            ;294
000316  7828              LDRB     r0,[r5,#0]            ;295
000318  f88d0002          STRB     r0,[sp,#2]            ;295
00031c  f88d6003          STRB     r6,[sp,#3]            ;296
000320  4669              MOV      r1,sp                 ;297
000322  f104000c          ADD      r0,r4,#0xc            ;297
000326  f7fffffe          BL       lc640_write_long_ptr
00032a  f88d8000          STRB     r8,[sp,#0]            ;299
00032e  f88d8001          STRB     r8,[sp,#1]            ;300
000332  f88d8002          STRB     r8,[sp,#2]            ;301
000336  f88d8003          STRB     r8,[sp,#3]            ;302
00033a  4669              MOV      r1,sp                 ;303
00033c  f1040010          ADD      r0,r4,#0x10           ;303
000340  f7fffffe          BL       lc640_write_long_ptr
000344  f88d8000          STRB     r8,[sp,#0]            ;305
000348  f88d8001          STRB     r8,[sp,#1]            ;306
00034c  f88d8002          STRB     r8,[sp,#2]            ;307
000350  f88d8003          STRB     r8,[sp,#3]            ;308
000354  4669              MOV      r1,sp                 ;309
000356  f1040014          ADD      r0,r4,#0x14           ;309
00035a  f7fffffe          BL       lc640_write_long_ptr
00035e  f88d8000          STRB     r8,[sp,#0]            ;311
000362  f88d8001          STRB     r8,[sp,#1]            ;312
000366  e001              B        |L1.876|
                  |L1.872|
000368  e01d              B        |L1.934|
                  |L1.874|
00036a  e0d8              B        |L1.1310|
                  |L1.876|
00036c  f88d8002          STRB     r8,[sp,#2]            ;313
000370  f88d8003          STRB     r8,[sp,#3]            ;314
000374  4669              MOV      r1,sp                 ;315
000376  f1040018          ADD      r0,r4,#0x18           ;315
00037a  f7fffffe          BL       lc640_write_long_ptr
00037e  f88d8000          STRB     r8,[sp,#0]            ;317
000382  f88d8001          STRB     r8,[sp,#1]            ;318
000386  f88d8002          STRB     r8,[sp,#2]            ;319
00038a  f88d8003          STRB     r8,[sp,#3]            ;320
00038e  4669              MOV      r1,sp                 ;321
000390  f104001c          ADD      r0,r4,#0x1c           ;321
000394  f7fffffe          BL       lc640_write_long_ptr
000398  2300              MOVS     r3,#0                 ;334
00039a  2201              MOVS     r2,#1                 ;334
00039c  2102              MOVS     r1,#2                 ;334
00039e  a024              ADR      r0,|L1.1072|
0003a0  f7fffffe          BL       snmp_trap_send
0003a4  e164              B        |L1.1648|
                  |L1.934|
0003a6  f0400002          ORR      r0,r0,#2              ;339
0003aa  7008              STRB     r0,[r1,#0]            ;339
0003ac  f44f6060          MOV      r0,#0xe00             ;347
0003b0  f7fffffe          BL       lc640_read_int
0003b4  f1000001          ADD      r0,r0,#1              ;348
0003b8  4604              MOV      r4,r0                 ;348
0003ba  2c3f              CMP      r4,#0x3f              ;349
0003bc  d901              BLS      |L1.962|
0003be  f04f0400          MOV      r4,#0                 ;349
                  |L1.962|
0003c2  b221              SXTH     r1,r4                 ;350
0003c4  f44f6060          MOV      r0,#0xe00             ;350
0003c8  f7fffffe          BL       lc640_write_int
0003cc  4650              MOV      r0,r10                ;352
0003ce  f7fffffe          BL       lc640_read_int
0003d2  283f              CMP      r0,#0x3f              ;353
0003d4  d000              BEQ      |L1.984|
0003d6  4620              MOV      r0,r4                 ;353
                  |L1.984|
0003d8  b201              SXTH     r1,r0                 ;354
0003da  4650              MOV      r0,r10                ;354
0003dc  f7fffffe          BL       lc640_write_int
0003e0  f44f6060          MOV      r0,#0xe00             ;356
0003e4  f7fffffe          BL       lc640_read_int
0003e8  eb071440          ADD      r4,r7,r0,LSL #5       ;356
0003ec  f88db000          STRB     r11,[sp,#0]           ;358
0003f0  f88d6001          STRB     r6,[sp,#1]            ;359
0003f4  f88d9002          STRB     r9,[sp,#2]            ;360
0003f8  f88d6003          STRB     r6,[sp,#3]            ;361
0003fc  4669              MOV      r1,sp                 ;362
0003fe  e029              B        |L1.1108|
                  |L1.1024|
                          DCD      net_av
                  |L1.1028|
                          DCD      ||.data||
                  |L1.1032|
                          DCD      bps
                  |L1.1036|
                          DCD      SK_ZVUK_EN
                  |L1.1040|
                          DCD      AV_OFF_AVT
                  |L1.1044|
                          DCD      0xeffffffe
                  |L1.1048|
                          DCD      status_izm_r
                  |L1.1052|
                          DCD      sk_alarm
                  |L1.1056|
                          DCD      0x40024020
                  |L1.1060|
                          DCD      0x400fc000
                  |L1.1064|
                          DCD      0x40024000
                  |L1.1068|
                          DCD      net_av_2min_timer
                  |L1.1072|
000430  4d61696e          DCB      "Main power alarm, voltage reduced",0
000434  20706f77
000438  65722061
00043c  6c61726d
000440  2c20766f
000444  6c746167
000448  65207265
00044c  64756365
000450  6400    
000452  00                DCB      0
000453  00                DCB      0
                  |L1.1108|
000454  4620              MOV      r0,r4                 ;362
000456  f7fffffe          BL       lc640_write_long_ptr
00045a  9600              STR      r6,[sp,#0]            ;367
00045c  4669              MOV      r1,sp                 ;368
00045e  1d20              ADDS     r0,r4,#4              ;368
000460  f7fffffe          BL       lc640_write_long_ptr
000464  f1050520          ADD      r5,r5,#0x20           ;370
000468  8ba8              LDRH     r0,[r5,#0x1c]         ;370
00046a  f88d0000          STRB     r0,[sp,#0]            ;370
00046e  7e28              LDRB     r0,[r5,#0x18]         ;371
000470  f88d0001          STRB     r0,[sp,#1]            ;371
000474  7b28              LDRB     r0,[r5,#0xc]          ;372
000476  f88d0002          STRB     r0,[sp,#2]            ;372
00047a  f88d6003          STRB     r6,[sp,#3]            ;373
00047e  4669              MOV      r1,sp                 ;374
000480  f1040008          ADD      r0,r4,#8              ;374
000484  f7fffffe          BL       lc640_write_long_ptr
000488  7a28              LDRB     r0,[r5,#8]            ;376
00048a  f88d0000          STRB     r0,[sp,#0]            ;376
00048e  7928              LDRB     r0,[r5,#4]            ;377
000490  f88d0001          STRB     r0,[sp,#1]            ;377
000494  7828              LDRB     r0,[r5,#0]            ;378
000496  f88d0002          STRB     r0,[sp,#2]            ;378
00049a  f88d6003          STRB     r6,[sp,#3]            ;379
00049e  4669              MOV      r1,sp                 ;380
0004a0  f104000c          ADD      r0,r4,#0xc            ;380
0004a4  f7fffffe          BL       lc640_write_long_ptr
0004a8  f88d8000          STRB     r8,[sp,#0]            ;382
0004ac  f88d8001          STRB     r8,[sp,#1]            ;383
0004b0  f88d8002          STRB     r8,[sp,#2]            ;384
0004b4  f88d8003          STRB     r8,[sp,#3]            ;385
0004b8  4669              MOV      r1,sp                 ;386
0004ba  f1040010          ADD      r0,r4,#0x10           ;386
0004be  f7fffffe          BL       lc640_write_long_ptr
0004c2  f88d8000          STRB     r8,[sp,#0]            ;388
0004c6  f88d8001          STRB     r8,[sp,#1]            ;389
0004ca  f88d8002          STRB     r8,[sp,#2]            ;390
0004ce  f88d8003          STRB     r8,[sp,#3]            ;391
0004d2  4669              MOV      r1,sp                 ;392
0004d4  f1040014          ADD      r0,r4,#0x14           ;392
0004d8  f7fffffe          BL       lc640_write_long_ptr
0004dc  f88d8000          STRB     r8,[sp,#0]            ;394
0004e0  f88d8001          STRB     r8,[sp,#1]            ;395
0004e4  f88d8002          STRB     r8,[sp,#2]            ;396
0004e8  f88d8003          STRB     r8,[sp,#3]            ;397
0004ec  4669              MOV      r1,sp                 ;398
0004ee  f1040018          ADD      r0,r4,#0x18           ;398
0004f2  f7fffffe          BL       lc640_write_long_ptr
0004f6  f88d8000          STRB     r8,[sp,#0]            ;400
0004fa  f88d8001          STRB     r8,[sp,#1]            ;401
0004fe  f88d8002          STRB     r8,[sp,#2]            ;402
000502  f88d8003          STRB     r8,[sp,#3]            ;403
000506  4669              MOV      r1,sp                 ;404
000508  f104001c          ADD      r0,r4,#0x1c           ;404
00050c  f7fffffe          BL       lc640_write_long_ptr
000510  2202              MOVS     r2,#2                 ;406
000512  2300              MOVS     r3,#0                 ;406
000514  4611              MOV      r1,r2                 ;406
000516  a0fe              ADR      r0,|L1.2320|
000518  f7fffffe          BL       snmp_trap_send
00051c  e0a8              B        |L1.1648|
                  |L1.1310|
;;;410    	{
;;;411    //	if( (in==0 && (net_av&2)==0) || (in==4 && (net_av&1)==0) )  {
;;;412    		if(in==0) net_av&=~1;
00051e  b914              CBNZ     r4,|L1.1318|
000520  f0200001          BIC      r0,r0,#1
000524  7008              STRB     r0,[r1,#0]
                  |L1.1318|
;;;413    		if(in==4) net_av&=~2;	 
000526  2c04              CMP      r4,#4
000528  d103              BNE      |L1.1330|
00052a  7808              LDRB     r0,[r1,#0]  ; net_av
00052c  f0200002          BIC      r0,r0,#2
000530  7008              STRB     r0,[r1,#0]
                  |L1.1330|
;;;414    		if(net_av==0) if(AV_OFF_AVT) SET_REG(avar_ind_stat,0,0,1);
000532  7809              LDRB     r1,[r1,#0]  ; net_av
000534  48ff              LDR      r0,|L1.2356|
000536  b931              CBNZ     r1,|L1.1350|
000538  49ff              LDR      r1,|L1.2360|
00053a  8809              LDRH     r1,[r1,#0]  ; AV_OFF_AVT
00053c  b119              CBZ      r1,|L1.1350|
00053e  6841              LDR      r1,[r0,#4]  ; avar_ind_stat
000540  f0210101          BIC      r1,r1,#1
000544  6041              STR      r1,[r0,#4]  ; avar_ind_stat
                  |L1.1350|
;;;415    
;;;416    	SET_REG(avar_stat,0,0,1);
000546  6801              LDR      r1,[r0,#0]  ; avar_stat
000548  f0210101          BIC      r1,r1,#1
00054c  6001              STR      r1,[r0,#0]  ; avar_stat
;;;417    	
;;;418    	
;;;419    //}
;;;420    //o_10_e
;;;421    
;;;422         event_ptr=lc640_read_int(PTR_EVENT_LOG);
00054e  4610              MOV      r0,r2
000550  f7fffffe          BL       lc640_read_int
000554  4683              MOV      r11,r0
;;;423    	event_ptr_find=event_ptr;
000556  46d8              MOV      r8,r11
                  |L1.1368|
;;;424    avar_unet_hndl_lbl1:
;;;425    	lc640_adr=EVENT_LOG+(event_ptr_find*32);
000558  eb071a48          ADD      r10,r7,r8,LSL #5
;;;426    
;;;427         lc640_read_long_ptr(lc640_adr,data);
00055c  4669              MOV      r1,sp
00055e  4650              MOV      r0,r10
000560  f7fffffe          BL       lc640_read_long_ptr
;;;428         
;;;429         if( !( (data[0]=='P')&&(data[1]==0)&&( (in==0 && data[2]=='A' )||(in==4 && data[2]=='B') ) ) )	//o_10
000564  f89d0000          LDRB     r0,[sp,#0]
000568  2850              CMP      r0,#0x50
00056a  d10f              BNE      |L1.1420|
00056c  f89d0001          LDRB     r0,[sp,#1]
000570  b960              CBNZ     r0,|L1.1420|
000572  b114              CBZ      r4,|L1.1402|
000574  2c04              CMP      r4,#4
000576  d109              BNE      |L1.1420|
000578  e004              B        |L1.1412|
                  |L1.1402|
00057a  f89d0002          LDRB     r0,[sp,#2]
00057e  2841              CMP      r0,#0x41
000580  d104              BNE      |L1.1420|
000582  e00e              B        |L1.1442|
                  |L1.1412|
000584  f89d0002          LDRB     r0,[sp,#2]
000588  2842              CMP      r0,#0x42
00058a  d00a              BEQ      |L1.1442|
                  |L1.1420|
;;;430         	{        
;;;431         	if(event_ptr_find)event_ptr_find--;
00058c  f1b80f00          CMP      r8,#0
000590  d002              BEQ      |L1.1432|
000592  f1a80801          SUB      r8,r8,#1
000596  e001              B        |L1.1436|
                  |L1.1432|
;;;432         	else event_ptr_find=63;
000598  f04f083f          MOV      r8,#0x3f
                  |L1.1436|
;;;433         	if(event_ptr_find==event_ptr)goto avar_unet_hndl_end;
00059c  45d8              CMP      r8,r11
00059e  d1db              BNE      |L1.1368|
0005a0  e066              B        |L1.1648|
                  |L1.1442|
;;;434         	else goto avar_unet_hndl_lbl1;
;;;435         	}
;;;436         else 
;;;437         	{
;;;438         	lc640_read_long_ptr(lc640_adr+16,data);
0005a2  4669              MOV      r1,sp
0005a4  f10a0010          ADD      r0,r10,#0x10
0005a8  f7fffffe          BL       lc640_read_long_ptr
;;;439         	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
0005ac  f89d0000          LDRB     r0,[sp,#0]
0005b0  2841              CMP      r0,#0x41
0005b2  d10b              BNE      |L1.1484|
0005b4  f89d0001          LDRB     r0,[sp,#1]
0005b8  2841              CMP      r0,#0x41
0005ba  d107              BNE      |L1.1484|
0005bc  f89d0002          LDRB     r0,[sp,#2]
0005c0  2841              CMP      r0,#0x41
0005c2  d103              BNE      |L1.1484|
0005c4  f89d0003          LDRB     r0,[sp,#3]
0005c8  2841              CMP      r0,#0x41
0005ca  d00a              BEQ      |L1.1506|
                  |L1.1484|
;;;440         		{        
;;;441         		if(event_ptr_find)event_ptr_find--;
0005cc  f1b80f00          CMP      r8,#0
0005d0  d002              BEQ      |L1.1496|
0005d2  f1a80801          SUB      r8,r8,#1
0005d6  e001              B        |L1.1500|
                  |L1.1496|
;;;442             		else event_ptr_find=63;
0005d8  f04f083f          MOV      r8,#0x3f
                  |L1.1500|
;;;443             		if(event_ptr_find==event_ptr)goto avar_unet_hndl_end;
0005dc  45d8              CMP      r8,r11
0005de  d1bb              BNE      |L1.1368|
0005e0  e046              B        |L1.1648|
                  |L1.1506|
;;;444         		else goto avar_unet_hndl_lbl1;
;;;445         		}
;;;446    
;;;447         	}	
;;;448    	
;;;449    	data[0]=LPC_RTC->YEAR;
0005e2  f1050520          ADD      r5,r5,#0x20
0005e6  8ba8              LDRH     r0,[r5,#0x1c]
0005e8  f88d0000          STRB     r0,[sp,#0]
;;;450    	data[1]=LPC_RTC->MONTH;
0005ec  7e28              LDRB     r0,[r5,#0x18]
0005ee  f88d0001          STRB     r0,[sp,#1]
;;;451    	data[2]=LPC_RTC->DOM;
0005f2  7b28              LDRB     r0,[r5,#0xc]
0005f4  f88d0002          STRB     r0,[sp,#2]
;;;452    	data[3]=0;
0005f8  f88d6003          STRB     r6,[sp,#3]
;;;453    	lc640_write_long_ptr(lc640_adr+16,data);
0005fc  4669              MOV      r1,sp
0005fe  f10a0010          ADD      r0,r10,#0x10
000602  f7fffffe          BL       lc640_write_long_ptr
;;;454    
;;;455    	data[0]=LPC_RTC->HOUR;
000606  7a28              LDRB     r0,[r5,#8]
000608  f88d0000          STRB     r0,[sp,#0]
;;;456    	data[1]=LPC_RTC->MIN;
00060c  7928              LDRB     r0,[r5,#4]
00060e  f88d0001          STRB     r0,[sp,#1]
;;;457    	data[2]=LPC_RTC->SEC;
000612  7828              LDRB     r0,[r5,#0]
000614  f88d0002          STRB     r0,[sp,#2]
;;;458    	data[3]=0;
000618  f88d6003          STRB     r6,[sp,#3]
;;;459    	lc640_write_long_ptr(lc640_adr+20,data); 
00061c  4669              MOV      r1,sp
00061e  f10a0014          ADD      r0,r10,#0x14
000622  f7fffffe          BL       lc640_write_long_ptr
;;;460    	
;;;461    	//o_10_s
;;;462    	if(in==4) {
000626  2c04              CMP      r4,#4
000628  d025              BEQ      |L1.1654|
;;;463    	   	data[0]=*((char*)(&net_Ustore_max));
;;;464    		data[1]=*(((char*)(&net_Ustore_max))+1);
;;;465    	}else{
;;;466    		data[0]=*((char*)(&net_Ustore));
00062a  48c4              LDR      r0,|L1.2364|
00062c  7801              LDRB     r1,[r0,#0]  ; net_Ustore
00062e  f88d1000          STRB     r1,[sp,#0]
;;;467    		data[1]=*(((char*)(&net_Ustore))+1);
000632  7840              LDRB     r0,[r0,#1]  ; net_Ustore
000634  f88d0001          STRB     r0,[sp,#1]
                  |L1.1592|
;;;468    	}
;;;469    	//o_10_e
;;;470    	data[2]='B';
000638  f88d9002          STRB     r9,[sp,#2]
;;;471    	data[3]='B';
00063c  f88d9003          STRB     r9,[sp,#3]
;;;472    	lc640_write_long_ptr(lc640_adr+24,data);
000640  4669              MOV      r1,sp
000642  f10a0018          ADD      r0,r10,#0x18
000646  f7fffffe          BL       lc640_write_long_ptr
;;;473    	
;;;474    	data[0]='B';
00064a  f88d9000          STRB     r9,[sp,#0]
;;;475    	data[1]='B';
00064e  f88d9001          STRB     r9,[sp,#1]
;;;476    	data[2]='B';
000652  f88d9002          STRB     r9,[sp,#2]
;;;477    	data[3]='B';
000656  f88d9003          STRB     r9,[sp,#3]
;;;478    	lc640_write_long_ptr(lc640_adr+28,data);	
00065a  4669              MOV      r1,sp
00065c  f10a001c          ADD      r0,r10,#0x1c
000660  f7fffffe          BL       lc640_write_long_ptr
;;;479    	
;;;480    /*	memo_out0[0]=0x55;
;;;481         memo_out0[1]=0x00+2;
;;;482         memo_out0[2]=1;
;;;483         memo_out0[3]=0x0b;
;;;484         memo_out0[4]=0xaa;
;;;485         memo_out0[5]=0xaa; 
;;;486         	
;;;487         memo_out0[6]=crc_87(memo_out0,6);
;;;488    	memo_out0[7]=crc_95(memo_out0,6);
;;;489         usart_out_adr0(memo_out0,8); */
;;;490         snmp_trap_send("Main power alarm  clear",2,1,1);	
000664  2301              MOVS     r3,#1
000666  461a              MOV      r2,r3
000668  2102              MOVS     r1,#2
00066a  a0b5              ADR      r0,|L1.2368|
00066c  f7fffffe          BL       snmp_trap_send
                  |L1.1648|
;;;491    	}
;;;492    avar_unet_hndl_end:
;;;493    	__nop();		
000670  bf00              NOP      
                  |L1.1650|
;;;494    }
000672  e8bd8ff8          POP      {r3-r11,pc}
                  |L1.1654|
000676  48b8              LDR      r0,|L1.2392|
000678  7801              LDRB     r1,[r0,#0]            ;463  ; net_Ustore_max
00067a  f88d1000          STRB     r1,[sp,#0]            ;463
00067e  7840              LDRB     r0,[r0,#1]            ;464  ; net_Ustore_max
000680  f88d0001          STRB     r0,[sp,#1]            ;464
000684  e7d8              B        |L1.1592|
;;;495    
                          ENDP

                  avar_uout_hndl PROC
;;;497    //-----------------------------------------------
;;;498    void avar_uout_hndl(char in)
000686  e92d4ff8          PUSH     {r3-r11,lr}
;;;499    {
;;;500    
;;;501    char data[4];
;;;502    unsigned int event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;503    char avar_data=0;
;;;504    
;;;505    if(in==1)
;;;506    	{
;;;507    	//net_av=1;
;;;508    
;;;509    	//beep_init(0x01L,'O');
;;;510    	//a.av.bAN=1;
;;;511    
;;;512    
;;;513    	//beep_init(0x33333333,'A');
;;;514    
;;;515    	if(load_U>U_OUT_KONTR_MAX)uout_av=1;
;;;516    	if(load_U<U_OUT_KONTR_MIN)uout_av=2;
;;;517    	
;;;518    	avar_data=uout_av;
;;;519    		 
;;;520    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;521    	event_ptr++;	
;;;522    	if(event_ptr>63)event_ptr=0;	
;;;523    	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;524    	
;;;525        event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;526    	if(event_cnt!=63)event_cnt=event_ptr;
;;;527    	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;528    	
;;;529    	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;530    	
;;;531    	data[0]='Q';
;;;532    	data[1]=0;
;;;533    	data[2]='A';
;;;534    	data[3]=avar_data;
;;;535    	lc640_write_long_ptr(lc640_adr,data);
;;;536    
;;;537    	 //load_U=4321;
;;;538    
;;;539    	data[0]=*((char*)&load_U);
;;;540    	data[1]=*(((char*)&load_U)+1);
;;;541    	data[2]=0;
;;;542    	data[3]=0;
;;;543    	lc640_write_long_ptr(lc640_adr+4,data);
;;;544    
;;;545    	data[0]=LPC_RTC->YEAR;
00068a  4fb4              LDR      r7,|L1.2396|
00068c  49b4              LDR      r1,|L1.2400|
00068e  f44f6560          MOV      r5,#0xe00             ;520
000692  f04f0800          MOV      r8,#0                 ;503
000696  f44f6980          MOV      r9,#0x400             ;529
00069a  2801              CMP      r0,#1                 ;505
00069c  d002              BEQ      |L1.1700|
;;;546    	data[1]=LPC_RTC->MONTH;
;;;547    	data[2]=LPC_RTC->DOM;
;;;548    	data[3]=0;
;;;549    	lc640_write_long_ptr(lc640_adr+8,data);
;;;550    
;;;551    	data[0]=LPC_RTC->HOUR;
;;;552    	data[1]=LPC_RTC->MIN;
;;;553    	data[2]=LPC_RTC->SEC;
;;;554    	data[3]=0;
;;;555    	lc640_write_long_ptr(lc640_adr+12,data);
;;;556    	
;;;557    	data[0]='A';
;;;558    	data[1]='A';
;;;559    	data[2]='A';
;;;560    	data[3]='A';
;;;561    	lc640_write_long_ptr(lc640_adr+16,data);
;;;562    	
;;;563    	data[0]='A';
;;;564    	data[1]='A';
;;;565    	data[2]='A';
;;;566    	data[3]='A';
;;;567    	lc640_write_long_ptr(lc640_adr+20,data);
;;;568    	
;;;569    	data[0]='A';
;;;570    	data[1]='A';
;;;571    	data[2]='A';
;;;572    	data[3]='A';
;;;573    	lc640_write_long_ptr(lc640_adr+24,data);
;;;574    	
;;;575    	data[0]='A';
;;;576    	data[1]='A';
;;;577    	data[2]='A';
;;;578    	data[3]='A';
;;;579    	lc640_write_long_ptr(lc640_adr+28,data);				
;;;580    	
;;;581    /*	memo_out0[0]=0x55;
;;;582         memo_out0[1]=0x00+2;
;;;583         memo_out0[2]=1;
;;;584         memo_out0[3]=0x0b;
;;;585         memo_out0[4]=0x55;
;;;586         memo_out0[5]=0x55; 
;;;587         	
;;;588         memo_out0[6]=crc_87(memo_out0,6);
;;;589    	memo_out0[7]=crc_95(memo_out0,6);
;;;590         usart_out_adr0(memo_out0,8); 
;;;591    	*/
;;;592    	//snmp_trap_send("Main power is off",2,1,0);
;;;593    	}
;;;594    
;;;595    else if(in==0)
00069e  2800              CMP      r0,#0
0006a0  d07d              BEQ      |L1.1950|
0006a2  e132              B        |L1.2314|
                  |L1.1700|
0006a4  f8dfa2bc          LDR      r10,|L1.2404|
0006a8  4aaf              LDR      r2,|L1.2408|
0006aa  f9ba0000          LDRSH    r0,[r10,#0]           ;515  ; load_U
0006ae  f9b22000          LDRSH    r2,[r2,#0]            ;515  ; U_OUT_KONTR_MAX
0006b2  4290              CMP      r0,r2                 ;515
0006b4  dd02              BLE      |L1.1724|
0006b6  f04f0201          MOV      r2,#1                 ;515
0006ba  700a              STRB     r2,[r1,#0]            ;515
                  |L1.1724|
0006bc  4aab              LDR      r2,|L1.2412|
0006be  f9b22000          LDRSH    r2,[r2,#0]            ;516  ; U_OUT_KONTR_MIN
0006c2  4290              CMP      r0,r2                 ;516
0006c4  da02              BGE      |L1.1740|
0006c6  f04f0002          MOV      r0,#2                 ;516
0006ca  7008              STRB     r0,[r1,#0]            ;516
                  |L1.1740|
0006cc  780e              LDRB     r6,[r1,#0]            ;518  ; uout_av
0006ce  4628              MOV      r0,r5                 ;520
0006d0  f7fffffe          BL       lc640_read_int
0006d4  f1000001          ADD      r0,r0,#1              ;521
0006d8  4604              MOV      r4,r0                 ;521
0006da  2c3f              CMP      r4,#0x3f              ;522
0006dc  d901              BLS      |L1.1762|
0006de  f04f0400          MOV      r4,#0                 ;522
                  |L1.1762|
0006e2  b221              SXTH     r1,r4                 ;523
0006e4  4628              MOV      r0,r5                 ;523
0006e6  f7fffffe          BL       lc640_write_int
0006ea  f6406b02          MOV      r11,#0xe02            ;525
0006ee  4658              MOV      r0,r11                ;525
0006f0  f7fffffe          BL       lc640_read_int
0006f4  283f              CMP      r0,#0x3f              ;526
0006f6  d000              BEQ      |L1.1786|
0006f8  4620              MOV      r0,r4                 ;526
                  |L1.1786|
0006fa  b201              SXTH     r1,r0                 ;527
0006fc  4658              MOV      r0,r11                ;527
0006fe  f7fffffe          BL       lc640_write_int
000702  4628              MOV      r0,r5                 ;529
000704  f7fffffe          BL       lc640_read_int
000708  eb091540          ADD      r5,r9,r0,LSL #5       ;529
00070c  f04f0051          MOV      r0,#0x51              ;531
000710  f88d0000          STRB     r0,[sp,#0]            ;531
000714  f88d8001          STRB     r8,[sp,#1]            ;532
000718  f04f0441          MOV      r4,#0x41              ;533
00071c  f88d4002          STRB     r4,[sp,#2]            ;533
000720  f88d6003          STRB     r6,[sp,#3]            ;534
000724  4669              MOV      r1,sp                 ;535
000726  4628              MOV      r0,r5                 ;535
000728  f7fffffe          BL       lc640_write_long_ptr
00072c  f89a0000          LDRB     r0,[r10,#0]           ;539  ; load_U
000730  f88d0000          STRB     r0,[sp,#0]            ;539
000734  f89a0001          LDRB     r0,[r10,#1]           ;540  ; load_U
000738  f88d0001          STRB     r0,[sp,#1]            ;540
00073c  f88d8002          STRB     r8,[sp,#2]            ;541
000740  f88d8003          STRB     r8,[sp,#3]            ;542
000744  4669              MOV      r1,sp                 ;543
000746  1d28              ADDS     r0,r5,#4              ;543
000748  f7fffffe          BL       lc640_write_long_ptr
00074c  f1070720          ADD      r7,r7,#0x20           ;545
000750  8bb8              LDRH     r0,[r7,#0x1c]         ;545
000752  f88d0000          STRB     r0,[sp,#0]            ;545
000756  7e38              LDRB     r0,[r7,#0x18]         ;546
000758  f88d0001          STRB     r0,[sp,#1]            ;546
00075c  7b38              LDRB     r0,[r7,#0xc]          ;547
00075e  f88d0002          STRB     r0,[sp,#2]            ;547
000762  f88d8003          STRB     r8,[sp,#3]            ;548
000766  4669              MOV      r1,sp                 ;549
000768  f1050008          ADD      r0,r5,#8              ;549
00076c  f7fffffe          BL       lc640_write_long_ptr
000770  7a38              LDRB     r0,[r7,#8]            ;551
000772  f88d0000          STRB     r0,[sp,#0]            ;551
000776  7938              LDRB     r0,[r7,#4]            ;552
000778  f88d0001          STRB     r0,[sp,#1]            ;552
00077c  7838              LDRB     r0,[r7,#0]            ;553
00077e  f88d0002          STRB     r0,[sp,#2]            ;553
000782  f88d8003          STRB     r8,[sp,#3]            ;554
000786  4669              MOV      r1,sp                 ;555
000788  f105000c          ADD      r0,r5,#0xc            ;555
00078c  f7fffffe          BL       lc640_write_long_ptr
000790  f88d4000          STRB     r4,[sp,#0]            ;557
000794  f88d4001          STRB     r4,[sp,#1]            ;558
000798  f88d4002          STRB     r4,[sp,#2]            ;559
00079c  e000              B        |L1.1952|
                  |L1.1950|
00079e  e02e              B        |L1.2046|
                  |L1.1952|
0007a0  f88d4003          STRB     r4,[sp,#3]            ;560
0007a4  4669              MOV      r1,sp                 ;561
0007a6  f1050010          ADD      r0,r5,#0x10           ;561
0007aa  f7fffffe          BL       lc640_write_long_ptr
0007ae  f88d4000          STRB     r4,[sp,#0]            ;563
0007b2  f88d4001          STRB     r4,[sp,#1]            ;564
0007b6  f88d4002          STRB     r4,[sp,#2]            ;565
0007ba  f88d4003          STRB     r4,[sp,#3]            ;566
0007be  4669              MOV      r1,sp                 ;567
0007c0  f1050014          ADD      r0,r5,#0x14           ;567
0007c4  f7fffffe          BL       lc640_write_long_ptr
0007c8  f88d4000          STRB     r4,[sp,#0]            ;569
0007cc  f88d4001          STRB     r4,[sp,#1]            ;570
0007d0  f88d4002          STRB     r4,[sp,#2]            ;571
0007d4  f88d4003          STRB     r4,[sp,#3]            ;572
0007d8  4669              MOV      r1,sp                 ;573
0007da  f1050018          ADD      r0,r5,#0x18           ;573
0007de  f7fffffe          BL       lc640_write_long_ptr
0007e2  f88d4000          STRB     r4,[sp,#0]            ;575
0007e6  f88d4001          STRB     r4,[sp,#1]            ;576
0007ea  f88d4002          STRB     r4,[sp,#2]            ;577
0007ee  f88d4003          STRB     r4,[sp,#3]            ;578
0007f2  4669              MOV      r1,sp                 ;579
0007f4  f105001c          ADD      r0,r5,#0x1c           ;579
0007f8  f7fffffe          BL       lc640_write_long_ptr
0007fc  e085              B        |L1.2314|
                  |L1.2046|
;;;596    	{
;;;597    	uout_av=0;
0007fe  f8818000          STRB     r8,[r1,#0]
;;;598    
;;;599      /*
;;;600    	SET_REG(C2GSR,3,24,8);
;;;601    	C2MOD=0;
;;;602    	bOUT_FREE2=1;*/
;;;603    
;;;604    
;;;605    	//C2MOD=0;
;;;606    
;;;607    	//can2_init(7,8,CANBitrate250k_60MHz);
;;;608    
;;;609         //beep_init(0x02L,'O');
;;;610    	//a_.av.bAN=0;
;;;611    //	SET_REG(avar_stat,0,0,1);
;;;612    
;;;613    	//if(AV_OFF_AVT)a.av.bAN=0;
;;;614    	
;;;615    	//if(AV_OFF_AVT) SET_REG(avar_ind_stat,0,0,1);
;;;616    
;;;617        event_ptr=lc640_read_int(PTR_EVENT_LOG);
000802  4628              MOV      r0,r5
000804  f7fffffe          BL       lc640_read_int
000808  4606              MOV      r6,r0
;;;618    	event_ptr_find=event_ptr;
00080a  4634              MOV      r4,r6
                  |L1.2060|
;;;619    avar_uout_hndl_lbl1:
;;;620    	lc640_adr=EVENT_LOG+(event_ptr_find*32);
00080c  eb091544          ADD      r5,r9,r4,LSL #5
;;;621    
;;;622         lc640_read_long_ptr(lc640_adr,data);
000810  4669              MOV      r1,sp
000812  4628              MOV      r0,r5
000814  f7fffffe          BL       lc640_read_long_ptr
;;;623         
;;;624         if(!((data[0]=='Q')&&(data[1]==0)&&(data[2]=='A')))
000818  f89d0000          LDRB     r0,[sp,#0]
00081c  2851              CMP      r0,#0x51
00081e  d106              BNE      |L1.2094|
000820  f89d0001          LDRB     r0,[sp,#1]
000824  b918              CBNZ     r0,|L1.2094|
000826  f89d0002          LDRB     r0,[sp,#2]
00082a  2841              CMP      r0,#0x41
00082c  d008              BEQ      |L1.2112|
                  |L1.2094|
;;;625         	{        
;;;626         	if(event_ptr_find)event_ptr_find--;
00082e  b114              CBZ      r4,|L1.2102|
000830  f1a40401          SUB      r4,r4,#1
000834  e001              B        |L1.2106|
                  |L1.2102|
;;;627         	else event_ptr_find=63;
000836  f04f043f          MOV      r4,#0x3f
                  |L1.2106|
;;;628         	if(event_ptr_find==event_ptr)goto avar_unet_hndl_end;
00083a  42b4              CMP      r4,r6
00083c  d1e6              BNE      |L1.2060|
00083e  e064              B        |L1.2314|
                  |L1.2112|
;;;629         	else goto avar_uout_hndl_lbl1;
;;;630         	}
;;;631         else 
;;;632         	{
;;;633         	lc640_read_long_ptr(lc640_adr+16,data);
000840  4669              MOV      r1,sp
000842  f1050010          ADD      r0,r5,#0x10
000846  f7fffffe          BL       lc640_read_long_ptr
;;;634         	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
00084a  f89d0000          LDRB     r0,[sp,#0]
00084e  2841              CMP      r0,#0x41
000850  d10b              BNE      |L1.2154|
000852  f89d0001          LDRB     r0,[sp,#1]
000856  2841              CMP      r0,#0x41
000858  d107              BNE      |L1.2154|
00085a  f89d0002          LDRB     r0,[sp,#2]
00085e  2841              CMP      r0,#0x41
000860  d103              BNE      |L1.2154|
000862  f89d0003          LDRB     r0,[sp,#3]
000866  2841              CMP      r0,#0x41
000868  d008              BEQ      |L1.2172|
                  |L1.2154|
;;;635         		{        
;;;636         		if(event_ptr_find)event_ptr_find--;
00086a  b114              CBZ      r4,|L1.2162|
00086c  f1a40401          SUB      r4,r4,#1
000870  e001              B        |L1.2166|
                  |L1.2162|
;;;637             		else event_ptr_find=63;
000872  f04f043f          MOV      r4,#0x3f
                  |L1.2166|
;;;638             		if(event_ptr_find==event_ptr)goto avar_unet_hndl_end;
000876  42b4              CMP      r4,r6
000878  d1c8              BNE      |L1.2060|
00087a  e046              B        |L1.2314|
                  |L1.2172|
;;;639         		else goto avar_uout_hndl_lbl1;
;;;640         		}
;;;641    
;;;642         	}	
;;;643    	
;;;644    	data[0]=LPC_RTC->YEAR;
00087c  f1070720          ADD      r7,r7,#0x20
000880  8bb8              LDRH     r0,[r7,#0x1c]
000882  f88d0000          STRB     r0,[sp,#0]
;;;645    	data[1]=LPC_RTC->MONTH;
000886  7e38              LDRB     r0,[r7,#0x18]
000888  f88d0001          STRB     r0,[sp,#1]
;;;646    	data[2]=LPC_RTC->DOM;
00088c  7b38              LDRB     r0,[r7,#0xc]
00088e  f88d0002          STRB     r0,[sp,#2]
;;;647    	data[3]=0;
000892  f88d8003          STRB     r8,[sp,#3]
;;;648    	lc640_write_long_ptr(lc640_adr+16,data);
000896  4669              MOV      r1,sp
000898  f1050010          ADD      r0,r5,#0x10
00089c  f7fffffe          BL       lc640_write_long_ptr
;;;649    
;;;650    	data[0]=LPC_RTC->HOUR;
0008a0  7a38              LDRB     r0,[r7,#8]
0008a2  f88d0000          STRB     r0,[sp,#0]
;;;651    	data[1]=LPC_RTC->MIN;
0008a6  7938              LDRB     r0,[r7,#4]
0008a8  f88d0001          STRB     r0,[sp,#1]
;;;652    	data[2]=LPC_RTC->SEC;
0008ac  7838              LDRB     r0,[r7,#0]
0008ae  f88d0002          STRB     r0,[sp,#2]
;;;653    	data[3]=0;
0008b2  f88d8003          STRB     r8,[sp,#3]
;;;654    	lc640_write_long_ptr(lc640_adr+20,data); 
0008b6  4669              MOV      r1,sp
0008b8  f1050014          ADD      r0,r5,#0x14
0008bc  f7fffffe          BL       lc640_write_long_ptr
;;;655    	
;;;656    	data[0]=*((char*)(&net_Ustore));
0008c0  481e              LDR      r0,|L1.2364|
0008c2  7801              LDRB     r1,[r0,#0]  ; net_Ustore
0008c4  f88d1000          STRB     r1,[sp,#0]
;;;657    	data[1]=*(((char*)(&net_Ustore))+1);
0008c8  7840              LDRB     r0,[r0,#1]  ; net_Ustore
0008ca  f88d0001          STRB     r0,[sp,#1]
;;;658    	data[2]='B';
0008ce  f04f0442          MOV      r4,#0x42
0008d2  f88d4002          STRB     r4,[sp,#2]
;;;659    	data[3]='B';
0008d6  f88d4003          STRB     r4,[sp,#3]
;;;660    	lc640_write_long_ptr(lc640_adr+24,data);
0008da  4669              MOV      r1,sp
0008dc  f1050018          ADD      r0,r5,#0x18
0008e0  f7fffffe          BL       lc640_write_long_ptr
;;;661    	
;;;662    	data[0]='B';
0008e4  f88d4000          STRB     r4,[sp,#0]
;;;663    	data[1]='B';
0008e8  f88d4001          STRB     r4,[sp,#1]
;;;664    	data[2]='B';
0008ec  f88d4002          STRB     r4,[sp,#2]
;;;665    	data[3]='B';
0008f0  f88d4003          STRB     r4,[sp,#3]
;;;666    	lc640_write_long_ptr(lc640_adr+28,data);	
0008f4  4669              MOV      r1,sp
0008f6  f105001c          ADD      r0,r5,#0x1c
0008fa  f7fffffe          BL       lc640_write_long_ptr
;;;667    	
;;;668    /*	memo_out0[0]=0x55;
;;;669         memo_out0[1]=0x00+2;
;;;670         memo_out0[2]=1;
;;;671         memo_out0[3]=0x0b;
;;;672         memo_out0[4]=0xaa;
;;;673         memo_out0[5]=0xaa; 
;;;674         	
;;;675         memo_out0[6]=crc_87(memo_out0,6);
;;;676    	memo_out0[7]=crc_95(memo_out0,6);
;;;677         usart_out_adr0(memo_out0,8); */
;;;678         snmp_trap_send("Main power is on",2,1,1);	
0008fe  2301              MOVS     r3,#1
000900  461a              MOV      r2,r3
000902  2102              MOVS     r1,#2
000904  a01a              ADR      r0,|L1.2416|
000906  f7fffffe          BL       snmp_trap_send
                  |L1.2314|
;;;679    	}
;;;680    avar_unet_hndl_end:
;;;681    	__nop();		
00090a  bf00              NOP      
;;;682    }
00090c  e6b1              B        |L1.1650|
00090e  0000              DCW      0x0000
                  |L1.2320|
000910  4d61696e          DCB      "Main power alarm, voltage increased",0
000914  20706f77
000918  65722061
00091c  6c61726d
000920  2c20766f
000924  6c746167
000928  6520696e
00092c  63726561
000930  73656400
                  |L1.2356|
                          DCD      ||.data||
                  |L1.2360|
                          DCD      AV_OFF_AVT
                  |L1.2364|
                          DCD      net_Ustore
                  |L1.2368|
000940  4d61696e          DCB      "Main power alarm  clear",0
000944  20706f77
000948  65722061
00094c  6c61726d
000950  2020636c
000954  65617200
                  |L1.2392|
                          DCD      net_Ustore_max
                  |L1.2396|
                          DCD      0x40024000
                  |L1.2400|
                          DCD      uout_av
                  |L1.2404|
                          DCD      load_U
                  |L1.2408|
                          DCD      U_OUT_KONTR_MAX
                  |L1.2412|
                          DCD      U_OUT_KONTR_MIN
                  |L1.2416|
000970  4d61696e          DCB      "Main power is on",0
000974  20706f77
000978  65722069
00097c  73206f6e
000980  00      
000981  00                DCB      0
000982  00                DCB      0
000983  00                DCB      0
                          ENDP

                  avar_bps_hndl PROC
;;;684    //-----------------------------------------------
;;;685    void avar_bps_hndl(char dev, char v, char in)
000984  e92d4ff8          PUSH     {r3-r11,lr}
;;;686    {
000988  4606              MOV      r6,r0
00098a  460c              MOV      r4,r1
;;;687    char data[4];
;;;688    unsigned short event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;689    char avar_simbol;
;;;690    
;;;691    avar_simbol='T';
00098c  f04f0754          MOV      r7,#0x54
;;;692    if(v==0)avar_simbol='T';
000990  b174              CBZ      r4,|L1.2480|
;;;693    else if(v==1)avar_simbol='U';
000992  2c01              CMP      r4,#1
000994  d004              BEQ      |L1.2464|
;;;694    else if(v==2)avar_simbol='u';
000996  2c02              CMP      r4,#2
000998  d005              BEQ      |L1.2470|
;;;695    else if(v==3)avar_simbol='L';
00099a  2c03              CMP      r4,#3
00099c  d006              BEQ      |L1.2476|
00099e  e007              B        |L1.2480|
                  |L1.2464|
0009a0  f04f0755          MOV      r7,#0x55              ;693
0009a4  e004              B        |L1.2480|
                  |L1.2470|
0009a6  f04f0775          MOV      r7,#0x75              ;694
0009aa  e001              B        |L1.2480|
                  |L1.2476|
0009ac  f04f074c          MOV      r7,#0x4c
                  |L1.2480|
;;;696    
;;;697    if(in==1)
;;;698    	{
;;;699    	//av_src[bps]=1;
;;;700    
;;;701    //	SET_REG(avar_ind_stat,1,3+dev,1);
;;;702    //	SET_REG(avar_stat,1,3+dev,1);
;;;703    	
;;;704    	if(v==0)bps[dev]._av|=(1<<0);
;;;705    	else if(v==1) bps[dev]._av|=(1<<1);
;;;706    	else if(v==2) bps[dev]._av|=(1<<2);
;;;707    	else if(v==3) bps[dev]._av|=(1<<3);
;;;708    
;;;709    	bps[dev]._last_avar=v;
;;;710    
;;;711    	//beep_init(0x33333333,'A');
;;;712    
;;;713    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;714    	event_ptr++;	
;;;715    	if(event_ptr>63)event_ptr=0;	
;;;716    	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;717    	
;;;718        event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;719    	if(event_cnt!=63)event_cnt=event_ptr;
;;;720    	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;721    	
;;;722    	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;723    	
;;;724    	data[0]='S';
;;;725    	data[1]=dev; 
;;;726    	data[2]=avar_simbol;
;;;727    	data[3]=0;
;;;728    	lc640_write_long_ptr(lc640_adr,data);
;;;729    
;;;730    	data[0]=0;
;;;731    	data[1]=0;
;;;732    	data[2]=0;
;;;733    	data[3]=0;
;;;734    	lc640_write_long_ptr(lc640_adr+4,data);
;;;735    
;;;736    	data[0]=LPC_RTC->YEAR;
0009b0  f8df8400          LDR      r8,|L1.3508|
0009b4  f04f0900          MOV      r9,#0                 ;686
0009b8  48ff              LDR      r0,|L1.3512|
0009ba  eb0601c6          ADD      r1,r6,r6,LSL #3       ;704
0009be  eb011106          ADD      r1,r1,r6,LSL #4       ;704
0009c2  f44f6a60          MOV      r10,#0xe00            ;713
0009c6  f44f6580          MOV      r5,#0x400             ;722
0009ca  eb000081          ADD      r0,r0,r1,LSL #2       ;704
0009ce  2a01              CMP      r2,#1                 ;697
0009d0  d002              BEQ      |L1.2520|
;;;737    	data[1]=LPC_RTC->MONTH;
;;;738    	data[2]=LPC_RTC->DOM;
;;;739    	data[3]=0;
;;;740    	lc640_write_long_ptr(lc640_adr+8,data);
;;;741    
;;;742    	data[0]=LPC_RTC->HOUR;
;;;743    	data[1]=LPC_RTC->MIN;
;;;744    	data[2]=LPC_RTC->SEC;
;;;745    	data[3]=0;
;;;746    	lc640_write_long_ptr(lc640_adr+12,data);
;;;747    	
;;;748    	data[0]='A';
;;;749    	data[1]='A';
;;;750    	data[2]='A';
;;;751    	data[3]='A';
;;;752    	lc640_write_long_ptr(lc640_adr+16,data);
;;;753    	
;;;754    	data[0]='A';
;;;755    	data[1]='A';
;;;756    	data[2]='A';
;;;757    	data[3]='A';
;;;758    	lc640_write_long_ptr(lc640_adr+20,data);
;;;759    	
;;;760    	data[0]='A';
;;;761    	data[1]='A';
;;;762    	data[2]='A';
;;;763    	data[3]='A';
;;;764    	lc640_write_long_ptr(lc640_adr+24,data);
;;;765    	
;;;766    	data[0]='A';
;;;767    	data[1]='A';
;;;768    	data[2]='A';
;;;769    	data[3]='A';
;;;770    	lc640_write_long_ptr(lc640_adr+28,data);		
;;;771    
;;;772    
;;;773    	if(dev==0)
;;;774    		{
;;;775    		if(v==0)
;;;776    		snmp_trap_send("BPS #1 Alarm, overheat",4,1,0);
;;;777    		else if(v==1)
;;;778    		snmp_trap_send("BPS #1 Alarm, voltage is up",4,1,1);
;;;779    		else if(v==2)
;;;780    		snmp_trap_send("BPS #1 Alarm, voltage is down",4,1,2);
;;;781    		else if(v==3)
;;;782    		snmp_trap_send("BPS #1 Alarm, connect is lost",4,1,3);
;;;783    		}
;;;784    	else if(dev==1)
;;;785    		{
;;;786    		if(v==0)
;;;787    		snmp_trap_send("BPS #2 Alarm, overheat",4,2,0);
;;;788    		else if(v==1)
;;;789    		snmp_trap_send("BPS #2 Alarm, voltage is up",4,2,1);
;;;790    		else if(v==2)
;;;791    		snmp_trap_send("BPS #2 Alarm, voltage is down",4,2,2);
;;;792    		else if(v==3)
;;;793    		snmp_trap_send("BPS #2 Alarm, connect is lost",4,2,3);
;;;794    		} 
;;;795    	else if(dev==2)
;;;796    		{
;;;797    		if(v==0)
;;;798    		snmp_trap_send("BPS #3 Alarm, overheat",4,3,0);
;;;799    		else if(v==1)
;;;800    		snmp_trap_send("BPS #3 Alarm, voltage is up",4,3,1);
;;;801    		else if(v==2)
;;;802    		snmp_trap_send("BPS #3 Alarm, voltage is down",4,3,2);
;;;803    		else if(v==3)
;;;804    		snmp_trap_send("BPS #3 Alarm, connect is lost",4,3,3);
;;;805    		} 	
;;;806    			
;;;807    	}
;;;808    
;;;809    else if(in==0)
0009d2  2a00              CMP      r2,#0
0009d4  d07e              BEQ      |L1.2772|
0009d6  e1c4              B        |L1.3426|
                  |L1.2520|
0009d8  b134              CBZ      r4,|L1.2536|
0009da  2c01              CMP      r4,#1                 ;705
0009dc  d009              BEQ      |L1.2546|
0009de  2c02              CMP      r4,#2                 ;706
0009e0  d00c              BEQ      |L1.2556|
0009e2  2c03              CMP      r4,#3                 ;707
0009e4  d00f              BEQ      |L1.2566|
0009e6  e012              B        |L1.2574|
                  |L1.2536|
0009e8  7841              LDRB     r1,[r0,#1]            ;704
0009ea  f0410101          ORR      r1,r1,#1              ;704
0009ee  7041              STRB     r1,[r0,#1]            ;704
0009f0  e00d              B        |L1.2574|
                  |L1.2546|
0009f2  7841              LDRB     r1,[r0,#1]            ;705
0009f4  f0410102          ORR      r1,r1,#2              ;705
0009f8  7041              STRB     r1,[r0,#1]            ;705
0009fa  e008              B        |L1.2574|
                  |L1.2556|
0009fc  7841              LDRB     r1,[r0,#1]            ;706
0009fe  f0410104          ORR      r1,r1,#4              ;706
000a02  7041              STRB     r1,[r0,#1]            ;706
000a04  e003              B        |L1.2574|
                  |L1.2566|
000a06  7841              LDRB     r1,[r0,#1]            ;707
000a08  f0410108          ORR      r1,r1,#8              ;707
000a0c  7041              STRB     r1,[r0,#1]            ;707
                  |L1.2574|
000a0e  f8804057          STRB     r4,[r0,#0x57]         ;709
000a12  4650              MOV      r0,r10                ;713
000a14  f7fffffe          BL       lc640_read_int
000a18  f1000001          ADD      r0,r0,#1              ;714
000a1c  fa1ffb80          UXTH     r11,r0                ;714
000a20  f1bb0f3f          CMP      r11,#0x3f             ;715
000a24  d901              BLS      |L1.2602|
000a26  f04f0b00          MOV      r11,#0                ;715
                  |L1.2602|
000a2a  fa0ff18b          SXTH     r1,r11                ;716
000a2e  4650              MOV      r0,r10                ;716
000a30  f7fffffe          BL       lc640_write_int
000a34  f6406002          MOV      r0,#0xe02             ;718
000a38  f7fffffe          BL       lc640_read_int
000a3c  b280              UXTH     r0,r0                 ;718
000a3e  283f              CMP      r0,#0x3f              ;719
000a40  d000              BEQ      |L1.2628|
000a42  4658              MOV      r0,r11                ;719
                  |L1.2628|
000a44  b201              SXTH     r1,r0                 ;720
000a46  f6406002          MOV      r0,#0xe02             ;720
000a4a  f7fffffe          BL       lc640_write_int
000a4e  4650              MOV      r0,r10                ;722
000a50  f7fffffe          BL       lc640_read_int
000a54  eb051040          ADD      r0,r5,r0,LSL #5       ;722
000a58  b285              UXTH     r5,r0                 ;722
000a5a  f04f0053          MOV      r0,#0x53              ;724
000a5e  f88d0000          STRB     r0,[sp,#0]            ;724
000a62  f88d6001          STRB     r6,[sp,#1]            ;725
000a66  f88d7002          STRB     r7,[sp,#2]            ;726
000a6a  f88d9003          STRB     r9,[sp,#3]            ;727
000a6e  4669              MOV      r1,sp                 ;728
000a70  4628              MOV      r0,r5                 ;728
000a72  f7fffffe          BL       lc640_write_long_ptr
000a76  f8cd9000          STR      r9,[sp,#0]            ;733
000a7a  4669              MOV      r1,sp                 ;734
000a7c  1d28              ADDS     r0,r5,#4              ;734
000a7e  f7fffffe          BL       lc640_write_long_ptr
000a82  f8b8003c          LDRH     r0,[r8,#0x3c]         ;736
000a86  f88d0000          STRB     r0,[sp,#0]            ;736
000a8a  f8980038          LDRB     r0,[r8,#0x38]         ;737
000a8e  f88d0001          STRB     r0,[sp,#1]            ;737
000a92  f898002c          LDRB     r0,[r8,#0x2c]         ;738
000a96  f88d0002          STRB     r0,[sp,#2]            ;738
000a9a  f88d9003          STRB     r9,[sp,#3]            ;739
000a9e  4669              MOV      r1,sp                 ;740
000aa0  f1050008          ADD      r0,r5,#8              ;740
000aa4  f7fffffe          BL       lc640_write_long_ptr
000aa8  f8980028          LDRB     r0,[r8,#0x28]         ;742
000aac  f88d0000          STRB     r0,[sp,#0]            ;742
000ab0  f8980024          LDRB     r0,[r8,#0x24]         ;743
000ab4  f88d0001          STRB     r0,[sp,#1]            ;743
000ab8  f8980020          LDRB     r0,[r8,#0x20]         ;744
000abc  f88d0002          STRB     r0,[sp,#2]            ;744
000ac0  f88d9003          STRB     r9,[sp,#3]            ;745
000ac4  4669              MOV      r1,sp                 ;746
000ac6  f105000c          ADD      r0,r5,#0xc            ;746
000aca  f7fffffe          BL       lc640_write_long_ptr
000ace  f04f0741          MOV      r7,#0x41              ;748
000ad2  e000              B        |L1.2774|
                  |L1.2772|
000ad4  e0a5              B        |L1.3106|
                  |L1.2774|
000ad6  f88d7000          STRB     r7,[sp,#0]            ;748
000ada  f88d7001          STRB     r7,[sp,#1]            ;749
000ade  f88d7002          STRB     r7,[sp,#2]            ;750
000ae2  f88d7003          STRB     r7,[sp,#3]            ;751
000ae6  4669              MOV      r1,sp                 ;752
000ae8  f1050010          ADD      r0,r5,#0x10           ;752
000aec  f7fffffe          BL       lc640_write_long_ptr
000af0  f88d7000          STRB     r7,[sp,#0]            ;754
000af4  f88d7001          STRB     r7,[sp,#1]            ;755
000af8  f88d7002          STRB     r7,[sp,#2]            ;756
000afc  f88d7003          STRB     r7,[sp,#3]            ;757
000b00  4669              MOV      r1,sp                 ;758
000b02  f1050014          ADD      r0,r5,#0x14           ;758
000b06  f7fffffe          BL       lc640_write_long_ptr
000b0a  f88d7000          STRB     r7,[sp,#0]            ;760
000b0e  f88d7001          STRB     r7,[sp,#1]            ;761
000b12  f88d7002          STRB     r7,[sp,#2]            ;762
000b16  f88d7003          STRB     r7,[sp,#3]            ;763
000b1a  4669              MOV      r1,sp                 ;764
000b1c  f1050018          ADD      r0,r5,#0x18           ;764
000b20  f7fffffe          BL       lc640_write_long_ptr
000b24  f88d7000          STRB     r7,[sp,#0]            ;766
000b28  f88d7001          STRB     r7,[sp,#1]            ;767
000b2c  f88d7002          STRB     r7,[sp,#2]            ;768
000b30  f88d7003          STRB     r7,[sp,#3]            ;769
000b34  4669              MOV      r1,sp                 ;770
000b36  f105001c          ADD      r0,r5,#0x1c           ;770
000b3a  f7fffffe          BL       lc640_write_long_ptr
000b3e  b126              CBZ      r6,|L1.2890|
000b40  2e01              CMP      r6,#1                 ;784
000b42  d026              BEQ      |L1.2962|
000b44  2e02              CMP      r6,#2                 ;795
000b46  d048              BEQ      |L1.3034|
000b48  e10b              B        |L1.3426|
                  |L1.2890|
000b4a  b134              CBZ      r4,|L1.2906|
000b4c  2c01              CMP      r4,#1                 ;777
000b4e  d00b              BEQ      |L1.2920|
000b50  2c02              CMP      r4,#2                 ;779
000b52  d010              BEQ      |L1.2934|
000b54  2c03              CMP      r4,#3                 ;781
000b56  d015              BEQ      |L1.2948|
000b58  e103              B        |L1.3426|
                  |L1.2906|
000b5a  2300              MOVS     r3,#0                 ;776
000b5c  2201              MOVS     r2,#1                 ;776
000b5e  2104              MOVS     r1,#4                 ;776
000b60  a096              ADR      r0,|L1.3516|
000b62  f7fffffe          BL       snmp_trap_send
000b66  e0fc              B        |L1.3426|
                  |L1.2920|
000b68  2301              MOVS     r3,#1                 ;778
000b6a  461a              MOV      r2,r3                 ;778
000b6c  2104              MOVS     r1,#4                 ;778
000b6e  a099              ADR      r0,|L1.3540|
000b70  f7fffffe          BL       snmp_trap_send
000b74  e0f5              B        |L1.3426|
                  |L1.2934|
000b76  2302              MOVS     r3,#2                 ;780
000b78  2201              MOVS     r2,#1                 ;780
000b7a  2104              MOVS     r1,#4                 ;780
000b7c  a09c              ADR      r0,|L1.3568|
000b7e  f7fffffe          BL       snmp_trap_send
000b82  e0ee              B        |L1.3426|
                  |L1.2948|
000b84  2303              MOVS     r3,#3                 ;782
000b86  2201              MOVS     r2,#1                 ;782
000b88  2104              MOVS     r1,#4                 ;782
000b8a  a0a1              ADR      r0,|L1.3600|
000b8c  f7fffffe          BL       snmp_trap_send
000b90  e0e7              B        |L1.3426|
                  |L1.2962|
000b92  b134              CBZ      r4,|L1.2978|
000b94  2c01              CMP      r4,#1                 ;788
000b96  d00b              BEQ      |L1.2992|
000b98  2c02              CMP      r4,#2                 ;790
000b9a  d010              BEQ      |L1.3006|
000b9c  2c03              CMP      r4,#3                 ;792
000b9e  d015              BEQ      |L1.3020|
000ba0  e0df              B        |L1.3426|
                  |L1.2978|
000ba2  2300              MOVS     r3,#0                 ;787
000ba4  2202              MOVS     r2,#2                 ;787
000ba6  2104              MOVS     r1,#4                 ;787
000ba8  a0a1              ADR      r0,|L1.3632|
000baa  f7fffffe          BL       snmp_trap_send
000bae  e0d8              B        |L1.3426|
                  |L1.2992|
000bb0  2301              MOVS     r3,#1                 ;789
000bb2  2202              MOVS     r2,#2                 ;789
000bb4  2104              MOVS     r1,#4                 ;789
000bb6  a0a4              ADR      r0,|L1.3656|
000bb8  f7fffffe          BL       snmp_trap_send
000bbc  e0d1              B        |L1.3426|
                  |L1.3006|
000bbe  2302              MOVS     r3,#2                 ;791
000bc0  461a              MOV      r2,r3                 ;791
000bc2  2104              MOVS     r1,#4                 ;791
000bc4  a0a7              ADR      r0,|L1.3684|
000bc6  f7fffffe          BL       snmp_trap_send
000bca  e0ca              B        |L1.3426|
                  |L1.3020|
000bcc  2303              MOVS     r3,#3                 ;793
000bce  2202              MOVS     r2,#2                 ;793
000bd0  2104              MOVS     r1,#4                 ;793
000bd2  a0ac              ADR      r0,|L1.3716|
000bd4  f7fffffe          BL       snmp_trap_send
000bd8  e0c3              B        |L1.3426|
                  |L1.3034|
000bda  b134              CBZ      r4,|L1.3050|
000bdc  2c01              CMP      r4,#1                 ;799
000bde  d00b              BEQ      |L1.3064|
000be0  2c02              CMP      r4,#2                 ;801
000be2  d010              BEQ      |L1.3078|
000be4  2c03              CMP      r4,#3                 ;803
000be6  d015              BEQ      |L1.3092|
000be8  e0bb              B        |L1.3426|
                  |L1.3050|
000bea  2300              MOVS     r3,#0                 ;798
000bec  2203              MOVS     r2,#3                 ;798
000bee  2104              MOVS     r1,#4                 ;798
000bf0  a0ac              ADR      r0,|L1.3748|
000bf2  f7fffffe          BL       snmp_trap_send
000bf6  e0b4              B        |L1.3426|
                  |L1.3064|
000bf8  2301              MOVS     r3,#1                 ;800
000bfa  2203              MOVS     r2,#3                 ;800
000bfc  2104              MOVS     r1,#4                 ;800
000bfe  a0af              ADR      r0,|L1.3772|
000c00  f7fffffe          BL       snmp_trap_send
000c04  e0ad              B        |L1.3426|
                  |L1.3078|
000c06  2302              MOVS     r3,#2                 ;802
000c08  2203              MOVS     r2,#3                 ;802
000c0a  2104              MOVS     r1,#4                 ;802
000c0c  a0b2              ADR      r0,|L1.3800|
000c0e  f7fffffe          BL       snmp_trap_send
000c12  e0a6              B        |L1.3426|
                  |L1.3092|
000c14  2303              MOVS     r3,#3                 ;804
000c16  461a              MOV      r2,r3                 ;804
000c18  2104              MOVS     r1,#4                 ;804
000c1a  a0b7              ADR      r0,|L1.3832|
000c1c  f7fffffe          BL       snmp_trap_send
000c20  e09f              B        |L1.3426|
                  |L1.3106|
;;;810    	{      
;;;811    //	av_bps[bps]=0;
;;;812    
;;;813    	//SET_REG(avar_stat,0,3+bps,1);
;;;814    	//if(AV_OFF_AVT) SET_REG(avar_ind_stat,0,3+bps,1);
;;;815    
;;;816         if(v==0) bps[dev]._av&=(~(1<<0));
000c22  b134              CBZ      r4,|L1.3122|
;;;817         else if(v==1) bps[dev]._av&=(~(1<<1));
000c24  2c01              CMP      r4,#1
000c26  d009              BEQ      |L1.3132|
;;;818    	else if(v==2) bps[dev]._av&=(~(1<<2));
000c28  2c02              CMP      r4,#2
000c2a  d00c              BEQ      |L1.3142|
;;;819    	else if(v==3) bps[dev]._av&=(~(1<<3));
000c2c  2c03              CMP      r4,#3
000c2e  d00f              BEQ      |L1.3152|
000c30  e012              B        |L1.3160|
                  |L1.3122|
000c32  7841              LDRB     r1,[r0,#1]            ;816
000c34  f0210101          BIC      r1,r1,#1              ;816
000c38  7041              STRB     r1,[r0,#1]            ;816
000c3a  e00d              B        |L1.3160|
                  |L1.3132|
000c3c  7841              LDRB     r1,[r0,#1]            ;817
000c3e  f0210102          BIC      r1,r1,#2              ;817
000c42  7041              STRB     r1,[r0,#1]            ;817
000c44  e008              B        |L1.3160|
                  |L1.3142|
000c46  7841              LDRB     r1,[r0,#1]            ;818
000c48  f0210104          BIC      r1,r1,#4              ;818
000c4c  7041              STRB     r1,[r0,#1]            ;818
000c4e  e003              B        |L1.3160|
                  |L1.3152|
000c50  7841              LDRB     r1,[r0,#1]
000c52  f0210108          BIC      r1,r1,#8
000c56  7041              STRB     r1,[r0,#1]
                  |L1.3160|
;;;820         
;;;821    //	if((bps[dev]._av&0x0f==0))
;;;822    //	     {
;;;823    		//SET_REG(avar_stat,0,3+bps,1);
;;;824    		//if(AV_OFF_AVT) SET_REG(avar_ind_stat,0,3+bps,1);
;;;825    //	     }
;;;826     
;;;827    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
000c58  4650              MOV      r0,r10
000c5a  f7fffffe          BL       lc640_read_int
000c5e  fa1ffb80          UXTH     r11,r0
;;;828    	event_ptr_find=event_ptr;
000c62  465c              MOV      r4,r11
                  |L1.3172|
;;;829    	
;;;830    avar_src_hndl_lbl1: 
;;;831    
;;;832    	lc640_adr=EVENT_LOG+(event_ptr_find*32);
000c64  eb051044          ADD      r0,r5,r4,LSL #5
000c68  fa1ffa80          UXTH     r10,r0
;;;833    
;;;834         lc640_read_long_ptr(lc640_adr,data);
000c6c  4669              MOV      r1,sp
000c6e  4650              MOV      r0,r10
000c70  f7fffffe          BL       lc640_read_long_ptr
;;;835         
;;;836         if(!((data[0]=='S')&&(data[1]==dev)&&(data[2]==avar_simbol)))
000c74  f89d0000          LDRB     r0,[sp,#0]
000c78  2853              CMP      r0,#0x53
000c7a  d107              BNE      |L1.3212|
000c7c  f89d0001          LDRB     r0,[sp,#1]
000c80  42b0              CMP      r0,r6
000c82  d103              BNE      |L1.3212|
000c84  f89d0002          LDRB     r0,[sp,#2]
000c88  42b8              CMP      r0,r7
000c8a  d009              BEQ      |L1.3232|
                  |L1.3212|
;;;837         	{        
;;;838         	if(event_ptr_find)event_ptr_find--;
000c8c  b11c              CBZ      r4,|L1.3222|
000c8e  f1a40401          SUB      r4,r4,#1
000c92  b2a4              UXTH     r4,r4
000c94  e001              B        |L1.3226|
                  |L1.3222|
;;;839         	else event_ptr_find=63;
000c96  f04f043f          MOV      r4,#0x3f
                  |L1.3226|
;;;840         	if(event_ptr_find==event_ptr)goto avar_src_hndl_end;
000c9a  455c              CMP      r4,r11
000c9c  d1e2              BNE      |L1.3172|
000c9e  e060              B        |L1.3426|
                  |L1.3232|
;;;841         	else goto avar_src_hndl_lbl1;
;;;842         	}
;;;843         else 
;;;844         	{
;;;845         	lc640_read_long_ptr(lc640_adr+16,data);
000ca0  4669              MOV      r1,sp
000ca2  f10a0010          ADD      r0,r10,#0x10
000ca6  f7fffffe          BL       lc640_read_long_ptr
;;;846         	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
000caa  f89d0000          LDRB     r0,[sp,#0]
000cae  2841              CMP      r0,#0x41
000cb0  d10b              BNE      |L1.3274|
000cb2  f89d0001          LDRB     r0,[sp,#1]
000cb6  2841              CMP      r0,#0x41
000cb8  d107              BNE      |L1.3274|
000cba  f89d0002          LDRB     r0,[sp,#2]
000cbe  2841              CMP      r0,#0x41
000cc0  d103              BNE      |L1.3274|
000cc2  f89d0003          LDRB     r0,[sp,#3]
000cc6  2841              CMP      r0,#0x41
000cc8  d009              BEQ      |L1.3294|
                  |L1.3274|
;;;847         		{        
;;;848         		if(event_ptr_find)event_ptr_find--;
000cca  b11c              CBZ      r4,|L1.3284|
000ccc  f1a40401          SUB      r4,r4,#1
000cd0  b2a4              UXTH     r4,r4
000cd2  e001              B        |L1.3288|
                  |L1.3284|
;;;849             		else event_ptr_find=63;
000cd4  f04f043f          MOV      r4,#0x3f
                  |L1.3288|
;;;850             		if(event_ptr_find==event_ptr)goto avar_src_hndl_end;
000cd8  455c              CMP      r4,r11
000cda  d1c3              BNE      |L1.3172|
000cdc  e041              B        |L1.3426|
                  |L1.3294|
;;;851         		else goto avar_src_hndl_lbl1;
;;;852         		}
;;;853    
;;;854         	}	
;;;855    
;;;856    
;;;857    	
;;;858    	data[0]=LPC_RTC->YEAR;
000cde  f8b8003c          LDRH     r0,[r8,#0x3c]
000ce2  f88d0000          STRB     r0,[sp,#0]
;;;859    	data[1]=LPC_RTC->MONTH;
000ce6  f8980038          LDRB     r0,[r8,#0x38]
000cea  f88d0001          STRB     r0,[sp,#1]
;;;860    	data[2]=LPC_RTC->DOM;
000cee  f898002c          LDRB     r0,[r8,#0x2c]
000cf2  f88d0002          STRB     r0,[sp,#2]
;;;861    	data[3]=0;
000cf6  f88d9003          STRB     r9,[sp,#3]
;;;862    	lc640_write_long_ptr(lc640_adr+16,data);
000cfa  4669              MOV      r1,sp
000cfc  f10a0010          ADD      r0,r10,#0x10
000d00  f7fffffe          BL       lc640_write_long_ptr
;;;863    
;;;864    	data[0]=LPC_RTC->HOUR;
000d04  f8980028          LDRB     r0,[r8,#0x28]
000d08  f88d0000          STRB     r0,[sp,#0]
;;;865    	data[1]=LPC_RTC->MIN;
000d0c  f8980024          LDRB     r0,[r8,#0x24]
000d10  f88d0001          STRB     r0,[sp,#1]
;;;866    	data[2]=LPC_RTC->SEC;
000d14  f8980020          LDRB     r0,[r8,#0x20]
000d18  f88d0002          STRB     r0,[sp,#2]
;;;867    	data[3]=0;
000d1c  f88d9003          STRB     r9,[sp,#3]
;;;868    	lc640_write_long_ptr(lc640_adr+20,data);
000d20  4669              MOV      r1,sp
000d22  f10a0014          ADD      r0,r10,#0x14
000d26  f7fffffe          BL       lc640_write_long_ptr
;;;869    	
;;;870    	data[0]='B';
000d2a  f04f0442          MOV      r4,#0x42
000d2e  f88d4000          STRB     r4,[sp,#0]
;;;871    	data[1]='B';
000d32  f88d4001          STRB     r4,[sp,#1]
;;;872    	data[2]='B';
000d36  f88d4002          STRB     r4,[sp,#2]
;;;873    	data[3]='B';
000d3a  f88d4003          STRB     r4,[sp,#3]
;;;874    	lc640_write_long_ptr(lc640_adr+24,data);
000d3e  4669              MOV      r1,sp
000d40  f10a0018          ADD      r0,r10,#0x18
000d44  f7fffffe          BL       lc640_write_long_ptr
;;;875    	
;;;876    	data[0]='B';
000d48  f88d4000          STRB     r4,[sp,#0]
;;;877    	data[1]='B';
000d4c  f88d4001          STRB     r4,[sp,#1]
;;;878    	data[2]='B';
000d50  f88d4002          STRB     r4,[sp,#2]
;;;879    	data[3]='B';
000d54  f88d4003          STRB     r4,[sp,#3]
;;;880    	lc640_write_long_ptr(lc640_adr+28,data);
000d58  4669              MOV      r1,sp
000d5a  f10a001c          ADD      r0,r10,#0x1c
000d5e  f7fffffe          BL       lc640_write_long_ptr
                  |L1.3426|
;;;881    	
;;;882    	}
;;;883    	
;;;884    avar_src_hndl_end:
;;;885    __nop();		
000d62  bf00              NOP      
                  |L1.3428|
;;;886    }
000d64  e485              B        |L1.1650|
;;;887    
                          ENDP

                  wrk_mem_hndl PROC
;;;888    //-----------------------------------------------
;;;889    void wrk_mem_hndl(char b)
000d66  e92d41fc          PUSH     {r2-r8,lr}
;;;890    {
000d6a  4606              MOV      r6,r0
;;;891    char data[4];
;;;892    unsigned short event_ptr,lc640_adr/*,event_ptr_find*/,event_cnt;
;;;893    
;;;894    signed short temp_temp;
;;;895    
;;;896    if(bat[b]._Iintegr_<5) goto wrk_mem_hndl_end;
000d6c  486a              LDR      r0,|L1.3864|
000d6e  eb060186          ADD      r1,r6,r6,LSL #2
000d72  eb001401          ADD      r4,r0,r1,LSL #4
000d76  8c60              LDRH     r0,[r4,#0x22]
000d78  2805              CMP      r0,#5
000d7a  d31a              BCC      |L1.3506|
;;;897    
;;;898    temp_temp=bat[b]._u_old[((bat_u_old_cnt+6)&0x07)]; 
000d7c  4867              LDR      r0,|L1.3868|
000d7e  8800              LDRH     r0,[r0,#0]  ; bat_u_old_cnt
000d80  f1000006          ADD      r0,r0,#6
000d84  f0000007          AND      r0,r0,#7
000d88  eb040040          ADD      r0,r4,r0,LSL #1
000d8c  8c80              LDRH     r0,[r0,#0x24]
000d8e  9000              STR      r0,[sp,#0]
;;;899    
;;;900    
;;;901    event_ptr=lc640_read_int(PTR_EVENT_LOG);
000d90  f44f6760          MOV      r7,#0xe00
000d94  4638              MOV      r0,r7
000d96  f7fffffe          BL       lc640_read_int
;;;902    event_ptr++;	
000d9a  f1000001          ADD      r0,r0,#1
000d9e  b285              UXTH     r5,r0
;;;903    if(event_ptr>63)event_ptr=0;	
000da0  2d3f              CMP      r5,#0x3f
000da2  d901              BLS      |L1.3496|
000da4  f04f0500          MOV      r5,#0
                  |L1.3496|
;;;904    lc640_write_int(PTR_EVENT_LOG,event_ptr);	
000da8  b229              SXTH     r1,r5
000daa  4638              MOV      r0,r7
000dac  f7fffffe          BL       lc640_write_int
;;;905    	
;;;906    event_cnt=lc640_read_int(CNT_EVENT_LOG);
000db0  e0b6              B        |L1.3872|
                  |L1.3506|
000db2  e11d              B        |L1.4080|
                  |L1.3508|
                          DCD      0x40024000
                  |L1.3512|
                          DCD      bps
                  |L1.3516|
000dbc  42505320          DCB      "BPS #1 Alarm, overheat",0
000dc0  23312041
000dc4  6c61726d
000dc8  2c206f76
000dcc  65726865
000dd0  617400  
000dd3  00                DCB      0
                  |L1.3540|
000dd4  42505320          DCB      "BPS #1 Alarm, voltage is up",0
000dd8  23312041
000ddc  6c61726d
000de0  2c20766f
000de4  6c746167
000de8  65206973
000dec  20757000
                  |L1.3568|
000df0  42505320          DCB      "BPS #1 Alarm, voltage is down",0
000df4  23312041
000df8  6c61726d
000dfc  2c20766f
000e00  6c746167
000e04  65206973
000e08  20646f77
000e0c  6e00    
000e0e  00                DCB      0
000e0f  00                DCB      0
                  |L1.3600|
000e10  42505320          DCB      "BPS #1 Alarm, connect is lost",0
000e14  23312041
000e18  6c61726d
000e1c  2c20636f
000e20  6e6e6563
000e24  74206973
000e28  206c6f73
000e2c  7400    
000e2e  00                DCB      0
000e2f  00                DCB      0
                  |L1.3632|
000e30  42505320          DCB      "BPS #2 Alarm, overheat",0
000e34  23322041
000e38  6c61726d
000e3c  2c206f76
000e40  65726865
000e44  617400  
000e47  00                DCB      0
                  |L1.3656|
000e48  42505320          DCB      "BPS #2 Alarm, voltage is up",0
000e4c  23322041
000e50  6c61726d
000e54  2c20766f
000e58  6c746167
000e5c  65206973
000e60  20757000
                  |L1.3684|
000e64  42505320          DCB      "BPS #2 Alarm, voltage is down",0
000e68  23322041
000e6c  6c61726d
000e70  2c20766f
000e74  6c746167
000e78  65206973
000e7c  20646f77
000e80  6e00    
000e82  00                DCB      0
000e83  00                DCB      0
                  |L1.3716|
000e84  42505320          DCB      "BPS #2 Alarm, connect is lost",0
000e88  23322041
000e8c  6c61726d
000e90  2c20636f
000e94  6e6e6563
000e98  74206973
000e9c  206c6f73
000ea0  7400    
000ea2  00                DCB      0
000ea3  00                DCB      0
                  |L1.3748|
000ea4  42505320          DCB      "BPS #3 Alarm, overheat",0
000ea8  23332041
000eac  6c61726d
000eb0  2c206f76
000eb4  65726865
000eb8  617400  
000ebb  00                DCB      0
                  |L1.3772|
000ebc  42505320          DCB      "BPS #3 Alarm, voltage is up",0
000ec0  23332041
000ec4  6c61726d
000ec8  2c20766f
000ecc  6c746167
000ed0  65206973
000ed4  20757000
                  |L1.3800|
000ed8  42505320          DCB      "BPS #3 Alarm, voltage is down",0
000edc  23332041
000ee0  6c61726d
000ee4  2c20766f
000ee8  6c746167
000eec  65206973
000ef0  20646f77
000ef4  6e00    
000ef6  00                DCB      0
000ef7  00                DCB      0
                  |L1.3832|
000ef8  42505320          DCB      "BPS #3 Alarm, connect is lost",0
000efc  23332041
000f00  6c61726d
000f04  2c20636f
000f08  6e6e6563
000f0c  74206973
000f10  206c6f73
000f14  7400    
000f16  00                DCB      0
000f17  00                DCB      0
                  |L1.3864|
                          DCD      bat
                  |L1.3868|
                          DCD      bat_u_old_cnt
                  |L1.3872|
000f20  f6406802          MOV      r8,#0xe02
000f24  4640              MOV      r0,r8
000f26  f7fffffe          BL       lc640_read_int
000f2a  b280              UXTH     r0,r0
;;;907    if(event_cnt!=63)event_cnt=event_ptr;
000f2c  283f              CMP      r0,#0x3f
000f2e  d000              BEQ      |L1.3890|
000f30  4628              MOV      r0,r5
                  |L1.3890|
;;;908    lc640_write_int(CNT_EVENT_LOG,event_cnt); 
000f32  b201              SXTH     r1,r0
000f34  4640              MOV      r0,r8
000f36  f7fffffe          BL       lc640_write_int
;;;909    	
;;;910    lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
000f3a  4638              MOV      r0,r7
000f3c  f7fffffe          BL       lc640_read_int
000f40  f44f6180          MOV      r1,#0x400
000f44  eb011040          ADD      r0,r1,r0,LSL #5
000f48  b285              UXTH     r5,r0
;;;911    	
;;;912    data[0]='B';
000f4a  f04f0042          MOV      r0,#0x42
000f4e  f88d0004          STRB     r0,[sp,#4]
;;;913    data[1]=b; 
000f52  f88d6005          STRB     r6,[sp,#5]
;;;914    data[2]='W';
000f56  f04f0057          MOV      r0,#0x57
000f5a  f88d0006          STRB     r0,[sp,#6]
;;;915    data[3]=0;
000f5e  f04f0600          MOV      r6,#0
000f62  f88d6007          STRB     r6,[sp,#7]
;;;916    
;;;917    lc640_write_long_ptr(lc640_adr,data);
000f66  a901              ADD      r1,sp,#4
000f68  4628              MOV      r0,r5
000f6a  f7fffffe          BL       lc640_write_long_ptr
;;;918    
;;;919    data[0]=*((char*)&bat[b]._Iintegr_);
000f6e  f8940022          LDRB     r0,[r4,#0x22]
000f72  f88d0004          STRB     r0,[sp,#4]
;;;920    data[1]=*(((char*)(&bat[b]._Iintegr_))+1);
000f76  f8940023          LDRB     r0,[r4,#0x23]
000f7a  f88d0005          STRB     r0,[sp,#5]
;;;921    data[2]=*((char*)&temp_temp);
000f7e  f89d0000          LDRB     r0,[sp,#0]
000f82  f88d0006          STRB     r0,[sp,#6]
;;;922    data[3]=*(((char*)(&temp_temp))+1);
000f86  f89d0001          LDRB     r0,[sp,#1]
000f8a  f88d0007          STRB     r0,[sp,#7]
;;;923    lc640_write_long_ptr(lc640_adr+4,data);
000f8e  a901              ADD      r1,sp,#4
000f90  1d28              ADDS     r0,r5,#4
000f92  f7fffffe          BL       lc640_write_long_ptr
;;;924    
;;;925    lc640_write_long_ptr(lc640_adr+8,(char*)&bat[b]._wrk_date[0]);
000f96  f1040138          ADD      r1,r4,#0x38
000f9a  f1050008          ADD      r0,r5,#8
000f9e  f7fffffe          BL       lc640_write_long_ptr
;;;926    	
;;;927    lc640_write_long_ptr(lc640_adr+12,(char*)&bat[b]._wrk_date[1]);
000fa2  f104013c          ADD      r1,r4,#0x3c
000fa6  f105000c          ADD      r0,r5,#0xc
000faa  f7fffffe          BL       lc640_write_long_ptr
;;;928    
;;;929    data[0]=LPC_RTC->YEAR;
000fae  4cff              LDR      r4,|L1.5036|
000fb0  8ba0              LDRH     r0,[r4,#0x1c]
000fb2  f88d0004          STRB     r0,[sp,#4]
;;;930    data[1]=LPC_RTC->MONTH;
000fb6  7e20              LDRB     r0,[r4,#0x18]
000fb8  f88d0005          STRB     r0,[sp,#5]
;;;931    data[2]=LPC_RTC->DOM;
000fbc  7b20              LDRB     r0,[r4,#0xc]
000fbe  f88d0006          STRB     r0,[sp,#6]
;;;932    data[3]=0;
000fc2  f88d6007          STRB     r6,[sp,#7]
;;;933    lc640_write_long_ptr(lc640_adr+16,data);
000fc6  a901              ADD      r1,sp,#4
000fc8  f1050010          ADD      r0,r5,#0x10
000fcc  f7fffffe          BL       lc640_write_long_ptr
;;;934    
;;;935    data[0]=LPC_RTC->HOUR;
000fd0  7a20              LDRB     r0,[r4,#8]
000fd2  f88d0004          STRB     r0,[sp,#4]
;;;936    data[1]=LPC_RTC->MIN;
000fd6  7920              LDRB     r0,[r4,#4]
000fd8  f88d0005          STRB     r0,[sp,#5]
;;;937    data[2]=LPC_RTC->SEC;
000fdc  7820              LDRB     r0,[r4,#0]
000fde  f88d0006          STRB     r0,[sp,#6]
;;;938    data[3]=0;
000fe2  f88d6007          STRB     r6,[sp,#7]
;;;939    lc640_write_long_ptr(lc640_adr+20,data);
000fe6  a901              ADD      r1,sp,#4
000fe8  f1050014          ADD      r0,r5,#0x14
000fec  f7fffffe          BL       lc640_write_long_ptr
                  |L1.4080|
;;;940    	
;;;941    
;;;942    
;;;943    	
;;;944    wrk_mem_hndl_end:	
;;;945    __nop();
000ff0  bf00              NOP      
;;;946    }  
000ff2  e8bd81fc          POP      {r2-r8,pc}
;;;947    
                          ENDP

                  avar_bat_ips_hndl PROC
;;;949    //-----------------------------------------------
;;;950    void avar_bat_ips_hndl(char in)
000ff6  e92d4ff8          PUSH     {r3-r11,lr}
;;;951    {
000ffa  4602              MOV      r2,r0
;;;952    char data[4];
;;;953    unsigned short event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;954    
;;;955    if(in==1)
;;;956    	{
;;;957    	bat_ips._av|=1;
000ffc  48ec              LDR      r0,|L1.5040|
;;;958        ips_bat_av_stat=1;
000ffe  4ced              LDR      r4,|L1.5044|
;;;959    	ips_bat_av_vzvod=1;
001000  4bed              LDR      r3,|L1.5048|
;;;960    
;;;961    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;962    	event_ptr++;	
;;;963    	if(event_ptr>63)event_ptr=0;	
;;;964    	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;965    	
;;;966    	event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;967    	if(event_cnt!=63)event_cnt=event_ptr;
;;;968    	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;969    	
;;;970    	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;971    	
;;;972    	data[0]='B';
;;;973    	data[1]=0;
;;;974    	data[2]='C';
;;;975    	data[3]=0;
;;;976    	lc640_write_long_ptr(lc640_adr,data);
;;;977    
;;;978    	data[0]=0;
;;;979    	data[1]=0;
;;;980    	data[2]=0;
;;;981    	data[3]=0;
;;;982    	lc640_write_long_ptr(lc640_adr+4,data);
;;;983    
;;;984    	data[0]=LPC_RTC->YEAR;
001002  f8df83b8          LDR      r8,|L1.5052|
001006  f8901041          LDRB     r1,[r0,#0x41]         ;957
00100a  f04f0742          MOV      r7,#0x42              ;972
00100e  f44f6560          MOV      r5,#0xe00             ;961
001012  f04f0900          MOV      r9,#0                 ;963
001016  f44f6a80          MOV      r10,#0x400            ;970
00101a  2a01              CMP      r2,#1                 ;955
00101c  d002              BEQ      |L1.4132|
;;;985    	data[1]=LPC_RTC->MONTH;
;;;986    	data[2]=LPC_RTC->DOM;
;;;987    	data[3]=0;
;;;988    	lc640_write_long_ptr(lc640_adr+8,data);
;;;989    
;;;990    	data[0]=LPC_RTC->HOUR;
;;;991    	data[1]=LPC_RTC->MIN;
;;;992    	data[2]=LPC_RTC->SEC;
;;;993    	data[3]=0;
;;;994    	lc640_write_long_ptr(lc640_adr+12,data);
;;;995    	
;;;996    	data[0]='A';
;;;997    	data[1]='A';
;;;998    	data[2]='A';
;;;999    	data[3]='A';
;;;1000   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1001   	
;;;1002   	data[0]='A';
;;;1003   	data[1]='A';
;;;1004   	data[2]='A';
;;;1005   	data[3]='A';
;;;1006   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1007   	
;;;1008   	data[0]='A';
;;;1009   	data[1]='A';
;;;1010   	data[2]='A';
;;;1011   	data[3]='A';
;;;1012   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1013   	
;;;1014   	data[0]='A';
;;;1015   	data[1]='A';
;;;1016   	data[2]='A';
;;;1017   	data[3]='A';
;;;1018   	lc640_write_long_ptr(lc640_adr+28,data);
;;;1019   					
;;;1020   	snmp_trap_send("BAT 1 Alarm, lost",5,1,1);
;;;1021   		
;;;1022   	}
;;;1023   
;;;1024   else if(in==0)
00101e  2a00              CMP      r2,#0
001020  d07e              BEQ      |L1.4384|
001022  e12f              B        |L1.4740|
                  |L1.4132|
001024  f0410101          ORR      r1,r1,#1              ;957
001028  f8801041          STRB     r1,[r0,#0x41]         ;957
00102c  f04f0001          MOV      r0,#1                 ;958
001030  7020              STRB     r0,[r4,#0]            ;958
001032  7018              STRB     r0,[r3,#0]            ;959
001034  4628              MOV      r0,r5                 ;961
001036  f7fffffe          BL       lc640_read_int
00103a  f1000001          ADD      r0,r0,#1              ;962
00103e  b284              UXTH     r4,r0                 ;962
001040  2c3f              CMP      r4,#0x3f              ;963
001042  d901              BLS      |L1.4168|
001044  f04f0400          MOV      r4,#0                 ;963
                  |L1.4168|
001048  b221              SXTH     r1,r4                 ;964
00104a  4628              MOV      r0,r5                 ;964
00104c  f7fffffe          BL       lc640_write_int
001050  f6406602          MOV      r6,#0xe02             ;966
001054  4630              MOV      r0,r6                 ;966
001056  f7fffffe          BL       lc640_read_int
00105a  b281              UXTH     r1,r0                 ;966
00105c  293f              CMP      r1,#0x3f              ;967
00105e  d000              BEQ      |L1.4194|
001060  4621              MOV      r1,r4                 ;967
                  |L1.4194|
001062  b209              SXTH     r1,r1                 ;968
001064  4630              MOV      r0,r6                 ;968
001066  f7fffffe          BL       lc640_write_int
00106a  4628              MOV      r0,r5                 ;970
00106c  f7fffffe          BL       lc640_read_int
001070  eb0a1040          ADD      r0,r10,r0,LSL #5      ;970
001074  b284              UXTH     r4,r0                 ;970
001076  f88d7000          STRB     r7,[sp,#0]            ;972
00107a  f88d9001          STRB     r9,[sp,#1]            ;973
00107e  f04f0043          MOV      r0,#0x43              ;974
001082  f88d0002          STRB     r0,[sp,#2]            ;974
001086  f88d9003          STRB     r9,[sp,#3]            ;975
00108a  4669              MOV      r1,sp                 ;976
00108c  4620              MOV      r0,r4                 ;976
00108e  f7fffffe          BL       lc640_write_long_ptr
001092  f8cd9000          STR      r9,[sp,#0]            ;981
001096  4669              MOV      r1,sp                 ;982
001098  1d20              ADDS     r0,r4,#4              ;982
00109a  f7fffffe          BL       lc640_write_long_ptr
00109e  f8b8003c          LDRH     r0,[r8,#0x3c]         ;984
0010a2  f88d0000          STRB     r0,[sp,#0]            ;984
0010a6  f8980038          LDRB     r0,[r8,#0x38]         ;985
0010aa  f88d0001          STRB     r0,[sp,#1]            ;985
0010ae  f898002c          LDRB     r0,[r8,#0x2c]         ;986
0010b2  f88d0002          STRB     r0,[sp,#2]            ;986
0010b6  f88d9003          STRB     r9,[sp,#3]            ;987
0010ba  4669              MOV      r1,sp                 ;988
0010bc  f1040008          ADD      r0,r4,#8              ;988
0010c0  f7fffffe          BL       lc640_write_long_ptr
0010c4  f8980028          LDRB     r0,[r8,#0x28]         ;990
0010c8  f88d0000          STRB     r0,[sp,#0]            ;990
0010cc  f8980024          LDRB     r0,[r8,#0x24]         ;991
0010d0  f88d0001          STRB     r0,[sp,#1]            ;991
0010d4  f8980020          LDRB     r0,[r8,#0x20]         ;992
0010d8  f88d0002          STRB     r0,[sp,#2]            ;992
0010dc  f88d9003          STRB     r9,[sp,#3]            ;993
0010e0  4669              MOV      r1,sp                 ;994
0010e2  f104000c          ADD      r0,r4,#0xc            ;994
0010e6  f7fffffe          BL       lc640_write_long_ptr
0010ea  f04f0541          MOV      r5,#0x41              ;996
0010ee  f88d5000          STRB     r5,[sp,#0]            ;996
0010f2  f88d5001          STRB     r5,[sp,#1]            ;997
0010f6  f88d5002          STRB     r5,[sp,#2]            ;998
0010fa  f88d5003          STRB     r5,[sp,#3]            ;999
0010fe  4669              MOV      r1,sp                 ;1000
001100  f1040010          ADD      r0,r4,#0x10           ;1000
001104  f7fffffe          BL       lc640_write_long_ptr
001108  f88d5000          STRB     r5,[sp,#0]            ;1002
00110c  f88d5001          STRB     r5,[sp,#1]            ;1003
001110  f88d5002          STRB     r5,[sp,#2]            ;1004
001114  f88d5003          STRB     r5,[sp,#3]            ;1005
001118  4669              MOV      r1,sp                 ;1006
00111a  f1040014          ADD      r0,r4,#0x14           ;1006
00111e  e000              B        |L1.4386|
                  |L1.4384|
001120  e022              B        |L1.4456|
                  |L1.4386|
001122  f7fffffe          BL       lc640_write_long_ptr
001126  f88d5000          STRB     r5,[sp,#0]            ;1008
00112a  f88d5001          STRB     r5,[sp,#1]            ;1009
00112e  f88d5002          STRB     r5,[sp,#2]            ;1010
001132  f88d5003          STRB     r5,[sp,#3]            ;1011
001136  4669              MOV      r1,sp                 ;1012
001138  f1040018          ADD      r0,r4,#0x18           ;1012
00113c  f7fffffe          BL       lc640_write_long_ptr
001140  f88d5000          STRB     r5,[sp,#0]            ;1014
001144  f88d5001          STRB     r5,[sp,#1]            ;1015
001148  f88d5002          STRB     r5,[sp,#2]            ;1016
00114c  f88d5003          STRB     r5,[sp,#3]            ;1017
001150  4669              MOV      r1,sp                 ;1018
001152  f104001c          ADD      r0,r4,#0x1c           ;1018
001156  f7fffffe          BL       lc640_write_long_ptr
00115a  2301              MOVS     r3,#1                 ;1020
00115c  461a              MOV      r2,r3                 ;1020
00115e  2105              MOVS     r1,#5                 ;1020
001160  a097              ADR      r0,|L1.5056|
001162  f7fffffe          BL       snmp_trap_send
001166  e08d              B        |L1.4740|
                  |L1.4456|
;;;1025   	{
;;;1026   	bat_ips._av&=~1;
001168  f0210101          BIC      r1,r1,#1
00116c  f8801041          STRB     r1,[r0,#0x41]
;;;1027   	ips_bat_av_stat=0;
001170  f8849000          STRB     r9,[r4,#0]
;;;1028   	ips_bat_av_vzvod=0;
001174  f8839000          STRB     r9,[r3,#0]
;;;1029        
;;;1030   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
001178  4628              MOV      r0,r5
00117a  f7fffffe          BL       lc640_read_int
00117e  b286              UXTH     r6,r0
;;;1031   	event_ptr_find=event_ptr;
001180  4634              MOV      r4,r6
                  |L1.4482|
;;;1032   	
;;;1033   avar_bat_ips_hndl_lbl1: 
;;;1034   
;;;1035   	lc640_adr=EVENT_LOG+(event_ptr_find*32);
001182  eb0a1044          ADD      r0,r10,r4,LSL #5
001186  b285              UXTH     r5,r0
;;;1036   
;;;1037        lc640_read_long_ptr(lc640_adr,data);
001188  4669              MOV      r1,sp
00118a  4628              MOV      r0,r5
00118c  f7fffffe          BL       lc640_read_long_ptr
;;;1038        
;;;1039        if(!((data[0]=='B')&&(data[1]==0)&&(data[2]=='C')))
001190  f89d0000          LDRB     r0,[sp,#0]
001194  2842              CMP      r0,#0x42
001196  d106              BNE      |L1.4518|
001198  f89d0001          LDRB     r0,[sp,#1]
00119c  b918              CBNZ     r0,|L1.4518|
00119e  f89d0002          LDRB     r0,[sp,#2]
0011a2  2843              CMP      r0,#0x43
0011a4  d009              BEQ      |L1.4538|
                  |L1.4518|
;;;1040        	{        
;;;1041        	if(event_ptr_find)event_ptr_find--;
0011a6  b11c              CBZ      r4,|L1.4528|
0011a8  f1a40401          SUB      r4,r4,#1
0011ac  b2a4              UXTH     r4,r4
0011ae  e001              B        |L1.4532|
                  |L1.4528|
;;;1042        	else event_ptr_find=63;
0011b0  f04f043f          MOV      r4,#0x3f
                  |L1.4532|
;;;1043        	if(event_ptr_find==event_ptr)goto avar_bat_ips_hndl_end;
0011b4  42b4              CMP      r4,r6
0011b6  d1e4              BNE      |L1.4482|
0011b8  e064              B        |L1.4740|
                  |L1.4538|
;;;1044        	else goto avar_bat_ips_hndl_lbl1;
;;;1045        	}
;;;1046        else 
;;;1047        	{
;;;1048        	lc640_read_long_ptr(lc640_adr+16,data);
0011ba  4669              MOV      r1,sp
0011bc  f1050010          ADD      r0,r5,#0x10
0011c0  f7fffffe          BL       lc640_read_long_ptr
;;;1049        	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
0011c4  f89d0000          LDRB     r0,[sp,#0]
0011c8  2841              CMP      r0,#0x41
0011ca  d10b              BNE      |L1.4580|
0011cc  f89d0001          LDRB     r0,[sp,#1]
0011d0  2841              CMP      r0,#0x41
0011d2  d107              BNE      |L1.4580|
0011d4  f89d0002          LDRB     r0,[sp,#2]
0011d8  2841              CMP      r0,#0x41
0011da  d103              BNE      |L1.4580|
0011dc  f89d0003          LDRB     r0,[sp,#3]
0011e0  2841              CMP      r0,#0x41
0011e2  d009              BEQ      |L1.4600|
                  |L1.4580|
;;;1050        		{        
;;;1051        		if(event_ptr_find)event_ptr_find--;
0011e4  b11c              CBZ      r4,|L1.4590|
0011e6  f1a40401          SUB      r4,r4,#1
0011ea  b2a4              UXTH     r4,r4
0011ec  e001              B        |L1.4594|
                  |L1.4590|
;;;1052            		else event_ptr_find=63;
0011ee  f04f043f          MOV      r4,#0x3f
                  |L1.4594|
;;;1053            	    	if(event_ptr_find==event_ptr)goto avar_bat_ips_hndl_end;
0011f2  42b4              CMP      r4,r6
0011f4  d1c5              BNE      |L1.4482|
0011f6  e045              B        |L1.4740|
                  |L1.4600|
;;;1054        		else goto avar_bat_ips_hndl_lbl1;
;;;1055        		}
;;;1056   
;;;1057        	}
;;;1058        		
;;;1059   	data[0]=LPC_RTC->YEAR;
0011f8  f8b8003c          LDRH     r0,[r8,#0x3c]
0011fc  f88d0000          STRB     r0,[sp,#0]
;;;1060   	data[1]=LPC_RTC->MONTH;
001200  f8980038          LDRB     r0,[r8,#0x38]
001204  f88d0001          STRB     r0,[sp,#1]
;;;1061   	data[2]=LPC_RTC->DOM;
001208  f898002c          LDRB     r0,[r8,#0x2c]
00120c  f88d0002          STRB     r0,[sp,#2]
;;;1062   	data[3]=0;
001210  f88d9003          STRB     r9,[sp,#3]
;;;1063   	lc640_write_long_ptr(lc640_adr+16,data);
001214  4669              MOV      r1,sp
001216  f1050010          ADD      r0,r5,#0x10
00121a  f7fffffe          BL       lc640_write_long_ptr
;;;1064   
;;;1065   	data[0]=LPC_RTC->HOUR;
00121e  f8980028          LDRB     r0,[r8,#0x28]
001222  f88d0000          STRB     r0,[sp,#0]
;;;1066   	data[1]=LPC_RTC->MIN;
001226  f8980024          LDRB     r0,[r8,#0x24]
00122a  f88d0001          STRB     r0,[sp,#1]
;;;1067   	data[2]=LPC_RTC->SEC;
00122e  f8980020          LDRB     r0,[r8,#0x20]
001232  f88d0002          STRB     r0,[sp,#2]
;;;1068   	data[3]=0;
001236  f88d9003          STRB     r9,[sp,#3]
;;;1069   	lc640_write_long_ptr(lc640_adr+20,data);
00123a  4669              MOV      r1,sp
00123c  f1050014          ADD      r0,r5,#0x14
001240  f7fffffe          BL       lc640_write_long_ptr
;;;1070   	
;;;1071   	data[0]='B';
001244  f88d7000          STRB     r7,[sp,#0]
;;;1072   	data[1]='B';
001248  f88d7001          STRB     r7,[sp,#1]
;;;1073   	data[2]='B';
00124c  f88d7002          STRB     r7,[sp,#2]
;;;1074   	data[3]='B';
001250  f88d7003          STRB     r7,[sp,#3]
;;;1075   	lc640_write_long_ptr(lc640_adr+24,data);
001254  4669              MOV      r1,sp
001256  f1050018          ADD      r0,r5,#0x18
00125a  f7fffffe          BL       lc640_write_long_ptr
;;;1076   	
;;;1077   	data[0]='B';
00125e  f88d7000          STRB     r7,[sp,#0]
;;;1078   	data[1]='B';
001262  f88d7001          STRB     r7,[sp,#1]
;;;1079   	data[2]='B';
001266  f88d7002          STRB     r7,[sp,#2]
;;;1080   	data[3]='B';
00126a  f88d7003          STRB     r7,[sp,#3]
;;;1081   	lc640_write_long_ptr(lc640_adr+28,data);
00126e  4669              MOV      r1,sp
001270  f105001c          ADD      r0,r5,#0x1c
001274  f7fffffe          BL       lc640_write_long_ptr
;;;1082   	
;;;1083   	snmp_trap_send("BAT #1 detected",5,1,0);
001278  2300              MOVS     r3,#0
00127a  2201              MOVS     r2,#1
00127c  2105              MOVS     r1,#5
00127e  a055              ADR      r0,|L1.5076|
001280  f7fffffe          BL       snmp_trap_send
                  |L1.4740|
;;;1084   	
;;;1085   	}
;;;1086   	
;;;1087   avar_bat_ips_hndl_end:
;;;1088   __nop();		
001284  bf00              NOP      
                  |L1.4742|
;;;1089   }
001286  e56d              B        |L1.3428|
;;;1090   
                          ENDP

                  avar_bat_hndl PROC
;;;1093   //-----------------------------------------------
;;;1094   void avar_bat_hndl(char b, char in)
001288  4770              BX       lr
;;;1095   {
;;;1096   char data[4];
;;;1097   unsigned short event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;1098   #ifndef UKU_220_IPS_TERMOKOMPENSAT	 //o_10
;;;1099   if(in==1)
;;;1100   	{
;;;1101   	bat[b]._av|=1;
;;;1102       
;;;1103   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;1104   	event_ptr++;	
;;;1105   	if(event_ptr>63)event_ptr=0;	
;;;1106   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;1107   	
;;;1108        event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;1109   	if(event_cnt!=63)event_cnt=event_ptr;
;;;1110   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;1111   	
;;;1112   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;1113   	
;;;1114   	data[0]='B';
;;;1115   	data[1]=b;
;;;1116   	data[2]='C';
;;;1117   	data[3]=0;
;;;1118   	lc640_write_long_ptr(lc640_adr,data);
;;;1119   
;;;1120   	data[0]=0;
;;;1121   	data[1]=0;
;;;1122   	data[2]=0;
;;;1123   	data[3]=0;
;;;1124   	lc640_write_long_ptr(lc640_adr+4,data);
;;;1125   
;;;1126   	data[0]=LPC_RTC->YEAR;
;;;1127   	data[1]=LPC_RTC->MONTH;
;;;1128   	data[2]=LPC_RTC->DOM;
;;;1129   	data[3]=0;
;;;1130   	lc640_write_long_ptr(lc640_adr+8,data);
;;;1131   
;;;1132   	data[0]=LPC_RTC->HOUR;
;;;1133   	data[1]=LPC_RTC->MIN;
;;;1134   	data[2]=LPC_RTC->SEC;
;;;1135   	data[3]=0;
;;;1136   	lc640_write_long_ptr(lc640_adr+12,data);
;;;1137   	
;;;1138   	data[0]='A';
;;;1139   	data[1]='A';
;;;1140   	data[2]='A';
;;;1141   	data[3]='A';
;;;1142   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1143   	
;;;1144   	data[0]='A';
;;;1145   	data[1]='A';
;;;1146   	data[2]='A';
;;;1147   	data[3]='A';
;;;1148   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1149   	
;;;1150   	data[0]='A';
;;;1151   	data[1]='A';
;;;1152   	data[2]='A';
;;;1153   	data[3]='A';
;;;1154   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1155   	
;;;1156   	data[0]='A';
;;;1157   	data[1]='A';
;;;1158   	data[2]='A';
;;;1159   	data[3]='A';
;;;1160   	lc640_write_long_ptr(lc640_adr+28,data);
;;;1161   					
;;;1162   	if(b==0)
;;;1163   		{
;;;1164   		snmp_trap_send("BAT #1 Alarm, lost",5,1,1);
;;;1165   		}
;;;1166   	else if(b==1)
;;;1167   		{
;;;1168   		snmp_trap_send("BAT #2 Alarm, lost",5,2,1);
;;;1169   		} 
;;;1170   			
;;;1171   	}
;;;1172   
;;;1173   else if(in==0)
;;;1174   	{
;;;1175   	bat[b]._av&=~1;
;;;1176   
;;;1177        event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;1178   	event_ptr_find=event_ptr;
;;;1179   	
;;;1180   avar_bat_hndl_lbl1: 
;;;1181   
;;;1182   	lc640_adr=EVENT_LOG+(event_ptr_find*32);
;;;1183   
;;;1184        lc640_read_long_ptr(lc640_adr,data);
;;;1185        
;;;1186        if(!((data[0]=='B')&&(data[1]==b)&&(data[2]=='C')))
;;;1187        	{        
;;;1188        	if(event_ptr_find)event_ptr_find--;
;;;1189        	else event_ptr_find=63;
;;;1190        	if(event_ptr_find==event_ptr)goto avar_bat_hndl_end;
;;;1191        	else goto avar_bat_hndl_lbl1;
;;;1192        	}
;;;1193        else 
;;;1194        	{
;;;1195        	lc640_read_long_ptr(lc640_adr+16,data);
;;;1196        	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;1197        		{        
;;;1198        		if(event_ptr_find)event_ptr_find--;
;;;1199            		else event_ptr_find=63;
;;;1200            	    	if(event_ptr_find==event_ptr)goto avar_bat_hndl_end;
;;;1201        		else goto avar_bat_hndl_lbl1;
;;;1202        		}
;;;1203   
;;;1204        	}
;;;1205        		
;;;1206   	data[0]=LPC_RTC->YEAR;
;;;1207   	data[1]=LPC_RTC->MONTH;
;;;1208   	data[2]=LPC_RTC->DOM;
;;;1209   	data[3]=0;
;;;1210   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1211   
;;;1212   	data[0]=LPC_RTC->HOUR;
;;;1213   	data[1]=LPC_RTC->MIN;
;;;1214   	data[2]=LPC_RTC->SEC;
;;;1215   	data[3]=0;
;;;1216   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1217   	
;;;1218   	data[0]='B';
;;;1219   	data[1]='B';
;;;1220   	data[2]='B';
;;;1221   	data[3]='B';
;;;1222   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1223   	
;;;1224   	data[0]='B';
;;;1225   	data[1]='B';
;;;1226   	data[2]='B';
;;;1227   	data[3]='B';
;;;1228   	lc640_write_long_ptr(lc640_adr+28,data);
;;;1229   	
;;;1230   	if(b==0)
;;;1231   		{
;;;1232   		snmp_trap_send("BAT #1 detected",5,1,0);
;;;1233   		}
;;;1234   	else if(b==1)
;;;1235   		{
;;;1236   		snmp_trap_send("BAT #2 detected",5,2,0);
;;;1237   		}
;;;1238   	
;;;1239   	}
;;;1240   	
;;;1241   avar_bat_hndl_end:
;;;1242   __nop();
;;;1243   #endif    //o_10		
;;;1244   }
;;;1245   
                          ENDP

                  avar_bat_temper_hndl PROC
;;;1246   //-----------------------------------------------
;;;1247   void avar_bat_temper_hndl(char b, char in)
00128a  e92d4ff8          PUSH     {r3-r11,lr}
;;;1248   {
00128e  4605              MOV      r5,r0
001290  460e              MOV      r6,r1
;;;1249   char data[4];
;;;1250   unsigned short event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;1251   
;;;1252   if((in==1)||(in==3))
;;;1253   	{
;;;1254   	//bat[b]._av|=1;
;;;1255       
;;;1256   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;1257   	event_ptr++;	
;;;1258   	if(event_ptr>63)event_ptr=0;	
;;;1259   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;1260   	
;;;1261        event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;1262   	if(event_cnt!=63)event_cnt=event_ptr;
;;;1263   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;1264   	
;;;1265   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;1266   	
;;;1267   	data[0]='B';
;;;1268   	data[1]=b;
;;;1269   	data[2]='T';
;;;1270   	data[3]='1';
;;;1271   	if(in==3)data[3]='3';
;;;1272   	lc640_write_long_ptr(lc640_adr,data);
;;;1273   
;;;1274   	data[0]=0;
;;;1275   	data[1]=0;
;;;1276   	data[2]=0;
;;;1277   	data[3]=0;
;;;1278   	lc640_write_long_ptr(lc640_adr+4,data);
;;;1279   
;;;1280   	data[0]=LPC_RTC->YEAR;
001292  f8dfa128          LDR      r10,|L1.5052|
001296  f44f6060          MOV      r0,#0xe00             ;1256
00129a  f44f6780          MOV      r7,#0x400             ;1265
00129e  2e01              CMP      r6,#1                 ;1252
0012a0  d010              BEQ      |L1.4804|
0012a2  2e03              CMP      r6,#3                 ;1252
0012a4  d00e              BEQ      |L1.4804|
;;;1281   	data[1]=LPC_RTC->MONTH;
;;;1282   	data[2]=LPC_RTC->DOM;
;;;1283   	data[3]=0;
;;;1284   	lc640_write_long_ptr(lc640_adr+8,data);
;;;1285   
;;;1286   	data[0]=LPC_RTC->HOUR;
;;;1287   	data[1]=LPC_RTC->MIN;
;;;1288   	data[2]=LPC_RTC->SEC;
;;;1289   	data[3]=0;
;;;1290   	lc640_write_long_ptr(lc640_adr+12,data);
;;;1291   	
;;;1292   	data[0]='A';
;;;1293   	data[1]='A';
;;;1294   	data[2]='A';
;;;1295   	data[3]='A';
;;;1296   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1297   	
;;;1298   	data[0]='A';
;;;1299   	data[1]='A';
;;;1300   	data[2]='A';
;;;1301   	data[3]='A';
;;;1302   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1303   	
;;;1304   	data[0]='A';
;;;1305   	data[1]='A';
;;;1306   	data[2]='A';
;;;1307   	data[3]='A';
;;;1308   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1309   	
;;;1310   	data[0]='A';
;;;1311   	data[1]='A';
;;;1312   	data[2]='A';
;;;1313   	data[3]='A';
;;;1314   	lc640_write_long_ptr(lc640_adr+28,data);
;;;1315   	if(in==1)
;;;1316   		{				
;;;1317   		if(b==0)
;;;1318   			{
;;;1319   			snmp_trap_send("BAT #1 Alarm, is heated",10,1,1);
;;;1320   			}
;;;1321   		else if(b==1)
;;;1322   			{
;;;1323   			snmp_trap_send("BAT #2 Alarm, is heated",10,2,1);
;;;1324   			} 
;;;1325   		}
;;;1326   	if(in==3)
;;;1327   		{				
;;;1328   		if(b==0)
;;;1329   			{
;;;1330   			snmp_trap_send("BAT #1 Alarm, is overheated",11,1,1);
;;;1331   			}
;;;1332   		else if(b==1)
;;;1333   			{
;;;1334   			snmp_trap_send("BAT #2 Alarm, is overheated",11,2,1);
;;;1335   			} 
;;;1336   		}			
;;;1337   	}
;;;1338   
;;;1339   else if((in==0)||(in==2))
0012a6  b10e              CBZ      r6,|L1.4780|
0012a8  2e02              CMP      r6,#2
0012aa  d17d              BNE      |L1.5032|
                  |L1.4780|
;;;1340   	{
;;;1341   	char i;
;;;1342   
;;;1343   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
0012ac  f7fffffe          BL       lc640_read_int
0012b0  fa1ff980          UXTH     r9,r0
;;;1344   	event_ptr_find=event_ptr;
0012b4  464c              MOV      r4,r9
;;;1345   
;;;1346   /*	for (i=0;i<63;i++)
;;;1347   		{
;;;1348   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
;;;1349   
;;;1350        	lc640_read_long_ptr(lc640_adr,data);
;;;1351        
;;;1352        	if(!((data[0]=='f')&&(data[2]=='Z')))
;;;1353        		{        
;;;1354        		if(event_ptr_find)event_ptr_find--;
;;;1355        		else event_ptr_find=63;
;;;1356        		if(event_ptr_find==event_ptr)
;;;1357   				{
;;;1358   				lc640_adr=0;
;;;1359   				break;
;;;1360   				}
;;;1361        		else continue;
;;;1362        		}
;;;1363        	else 
;;;1364        		{
;;;1365        		lc640_read_long_ptr(lc640_adr+16,data);
;;;1366        		if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;1367        			{        
;;;1368        			if(event_ptr_find)event_ptr_find--;
;;;1369            		else event_ptr_find=63;
;;;1370            		if(event_ptr_find==event_ptr)
;;;1371   					{
;;;1372   					lc640_adr=0;
;;;1373   					break;
;;;1374   					}
;;;1375        			else continue;
;;;1376        			}
;;;1377        		}	
;;;1378   		}*/
;;;1379   	
;;;1380   	for (i=0;i<63;i++)
0012b6  f04f0800          MOV      r8,#0
                  |L1.4794|
;;;1381   		{
;;;1382   		char temp='1';
0012ba  f04f0b31          MOV      r11,#0x31
;;;1383   		if(in==2)temp='3';
0012be  2e02              CMP      r6,#2
0012c0  d073              BEQ      |L1.5034|
0012c2  e0e3              B        |L1.5260|
                  |L1.4804|
0012c4  4680              MOV      r8,r0                 ;1256
0012c6  f7fffffe          BL       lc640_read_int
0012ca  f1000001          ADD      r0,r0,#1              ;1257
0012ce  b284              UXTH     r4,r0                 ;1257
0012d0  2c3f              CMP      r4,#0x3f              ;1258
0012d2  d901              BLS      |L1.4824|
0012d4  f04f0400          MOV      r4,#0                 ;1258
                  |L1.4824|
0012d8  b221              SXTH     r1,r4                 ;1259
0012da  4640              MOV      r0,r8                 ;1259
0012dc  f7fffffe          BL       lc640_write_int
0012e0  f6406902          MOV      r9,#0xe02             ;1261
0012e4  4648              MOV      r0,r9                 ;1261
0012e6  f7fffffe          BL       lc640_read_int
0012ea  b280              UXTH     r0,r0                 ;1261
0012ec  283f              CMP      r0,#0x3f              ;1262
0012ee  d000              BEQ      |L1.4850|
0012f0  4620              MOV      r0,r4                 ;1262
                  |L1.4850|
0012f2  b201              SXTH     r1,r0                 ;1263
0012f4  4648              MOV      r0,r9                 ;1263
0012f6  f7fffffe          BL       lc640_write_int
0012fa  4640              MOV      r0,r8                 ;1265
0012fc  f7fffffe          BL       lc640_read_int
001300  eb071040          ADD      r0,r7,r0,LSL #5       ;1265
001304  b284              UXTH     r4,r0                 ;1265
001306  f04f0042          MOV      r0,#0x42              ;1267
00130a  f88d0000          STRB     r0,[sp,#0]            ;1267
00130e  f88d5001          STRB     r5,[sp,#1]            ;1268
001312  f04f0054          MOV      r0,#0x54              ;1269
001316  f88d0002          STRB     r0,[sp,#2]            ;1269
00131a  f04f0031          MOV      r0,#0x31              ;1270
00131e  f88d0003          STRB     r0,[sp,#3]            ;1270
001322  2e03              CMP      r6,#3                 ;1271
001324  d103              BNE      |L1.4910|
001326  f04f0033          MOV      r0,#0x33              ;1271
00132a  f88d0003          STRB     r0,[sp,#3]            ;1271
                  |L1.4910|
00132e  4669              MOV      r1,sp                 ;1272
001330  4620              MOV      r0,r4                 ;1272
001332  f7fffffe          BL       lc640_write_long_ptr
001336  f04f0700          MOV      r7,#0                 ;1274
00133a  9700              STR      r7,[sp,#0]            ;1277
00133c  4669              MOV      r1,sp                 ;1278
00133e  f1040004          ADD      r0,r4,#4              ;1278
001342  f7fffffe          BL       lc640_write_long_ptr
001346  f8ba003c          LDRH     r0,[r10,#0x3c]        ;1280
00134a  f88d0000          STRB     r0,[sp,#0]            ;1280
00134e  f89a0038          LDRB     r0,[r10,#0x38]        ;1281
001352  f88d0001          STRB     r0,[sp,#1]            ;1281
001356  f89a002c          LDRB     r0,[r10,#0x2c]        ;1282
00135a  f88d0002          STRB     r0,[sp,#2]            ;1282
00135e  f88d7003          STRB     r7,[sp,#3]            ;1283
001362  4669              MOV      r1,sp                 ;1284
001364  f1040008          ADD      r0,r4,#8              ;1284
001368  f7fffffe          BL       lc640_write_long_ptr
00136c  f89a0028          LDRB     r0,[r10,#0x28]        ;1286
001370  f88d0000          STRB     r0,[sp,#0]            ;1286
001374  f89a0024          LDRB     r0,[r10,#0x24]        ;1287
001378  f88d0001          STRB     r0,[sp,#1]            ;1287
00137c  f89a0020          LDRB     r0,[r10,#0x20]        ;1288
001380  f88d0002          STRB     r0,[sp,#2]            ;1288
001384  f88d7003          STRB     r7,[sp,#3]            ;1289
001388  4669              MOV      r1,sp                 ;1290
00138a  f104000c          ADD      r0,r4,#0xc            ;1290
00138e  f7fffffe          BL       lc640_write_long_ptr
001392  f04f0741          MOV      r7,#0x41              ;1292
001396  f88d7000          STRB     r7,[sp,#0]            ;1292
00139a  f88d7001          STRB     r7,[sp,#1]            ;1293
00139e  f88d7002          STRB     r7,[sp,#2]            ;1294
0013a2  f88d7003          STRB     r7,[sp,#3]            ;1295
0013a6  e01d              B        |L1.5092|
                  |L1.5032|
0013a8  e066              B        |L1.5240|
                  |L1.5034|
0013aa  e06d              B        |L1.5256|
                  |L1.5036|
                          DCD      0x40024020
                  |L1.5040|
                          DCD      bat_ips
                  |L1.5044|
                          DCD      ips_bat_av_stat
                  |L1.5048|
                          DCD      ips_bat_av_vzvod
                  |L1.5052|
                          DCD      0x40024000
                  |L1.5056|
0013c0  42415420          DCB      "BAT ",185,"1 Alarm, lost",0
0013c4  b9312041
0013c8  6c61726d
0013cc  2c206c6f
0013d0  737400  
0013d3  00                DCB      0
                  |L1.5076|
0013d4  42415420          DCB      "BAT #1 detected",0
0013d8  23312064
0013dc  65746563
0013e0  74656400
                  |L1.5092|
0013e4  4669              MOV      r1,sp                 ;1296
0013e6  f1040010          ADD      r0,r4,#0x10           ;1296
0013ea  f7fffffe          BL       lc640_write_long_ptr
0013ee  f88d7000          STRB     r7,[sp,#0]            ;1298
0013f2  f88d7001          STRB     r7,[sp,#1]            ;1299
0013f6  f88d7002          STRB     r7,[sp,#2]            ;1300
0013fa  f88d7003          STRB     r7,[sp,#3]            ;1301
0013fe  4669              MOV      r1,sp                 ;1302
001400  f1040014          ADD      r0,r4,#0x14           ;1302
001404  f7fffffe          BL       lc640_write_long_ptr
001408  f88d7000          STRB     r7,[sp,#0]            ;1304
00140c  f88d7001          STRB     r7,[sp,#1]            ;1305
001410  f88d7002          STRB     r7,[sp,#2]            ;1306
001414  f88d7003          STRB     r7,[sp,#3]            ;1307
001418  4669              MOV      r1,sp                 ;1308
00141a  f1040018          ADD      r0,r4,#0x18           ;1308
00141e  f7fffffe          BL       lc640_write_long_ptr
001422  f88d7000          STRB     r7,[sp,#0]            ;1310
001426  f88d7001          STRB     r7,[sp,#1]            ;1311
00142a  f88d7002          STRB     r7,[sp,#2]            ;1312
00142e  f88d7003          STRB     r7,[sp,#3]            ;1313
001432  4669              MOV      r1,sp                 ;1314
001434  f104001c          ADD      r0,r4,#0x1c           ;1314
001438  f7fffffe          BL       lc640_write_long_ptr
00143c  2e01              CMP      r6,#1                 ;1315
00143e  d110              BNE      |L1.5218|
001440  b115              CBZ      r5,|L1.5192|
001442  2d01              CMP      r5,#1                 ;1321
001444  d007              BEQ      |L1.5206|
001446  e00c              B        |L1.5218|
                  |L1.5192|
001448  2301              MOVS     r3,#1                 ;1319
00144a  461a              MOV      r2,r3                 ;1319
00144c  210a              MOVS     r1,#0xa               ;1319
00144e  a0f9              ADR      r0,|L1.6196|
001450  f7fffffe          BL       snmp_trap_send
001454  e005              B        |L1.5218|
                  |L1.5206|
001456  2301              MOVS     r3,#1                 ;1323
001458  2202              MOVS     r2,#2                 ;1323
00145a  210a              MOVS     r1,#0xa               ;1323
00145c  a0fb              ADR      r0,|L1.6220|
00145e  f7fffffe          BL       snmp_trap_send
                  |L1.5218|
001462  2e03              CMP      r6,#3                 ;1326
001464  d108              BNE      |L1.5240|
001466  b145              CBZ      r5,|L1.5242|
001468  2d01              CMP      r5,#1                 ;1332
00146a  d105              BNE      |L1.5240|
00146c  2301              MOVS     r3,#1                 ;1334
00146e  2202              MOVS     r2,#2                 ;1334
001470  210b              MOVS     r1,#0xb               ;1334
001472  a0fc              ADR      r0,|L1.6244|
001474  f7fffffe          BL       snmp_trap_send
                  |L1.5240|
;;;1384   
;;;1385   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
;;;1386   
;;;1387        	lc640_read_long_ptr(lc640_adr,data);
;;;1388        
;;;1389        	if(!((data[0]=='B')&&(data[1]==b)&&(data[2]=='T')&&(data[3]==temp)))
;;;1390        		{        
;;;1391        		if(event_ptr_find)event_ptr_find--;
;;;1392        		else event_ptr_find=63;
;;;1393        		if(event_ptr_find==event_ptr)				{
;;;1394   				lc640_adr=0;
;;;1395   				break;
;;;1396   				}
;;;1397        		else continue;
;;;1398        		}
;;;1399   	     else 
;;;1400   	     	{
;;;1401   	     	lc640_read_long_ptr(lc640_adr+16,data);
;;;1402   	     	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;1403   	     		{        
;;;1404   	     		if(event_ptr_find)event_ptr_find--;
;;;1405   	         	else event_ptr_find=63;
;;;1406   	         	if(event_ptr_find==event_ptr)				{
;;;1407   					lc640_adr=0;
;;;1408   					break;
;;;1409   					}
;;;1410   	     		else continue;
;;;1411   	     		}
;;;1412   	
;;;1413   	     	}
;;;1414   		}
;;;1415        		
;;;1416   	data[0]=LPC_RTC->YEAR;
;;;1417   	data[1]=LPC_RTC->MONTH;
;;;1418   	data[2]=LPC_RTC->DOM;
;;;1419   	data[3]=0;
;;;1420   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1421   
;;;1422   	data[0]=LPC_RTC->HOUR;
;;;1423   	data[1]=LPC_RTC->MIN;
;;;1424   	data[2]=LPC_RTC->SEC;
;;;1425   	data[3]=0;
;;;1426   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1427   	
;;;1428   	data[0]='B';
;;;1429   	data[1]='B';
;;;1430   	data[2]='B';
;;;1431   	data[3]='B';
;;;1432   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1433   	
;;;1434   	data[0]='B';
;;;1435   	data[1]='B';
;;;1436   	data[2]='B';
;;;1437   	data[3]='B';
;;;1438   	lc640_write_long_ptr(lc640_adr+28,data);
;;;1439   	
;;;1440   	if(in==0)
;;;1441   		{				
;;;1442   		if(b==0)
;;;1443   			{
;;;1444   			snmp_trap_send("BAT #1 Alarm, heating eliminated",10,1,0);
;;;1445   			}
;;;1446   		else if(b==1)
;;;1447   			{
;;;1448   			snmp_trap_send("BAT #2 Alarm, heating eliminated",10,2,0);
;;;1449   			} 
;;;1450   		}
;;;1451   	if(in==2)
;;;1452   		{				
;;;1453   		if(b==0)
;;;1454   			{
;;;1455   			snmp_trap_send("BAT #1 Alarm, overheating eliminated",11,1,0);
;;;1456   			}
;;;1457   		else if(b==1)
;;;1458   			{
;;;1459   			snmp_trap_send("BAT #2 Alarm, overheating eliminated",11,2,0);
;;;1460   			} 
;;;1461   		}		
;;;1462   	
;;;1463   	}
;;;1464   	
;;;1465   }
001478  e474              B        |L1.3428|
                  |L1.5242|
00147a  2301              MOVS     r3,#1                 ;1330
00147c  461a              MOV      r2,r3                 ;1330
00147e  210b              MOVS     r1,#0xb               ;1330
001480  a0ff              ADR      r0,|L1.6272|
001482  f7fffffe          BL       snmp_trap_send
001486  e46d              B        |L1.3428|
                  |L1.5256|
001488  f04f0b33          MOV      r11,#0x33             ;1383
                  |L1.5260|
00148c  f44f6080          MOV      r0,#0x400             ;1385
001490  eb001044          ADD      r0,r0,r4,LSL #5       ;1385
001494  b287              UXTH     r7,r0                 ;1385
001496  4669              MOV      r1,sp                 ;1387
001498  4638              MOV      r0,r7                 ;1387
00149a  f7fffffe          BL       lc640_read_long_ptr
00149e  f89d0000          LDRB     r0,[sp,#0]            ;1389
0014a2  2842              CMP      r0,#0x42              ;1389
0014a4  d10b              BNE      |L1.5310|
0014a6  f89d0001          LDRB     r0,[sp,#1]            ;1389
0014aa  42a8              CMP      r0,r5                 ;1389
0014ac  d107              BNE      |L1.5310|
0014ae  f89d0002          LDRB     r0,[sp,#2]            ;1389
0014b2  2854              CMP      r0,#0x54              ;1389
0014b4  d103              BNE      |L1.5310|
0014b6  f89d0003          LDRB     r0,[sp,#3]            ;1389
0014ba  4558              CMP      r0,r11                ;1389
0014bc  d00b              BEQ      |L1.5334|
                  |L1.5310|
0014be  b11c              CBZ      r4,|L1.5320|
0014c0  f1a40401          SUB      r4,r4,#1              ;1391
0014c4  b2a4              UXTH     r4,r4                 ;1391
0014c6  e001              B        |L1.5324|
                  |L1.5320|
0014c8  f04f043f          MOV      r4,#0x3f              ;1392
                  |L1.5324|
0014cc  454c              CMP      r4,r9                 ;1393
0014ce  d123              BNE      |L1.5400|
0014d0  f04f0700          MOV      r7,#0                 ;1394
0014d4  e028              B        |L1.5416|
                  |L1.5334|
0014d6  4669              MOV      r1,sp                 ;1401
0014d8  f1070010          ADD      r0,r7,#0x10           ;1401
0014dc  f7fffffe          BL       lc640_read_long_ptr
0014e0  f89d0000          LDRB     r0,[sp,#0]            ;1402
0014e4  2841              CMP      r0,#0x41              ;1402
0014e6  d10b              BNE      |L1.5376|
0014e8  f89d0001          LDRB     r0,[sp,#1]            ;1402
0014ec  2841              CMP      r0,#0x41              ;1402
0014ee  d107              BNE      |L1.5376|
0014f0  f89d0002          LDRB     r0,[sp,#2]            ;1402
0014f4  2841              CMP      r0,#0x41              ;1402
0014f6  d103              BNE      |L1.5376|
0014f8  f89d0003          LDRB     r0,[sp,#3]            ;1402
0014fc  2841              CMP      r0,#0x41              ;1402
0014fe  d00b              BEQ      |L1.5400|
                  |L1.5376|
001500  b11c              CBZ      r4,|L1.5386|
001502  f1a40401          SUB      r4,r4,#1              ;1404
001506  b2a4              UXTH     r4,r4                 ;1404
001508  e001              B        |L1.5390|
                  |L1.5386|
00150a  f04f043f          MOV      r4,#0x3f              ;1405
                  |L1.5390|
00150e  454c              CMP      r4,r9                 ;1406
001510  d102              BNE      |L1.5400|
001512  f04f0700          MOV      r7,#0                 ;1407
001516  e007              B        |L1.5416|
                  |L1.5400|
001518  f1080801          ADD      r8,r8,#1              ;1380
00151c  f00808ff          AND      r8,r8,#0xff           ;1380
001520  f1b80f3f          CMP      r8,#0x3f              ;1380
001524  f4ffaec9          BCC      |L1.4794|
                  |L1.5416|
001528  f8ba003c          LDRH     r0,[r10,#0x3c]        ;1416
00152c  f88d0000          STRB     r0,[sp,#0]            ;1416
001530  f89a0038          LDRB     r0,[r10,#0x38]        ;1417
001534  f88d0001          STRB     r0,[sp,#1]            ;1417
001538  f89a002c          LDRB     r0,[r10,#0x2c]        ;1418
00153c  f88d0002          STRB     r0,[sp,#2]            ;1418
001540  f04f0400          MOV      r4,#0                 ;1419
001544  f88d4003          STRB     r4,[sp,#3]            ;1419
001548  4669              MOV      r1,sp                 ;1420
00154a  f1070010          ADD      r0,r7,#0x10           ;1420
00154e  f7fffffe          BL       lc640_write_long_ptr
001552  f89a0028          LDRB     r0,[r10,#0x28]        ;1422
001556  f88d0000          STRB     r0,[sp,#0]            ;1422
00155a  f89a0024          LDRB     r0,[r10,#0x24]        ;1423
00155e  f88d0001          STRB     r0,[sp,#1]            ;1423
001562  f89a0020          LDRB     r0,[r10,#0x20]        ;1424
001566  f88d0002          STRB     r0,[sp,#2]            ;1424
00156a  f88d4003          STRB     r4,[sp,#3]            ;1425
00156e  4669              MOV      r1,sp                 ;1426
001570  f1070014          ADD      r0,r7,#0x14           ;1426
001574  f7fffffe          BL       lc640_write_long_ptr
001578  f04f0442          MOV      r4,#0x42              ;1428
00157c  f88d4000          STRB     r4,[sp,#0]            ;1428
001580  f88d4001          STRB     r4,[sp,#1]            ;1429
001584  f88d4002          STRB     r4,[sp,#2]            ;1430
001588  f88d4003          STRB     r4,[sp,#3]            ;1431
00158c  4669              MOV      r1,sp                 ;1432
00158e  f1070018          ADD      r0,r7,#0x18           ;1432
001592  f7fffffe          BL       lc640_write_long_ptr
001596  f88d4000          STRB     r4,[sp,#0]            ;1434
00159a  f88d4001          STRB     r4,[sp,#1]            ;1435
00159e  f88d4002          STRB     r4,[sp,#2]            ;1436
0015a2  f88d4003          STRB     r4,[sp,#3]            ;1437
0015a6  4669              MOV      r1,sp                 ;1438
0015a8  f107001c          ADD      r0,r7,#0x1c           ;1438
0015ac  f7fffffe          BL       lc640_write_long_ptr
0015b0  b986              CBNZ     r6,|L1.5588|
0015b2  b115              CBZ      r5,|L1.5562|
0015b4  2d01              CMP      r5,#1                 ;1446
0015b6  d007              BEQ      |L1.5576|
0015b8  e00c              B        |L1.5588|
                  |L1.5562|
0015ba  2300              MOVS     r3,#0                 ;1444
0015bc  2201              MOVS     r2,#1                 ;1444
0015be  210a              MOVS     r1,#0xa               ;1444
0015c0  a0b6              ADR      r0,|L1.6300|
0015c2  f7fffffe          BL       snmp_trap_send
0015c6  e005              B        |L1.5588|
                  |L1.5576|
0015c8  2300              MOVS     r3,#0                 ;1448
0015ca  2202              MOVS     r2,#2                 ;1448
0015cc  210a              MOVS     r1,#0xa               ;1448
0015ce  a0bc              ADR      r0,|L1.6336|
0015d0  f7fffffe          BL       snmp_trap_send
                  |L1.5588|
0015d4  2e02              CMP      r6,#2                 ;1451
                  |L1.5590|
0015d6  f47faf4f          BNE      |L1.5240|
0015da  b145              CBZ      r5,|L1.5614|
0015dc  2d01              CMP      r5,#1                 ;1457
0015de  d1fa              BNE      |L1.5590|
0015e0  2300              MOVS     r3,#0                 ;1459
0015e2  2202              MOVS     r2,#2                 ;1459
0015e4  210b              MOVS     r1,#0xb               ;1459
0015e6  a0bf              ADR      r0,|L1.6372|
0015e8  f7fffffe          BL       snmp_trap_send
                  |L1.5612|
0015ec  e64b              B        |L1.4742|
                  |L1.5614|
0015ee  2300              MOVS     r3,#0                 ;1455
0015f0  2201              MOVS     r2,#1                 ;1455
0015f2  210b              MOVS     r1,#0xb               ;1455
0015f4  a0c5              ADR      r0,|L1.6412|
0015f6  f7fffffe          BL       snmp_trap_send
0015fa  e644              B        |L1.4742|
;;;1466   
                          ENDP

                  avar_bat_as_hndl PROC
;;;1467   //-----------------------------------------------
;;;1468   void avar_bat_as_hndl(char b, char in)
0015fc  e92d4ff8          PUSH     {r3-r11,lr}
;;;1469   {
001600  4605              MOV      r5,r0
;;;1470   char data[4];
;;;1471   unsigned short event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;1472   
;;;1473   if(in==1)
;;;1474   	{
;;;1475   	bat[b]._av|=2;
001602  48cc              LDR      r0,|L1.6452|
;;;1476       
;;;1477   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;1478   	event_ptr++;	
;;;1479   	if(event_ptr>63)event_ptr=0;	
;;;1480   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;1481   	
;;;1482        event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;1483   	if(event_cnt!=63)event_cnt=event_ptr;
;;;1484   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;1485   	
;;;1486   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;1487   	
;;;1488   	data[0]='B';
;;;1489   	data[1]=b;
;;;1490   	data[2]='S';
;;;1491   	data[3]=0;
;;;1492   	lc640_write_long_ptr(lc640_adr,data);
;;;1493   
;;;1494   	data[0]=0;
;;;1495   	data[1]=0;
;;;1496   	data[2]=0;
;;;1497   	data[3]=0;
;;;1498   	lc640_write_long_ptr(lc640_adr+4,data);
;;;1499   
;;;1500   	data[0]=LPC_RTC->YEAR;
001604  f8df8330          LDR      r8,|L1.6456|
001608  eb050285          ADD      r2,r5,r5,LSL #2       ;1475
00160c  f04f0a00          MOV      r10,#0                ;1479
001610  f04f0942          MOV      r9,#0x42              ;1488
001614  f44f6660          MOV      r6,#0xe00             ;1477
001618  f44f6b80          MOV      r11,#0x400            ;1486
00161c  eb001002          ADD      r0,r0,r2,LSL #4       ;1475
001620  2901              CMP      r1,#1                 ;1473
001622  d002              BEQ      |L1.5674|
;;;1501   	data[1]=LPC_RTC->MONTH;
;;;1502   	data[2]=LPC_RTC->DOM;
;;;1503   	data[3]=0;
;;;1504   	lc640_write_long_ptr(lc640_adr+8,data);
;;;1505   
;;;1506   	data[0]=LPC_RTC->HOUR;
;;;1507   	data[1]=LPC_RTC->MIN;
;;;1508   	data[2]=LPC_RTC->SEC;
;;;1509   	data[3]=0;
;;;1510   	lc640_write_long_ptr(lc640_adr+12,data);
;;;1511   	
;;;1512   	data[0]='A';
;;;1513   	data[1]='A';
;;;1514   	data[2]='A';
;;;1515   	data[3]='A';
;;;1516   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1517   	
;;;1518   	data[0]='A';
;;;1519   	data[1]='A';
;;;1520   	data[2]='A';
;;;1521   	data[3]='A';
;;;1522   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1523   	
;;;1524   	data[0]='A';
;;;1525   	data[1]='A';
;;;1526   	data[2]='A';
;;;1527   	data[3]='A';
;;;1528   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1529   	
;;;1530   	data[0]='A';
;;;1531   	data[1]='A';
;;;1532   	data[2]='A';
;;;1533   	data[3]='A';
;;;1534   	lc640_write_long_ptr(lc640_adr+28,data);				
;;;1535   
;;;1536   	if(b==0)
;;;1537   		{
;;;1538   		snmp_trap_send("BAT #1 Alarm, asymmetry",5,1,2);
;;;1539   		}
;;;1540   	else if(b==1)
;;;1541   		{
;;;1542   		snmp_trap_send("BAT #2 Alarm, asymmetry",5,2,2);
;;;1543   		} 
;;;1544   	
;;;1545   	}
;;;1546   
;;;1547   else if(in==0)
001624  2900              CMP      r1,#0
001626  d07d              BEQ      |L1.5924|
001628  e1de              B        |L1.6632|
                  |L1.5674|
00162a  f8101f41          LDRB     r1,[r0,#0x41]!        ;1475
00162e  f0410102          ORR      r1,r1,#2              ;1475
001632  7001              STRB     r1,[r0,#0]            ;1475
001634  4630              MOV      r0,r6                 ;1477
001636  f7fffffe          BL       lc640_read_int
00163a  f1000001          ADD      r0,r0,#1              ;1478
00163e  b284              UXTH     r4,r0                 ;1478
001640  2c3f              CMP      r4,#0x3f              ;1479
001642  d901              BLS      |L1.5704|
001644  f04f0400          MOV      r4,#0                 ;1479
                  |L1.5704|
001648  b221              SXTH     r1,r4                 ;1480
00164a  4630              MOV      r0,r6                 ;1480
00164c  f7fffffe          BL       lc640_write_int
001650  f6406702          MOV      r7,#0xe02             ;1482
001654  4638              MOV      r0,r7                 ;1482
001656  f7fffffe          BL       lc640_read_int
00165a  b280              UXTH     r0,r0                 ;1482
00165c  283f              CMP      r0,#0x3f              ;1483
00165e  d000              BEQ      |L1.5730|
001660  4620              MOV      r0,r4                 ;1483
                  |L1.5730|
001662  b201              SXTH     r1,r0                 ;1484
001664  4638              MOV      r0,r7                 ;1484
001666  f7fffffe          BL       lc640_write_int
00166a  4630              MOV      r0,r6                 ;1486
00166c  f7fffffe          BL       lc640_read_int
001670  eb0b1040          ADD      r0,r11,r0,LSL #5      ;1486
001674  b284              UXTH     r4,r0                 ;1486
001676  f88d9000          STRB     r9,[sp,#0]            ;1488
00167a  f88d5001          STRB     r5,[sp,#1]            ;1489
00167e  f04f0053          MOV      r0,#0x53              ;1490
001682  f88d0002          STRB     r0,[sp,#2]            ;1490
001686  f88da003          STRB     r10,[sp,#3]           ;1491
00168a  4669              MOV      r1,sp                 ;1492
00168c  4620              MOV      r0,r4                 ;1492
00168e  f7fffffe          BL       lc640_write_long_ptr
001692  f8cda000          STR      r10,[sp,#0]           ;1497
001696  4669              MOV      r1,sp                 ;1498
001698  1d20              ADDS     r0,r4,#4              ;1498
00169a  f7fffffe          BL       lc640_write_long_ptr
00169e  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1500
0016a2  f88d0000          STRB     r0,[sp,#0]            ;1500
0016a6  f8980038          LDRB     r0,[r8,#0x38]         ;1501
0016aa  f88d0001          STRB     r0,[sp,#1]            ;1501
0016ae  f898002c          LDRB     r0,[r8,#0x2c]         ;1502
0016b2  f88d0002          STRB     r0,[sp,#2]            ;1502
0016b6  f88da003          STRB     r10,[sp,#3]           ;1503
0016ba  4669              MOV      r1,sp                 ;1504
0016bc  f1040008          ADD      r0,r4,#8              ;1504
0016c0  f7fffffe          BL       lc640_write_long_ptr
0016c4  f8980028          LDRB     r0,[r8,#0x28]         ;1506
0016c8  f88d0000          STRB     r0,[sp,#0]            ;1506
0016cc  f8980024          LDRB     r0,[r8,#0x24]         ;1507
0016d0  f88d0001          STRB     r0,[sp,#1]            ;1507
0016d4  f8980020          LDRB     r0,[r8,#0x20]         ;1508
0016d8  f88d0002          STRB     r0,[sp,#2]            ;1508
0016dc  f88da003          STRB     r10,[sp,#3]           ;1509
0016e0  4669              MOV      r1,sp                 ;1510
0016e2  f104000c          ADD      r0,r4,#0xc            ;1510
0016e6  f7fffffe          BL       lc640_write_long_ptr
0016ea  f04f0641          MOV      r6,#0x41              ;1512
0016ee  f88d6000          STRB     r6,[sp,#0]            ;1512
0016f2  f88d6001          STRB     r6,[sp,#1]            ;1513
0016f6  f88d6002          STRB     r6,[sp,#2]            ;1514
0016fa  f88d6003          STRB     r6,[sp,#3]            ;1515
0016fe  4669              MOV      r1,sp                 ;1516
001700  f1040010          ADD      r0,r4,#0x10           ;1516
001704  f7fffffe          BL       lc640_write_long_ptr
001708  f88d6000          STRB     r6,[sp,#0]            ;1518
00170c  f88d6001          STRB     r6,[sp,#1]            ;1519
001710  f88d6002          STRB     r6,[sp,#2]            ;1520
001714  f88d6003          STRB     r6,[sp,#3]            ;1521
001718  4669              MOV      r1,sp                 ;1522
00171a  f1040014          ADD      r0,r4,#0x14           ;1522
00171e  f7fffffe          BL       lc640_write_long_ptr
001722  e000              B        |L1.5926|
                  |L1.5924|
001724  e02b              B        |L1.6014|
                  |L1.5926|
001726  f88d6000          STRB     r6,[sp,#0]            ;1524
00172a  f88d6001          STRB     r6,[sp,#1]            ;1525
00172e  f88d6002          STRB     r6,[sp,#2]            ;1526
001732  f88d6003          STRB     r6,[sp,#3]            ;1527
001736  4669              MOV      r1,sp                 ;1528
001738  f1040018          ADD      r0,r4,#0x18           ;1528
00173c  f7fffffe          BL       lc640_write_long_ptr
001740  f88d6000          STRB     r6,[sp,#0]            ;1530
001744  f88d6001          STRB     r6,[sp,#1]            ;1531
001748  f88d6002          STRB     r6,[sp,#2]            ;1532
00174c  f88d6003          STRB     r6,[sp,#3]            ;1533
001750  4669              MOV      r1,sp                 ;1534
001752  f104001c          ADD      r0,r4,#0x1c           ;1534
001756  f7fffffe          BL       lc640_write_long_ptr
00175a  b115              CBZ      r5,|L1.5986|
00175c  2d01              CMP      r5,#1                 ;1540
00175e  d007              BEQ      |L1.6000|
001760  e142              B        |L1.6632|
                  |L1.5986|
001762  2302              MOVS     r3,#2                 ;1538
001764  2201              MOVS     r2,#1                 ;1538
001766  2105              MOVS     r1,#5                 ;1538
001768  a074              ADR      r0,|L1.6460|
00176a  f7fffffe          BL       snmp_trap_send
00176e  e13b              B        |L1.6632|
                  |L1.6000|
001770  2302              MOVS     r3,#2                 ;1542
001772  461a              MOV      r2,r3                 ;1542
001774  2105              MOVS     r1,#5                 ;1542
001776  a077              ADR      r0,|L1.6484|
001778  f7fffffe          BL       snmp_trap_send
00177c  e134              B        |L1.6632|
                  |L1.6014|
;;;1548   	{
;;;1549   	bat[b]._av&=~(1<<1);
00177e  f8101f41          LDRB     r1,[r0,#0x41]!
001782  f0210102          BIC      r1,r1,#2
001786  7001              STRB     r1,[r0,#0]
;;;1550   
;;;1551        event_ptr=lc640_read_int(PTR_EVENT_LOG);
001788  4630              MOV      r0,r6
00178a  f7fffffe          BL       lc640_read_int
00178e  b284              UXTH     r4,r0
001790  4627              MOV      r7,r4
;;;1552   	event_ptr_find=event_ptr;
001792  463c              MOV      r4,r7
                  |L1.6036|
;;;1553   	
;;;1554   avar_bat_as_hndl_lbl1: 
;;;1555   
;;;1556   	lc640_adr=EVENT_LOG+(event_ptr_find*32);
001794  eb0b1044          ADD      r0,r11,r4,LSL #5
001798  b286              UXTH     r6,r0
;;;1557   
;;;1558        lc640_read_long_ptr(lc640_adr,data);
00179a  4669              MOV      r1,sp
00179c  4630              MOV      r0,r6
00179e  f7fffffe          BL       lc640_read_long_ptr
;;;1559        
;;;1560        if(!((data[0]=='B')&&(data[1]==b)&&(data[2]=='C')))
0017a2  f89d0000          LDRB     r0,[sp,#0]
0017a6  2842              CMP      r0,#0x42
0017a8  d107              BNE      |L1.6074|
0017aa  f89d0001          LDRB     r0,[sp,#1]
0017ae  42a8              CMP      r0,r5
0017b0  d103              BNE      |L1.6074|
0017b2  f89d0002          LDRB     r0,[sp,#2]
0017b6  2843              CMP      r0,#0x43
0017b8  d009              BEQ      |L1.6094|
                  |L1.6074|
;;;1561        	{        
;;;1562        	if(event_ptr_find)event_ptr_find--;
0017ba  b11c              CBZ      r4,|L1.6084|
0017bc  f1a40401          SUB      r4,r4,#1
0017c0  b2a4              UXTH     r4,r4
0017c2  e001              B        |L1.6088|
                  |L1.6084|
;;;1563        	else event_ptr_find=63;
0017c4  f04f043f          MOV      r4,#0x3f
                  |L1.6088|
;;;1564        	if(event_ptr_find==event_ptr)goto avar_bat_as_hndl_end;
0017c8  42bc              CMP      r4,r7
0017ca  d1e3              BNE      |L1.6036|
0017cc  e10c              B        |L1.6632|
                  |L1.6094|
;;;1565        	else goto avar_bat_as_hndl_lbl1;
;;;1566        	}
;;;1567        else 
;;;1568        	{
;;;1569        	lc640_read_long_ptr(lc640_adr+16,data);
0017ce  4669              MOV      r1,sp
0017d0  f1060010          ADD      r0,r6,#0x10
0017d4  f7fffffe          BL       lc640_read_long_ptr
;;;1570        	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
0017d8  f89d0000          LDRB     r0,[sp,#0]
0017dc  2841              CMP      r0,#0x41
0017de  d10b              BNE      |L1.6136|
0017e0  f89d0001          LDRB     r0,[sp,#1]
0017e4  2841              CMP      r0,#0x41
0017e6  d107              BNE      |L1.6136|
0017e8  f89d0002          LDRB     r0,[sp,#2]
0017ec  2841              CMP      r0,#0x41
0017ee  d103              BNE      |L1.6136|
0017f0  f89d0003          LDRB     r0,[sp,#3]
0017f4  2841              CMP      r0,#0x41
0017f6  d009              BEQ      |L1.6156|
                  |L1.6136|
;;;1571        		{        
;;;1572        		if(event_ptr_find)event_ptr_find--;
0017f8  b11c              CBZ      r4,|L1.6146|
0017fa  f1a40401          SUB      r4,r4,#1
0017fe  b2a4              UXTH     r4,r4
001800  e001              B        |L1.6150|
                  |L1.6146|
;;;1573            		else event_ptr_find=63;
001802  f04f043f          MOV      r4,#0x3f
                  |L1.6150|
;;;1574            	    	if(event_ptr_find==event_ptr)goto avar_bat_as_hndl_end;
001806  42bc              CMP      r4,r7
001808  d1c4              BNE      |L1.6036|
00180a  e0ed              B        |L1.6632|
                  |L1.6156|
;;;1575        		else goto avar_bat_as_hndl_lbl1;
;;;1576        		}
;;;1577   
;;;1578        	}
;;;1579        		
;;;1580   	data[0]=LPC_RTC->YEAR;
00180c  f8b8003c          LDRH     r0,[r8,#0x3c]
001810  f88d0000          STRB     r0,[sp,#0]
;;;1581   	data[1]=LPC_RTC->MONTH;
001814  f8980038          LDRB     r0,[r8,#0x38]
001818  f88d0001          STRB     r0,[sp,#1]
;;;1582   	data[2]=LPC_RTC->DOM;
00181c  f898002c          LDRB     r0,[r8,#0x2c]
001820  f88d0002          STRB     r0,[sp,#2]
;;;1583   	data[3]=0;
001824  f88da003          STRB     r10,[sp,#3]
;;;1584   	lc640_write_long_ptr(lc640_adr+16,data);
001828  4669              MOV      r1,sp
00182a  f1060010          ADD      r0,r6,#0x10
00182e  f7fffffe          BL       lc640_write_long_ptr
;;;1585   
;;;1586   	data[0]=LPC_RTC->HOUR;
001832  e09b              B        |L1.6508|
                  |L1.6196|
001834  42415420          DCB      "BAT #1 Alarm, is heated",0
001838  23312041
00183c  6c61726d
001840  2c206973
001844  20686561
001848  74656400
                  |L1.6220|
00184c  42415420          DCB      "BAT #2 Alarm, is heated",0
001850  23322041
001854  6c61726d
001858  2c206973
00185c  20686561
001860  74656400
                  |L1.6244|
001864  42415420          DCB      "BAT #2 Alarm, is overheated",0
001868  23322041
00186c  6c61726d
001870  2c206973
001874  206f7665
001878  72686561
00187c  74656400
                  |L1.6272|
001880  42415420          DCB      "BAT #1 Alarm, is overheated",0
001884  23312041
001888  6c61726d
00188c  2c206973
001890  206f7665
001894  72686561
001898  74656400
                  |L1.6300|
00189c  42415420          DCB      "BAT #1 Alarm, heating eliminated",0
0018a0  23312041
0018a4  6c61726d
0018a8  2c206865
0018ac  6174696e
0018b0  6720656c
0018b4  696d696e
0018b8  61746564
0018bc  00      
0018bd  00                DCB      0
0018be  00                DCB      0
0018bf  00                DCB      0
                  |L1.6336|
0018c0  42415420          DCB      "BAT #2 Alarm, heating eliminated",0
0018c4  23322041
0018c8  6c61726d
0018cc  2c206865
0018d0  6174696e
0018d4  6720656c
0018d8  696d696e
0018dc  61746564
0018e0  00      
0018e1  00                DCB      0
0018e2  00                DCB      0
0018e3  00                DCB      0
                  |L1.6372|
0018e4  42415420          DCB      "BAT #2 Alarm, overheating eliminated",0
0018e8  23322041
0018ec  6c61726d
0018f0  2c206f76
0018f4  65726865
0018f8  6174696e
0018fc  6720656c
001900  696d696e
001904  61746564
001908  00      
001909  00                DCB      0
00190a  00                DCB      0
00190b  00                DCB      0
                  |L1.6412|
00190c  42415420          DCB      "BAT #1 Alarm, overheating eliminated",0
001910  23312041
001914  6c61726d
001918  2c206f76
00191c  65726865
001920  6174696e
001924  6720656c
001928  696d696e
00192c  61746564
001930  00      
001931  00                DCB      0
001932  00                DCB      0
001933  00                DCB      0
                  |L1.6452|
                          DCD      bat
                  |L1.6456|
                          DCD      0x40024000
                  |L1.6460|
00193c  42415420          DCB      "BAT #1 Alarm, asymmetry",0
001940  23312041
001944  6c61726d
001948  2c206173
00194c  796d6d65
001950  74727900
                  |L1.6484|
001954  42415420          DCB      "BAT #2 Alarm, asymmetry",0
001958  23322041
00195c  6c61726d
001960  2c206173
001964  796d6d65
001968  74727900
                  |L1.6508|
00196c  f8980028          LDRB     r0,[r8,#0x28]
001970  f88d0000          STRB     r0,[sp,#0]
;;;1587   	data[1]=LPC_RTC->MIN;
001974  f8980024          LDRB     r0,[r8,#0x24]
001978  f88d0001          STRB     r0,[sp,#1]
;;;1588   	data[2]=LPC_RTC->SEC;
00197c  f8980020          LDRB     r0,[r8,#0x20]
001980  f88d0002          STRB     r0,[sp,#2]
;;;1589   	data[3]=0;
001984  f88da003          STRB     r10,[sp,#3]
;;;1590   	lc640_write_long_ptr(lc640_adr+20,data);
001988  4669              MOV      r1,sp
00198a  f1060014          ADD      r0,r6,#0x14
00198e  f7fffffe          BL       lc640_write_long_ptr
;;;1591   	
;;;1592   	data[0]='B';
001992  f88d9000          STRB     r9,[sp,#0]
;;;1593   	data[1]='B';
001996  f88d9001          STRB     r9,[sp,#1]
;;;1594   	data[2]='B';
00199a  f88d9002          STRB     r9,[sp,#2]
;;;1595   	data[3]='B';
00199e  f88d9003          STRB     r9,[sp,#3]
;;;1596   	lc640_write_long_ptr(lc640_adr+24,data);
0019a2  4669              MOV      r1,sp
0019a4  f1060018          ADD      r0,r6,#0x18
0019a8  f7fffffe          BL       lc640_write_long_ptr
;;;1597   	
;;;1598   	data[0]='B';
0019ac  f88d9000          STRB     r9,[sp,#0]
;;;1599   	data[1]='B';
0019b0  f88d9001          STRB     r9,[sp,#1]
;;;1600   	data[2]='B';
0019b4  f88d9002          STRB     r9,[sp,#2]
;;;1601   	data[3]='B';
0019b8  f88d9003          STRB     r9,[sp,#3]
;;;1602   	lc640_write_long_ptr(lc640_adr+28,data);
0019bc  4669              MOV      r1,sp
0019be  f106001c          ADD      r0,r6,#0x1c
0019c2  f7fffffe          BL       lc640_write_long_ptr
;;;1603   	
;;;1604   	if(b==0)
0019c6  b115              CBZ      r5,|L1.6606|
;;;1605   		{
;;;1606   		snmp_trap_send("BAT #1 Asymmetry alarm clear",5,1,0);
;;;1607   		}
;;;1608   	else if(b==1)
0019c8  2d01              CMP      r5,#1
0019ca  d007              BEQ      |L1.6620|
0019cc  e00c              B        |L1.6632|
                  |L1.6606|
0019ce  2300              MOVS     r3,#0                 ;1606
0019d0  2201              MOVS     r2,#1                 ;1606
0019d2  2105              MOVS     r1,#5                 ;1606
0019d4  a0f7              ADR      r0,|L1.7604|
0019d6  f7fffffe          BL       snmp_trap_send
0019da  e005              B        |L1.6632|
                  |L1.6620|
;;;1609   		{
;;;1610   		snmp_trap_send("BAT #2 Asymmetry alarm clear",5,2,0);
0019dc  2300              MOVS     r3,#0
0019de  2202              MOVS     r2,#2
0019e0  2105              MOVS     r1,#5
0019e2  a0fc              ADR      r0,|L1.7636|
0019e4  f7fffffe          BL       snmp_trap_send
                  |L1.6632|
;;;1611   		}
;;;1612   	
;;;1613   	}
;;;1614   	
;;;1615   avar_bat_as_hndl_end:
;;;1616   __nop();		
0019e8  bf00              NOP      
                  |L1.6634|
;;;1617   }
0019ea  e44c              B        |L1.4742|
;;;1618   
                          ENDP

                  ke_zvu_mem_hndl PROC
;;;1619   //-----------------------------------------------
;;;1620   void ke_zvu_mem_hndl(char b,unsigned short in,unsigned short in1)
0019ec  b5f7              PUSH     {r0-r2,r4-r7,lr}
;;;1621   {
0019ee  b082              SUB      sp,sp,#8
0019f0  4605              MOV      r5,r0
;;;1622   char data[4];
;;;1623   unsigned int event_ptr=0,lc640_adr/*,event_ptr_find*/,event_cnt;
;;;1624   //unsigned char temp,temp_;
;;;1625   //unsigned int tempUI;
;;;1626   //unsigned long tempUL; 
;;;1627   signed temp_temp;
;;;1628   
;;;1629   temp_temp=bat[b]._u_old[bat_u_old_cnt+1]; 
0019f2  eb050085          ADD      r0,r5,r5,LSL #2
0019f6  49ff              LDR      r1,|L1.7668|
0019f8  eb011100          ADD      r1,r1,r0,LSL #4
0019fc  48fe              LDR      r0,|L1.7672|
0019fe  f9b00000          LDRSH    r0,[r0,#0]  ; bat_u_old_cnt
001a02  f1000001          ADD      r0,r0,#1
001a06  eb010040          ADD      r0,r1,r0,LSL #1
001a0a  f9b00024          LDRSH    r0,[r0,#0x24]
001a0e  9000              STR      r0,[sp,#0]
;;;1630   
;;;1631   event_ptr=lc640_read_int(PTR_EVENT_LOG);
001a10  f44f6660          MOV      r6,#0xe00
001a14  4630              MOV      r0,r6
001a16  f7fffffe          BL       lc640_read_int
;;;1632   event_ptr++;	
001a1a  f1000001          ADD      r0,r0,#1
001a1e  4604              MOV      r4,r0
;;;1633   if(event_ptr>63)event_ptr=0;	
001a20  2c3f              CMP      r4,#0x3f
001a22  d901              BLS      |L1.6696|
001a24  f04f0400          MOV      r4,#0
                  |L1.6696|
;;;1634   lc640_write_int(PTR_EVENT_LOG,event_ptr);	
001a28  b221              SXTH     r1,r4
001a2a  4630              MOV      r0,r6
001a2c  f7fffffe          BL       lc640_write_int
;;;1635   	
;;;1636   event_cnt=lc640_read_int(CNT_EVENT_LOG);
001a30  f6406702          MOV      r7,#0xe02
001a34  4638              MOV      r0,r7
001a36  f7fffffe          BL       lc640_read_int
;;;1637   if(event_cnt!=63)event_cnt=event_ptr;
001a3a  283f              CMP      r0,#0x3f
001a3c  d000              BEQ      |L1.6720|
001a3e  4620              MOV      r0,r4
                  |L1.6720|
;;;1638   lc640_write_int(CNT_EVENT_LOG,event_cnt); 
001a40  b201              SXTH     r1,r0
001a42  4638              MOV      r0,r7
001a44  f7fffffe          BL       lc640_write_int
;;;1639   	
;;;1640   lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
001a48  4630              MOV      r0,r6
001a4a  f7fffffe          BL       lc640_read_int
001a4e  f44f6180          MOV      r1,#0x400
001a52  eb011440          ADD      r4,r1,r0,LSL #5
;;;1641   	
;;;1642   data[0]='B';
001a56  f04f0042          MOV      r0,#0x42
001a5a  f88d0004          STRB     r0,[sp,#4]
;;;1643   data[1]=b; 
001a5e  f88d5005          STRB     r5,[sp,#5]
;;;1644   data[2]='K';
001a62  f04f004b          MOV      r0,#0x4b
001a66  f88d0006          STRB     r0,[sp,#6]
;;;1645   data[3]='Z';
001a6a  f04f005a          MOV      r0,#0x5a
001a6e  f88d0007          STRB     r0,[sp,#7]
;;;1646   
;;;1647   lc640_write_long_ptr(lc640_adr,data);
001a72  a901              ADD      r1,sp,#4
001a74  4620              MOV      r0,r4
001a76  f7fffffe          BL       lc640_write_long_ptr
;;;1648   
;;;1649   data[0]=*((char*)&in);
001a7a  f89d000c          LDRB     r0,[sp,#0xc]
001a7e  f88d0004          STRB     r0,[sp,#4]
;;;1650   data[1]=*(((char*)(&in))+1);
001a82  f89d000d          LDRB     r0,[sp,#0xd]
001a86  f88d0005          STRB     r0,[sp,#5]
;;;1651   data[2]=*((char*)&temp_temp);
001a8a  f89d0000          LDRB     r0,[sp,#0]
001a8e  f88d0006          STRB     r0,[sp,#6]
;;;1652   data[3]=*(((char*)(&temp_temp))+1);
001a92  f89d0001          LDRB     r0,[sp,#1]
001a96  f88d0007          STRB     r0,[sp,#7]
;;;1653   lc640_write_long_ptr(lc640_adr+4,data);
001a9a  a901              ADD      r1,sp,#4
001a9c  1d20              ADDS     r0,r4,#4
001a9e  f7fffffe          BL       lc640_write_long_ptr
;;;1654   
;;;1655   ke_date[0]=lc640_read_long(EE_SPC_KE_DATE0);
001aa2  f24020a2          MOV      r0,#0x2a2
001aa6  f7fffffe          BL       lc640_read_long
001aaa  4dd4              LDR      r5,|L1.7676|
001aac  6028              STR      r0,[r5,#0]  ; ke_date
;;;1656   lc640_write_long_ptr(lc640_adr+8,(char*)&ke_date[0]);
001aae  4629              MOV      r1,r5
001ab0  f1040008          ADD      r0,r4,#8
001ab4  f7fffffe          BL       lc640_write_long_ptr
;;;1657   ke_date[1]=lc640_read_long(EE_SPC_KE_DATE1);	
001ab8  f24020a6          MOV      r0,#0x2a6
001abc  f7fffffe          BL       lc640_read_long
001ac0  6068              STR      r0,[r5,#4]  ; ke_date
;;;1658   lc640_write_long_ptr(lc640_adr+12,(char*)&ke_date[1]);
001ac2  1d29              ADDS     r1,r5,#4
001ac4  f104000c          ADD      r0,r4,#0xc
001ac8  f7fffffe          BL       lc640_write_long_ptr
;;;1659   
;;;1660   data[0]=LPC_RTC->YEAR;
001acc  4dcc              LDR      r5,|L1.7680|
001ace  8ba8              LDRH     r0,[r5,#0x1c]
001ad0  f88d0004          STRB     r0,[sp,#4]
;;;1661   data[1]=LPC_RTC->MONTH;
001ad4  7e28              LDRB     r0,[r5,#0x18]
001ad6  f88d0005          STRB     r0,[sp,#5]
;;;1662   data[2]=LPC_RTC->DOM;
001ada  7b28              LDRB     r0,[r5,#0xc]
001adc  f88d0006          STRB     r0,[sp,#6]
;;;1663   data[3]=*((char*)&in1);
001ae0  f89d0010          LDRB     r0,[sp,#0x10]
001ae4  f88d0007          STRB     r0,[sp,#7]
;;;1664   lc640_write_long_ptr(lc640_adr+16,data);
001ae8  a901              ADD      r1,sp,#4
001aea  f1040010          ADD      r0,r4,#0x10
001aee  f7fffffe          BL       lc640_write_long_ptr
;;;1665   
;;;1666   data[0]=LPC_RTC->HOUR;
001af2  7a28              LDRB     r0,[r5,#8]
001af4  f88d0004          STRB     r0,[sp,#4]
;;;1667   data[1]=LPC_RTC->MIN;
001af8  7928              LDRB     r0,[r5,#4]
001afa  f88d0005          STRB     r0,[sp,#5]
;;;1668   data[2]=LPC_RTC->SEC;
001afe  7828              LDRB     r0,[r5,#0]
001b00  f88d0006          STRB     r0,[sp,#6]
;;;1669   data[3]=*(((char*)(&in1))+1);
001b04  f89d0011          LDRB     r0,[sp,#0x11]
001b08  f88d0007          STRB     r0,[sp,#7]
;;;1670   lc640_write_long_ptr(lc640_adr+20,data);
001b0c  a901              ADD      r1,sp,#4
001b0e  f1040014          ADD      r0,r4,#0x14
001b12  f7fffffe          BL       lc640_write_long_ptr
;;;1671    
;;;1672   }
001b16  b005              ADD      sp,sp,#0x14
001b18  bdf0              POP      {r4-r7,pc}
;;;1673   
                          ENDP

                  vz_mem_hndl PROC
;;;1730   //-----------------------------------------------
;;;1731   void vz_mem_hndl(unsigned short in)
001b1a  e92d4ff8          PUSH     {r3-r11,lr}
;;;1732   {
;;;1733   char data[4];
;;;1734   unsigned int event_ptr=0,lc640_adr,event_ptr_find=0,event_cnt;
001b1e  f04f0600          MOV      r6,#0
001b22  4634              MOV      r4,r6
;;;1735   //char avar_simbol;
;;;1736   
;;;1737   if(in==1)
;;;1738   	{
;;;1739   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;1740   	event_ptr++;	
;;;1741   	if(event_ptr>63)event_ptr=0;	
;;;1742   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;1743   	
;;;1744        event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;1745   	if(event_cnt!=63)event_cnt=event_ptr;
;;;1746   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;1747   	
;;;1748   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;1749   	
;;;1750   	data[0]='B';
;;;1751   	data[1]=0; 
;;;1752   	data[2]='Z';
;;;1753   	data[3]=0;
;;;1754   	lc640_write_long_ptr(lc640_adr,data);
;;;1755   
;;;1756   	data[0]=0;
;;;1757   	data[1]=0;
;;;1758   	data[2]=0;
;;;1759   	data[3]=0;
;;;1760   	lc640_write_long_ptr(lc640_adr+4,data);
;;;1761   
;;;1762   	data[0]=LPC_RTC->YEAR;
001b24  f8df82dc          LDR      r8,|L1.7684|
001b28  46a1              MOV      r9,r4                 ;1734
001b2a  f04f0742          MOV      r7,#0x42              ;1750
001b2e  f44f6a80          MOV      r10,#0x400            ;1748
001b32  2801              CMP      r0,#1                 ;1737
001b34  d002              BEQ      |L1.6972|
;;;1763   	data[1]=LPC_RTC->MONTH;
;;;1764   	data[2]=LPC_RTC->DOM;
;;;1765   	data[3]=0;
;;;1766   	lc640_write_long_ptr(lc640_adr+8,data);
;;;1767   
;;;1768   	data[0]=LPC_RTC->HOUR;
;;;1769   	data[1]=LPC_RTC->MIN;
;;;1770   	data[2]=LPC_RTC->SEC;
;;;1771   	data[3]=0;
;;;1772   	lc640_write_long_ptr(lc640_adr+12,data);
;;;1773   	
;;;1774   	data[0]='A';
;;;1775   	data[1]='A';
;;;1776   	data[2]='A';
;;;1777   	data[3]='A';
;;;1778   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1779   	
;;;1780   	data[0]='A';
;;;1781   	data[1]='A';
;;;1782   	data[2]='A';
;;;1783   	data[3]='A';
;;;1784   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1785   	
;;;1786   	data[0]='A';
;;;1787   	data[1]='A';
;;;1788   	data[2]='A';
;;;1789   	data[3]='A';
;;;1790   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1791   	
;;;1792   	data[0]='A';
;;;1793   	data[1]='A';
;;;1794   	data[2]='A';
;;;1795   	data[3]='A';
;;;1796   	lc640_write_long_ptr(lc640_adr+28,data);		
;;;1797    	
;;;1798   	}
;;;1799   
;;;1800   else if(in==0)
001b36  2800              CMP      r0,#0
001b38  d07e              BEQ      |L1.7224|
001b3a  e108              B        |L1.7502|
                  |L1.6972|
001b3c  f44f6560          MOV      r5,#0xe00             ;1739
001b40  4628              MOV      r0,r5                 ;1739
001b42  f7fffffe          BL       lc640_read_int
001b46  f1000001          ADD      r0,r0,#1              ;1740
001b4a  4604              MOV      r4,r0                 ;1740
001b4c  2c3f              CMP      r4,#0x3f              ;1741
001b4e  d901              BLS      |L1.6996|
001b50  f04f0400          MOV      r4,#0                 ;1741
                  |L1.6996|
001b54  b221              SXTH     r1,r4                 ;1742
001b56  4628              MOV      r0,r5                 ;1742
001b58  f7fffffe          BL       lc640_write_int
001b5c  f6406602          MOV      r6,#0xe02             ;1744
001b60  4630              MOV      r0,r6                 ;1744
001b62  f7fffffe          BL       lc640_read_int
001b66  283f              CMP      r0,#0x3f              ;1745
001b68  d000              BEQ      |L1.7020|
001b6a  4620              MOV      r0,r4                 ;1745
                  |L1.7020|
001b6c  b201              SXTH     r1,r0                 ;1746
001b6e  4630              MOV      r0,r6                 ;1746
001b70  f7fffffe          BL       lc640_write_int
001b74  4628              MOV      r0,r5                 ;1748
001b76  f7fffffe          BL       lc640_read_int
001b7a  eb0a1440          ADD      r4,r10,r0,LSL #5      ;1748
001b7e  f88d7000          STRB     r7,[sp,#0]            ;1750
001b82  f88d9001          STRB     r9,[sp,#1]            ;1751
001b86  f04f005a          MOV      r0,#0x5a              ;1752
001b8a  f88d0002          STRB     r0,[sp,#2]            ;1752
001b8e  f88d9003          STRB     r9,[sp,#3]            ;1753
001b92  4669              MOV      r1,sp                 ;1754
001b94  4620              MOV      r0,r4                 ;1754
001b96  f7fffffe          BL       lc640_write_long_ptr
001b9a  f8cd9000          STR      r9,[sp,#0]            ;1759
001b9e  4669              MOV      r1,sp                 ;1760
001ba0  1d20              ADDS     r0,r4,#4              ;1760
001ba2  f7fffffe          BL       lc640_write_long_ptr
001ba6  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1762
001baa  f88d0000          STRB     r0,[sp,#0]            ;1762
001bae  f8980038          LDRB     r0,[r8,#0x38]         ;1763
001bb2  f88d0001          STRB     r0,[sp,#1]            ;1763
001bb6  f898002c          LDRB     r0,[r8,#0x2c]         ;1764
001bba  f88d0002          STRB     r0,[sp,#2]            ;1764
001bbe  f88d9003          STRB     r9,[sp,#3]            ;1765
001bc2  4669              MOV      r1,sp                 ;1766
001bc4  f1040008          ADD      r0,r4,#8              ;1766
001bc8  f7fffffe          BL       lc640_write_long_ptr
001bcc  f8980028          LDRB     r0,[r8,#0x28]         ;1768
001bd0  f88d0000          STRB     r0,[sp,#0]            ;1768
001bd4  f8980024          LDRB     r0,[r8,#0x24]         ;1769
001bd8  f88d0001          STRB     r0,[sp,#1]            ;1769
001bdc  f8980020          LDRB     r0,[r8,#0x20]         ;1770
001be0  f88d0002          STRB     r0,[sp,#2]            ;1770
001be4  f88d9003          STRB     r9,[sp,#3]            ;1771
001be8  4669              MOV      r1,sp                 ;1772
001bea  f104000c          ADD      r0,r4,#0xc            ;1772
001bee  f7fffffe          BL       lc640_write_long_ptr
001bf2  f04f0541          MOV      r5,#0x41              ;1774
001bf6  f88d5000          STRB     r5,[sp,#0]            ;1774
001bfa  f88d5001          STRB     r5,[sp,#1]            ;1775
001bfe  f88d5002          STRB     r5,[sp,#2]            ;1776
001c02  f88d5003          STRB     r5,[sp,#3]            ;1777
001c06  4669              MOV      r1,sp                 ;1778
001c08  f1040010          ADD      r0,r4,#0x10           ;1778
001c0c  f7fffffe          BL       lc640_write_long_ptr
001c10  f88d5000          STRB     r5,[sp,#0]            ;1780
001c14  f88d5001          STRB     r5,[sp,#1]            ;1781
001c18  f88d5002          STRB     r5,[sp,#2]            ;1782
001c1c  f88d5003          STRB     r5,[sp,#3]            ;1783
001c20  4669              MOV      r1,sp                 ;1784
001c22  f1040014          ADD      r0,r4,#0x14           ;1784
001c26  f7fffffe          BL       lc640_write_long_ptr
001c2a  f88d5000          STRB     r5,[sp,#0]            ;1786
001c2e  f88d5001          STRB     r5,[sp,#1]            ;1787
001c32  f88d5002          STRB     r5,[sp,#2]            ;1788
001c36  e000              B        |L1.7226|
                  |L1.7224|
001c38  e014              B        |L1.7268|
                  |L1.7226|
001c3a  f88d5003          STRB     r5,[sp,#3]            ;1789
001c3e  4669              MOV      r1,sp                 ;1790
001c40  f1040018          ADD      r0,r4,#0x18           ;1790
001c44  f7fffffe          BL       lc640_write_long_ptr
001c48  f88d5000          STRB     r5,[sp,#0]            ;1792
001c4c  f88d5001          STRB     r5,[sp,#1]            ;1793
001c50  f88d5002          STRB     r5,[sp,#2]            ;1794
001c54  f88d5003          STRB     r5,[sp,#3]            ;1795
001c58  4669              MOV      r1,sp                 ;1796
001c5a  f104001c          ADD      r0,r4,#0x1c           ;1796
001c5e  f7fffffe          BL       lc640_write_long_ptr
001c62  e074              B        |L1.7502|
                  |L1.7268|
;;;1801   	{      
;;;1802        
;;;1803   vz_mem_hndl_lbl1: 
;;;1804   
;;;1805   	lc640_adr=EVENT_LOG+(event_ptr_find*32);
001c64  eb0a1544          ADD      r5,r10,r4,LSL #5
;;;1806   
;;;1807        lc640_read_long_ptr(lc640_adr,data);
001c68  4669              MOV      r1,sp
001c6a  4628              MOV      r0,r5
001c6c  f7fffffe          BL       lc640_read_long_ptr
;;;1808        
;;;1809        if(!((data[0]=='B')&&(data[2]=='Z')))
001c70  f89d0000          LDRB     r0,[sp,#0]
001c74  2842              CMP      r0,#0x42
001c76  d103              BNE      |L1.7296|
001c78  f89d0002          LDRB     r0,[sp,#2]
001c7c  285a              CMP      r0,#0x5a
001c7e  d008              BEQ      |L1.7314|
                  |L1.7296|
;;;1810        	{        
;;;1811        	if(event_ptr_find)event_ptr_find--;
001c80  b114              CBZ      r4,|L1.7304|
001c82  f1a40401          SUB      r4,r4,#1
001c86  e001              B        |L1.7308|
                  |L1.7304|
;;;1812        	else event_ptr_find=63;
001c88  f04f043f          MOV      r4,#0x3f
                  |L1.7308|
;;;1813        	if(event_ptr_find==event_ptr)goto vz_mem_hndl_end;
001c8c  42b4              CMP      r4,r6
001c8e  d1e9              BNE      |L1.7268|
001c90  e05d              B        |L1.7502|
                  |L1.7314|
;;;1814        	else goto vz_mem_hndl_lbl1;
;;;1815        	}
;;;1816        else 
;;;1817        	{
;;;1818        	lc640_read_long_ptr(lc640_adr+16,data);
001c92  4669              MOV      r1,sp
001c94  f1050010          ADD      r0,r5,#0x10
001c98  f7fffffe          BL       lc640_read_long_ptr
;;;1819        	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
001c9c  f89d0000          LDRB     r0,[sp,#0]
001ca0  2841              CMP      r0,#0x41
001ca2  d10b              BNE      |L1.7356|
001ca4  f89d0001          LDRB     r0,[sp,#1]
001ca8  2841              CMP      r0,#0x41
001caa  d107              BNE      |L1.7356|
001cac  f89d0002          LDRB     r0,[sp,#2]
001cb0  2841              CMP      r0,#0x41
001cb2  d103              BNE      |L1.7356|
001cb4  f89d0003          LDRB     r0,[sp,#3]
001cb8  2841              CMP      r0,#0x41
001cba  d008              BEQ      |L1.7374|
                  |L1.7356|
;;;1820        		{        
;;;1821        		if(event_ptr_find)event_ptr_find--;
001cbc  b114              CBZ      r4,|L1.7364|
001cbe  f1a40401          SUB      r4,r4,#1
001cc2  e001              B        |L1.7368|
                  |L1.7364|
;;;1822            		else event_ptr_find=63;
001cc4  f04f043f          MOV      r4,#0x3f
                  |L1.7368|
;;;1823            		if(event_ptr_find==event_ptr)goto vz_mem_hndl_end;
001cc8  42b4              CMP      r4,r6
001cca  d1cb              BNE      |L1.7268|
001ccc  e03f              B        |L1.7502|
                  |L1.7374|
;;;1824        		else goto vz_mem_hndl_lbl1;
;;;1825        		}
;;;1826   
;;;1827        	}	
;;;1828   
;;;1829   
;;;1830   	
;;;1831   	data[0]=LPC_RTC->YEAR;
001cce  f8b8003c          LDRH     r0,[r8,#0x3c]
001cd2  f88d0000          STRB     r0,[sp,#0]
;;;1832   	data[1]=LPC_RTC->MONTH;
001cd6  f8980038          LDRB     r0,[r8,#0x38]
001cda  f88d0001          STRB     r0,[sp,#1]
;;;1833   	data[2]=LPC_RTC->DOM;
001cde  f898002c          LDRB     r0,[r8,#0x2c]
001ce2  f88d0002          STRB     r0,[sp,#2]
;;;1834   	data[3]=0;
001ce6  f88d9003          STRB     r9,[sp,#3]
;;;1835   	lc640_write_long_ptr(lc640_adr+16,data);
001cea  4669              MOV      r1,sp
001cec  f1050010          ADD      r0,r5,#0x10
001cf0  f7fffffe          BL       lc640_write_long_ptr
;;;1836   
;;;1837   	data[0]=LPC_RTC->HOUR;
001cf4  f8980028          LDRB     r0,[r8,#0x28]
001cf8  f88d0000          STRB     r0,[sp,#0]
;;;1838   	data[1]=LPC_RTC->MIN;
001cfc  f8980024          LDRB     r0,[r8,#0x24]
001d00  f88d0001          STRB     r0,[sp,#1]
;;;1839   	data[2]=LPC_RTC->SEC;
001d04  f8980020          LDRB     r0,[r8,#0x20]
001d08  f88d0002          STRB     r0,[sp,#2]
;;;1840   	data[3]=0;
001d0c  f88d9003          STRB     r9,[sp,#3]
;;;1841   	lc640_write_long_ptr(lc640_adr+20,data);
001d10  4669              MOV      r1,sp
001d12  f1050014          ADD      r0,r5,#0x14
001d16  f7fffffe          BL       lc640_write_long_ptr
;;;1842   	
;;;1843   	data[0]='B';
001d1a  f88d7000          STRB     r7,[sp,#0]
;;;1844   	data[1]='B';
001d1e  f88d7001          STRB     r7,[sp,#1]
;;;1845   	data[2]='B';
001d22  f88d7002          STRB     r7,[sp,#2]
;;;1846   	data[3]='B';
001d26  f88d7003          STRB     r7,[sp,#3]
;;;1847   	lc640_write_long_ptr(lc640_adr+24,data);
001d2a  4669              MOV      r1,sp
001d2c  f1050018          ADD      r0,r5,#0x18
001d30  f7fffffe          BL       lc640_write_long_ptr
;;;1848   	
;;;1849   	data[0]='B';
001d34  f88d7000          STRB     r7,[sp,#0]
;;;1850   	data[1]='B';
001d38  f88d7001          STRB     r7,[sp,#1]
;;;1851   	data[2]='B';
001d3c  f88d7002          STRB     r7,[sp,#2]
;;;1852   	data[3]='B';
001d40  f88d7003          STRB     r7,[sp,#3]
;;;1853   	lc640_write_long_ptr(lc640_adr+28,data);
001d44  4669              MOV      r1,sp
001d46  f105001c          ADD      r0,r5,#0x1c
001d4a  f7fffffe          BL       lc640_write_long_ptr
                  |L1.7502|
;;;1854   	
;;;1855   	}
;;;1856   
;;;1857   vz_mem_hndl_end:
;;;1858   __nop(); 
001d4e  bf00              NOP      
                  |L1.7504|
;;;1859   
;;;1860   }
001d50  e44c              B        |L1.5612|
;;;1861   
                          ENDP

                  speedz_mem_hndl PROC
;;;1862   //-----------------------------------------------
;;;1863   void speedz_mem_hndl(unsigned short in)	 //    (1-, 5- , 0- , 10- )
001d52  e92d4ff8          PUSH     {r3-r11,lr}
;;;1864   {
001d56  4605              MOV      r5,r0
;;;1865   char data[4];
;;;1866   unsigned int event_ptr=0,lc640_adr,event_ptr_find=0,event_cnt;
001d58  f04f0600          MOV      r6,#0
001d5c  4634              MOV      r4,r6
;;;1867   //char avar_simbol;
;;;1868   
;;;1869   if((in==1)||(in==5)) //  
;;;1870   	{
;;;1871   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;1872   	event_ptr++;	
;;;1873   	if(event_ptr>63)event_ptr=0;	
;;;1874   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;1875   	
;;;1876       event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;1877   	if(event_cnt!=63)event_cnt=event_ptr;
;;;1878   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;1879   	
;;;1880   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;1881   	
;;;1882   	data[0]='s';
;;;1883   	data[1]=0;
;;;1884   	if(in==5)data[1]='a'; 
;;;1885   	data[2]='Z';
;;;1886   	data[3]=0;
;;;1887   	lc640_write_long_ptr(lc640_adr,data);
;;;1888   
;;;1889   	data[0]=0;
;;;1890   	data[1]=0;
;;;1891   	data[2]=0;
;;;1892   	data[3]=0;
;;;1893   	lc640_write_long_ptr(lc640_adr+4,data);
;;;1894   
;;;1895   	data[0]=LPC_RTC->YEAR;
001d5e  f8df80a4          LDR      r8,|L1.7684|
001d62  46a1              MOV      r9,r4                 ;1866
001d64  f44f6a80          MOV      r10,#0x400            ;1880
001d68  2d01              CMP      r5,#1                 ;1869
001d6a  d012              BEQ      |L1.7570|
001d6c  2d05              CMP      r5,#5                 ;1869
001d6e  d010              BEQ      |L1.7570|
;;;1896   	data[1]=LPC_RTC->MONTH;
;;;1897   	data[2]=LPC_RTC->DOM;
;;;1898   	data[3]=0;
;;;1899   	lc640_write_long_ptr(lc640_adr+8,data);
;;;1900   
;;;1901   	data[0]=LPC_RTC->HOUR;
;;;1902   	data[1]=LPC_RTC->MIN;
;;;1903   	data[2]=LPC_RTC->SEC;
;;;1904   	data[3]=0;
;;;1905   	lc640_write_long_ptr(lc640_adr+12,data);
;;;1906   	
;;;1907   	data[0]='A';
;;;1908   	data[1]='A';
;;;1909   	data[2]='A';
;;;1910   	data[3]='A';
;;;1911   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1912   	
;;;1913   	data[0]='A';
;;;1914   	data[1]='A';
;;;1915   	data[2]='A';
;;;1916   	data[3]='A';
;;;1917   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1918   	
;;;1919   	data[0]='A';
;;;1920   	data[1]='A';
;;;1921   	data[2]='A';
;;;1922   	data[3]='A';
;;;1923   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1924   	
;;;1925   	data[0]='A';
;;;1926   	data[1]='A';
;;;1927   	data[2]='A';
;;;1928   	data[3]='A';
;;;1929   	lc640_write_long_ptr(lc640_adr+28,data);		
;;;1930    	
;;;1931   	}
;;;1932   
;;;1933   else if(in==0)	// 
001d70  2d00              CMP      r5,#0
001d72  d07d              BEQ      |L1.7792|
;;;1934   	{      
;;;1935   	char i;     
;;;1936   	event_ptr_find=0;
;;;1937   	for (i=0;i<63;i++)
;;;1938   		{
;;;1939   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
;;;1940   
;;;1941        	lc640_read_long_ptr(lc640_adr,data);
;;;1942        
;;;1943        	if(!((data[0]=='s')&&(data[2]=='Z')))
;;;1944        		{        
;;;1945        		if(event_ptr_find)event_ptr_find--;
;;;1946        		else event_ptr_find=63;
;;;1947        		if(event_ptr_find==event_ptr)
;;;1948   				{
;;;1949   				lc640_adr=0;
;;;1950   				break;
;;;1951   				}
;;;1952        		else continue;
;;;1953        		}
;;;1954        	else 
;;;1955        		{
;;;1956        		lc640_read_long_ptr(lc640_adr+16,data);
;;;1957        		if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;1958        			{        
;;;1959        			if(event_ptr_find)event_ptr_find--;
;;;1960            		else event_ptr_find=63;
;;;1961            		if(event_ptr_find==event_ptr)
;;;1962   					{
;;;1963   					lc640_adr=0;
;;;1964   					break;
;;;1965   					}
;;;1966        			else continue;
;;;1967        			}
;;;1968        		}	
;;;1969   		}
;;;1970   	if(lc640_adr!=0)
;;;1971   		{
;;;1972   		data[0]=LPC_RTC->YEAR;
;;;1973   		data[1]=LPC_RTC->MONTH;
;;;1974   		data[2]=LPC_RTC->DOM;
;;;1975   		data[3]=0;
;;;1976   		lc640_write_long_ptr(lc640_adr+16,data);
;;;1977   	
;;;1978   		data[0]=LPC_RTC->HOUR;
;;;1979   		data[1]=LPC_RTC->MIN;
;;;1980   		data[2]=LPC_RTC->SEC;
;;;1981   		data[3]=0;
;;;1982   		lc640_write_long_ptr(lc640_adr+20,data);
;;;1983   		
;;;1984   		data[0]='C';
;;;1985   		data[1]='C';
;;;1986   		data[2]='C';
;;;1987   		data[3]='C';
;;;1988   		lc640_write_long_ptr(lc640_adr+24,data);
;;;1989   		
;;;1990   		data[0]='C';
;;;1991   		data[1]='C';
;;;1992   		data[2]='C';
;;;1993   		data[3]='C';
;;;1994   		lc640_write_long_ptr(lc640_adr+28,data);
;;;1995   		}
;;;1996   	}
;;;1997   else if(in==10) 	//  
001d74  2d0a              CMP      r5,#0xa
001d76  d17c              BNE      |L1.7794|
;;;1998   	{      
;;;1999   	char i;     
;;;2000   
;;;2001   	event_ptr_find=0;
;;;2002   	for (i=0;i<63;i++)
001d78  f04f0700          MOV      r7,#0
                  |L1.7548|
;;;2003   		{
;;;2004   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
001d7c  eb0a1544          ADD      r5,r10,r4,LSL #5
;;;2005   
;;;2006        	lc640_read_long_ptr(lc640_adr,data);
001d80  4669              MOV      r1,sp
001d82  4628              MOV      r0,r5
001d84  f7fffffe          BL       lc640_read_long_ptr
;;;2007        
;;;2008        	if(!((data[0]=='s')&&(data[2]=='Z')))
001d88  f89d0000          LDRB     r0,[sp,#0]
001d8c  2873              CMP      r0,#0x73
001d8e  d171              BNE      |L1.7796|
001d90  e14d              B        |L1.8238|
                  |L1.7570|
001d92  f44f6660          MOV      r6,#0xe00             ;1871
001d96  4630              MOV      r0,r6                 ;1871
001d98  f7fffffe          BL       lc640_read_int
001d9c  f1000001          ADD      r0,r0,#1              ;1872
001da0  4604              MOV      r4,r0                 ;1872
001da2  2c3f              CMP      r4,#0x3f              ;1873
001da4  d901              BLS      |L1.7594|
001da6  f04f0400          MOV      r4,#0                 ;1873
                  |L1.7594|
001daa  b221              SXTH     r1,r4                 ;1874
001dac  4630              MOV      r0,r6                 ;1874
001dae  f7fffffe          BL       lc640_write_int
001db2  e029              B        |L1.7688|
                  |L1.7604|
001db4  42415420          DCB      "BAT #1 Asymmetry alarm clear",0
001db8  23312041
001dbc  73796d6d
001dc0  65747279
001dc4  20616c61
001dc8  726d2063
001dcc  6c656172
001dd0  00      
001dd1  00                DCB      0
001dd2  00                DCB      0
001dd3  00                DCB      0
                  |L1.7636|
001dd4  42415420          DCB      "BAT #2 Asymmetry alarm clear",0
001dd8  23322041
001ddc  73796d6d
001de0  65747279
001de4  20616c61
001de8  726d2063
001dec  6c656172
001df0  00      
001df1  00                DCB      0
001df2  00                DCB      0
001df3  00                DCB      0
                  |L1.7668|
                          DCD      bat
                  |L1.7672|
                          DCD      bat_u_old_cnt
                  |L1.7676|
                          DCD      ke_date
                  |L1.7680|
                          DCD      0x40024020
                  |L1.7684|
                          DCD      0x40024000
                  |L1.7688|
001e08  f6406702          MOV      r7,#0xe02             ;1876
001e0c  4638              MOV      r0,r7                 ;1876
001e0e  f7fffffe          BL       lc640_read_int
001e12  283f              CMP      r0,#0x3f              ;1877
001e14  d000              BEQ      |L1.7704|
001e16  4620              MOV      r0,r4                 ;1877
                  |L1.7704|
001e18  b201              SXTH     r1,r0                 ;1878
001e1a  4638              MOV      r0,r7                 ;1878
001e1c  f7fffffe          BL       lc640_write_int
001e20  4630              MOV      r0,r6                 ;1880
001e22  f7fffffe          BL       lc640_read_int
001e26  eb0a1440          ADD      r4,r10,r0,LSL #5      ;1880
001e2a  f04f0073          MOV      r0,#0x73              ;1882
001e2e  f88d0000          STRB     r0,[sp,#0]            ;1882
001e32  f88d9001          STRB     r9,[sp,#1]            ;1883
001e36  2d05              CMP      r5,#5                 ;1884
001e38  d103              BNE      |L1.7746|
001e3a  f04f0061          MOV      r0,#0x61              ;1884
001e3e  f88d0001          STRB     r0,[sp,#1]            ;1884
                  |L1.7746|
001e42  f04f005a          MOV      r0,#0x5a              ;1885
001e46  f88d0002          STRB     r0,[sp,#2]            ;1885
001e4a  f88d9003          STRB     r9,[sp,#3]            ;1886
001e4e  4669              MOV      r1,sp                 ;1887
001e50  4620              MOV      r0,r4                 ;1887
001e52  f7fffffe          BL       lc640_write_long_ptr
001e56  f8cd9000          STR      r9,[sp,#0]            ;1892
001e5a  4669              MOV      r1,sp                 ;1893
001e5c  1d20              ADDS     r0,r4,#4              ;1893
001e5e  f7fffffe          BL       lc640_write_long_ptr
001e62  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1895
001e66  f88d0000          STRB     r0,[sp,#0]            ;1895
001e6a  f8980038          LDRB     r0,[r8,#0x38]         ;1896
001e6e  e002              B        |L1.7798|
                  |L1.7792|
001e70  e058              B        |L1.7972|
                  |L1.7794|
001e72  e056              B        |L1.7970|
                  |L1.7796|
001e74  e0df              B        |L1.8246|
                  |L1.7798|
001e76  f88d0001          STRB     r0,[sp,#1]            ;1896
001e7a  f898002c          LDRB     r0,[r8,#0x2c]         ;1897
001e7e  f88d0002          STRB     r0,[sp,#2]            ;1897
001e82  f88d9003          STRB     r9,[sp,#3]            ;1898
001e86  4669              MOV      r1,sp                 ;1899
001e88  f1040008          ADD      r0,r4,#8              ;1899
001e8c  f7fffffe          BL       lc640_write_long_ptr
001e90  f8980028          LDRB     r0,[r8,#0x28]         ;1901
001e94  f88d0000          STRB     r0,[sp,#0]            ;1901
001e98  f8980024          LDRB     r0,[r8,#0x24]         ;1902
001e9c  f88d0001          STRB     r0,[sp,#1]            ;1902
001ea0  f8980020          LDRB     r0,[r8,#0x20]         ;1903
001ea4  f88d0002          STRB     r0,[sp,#2]            ;1903
001ea8  f88d9003          STRB     r9,[sp,#3]            ;1904
001eac  4669              MOV      r1,sp                 ;1905
001eae  f104000c          ADD      r0,r4,#0xc            ;1905
001eb2  f7fffffe          BL       lc640_write_long_ptr
001eb6  f04f0541          MOV      r5,#0x41              ;1907
001eba  f88d5000          STRB     r5,[sp,#0]            ;1907
001ebe  f88d5001          STRB     r5,[sp,#1]            ;1908
001ec2  f88d5002          STRB     r5,[sp,#2]            ;1909
001ec6  f88d5003          STRB     r5,[sp,#3]            ;1910
001eca  4669              MOV      r1,sp                 ;1911
001ecc  f1040010          ADD      r0,r4,#0x10           ;1911
001ed0  f7fffffe          BL       lc640_write_long_ptr
001ed4  f88d5000          STRB     r5,[sp,#0]            ;1913
001ed8  f88d5001          STRB     r5,[sp,#1]            ;1914
001edc  f88d5002          STRB     r5,[sp,#2]            ;1915
001ee0  f88d5003          STRB     r5,[sp,#3]            ;1916
001ee4  4669              MOV      r1,sp                 ;1917
001ee6  f1040014          ADD      r0,r4,#0x14           ;1917
001eea  f7fffffe          BL       lc640_write_long_ptr
001eee  f88d5000          STRB     r5,[sp,#0]            ;1919
001ef2  f88d5001          STRB     r5,[sp,#1]            ;1920
001ef6  f88d5002          STRB     r5,[sp,#2]            ;1921
001efa  f88d5003          STRB     r5,[sp,#3]            ;1922
001efe  4669              MOV      r1,sp                 ;1923
001f00  f1040018          ADD      r0,r4,#0x18           ;1923
001f04  f7fffffe          BL       lc640_write_long_ptr
001f08  f88d5000          STRB     r5,[sp,#0]            ;1925
001f0c  f88d5001          STRB     r5,[sp,#1]            ;1926
001f10  f88d5002          STRB     r5,[sp,#2]            ;1927
001f14  f88d5003          STRB     r5,[sp,#3]            ;1928
001f18  4669              MOV      r1,sp                 ;1929
001f1a  f104001c          ADD      r0,r4,#0x1c           ;1929
001f1e  f7fffffe          BL       lc640_write_long_ptr
                  |L1.7970|
;;;2009        		{        
;;;2010        		if(event_ptr_find)event_ptr_find--;
;;;2011        		else event_ptr_find=63;
;;;2012        		if(event_ptr_find==event_ptr)
;;;2013   				{
;;;2014   				lc640_adr=0;
;;;2015   				break;
;;;2016   				}
;;;2017        		else continue;
;;;2018        		}
;;;2019        	else 
;;;2020        		{
;;;2021        		lc640_read_long_ptr(lc640_adr+16,data);
;;;2022        		if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;2023        			{        
;;;2024        			if(event_ptr_find)event_ptr_find--;
;;;2025            		else event_ptr_find=63;
;;;2026            		if(event_ptr_find==event_ptr)
;;;2027   					{
;;;2028   					lc640_adr=0;
;;;2029   					break;
;;;2030   					}
;;;2031        			else continue;
;;;2032        			}
;;;2033        		}	
;;;2034   		}
;;;2035   	if(lc640_adr!=0)
;;;2036   		{
;;;2037   		data[0]=LPC_RTC->YEAR;
;;;2038   		data[1]=LPC_RTC->MONTH;
;;;2039   		data[2]=LPC_RTC->DOM;
;;;2040   		data[3]=0;
;;;2041   		lc640_write_long_ptr(lc640_adr+16,data);
;;;2042   	
;;;2043   		data[0]=LPC_RTC->HOUR;
;;;2044   		data[1]=LPC_RTC->MIN;
;;;2045   		data[2]=LPC_RTC->SEC;
;;;2046   		data[3]=0;
;;;2047   		lc640_write_long_ptr(lc640_adr+20,data);
;;;2048   		
;;;2049   		data[0]='B';
;;;2050   		data[1]='B';
;;;2051   		data[2]='B';
;;;2052   		data[3]='B';
;;;2053   		lc640_write_long_ptr(lc640_adr+24,data);
;;;2054   		
;;;2055   		data[0]='B';
;;;2056   		data[1]='B';
;;;2057   		data[2]='B';
;;;2058   		data[3]='B';
;;;2059   		lc640_write_long_ptr(lc640_adr+28,data);
;;;2060   		}
;;;2061   	}
;;;2062   }
001f22  e562              B        |L1.6634|
                  |L1.7972|
001f24  f04f0700          MOV      r7,#0                 ;1937
                  |L1.7976|
001f28  eb0a1544          ADD      r5,r10,r4,LSL #5      ;1939
001f2c  4669              MOV      r1,sp                 ;1941
001f2e  4628              MOV      r0,r5                 ;1941
001f30  f7fffffe          BL       lc640_read_long_ptr
001f34  f89d0000          LDRB     r0,[sp,#0]            ;1943
001f38  2873              CMP      r0,#0x73              ;1943
001f3a  d103              BNE      |L1.8004|
001f3c  f89d0002          LDRB     r0,[sp,#2]            ;1943
001f40  285a              CMP      r0,#0x5a              ;1943
001f42  d00a              BEQ      |L1.8026|
                  |L1.8004|
001f44  b114              CBZ      r4,|L1.8012|
001f46  f1a40401          SUB      r4,r4,#1              ;1945
001f4a  e001              B        |L1.8016|
                  |L1.8012|
001f4c  f04f043f          MOV      r4,#0x3f              ;1946
                  |L1.8016|
001f50  42b4              CMP      r4,r6                 ;1947
001f52  d122              BNE      |L1.8090|
001f54  f04f0500          MOV      r5,#0                 ;1949
001f58  e024              B        |L1.8100|
                  |L1.8026|
001f5a  4669              MOV      r1,sp                 ;1956
001f5c  f1050010          ADD      r0,r5,#0x10           ;1956
001f60  f7fffffe          BL       lc640_read_long_ptr
001f64  f89d0000          LDRB     r0,[sp,#0]            ;1957
001f68  2841              CMP      r0,#0x41              ;1957
001f6a  d10b              BNE      |L1.8068|
001f6c  f89d0001          LDRB     r0,[sp,#1]            ;1957
001f70  2841              CMP      r0,#0x41              ;1957
001f72  d107              BNE      |L1.8068|
001f74  f89d0002          LDRB     r0,[sp,#2]            ;1957
001f78  2841              CMP      r0,#0x41              ;1957
001f7a  d103              BNE      |L1.8068|
001f7c  f89d0003          LDRB     r0,[sp,#3]            ;1957
001f80  2841              CMP      r0,#0x41              ;1957
001f82  d00a              BEQ      |L1.8090|
                  |L1.8068|
001f84  b114              CBZ      r4,|L1.8076|
001f86  f1a40401          SUB      r4,r4,#1              ;1959
001f8a  e001              B        |L1.8080|
                  |L1.8076|
001f8c  f04f043f          MOV      r4,#0x3f              ;1960
                  |L1.8080|
001f90  42b4              CMP      r4,r6                 ;1961
001f92  d102              BNE      |L1.8090|
001f94  f04f0500          MOV      r5,#0                 ;1963
001f98  e004              B        |L1.8100|
                  |L1.8090|
001f9a  f1070701          ADD      r7,r7,#1              ;1937
001f9e  b2ff              UXTB     r7,r7                 ;1937
001fa0  2f3f              CMP      r7,#0x3f              ;1937
001fa2  d3c1              BCC      |L1.7976|
                  |L1.8100|
001fa4  2d00              CMP      r5,#0                 ;1970
001fa6  d0bc              BEQ      |L1.7970|
001fa8  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1972
001fac  f88d0000          STRB     r0,[sp,#0]            ;1972
001fb0  f8980038          LDRB     r0,[r8,#0x38]         ;1973
001fb4  f88d0001          STRB     r0,[sp,#1]            ;1973
001fb8  f898002c          LDRB     r0,[r8,#0x2c]         ;1974
001fbc  f88d0002          STRB     r0,[sp,#2]            ;1974
001fc0  f88d9003          STRB     r9,[sp,#3]            ;1975
001fc4  4669              MOV      r1,sp                 ;1976
001fc6  f1050010          ADD      r0,r5,#0x10           ;1976
001fca  f7fffffe          BL       lc640_write_long_ptr
001fce  f8980028          LDRB     r0,[r8,#0x28]         ;1978
001fd2  f88d0000          STRB     r0,[sp,#0]            ;1978
001fd6  f8980024          LDRB     r0,[r8,#0x24]         ;1979
001fda  f88d0001          STRB     r0,[sp,#1]            ;1979
001fde  f8980020          LDRB     r0,[r8,#0x20]         ;1980
001fe2  f88d0002          STRB     r0,[sp,#2]            ;1980
001fe6  f88d9003          STRB     r9,[sp,#3]            ;1981
001fea  4669              MOV      r1,sp                 ;1982
001fec  f1050014          ADD      r0,r5,#0x14           ;1982
001ff0  f7fffffe          BL       lc640_write_long_ptr
001ff4  f04f0443          MOV      r4,#0x43              ;1984
001ff8  f88d4000          STRB     r4,[sp,#0]            ;1984
001ffc  f88d4001          STRB     r4,[sp,#1]            ;1985
002000  f88d4002          STRB     r4,[sp,#2]            ;1986
002004  f88d4003          STRB     r4,[sp,#3]            ;1987
002008  4669              MOV      r1,sp                 ;1988
00200a  f1050018          ADD      r0,r5,#0x18           ;1988
00200e  f7fffffe          BL       lc640_write_long_ptr
002012  f88d4000          STRB     r4,[sp,#0]            ;1990
002016  f88d4001          STRB     r4,[sp,#1]            ;1991
00201a  f88d4002          STRB     r4,[sp,#2]            ;1992
00201e  f88d4003          STRB     r4,[sp,#3]            ;1993
002022  4669              MOV      r1,sp                 ;1994
002024  f105001c          ADD      r0,r5,#0x1c           ;1994
002028  f7fffffe          BL       lc640_write_long_ptr
                  |L1.8236|
00202c  e4dd              B        |L1.6634|
                  |L1.8238|
00202e  f89d0002          LDRB     r0,[sp,#2]            ;2008
002032  285a              CMP      r0,#0x5a              ;2008
002034  d00a              BEQ      |L1.8268|
                  |L1.8246|
002036  b114              CBZ      r4,|L1.8254|
002038  f1a40401          SUB      r4,r4,#1              ;2010
00203c  e001              B        |L1.8258|
                  |L1.8254|
00203e  f04f043f          MOV      r4,#0x3f              ;2011
                  |L1.8258|
002042  42b4              CMP      r4,r6                 ;2012
002044  d122              BNE      |L1.8332|
002046  f04f0500          MOV      r5,#0                 ;2014
00204a  e025              B        |L1.8344|
                  |L1.8268|
00204c  4669              MOV      r1,sp                 ;2021
00204e  f1050010          ADD      r0,r5,#0x10           ;2021
002052  f7fffffe          BL       lc640_read_long_ptr
002056  f89d0000          LDRB     r0,[sp,#0]            ;2022
00205a  2841              CMP      r0,#0x41              ;2022
00205c  d10b              BNE      |L1.8310|
00205e  f89d0001          LDRB     r0,[sp,#1]            ;2022
002062  2841              CMP      r0,#0x41              ;2022
002064  d107              BNE      |L1.8310|
002066  f89d0002          LDRB     r0,[sp,#2]            ;2022
00206a  2841              CMP      r0,#0x41              ;2022
00206c  d103              BNE      |L1.8310|
00206e  f89d0003          LDRB     r0,[sp,#3]            ;2022
002072  2841              CMP      r0,#0x41              ;2022
002074  d00a              BEQ      |L1.8332|
                  |L1.8310|
002076  b114              CBZ      r4,|L1.8318|
002078  f1a40401          SUB      r4,r4,#1              ;2024
00207c  e001              B        |L1.8322|
                  |L1.8318|
00207e  f04f043f          MOV      r4,#0x3f              ;2025
                  |L1.8322|
002082  42b4              CMP      r4,r6                 ;2026
002084  d102              BNE      |L1.8332|
002086  f04f0500          MOV      r5,#0                 ;2028
00208a  e005              B        |L1.8344|
                  |L1.8332|
00208c  f1070701          ADD      r7,r7,#1              ;2002
002090  b2ff              UXTB     r7,r7                 ;2002
002092  2f3f              CMP      r7,#0x3f              ;2002
002094  f4ffae72          BCC      |L1.7548|
                  |L1.8344|
002098  2d00              CMP      r5,#0                 ;2035
00209a  d0c7              BEQ      |L1.8236|
00209c  f8b8003c          LDRH     r0,[r8,#0x3c]         ;2037
0020a0  f88d0000          STRB     r0,[sp,#0]            ;2037
0020a4  f8980038          LDRB     r0,[r8,#0x38]         ;2038
0020a8  f88d0001          STRB     r0,[sp,#1]            ;2038
0020ac  f898002c          LDRB     r0,[r8,#0x2c]         ;2039
0020b0  f88d0002          STRB     r0,[sp,#2]            ;2039
0020b4  f88d9003          STRB     r9,[sp,#3]            ;2040
0020b8  4669              MOV      r1,sp                 ;2041
0020ba  f1050010          ADD      r0,r5,#0x10           ;2041
0020be  f7fffffe          BL       lc640_write_long_ptr
0020c2  f8980028          LDRB     r0,[r8,#0x28]         ;2043
0020c6  f88d0000          STRB     r0,[sp,#0]            ;2043
0020ca  f8980024          LDRB     r0,[r8,#0x24]         ;2044
0020ce  f88d0001          STRB     r0,[sp,#1]            ;2044
0020d2  f8980020          LDRB     r0,[r8,#0x20]         ;2045
0020d6  f88d0002          STRB     r0,[sp,#2]            ;2045
0020da  f88d9003          STRB     r9,[sp,#3]            ;2046
0020de  4669              MOV      r1,sp                 ;2047
0020e0  f1050014          ADD      r0,r5,#0x14           ;2047
0020e4  f7fffffe          BL       lc640_write_long_ptr
0020e8  f04f0442          MOV      r4,#0x42              ;2049
0020ec  f88d4000          STRB     r4,[sp,#0]            ;2049
0020f0  f88d4001          STRB     r4,[sp,#1]            ;2050
0020f4  f88d4002          STRB     r4,[sp,#2]            ;2051
0020f8  f88d4003          STRB     r4,[sp,#3]            ;2052
0020fc  4669              MOV      r1,sp                 ;2053
0020fe  f1050018          ADD      r0,r5,#0x18           ;2053
002102  f7fffffe          BL       lc640_write_long_ptr
002106  f88d4000          STRB     r4,[sp,#0]            ;2055
00210a  f88d4001          STRB     r4,[sp,#1]            ;2056
00210e  f88d4002          STRB     r4,[sp,#2]            ;2057
002112  f88d4003          STRB     r4,[sp,#3]            ;2058
002116  4669              MOV      r1,sp                 ;2059
002118  f105001c          ADD      r0,r5,#0x1c           ;2059
00211c  f7fffffe          BL       lc640_write_long_ptr
002120  e463              B        |L1.6634|
;;;2063     
                          ENDP

                  uz_mem_hndl PROC
;;;2065   //-----------------------------------------------
;;;2066   void uz_mem_hndl(unsigned short in)	 //   
002122  e92d4ff8          PUSH     {r3-r11,lr}
;;;2067   {
;;;2068   char data[4];
;;;2069   unsigned int event_ptr=0,lc640_adr,event_ptr_find=0,event_cnt;
002126  f04f0600          MOV      r6,#0
00212a  4634              MOV      r4,r6
;;;2070   //char avar_simbol;
;;;2071   
;;;2072   if(in==1) //  
;;;2073   	{
;;;2074   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;2075   	event_ptr++;	
;;;2076   	if(event_ptr>63)event_ptr=0;	
;;;2077   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;2078   	
;;;2079       event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;2080   	if(event_cnt!=63)event_cnt=event_ptr;
;;;2081   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;2082   	
;;;2083   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;2084   	
;;;2085   	data[0]='u';
;;;2086   	data[1]=0; 
;;;2087   	data[2]='Z';
;;;2088   	data[3]=0;
;;;2089   	lc640_write_long_ptr(lc640_adr,data);
;;;2090   
;;;2091   	data[0]=0;
;;;2092   	data[1]=0;
;;;2093   	data[2]=0;
;;;2094   	data[3]=0;
;;;2095   	lc640_write_long_ptr(lc640_adr+4,data);
;;;2096   
;;;2097   	data[0]=LPC_RTC->YEAR;
00212c  f8df86c4          LDR      r8,|L1.10228|
002130  46a1              MOV      r9,r4                 ;2069
002132  f44f6a80          MOV      r10,#0x400            ;2083
002136  2801              CMP      r0,#1                 ;2072
002138  d010              BEQ      |L1.8540|
;;;2098   	data[1]=LPC_RTC->MONTH;
;;;2099   	data[2]=LPC_RTC->DOM;
;;;2100   	data[3]=0;
;;;2101   	lc640_write_long_ptr(lc640_adr+8,data);
;;;2102   
;;;2103   	data[0]=LPC_RTC->HOUR;
;;;2104   	data[1]=LPC_RTC->MIN;
;;;2105   	data[2]=LPC_RTC->SEC;
;;;2106   	data[3]=0;
;;;2107   	lc640_write_long_ptr(lc640_adr+12,data);
;;;2108   	
;;;2109   	data[0]='A';
;;;2110   	data[1]='A';
;;;2111   	data[2]='A';
;;;2112   	data[3]='A';
;;;2113   	lc640_write_long_ptr(lc640_adr+16,data);
;;;2114   	
;;;2115   	data[0]='A';
;;;2116   	data[1]='A';
;;;2117   	data[2]='A';
;;;2118   	data[3]='A';
;;;2119   	lc640_write_long_ptr(lc640_adr+20,data);
;;;2120   	
;;;2121   	data[0]='A';
;;;2122   	data[1]='A';
;;;2123   	data[2]='A';
;;;2124   	data[3]='A';
;;;2125   	lc640_write_long_ptr(lc640_adr+24,data);
;;;2126   	
;;;2127   	data[0]='A';
;;;2128   	data[1]='A';
;;;2129   	data[2]='A';
;;;2130   	data[3]='A';
;;;2131   	lc640_write_long_ptr(lc640_adr+28,data);		
;;;2132    	
;;;2133   	}
;;;2134   
;;;2135   else if(in==0)	// 
00213a  2800              CMP      r0,#0
00213c  d07d              BEQ      |L1.8762|
;;;2136   	{      
;;;2137   	char i;     
;;;2138   	event_ptr_find=0;
;;;2139   	for (i=0;i<63;i++)
;;;2140   		{
;;;2141   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
;;;2142   
;;;2143        	lc640_read_long_ptr(lc640_adr,data);
;;;2144        
;;;2145        	if(!((data[0]=='u')&&(data[2]=='Z')))
;;;2146        		{        
;;;2147        		if(event_ptr_find)event_ptr_find--;
;;;2148        		else event_ptr_find=63;
;;;2149        		if(event_ptr_find==event_ptr)
;;;2150   				{
;;;2151   				lc640_adr=0;
;;;2152   				break;
;;;2153   				}
;;;2154        		else continue;
;;;2155        		}
;;;2156        	else 
;;;2157        		{
;;;2158        		lc640_read_long_ptr(lc640_adr+16,data);
;;;2159        		if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;2160        			{        
;;;2161        			if(event_ptr_find)event_ptr_find--;
;;;2162            		else event_ptr_find=63;
;;;2163            		if(event_ptr_find==event_ptr)
;;;2164   					{
;;;2165   					lc640_adr=0;
;;;2166   					break;
;;;2167   					}
;;;2168        			else continue;
;;;2169        			}
;;;2170        		}	
;;;2171   		}
;;;2172   	if(lc640_adr!=0)
;;;2173   		{
;;;2174   		data[0]=LPC_RTC->YEAR;
;;;2175   		data[1]=LPC_RTC->MONTH;
;;;2176   		data[2]=LPC_RTC->DOM;
;;;2177   		data[3]=0;
;;;2178   		lc640_write_long_ptr(lc640_adr+16,data);
;;;2179   	
;;;2180   		data[0]=LPC_RTC->HOUR;
;;;2181   		data[1]=LPC_RTC->MIN;
;;;2182   		data[2]=LPC_RTC->SEC;
;;;2183   		data[3]=0;
;;;2184   		lc640_write_long_ptr(lc640_adr+20,data);
;;;2185   		
;;;2186   		data[0]='C';
;;;2187   		data[1]='C';
;;;2188   		data[2]='C';
;;;2189   		data[3]='C';
;;;2190   		lc640_write_long_ptr(lc640_adr+24,data);
;;;2191   		
;;;2192   		data[0]='C';
;;;2193   		data[1]='C';
;;;2194   		data[2]='C';
;;;2195   		data[3]='C';
;;;2196   		lc640_write_long_ptr(lc640_adr+28,data);
;;;2197   		}
;;;2198   	}
;;;2199   else if(in==10) 	//  
00213e  280a              CMP      r0,#0xa
002140  d17c              BNE      |L1.8764|
;;;2200   	{      
;;;2201   	char i;     
;;;2202   
;;;2203   	event_ptr_find=0;
;;;2204   	for (i=0;i<63;i++)
002142  f04f0700          MOV      r7,#0
                  |L1.8518|
;;;2205   		{
;;;2206   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
002146  eb0a1544          ADD      r5,r10,r4,LSL #5
;;;2207   
;;;2208        	lc640_read_long_ptr(lc640_adr,data);
00214a  4669              MOV      r1,sp
00214c  4628              MOV      r0,r5
00214e  f7fffffe          BL       lc640_read_long_ptr
;;;2209        
;;;2210        	if(!((data[0]=='u')&&(data[2]=='Z')))
002152  f89d0000          LDRB     r0,[sp,#0]
002156  2875              CMP      r0,#0x75
002158  d171              BNE      |L1.8766|
00215a  e11c              B        |L1.9110|
                  |L1.8540|
00215c  f44f6560          MOV      r5,#0xe00             ;2074
002160  4628              MOV      r0,r5                 ;2074
002162  f7fffffe          BL       lc640_read_int
002166  f1000001          ADD      r0,r0,#1              ;2075
00216a  4604              MOV      r4,r0                 ;2075
00216c  2c3f              CMP      r4,#0x3f              ;2076
00216e  d901              BLS      |L1.8564|
002170  f04f0400          MOV      r4,#0                 ;2076
                  |L1.8564|
002174  b221              SXTH     r1,r4                 ;2077
002176  4628              MOV      r0,r5                 ;2077
002178  f7fffffe          BL       lc640_write_int
00217c  f6406602          MOV      r6,#0xe02             ;2079
002180  4630              MOV      r0,r6                 ;2079
002182  f7fffffe          BL       lc640_read_int
002186  283f              CMP      r0,#0x3f              ;2080
002188  d000              BEQ      |L1.8588|
00218a  4620              MOV      r0,r4                 ;2080
                  |L1.8588|
00218c  b201              SXTH     r1,r0                 ;2081
00218e  4630              MOV      r0,r6                 ;2081
002190  f7fffffe          BL       lc640_write_int
002194  4628              MOV      r0,r5                 ;2083
002196  f7fffffe          BL       lc640_read_int
00219a  eb0a1440          ADD      r4,r10,r0,LSL #5      ;2083
00219e  f04f0075          MOV      r0,#0x75              ;2085
0021a2  f88d0000          STRB     r0,[sp,#0]            ;2085
0021a6  f88d9001          STRB     r9,[sp,#1]            ;2086
0021aa  f04f005a          MOV      r0,#0x5a              ;2087
0021ae  f88d0002          STRB     r0,[sp,#2]            ;2087
0021b2  f88d9003          STRB     r9,[sp,#3]            ;2088
0021b6  4669              MOV      r1,sp                 ;2089
0021b8  4620              MOV      r0,r4                 ;2089
0021ba  f7fffffe          BL       lc640_write_long_ptr
0021be  f8cd9000          STR      r9,[sp,#0]            ;2094
0021c2  4669              MOV      r1,sp                 ;2095
0021c4  1d20              ADDS     r0,r4,#4              ;2095
0021c6  f7fffffe          BL       lc640_write_long_ptr
0021ca  f8b8003c          LDRH     r0,[r8,#0x3c]         ;2097
0021ce  f88d0000          STRB     r0,[sp,#0]            ;2097
0021d2  f8980038          LDRB     r0,[r8,#0x38]         ;2098
0021d6  f88d0001          STRB     r0,[sp,#1]            ;2098
0021da  f898002c          LDRB     r0,[r8,#0x2c]         ;2099
0021de  f88d0002          STRB     r0,[sp,#2]            ;2099
0021e2  f88d9003          STRB     r9,[sp,#3]            ;2100
0021e6  4669              MOV      r1,sp                 ;2101
0021e8  f1040008          ADD      r0,r4,#8              ;2101
0021ec  f7fffffe          BL       lc640_write_long_ptr
0021f0  f8980028          LDRB     r0,[r8,#0x28]         ;2103
0021f4  f88d0000          STRB     r0,[sp,#0]            ;2103
0021f8  f8980024          LDRB     r0,[r8,#0x24]         ;2104
0021fc  f88d0001          STRB     r0,[sp,#1]            ;2104
002200  f8980020          LDRB     r0,[r8,#0x20]         ;2105
002204  f88d0002          STRB     r0,[sp,#2]            ;2105
002208  f88d9003          STRB     r9,[sp,#3]            ;2106
00220c  4669              MOV      r1,sp                 ;2107
00220e  f104000c          ADD      r0,r4,#0xc            ;2107
002212  f7fffffe          BL       lc640_write_long_ptr
002216  f04f0541          MOV      r5,#0x41              ;2109
00221a  f88d5000          STRB     r5,[sp,#0]            ;2109
00221e  f88d5001          STRB     r5,[sp,#1]            ;2110
002222  f88d5002          STRB     r5,[sp,#2]            ;2111
002226  f88d5003          STRB     r5,[sp,#3]            ;2112
00222a  4669              MOV      r1,sp                 ;2113
00222c  f1040010          ADD      r0,r4,#0x10           ;2113
002230  f7fffffe          BL       lc640_write_long_ptr
002234  f88d5000          STRB     r5,[sp,#0]            ;2115
002238  e002              B        |L1.8768|
                  |L1.8762|
00223a  e027              B        |L1.8844|
                  |L1.8764|
00223c  e025              B        |L1.8842|
                  |L1.8766|
00223e  e0ae              B        |L1.9118|
                  |L1.8768|
002240  f88d5001          STRB     r5,[sp,#1]            ;2116
002244  f88d5002          STRB     r5,[sp,#2]            ;2117
002248  f88d5003          STRB     r5,[sp,#3]            ;2118
00224c  4669              MOV      r1,sp                 ;2119
00224e  f1040014          ADD      r0,r4,#0x14           ;2119
002252  f7fffffe          BL       lc640_write_long_ptr
002256  f88d5000          STRB     r5,[sp,#0]            ;2121
00225a  f88d5001          STRB     r5,[sp,#1]            ;2122
00225e  f88d5002          STRB     r5,[sp,#2]            ;2123
002262  f88d5003          STRB     r5,[sp,#3]            ;2124
002266  4669              MOV      r1,sp                 ;2125
002268  f1040018          ADD      r0,r4,#0x18           ;2125
00226c  f7fffffe          BL       lc640_write_long_ptr
002270  f88d5000          STRB     r5,[sp,#0]            ;2127
002274  f88d5001          STRB     r5,[sp,#1]            ;2128
002278  f88d5002          STRB     r5,[sp,#2]            ;2129
00227c  f88d5003          STRB     r5,[sp,#3]            ;2130
002280  4669              MOV      r1,sp                 ;2131
002282  f104001c          ADD      r0,r4,#0x1c           ;2131
002286  f7fffffe          BL       lc640_write_long_ptr
                  |L1.8842|
;;;2211        		{        
;;;2212        		if(event_ptr_find)event_ptr_find--;
;;;2213        		else event_ptr_find=63;
;;;2214        		if(event_ptr_find==event_ptr)
;;;2215   				{
;;;2216   				lc640_adr=0;
;;;2217   				break;
;;;2218   				}
;;;2219        		else continue;
;;;2220        		}
;;;2221        	else 
;;;2222        		{
;;;2223        		lc640_read_long_ptr(lc640_adr+16,data);
;;;2224        		if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;2225        			{        
;;;2226        			if(event_ptr_find)event_ptr_find--;
;;;2227            		else event_ptr_find=63;
;;;2228            		if(event_ptr_find==event_ptr)
;;;2229   					{
;;;2230   					lc640_adr=0;
;;;2231   					break;
;;;2232   					}
;;;2233        			else continue;
;;;2234        			}
;;;2235        		}	
;;;2236   		}
;;;2237   	if(lc640_adr!=0)
;;;2238   		{
;;;2239   		data[0]=LPC_RTC->YEAR;
;;;2240   		data[1]=LPC_RTC->MONTH;
;;;2241   		data[2]=LPC_RTC->DOM;
;;;2242   		data[3]=0;
;;;2243   		lc640_write_long_ptr(lc640_adr+16,data);
;;;2244   	
;;;2245   		data[0]=LPC_RTC->HOUR;
;;;2246   		data[1]=LPC_RTC->MIN;
;;;2247   		data[2]=LPC_RTC->SEC;
;;;2248   		data[3]=0;
;;;2249   		lc640_write_long_ptr(lc640_adr+20,data);
;;;2250   		
;;;2251   		data[0]='B';
;;;2252   		data[1]='B';
;;;2253   		data[2]='B';
;;;2254   		data[3]='B';
;;;2255   		lc640_write_long_ptr(lc640_adr+24,data);
;;;2256   		
;;;2257   		data[0]='B';
;;;2258   		data[1]='B';
;;;2259   		data[2]='B';
;;;2260   		data[3]='B';
;;;2261   		lc640_write_long_ptr(lc640_adr+28,data);
;;;2262   		}
;;;2263   	}
;;;2264   }
00228a  e561              B        |L1.7504|
                  |L1.8844|
00228c  f04f0700          MOV      r7,#0                 ;2139
                  |L1.8848|
002290  eb0a1544          ADD      r5,r10,r4,LSL #5      ;2141
002294  4669              MOV      r1,sp                 ;2143
002296  4628              MOV      r0,r5                 ;2143
002298  f7fffffe          BL       lc640_read_long_ptr
00229c  f89d0000          LDRB     r0,[sp,#0]            ;2145
0022a0  2875              CMP      r0,#0x75              ;2145
0022a2  d103              BNE      |L1.8876|
0022a4  f89d0002          LDRB     r0,[sp,#2]            ;2145
0022a8  285a              CMP      r0,#0x5a              ;2145
0022aa  d00a              BEQ      |L1.8898|
                  |L1.8876|
0022ac  b114              CBZ      r4,|L1.8884|
0022ae  f1a40401          SUB      r4,r4,#1              ;2147
0022b2  e001              B        |L1.8888|
                  |L1.8884|
0022b4  f04f043f          MOV      r4,#0x3f              ;2148
                  |L1.8888|
0022b8  42b4              CMP      r4,r6                 ;2149
0022ba  d122              BNE      |L1.8962|
0022bc  f04f0500          MOV      r5,#0                 ;2151
0022c0  e024              B        |L1.8972|
                  |L1.8898|
0022c2  4669              MOV      r1,sp                 ;2158
0022c4  f1050010          ADD      r0,r5,#0x10           ;2158
0022c8  f7fffffe          BL       lc640_read_long_ptr
0022cc  f89d0000          LDRB     r0,[sp,#0]            ;2159
0022d0  2841              CMP      r0,#0x41              ;2159
0022d2  d10b              BNE      |L1.8940|
0022d4  f89d0001          LDRB     r0,[sp,#1]            ;2159
0022d8  2841              CMP      r0,#0x41              ;2159
0022da  d107              BNE      |L1.8940|
0022dc  f89d0002          LDRB     r0,[sp,#2]            ;2159
0022e0  2841              CMP      r0,#0x41              ;2159
0022e2  d103              BNE      |L1.8940|
0022e4  f89d0003          LDRB     r0,[sp,#3]            ;2159
0022e8  2841              CMP      r0,#0x41              ;2159
0022ea  d00a              BEQ      |L1.8962|
                  |L1.8940|
0022ec  b114              CBZ      r4,|L1.8948|
0022ee  f1a40401          SUB      r4,r4,#1              ;2161
0022f2  e001              B        |L1.8952|
                  |L1.8948|
0022f4  f04f043f          MOV      r4,#0x3f              ;2162
                  |L1.8952|
0022f8  42b4              CMP      r4,r6                 ;2163
0022fa  d102              BNE      |L1.8962|
0022fc  f04f0500          MOV      r5,#0                 ;2165
002300  e004              B        |L1.8972|
                  |L1.8962|
002302  f1070701          ADD      r7,r7,#1              ;2139
002306  b2ff              UXTB     r7,r7                 ;2139
002308  2f3f              CMP      r7,#0x3f              ;2139
00230a  d3c1              BCC      |L1.8848|
                  |L1.8972|
00230c  2d00              CMP      r5,#0                 ;2172
00230e  d0bc              BEQ      |L1.8842|
002310  f8b8003c          LDRH     r0,[r8,#0x3c]         ;2174
002314  f88d0000          STRB     r0,[sp,#0]            ;2174
002318  f8980038          LDRB     r0,[r8,#0x38]         ;2175
00231c  f88d0001          STRB     r0,[sp,#1]            ;2175
002320  f898002c          LDRB     r0,[r8,#0x2c]         ;2176
002324  f88d0002          STRB     r0,[sp,#2]            ;2176
002328  f88d9003          STRB     r9,[sp,#3]            ;2177
00232c  4669              MOV      r1,sp                 ;2178
00232e  f1050010          ADD      r0,r5,#0x10           ;2178
002332  f7fffffe          BL       lc640_write_long_ptr
002336  f8980028          LDRB     r0,[r8,#0x28]         ;2180
00233a  f88d0000          STRB     r0,[sp,#0]            ;2180
00233e  f8980024          LDRB     r0,[r8,#0x24]         ;2181
002342  f88d0001          STRB     r0,[sp,#1]            ;2181
002346  f8980020          LDRB     r0,[r8,#0x20]         ;2182
00234a  f88d0002          STRB     r0,[sp,#2]            ;2182
00234e  f88d9003          STRB     r9,[sp,#3]            ;2183
002352  4669              MOV      r1,sp                 ;2184
002354  f1050014          ADD      r0,r5,#0x14           ;2184
002358  f7fffffe          BL       lc640_write_long_ptr
00235c  f04f0443          MOV      r4,#0x43              ;2186
002360  f88d4000          STRB     r4,[sp,#0]            ;2186
002364  f88d4001          STRB     r4,[sp,#1]            ;2187
002368  f88d4002          STRB     r4,[sp,#2]            ;2188
00236c  f88d4003          STRB     r4,[sp,#3]            ;2189
002370  4669              MOV      r1,sp                 ;2190
002372  f1050018          ADD      r0,r5,#0x18           ;2190
002376  f7fffffe          BL       lc640_write_long_ptr
00237a  f88d4000          STRB     r4,[sp,#0]            ;2192
00237e  f88d4001          STRB     r4,[sp,#1]            ;2193
002382  f88d4002          STRB     r4,[sp,#2]            ;2194
002386  f88d4003          STRB     r4,[sp,#3]            ;2195
00238a  4669              MOV      r1,sp                 ;2196
00238c  f105001c          ADD      r0,r5,#0x1c           ;2196
002390  f7fffffe          BL       lc640_write_long_ptr
                  |L1.9108|
002394  e4dc              B        |L1.7504|
                  |L1.9110|
002396  f89d0002          LDRB     r0,[sp,#2]            ;2210
00239a  285a              CMP      r0,#0x5a              ;2210
00239c  d00a              BEQ      |L1.9140|
                  |L1.9118|
00239e  b114              CBZ      r4,|L1.9126|
0023a0  f1a40401          SUB      r4,r4,#1              ;2212
0023a4  e001              B        |L1.9130|
                  |L1.9126|
0023a6  f04f043f          MOV      r4,#0x3f              ;2213
                  |L1.9130|
0023aa  42b4              CMP      r4,r6                 ;2214
0023ac  d122              BNE      |L1.9204|
0023ae  f04f0500          MOV      r5,#0                 ;2216
0023b2  e025              B        |L1.9216|
                  |L1.9140|
0023b4  4669              MOV      r1,sp                 ;2223
0023b6  f1050010          ADD      r0,r5,#0x10           ;2223
0023ba  f7fffffe          BL       lc640_read_long_ptr
0023be  f89d0000          LDRB     r0,[sp,#0]            ;2224
0023c2  2841              CMP      r0,#0x41              ;2224
0023c4  d10b              BNE      |L1.9182|
0023c6  f89d0001          LDRB     r0,[sp,#1]            ;2224
0023ca  2841              CMP      r0,#0x41              ;2224
0023cc  d107              BNE      |L1.9182|
0023ce  f89d0002          LDRB     r0,[sp,#2]            ;2224
0023d2  2841              CMP      r0,#0x41              ;2224
0023d4  d103              BNE      |L1.9182|
0023d6  f89d0003          LDRB     r0,[sp,#3]            ;2224
0023da  2841              CMP      r0,#0x41              ;2224
0023dc  d00a              BEQ      |L1.9204|
                  |L1.9182|
0023de  b114              CBZ      r4,|L1.9190|
0023e0  f1a40401          SUB      r4,r4,#1              ;2226
0023e4  e001              B        |L1.9194|
                  |L1.9190|
0023e6  f04f043f          MOV      r4,#0x3f              ;2227
                  |L1.9194|
0023ea  42b4              CMP      r4,r6                 ;2228
0023ec  d102              BNE      |L1.9204|
0023ee  f04f0500          MOV      r5,#0                 ;2230
0023f2  e005              B        |L1.9216|
                  |L1.9204|
0023f4  f1070701          ADD      r7,r7,#1              ;2204
0023f8  b2ff              UXTB     r7,r7                 ;2204
0023fa  2f3f              CMP      r7,#0x3f              ;2204
0023fc  f4ffaea3          BCC      |L1.8518|
                  |L1.9216|
002400  2d00              CMP      r5,#0                 ;2237
002402  d0c7              BEQ      |L1.9108|
002404  f8b8003c          LDRH     r0,[r8,#0x3c]         ;2239
002408  f88d0000          STRB     r0,[sp,#0]            ;2239
00240c  f8980038          LDRB     r0,[r8,#0x38]         ;2240
002410  f88d0001          STRB     r0,[sp,#1]            ;2240
002414  f898002c          LDRB     r0,[r8,#0x2c]         ;2241
002418  f88d0002          STRB     r0,[sp,#2]            ;2241
00241c  f88d9003          STRB     r9,[sp,#3]            ;2242
002420  4669              MOV      r1,sp                 ;2243
002422  f1050010          ADD      r0,r5,#0x10           ;2243
002426  f7fffffe          BL       lc640_write_long_ptr
00242a  f8980028          LDRB     r0,[r8,#0x28]         ;2245
00242e  f88d0000          STRB     r0,[sp,#0]            ;2245
002432  f8980024          LDRB     r0,[r8,#0x24]         ;2246
002436  f88d0001          STRB     r0,[sp,#1]            ;2246
00243a  f8980020          LDRB     r0,[r8,#0x20]         ;2247
00243e  f88d0002          STRB     r0,[sp,#2]            ;2247
002442  f88d9003          STRB     r9,[sp,#3]            ;2248
002446  4669              MOV      r1,sp                 ;2249
002448  f1050014          ADD      r0,r5,#0x14           ;2249
00244c  f7fffffe          BL       lc640_write_long_ptr
002450  f04f0442          MOV      r4,#0x42              ;2251
002454  f88d4000          STRB     r4,[sp,#0]            ;2251
002458  f88d4001          STRB     r4,[sp,#1]            ;2252
00245c  f88d4002          STRB     r4,[sp,#2]            ;2253
002460  f88d4003          STRB     r4,[sp,#3]            ;2254
002464  4669              MOV      r1,sp                 ;2255
002466  f1050018          ADD      r0,r5,#0x18           ;2255
00246a  f7fffffe          BL       lc640_write_long_ptr
00246e  f88d4000          STRB     r4,[sp,#0]            ;2257
002472  f88d4001          STRB     r4,[sp,#1]            ;2258
002476  f88d4002          STRB     r4,[sp,#2]            ;2259
00247a  f88d4003          STRB     r4,[sp,#3]            ;2260
00247e  4669              MOV      r1,sp                 ;2261
002480  f105001c          ADD      r0,r5,#0x1c           ;2261
002484  f7fffffe          BL       lc640_write_long_ptr
002488  e462              B        |L1.7504|
;;;2265   
                          ENDP

                  fz_mem_hndl PROC
;;;2266   //-----------------------------------------------
;;;2267   void fz_mem_hndl(unsigned short in)	 //   
00248a  e92d4ff8          PUSH     {r3-r11,lr}
;;;2268   {
;;;2269   char data[4];
;;;2270   unsigned int event_ptr=0,lc640_adr,event_ptr_find=0,event_cnt;
00248e  f04f0600          MOV      r6,#0
002492  4634              MOV      r4,r6
;;;2271   //char avar_simbol;
;;;2272   
;;;2273   if(in==1) //  
;;;2274   	{
;;;2275   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;2276   	event_ptr++;	
;;;2277   	if(event_ptr>63)event_ptr=0;	
;;;2278   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;2279   	
;;;2280       event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;2281   	if(event_cnt!=63)event_cnt=event_ptr;
;;;2282   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;2283   	
;;;2284   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;2285   	
;;;2286   	data[0]='f';
;;;2287   	data[1]=0; 
;;;2288   	data[2]='Z';
;;;2289   	data[3]=0;
;;;2290   	lc640_write_long_ptr(lc640_adr,data);
;;;2291   
;;;2292   	data[0]=0;
;;;2293   	data[1]=0;
;;;2294   	data[2]=0;
;;;2295   	data[3]=0;
;;;2296   	lc640_write_long_ptr(lc640_adr+4,data);
;;;2297   
;;;2298   	data[0]=LPC_RTC->YEAR;
002494  f8df835c          LDR      r8,|L1.10228|
002498  46a1              MOV      r9,r4                 ;2270
00249a  f44f6a80          MOV      r10,#0x400            ;2284
00249e  2801              CMP      r0,#1                 ;2273
0024a0  d010              BEQ      |L1.9412|
;;;2299   	data[1]=LPC_RTC->MONTH;
;;;2300   	data[2]=LPC_RTC->DOM;
;;;2301   	data[3]=0;
;;;2302   	lc640_write_long_ptr(lc640_adr+8,data);
;;;2303   
;;;2304   	data[0]=LPC_RTC->HOUR;
;;;2305   	data[1]=LPC_RTC->MIN;
;;;2306   	data[2]=LPC_RTC->SEC;
;;;2307   	data[3]=0;
;;;2308   	lc640_write_long_ptr(lc640_adr+12,data);
;;;2309   	
;;;2310   	data[0]='A';
;;;2311   	data[1]='A';
;;;2312   	data[2]='A';
;;;2313   	data[3]='A';
;;;2314   	lc640_write_long_ptr(lc640_adr+16,data);
;;;2315   	
;;;2316   	data[0]='A';
;;;2317   	data[1]='A';
;;;2318   	data[2]='A';
;;;2319   	data[3]='A';
;;;2320   	lc640_write_long_ptr(lc640_adr+20,data);
;;;2321   	
;;;2322   	data[0]='A';
;;;2323   	data[1]='A';
;;;2324   	data[2]='A';
;;;2325   	data[3]='A';
;;;2326   	lc640_write_long_ptr(lc640_adr+24,data);
;;;2327   	
;;;2328   	data[0]='A';
;;;2329   	data[1]='A';
;;;2330   	data[2]='A';
;;;2331   	data[3]='A';
;;;2332   	lc640_write_long_ptr(lc640_adr+28,data);		
;;;2333    	
;;;2334   	}
;;;2335   
;;;2336   else if(in==0)	// 
0024a2  2800              CMP      r0,#0
0024a4  d07d              BEQ      |L1.9634|
;;;2337   	{      
;;;2338   	char i;     
;;;2339   	event_ptr_find=0;
;;;2340   	for (i=0;i<63;i++)
;;;2341   		{
;;;2342   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
;;;2343   
;;;2344        	lc640_read_long_ptr(lc640_adr,data);
;;;2345        
;;;2346        	if(!((data[0]=='f')&&(data[2]=='Z')))
;;;2347        		{        
;;;2348        		if(event_ptr_find)event_ptr_find--;
;;;2349        		else event_ptr_find=63;
;;;2350        		if(event_ptr_find==event_ptr)
;;;2351   				{
;;;2352   				lc640_adr=0;
;;;2353   				break;
;;;2354   				}
;;;2355        		else continue;
;;;2356        		}
;;;2357        	else 
;;;2358        		{
;;;2359        		lc640_read_long_ptr(lc640_adr+16,data);
;;;2360        		if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;2361        			{        
;;;2362        			if(event_ptr_find)event_ptr_find--;
;;;2363            		else event_ptr_find=63;
;;;2364            		if(event_ptr_find==event_ptr)
;;;2365   					{
;;;2366   					lc640_adr=0;
;;;2367   					break;
;;;2368   					}
;;;2369        			else continue;
;;;2370        			}
;;;2371        		}	
;;;2372   		}
;;;2373   	if(lc640_adr!=0)
;;;2374   		{
;;;2375   		data[0]=LPC_RTC->YEAR;
;;;2376   		data[1]=LPC_RTC->MONTH;
;;;2377   		data[2]=LPC_RTC->DOM;
;;;2378   		data[3]=0;
;;;2379   		lc640_write_long_ptr(lc640_adr+16,data);
;;;2380   	
;;;2381   		data[0]=LPC_RTC->HOUR;
;;;2382   		data[1]=LPC_RTC->MIN;
;;;2383   		data[2]=LPC_RTC->SEC;
;;;2384   		data[3]=0;
;;;2385   		lc640_write_long_ptr(lc640_adr+20,data);
;;;2386   		
;;;2387   		data[0]='C';
;;;2388   		data[1]='C';
;;;2389   		data[2]='C';
;;;2390   		data[3]='C';
;;;2391   		lc640_write_long_ptr(lc640_adr+24,data);
;;;2392   		
;;;2393   		data[0]='C';
;;;2394   		data[1]='C';
;;;2395   		data[2]='C';
;;;2396   		data[3]='C';
;;;2397   		lc640_write_long_ptr(lc640_adr+28,data);
;;;2398   		}
;;;2399   	}
;;;2400   else if(in==10) 	//  
0024a6  280a              CMP      r0,#0xa
0024a8  d17c              BNE      |L1.9636|
;;;2401   	{      
;;;2402   	char i;     
;;;2403   
;;;2404   	event_ptr_find=0;
;;;2405   	for (i=0;i<63;i++)
0024aa  f04f0700          MOV      r7,#0
                  |L1.9390|
;;;2406   		{
;;;2407   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
0024ae  eb0a1544          ADD      r5,r10,r4,LSL #5
;;;2408   
;;;2409        	lc640_read_long_ptr(lc640_adr,data);
0024b2  4669              MOV      r1,sp
0024b4  4628              MOV      r0,r5
0024b6  f7fffffe          BL       lc640_read_long_ptr
;;;2410        
;;;2411        	if(!((data[0]=='f')&&(data[2]=='Z')))
0024ba  f89d0000          LDRB     r0,[sp,#0]
0024be  2866              CMP      r0,#0x66
0024c0  d171              BNE      |L1.9638|
0024c2  e11c              B        |L1.9982|
                  |L1.9412|
0024c4  f44f6560          MOV      r5,#0xe00             ;2275
0024c8  4628              MOV      r0,r5                 ;2275
0024ca  f7fffffe          BL       lc640_read_int
0024ce  f1000001          ADD      r0,r0,#1              ;2276
0024d2  4604              MOV      r4,r0                 ;2276
0024d4  2c3f              CMP      r4,#0x3f              ;2277
0024d6  d901              BLS      |L1.9436|
0024d8  f04f0400          MOV      r4,#0                 ;2277
                  |L1.9436|
0024dc  b221              SXTH     r1,r4                 ;2278
0024de  4628              MOV      r0,r5                 ;2278
0024e0  f7fffffe          BL       lc640_write_int
0024e4  f6406602          MOV      r6,#0xe02             ;2280
0024e8  4630              MOV      r0,r6                 ;2280
0024ea  f7fffffe          BL       lc640_read_int
0024ee  283f              CMP      r0,#0x3f              ;2281
0024f0  d000              BEQ      |L1.9460|
0024f2  4620              MOV      r0,r4                 ;2281
                  |L1.9460|
0024f4  b201              SXTH     r1,r0                 ;2282
0024f6  4630              MOV      r0,r6                 ;2282
0024f8  f7fffffe          BL       lc640_write_int
0024fc  4628              MOV      r0,r5                 ;2284
0024fe  f7fffffe          BL       lc640_read_int
002502  eb0a1440          ADD      r4,r10,r0,LSL #5      ;2284
002506  f04f0066          MOV      r0,#0x66              ;2286
00250a  f88d0000          STRB     r0,[sp,#0]            ;2286
00250e  f88d9001          STRB     r9,[sp,#1]            ;2287
002512  f04f005a          MOV      r0,#0x5a              ;2288
002516  f88d0002          STRB     r0,[sp,#2]            ;2288
00251a  f88d9003          STRB     r9,[sp,#3]            ;2289
00251e  4669              MOV      r1,sp                 ;2290
002520  4620              MOV      r0,r4                 ;2290
002522  f7fffffe          BL       lc640_write_long_ptr
002526  f8cd9000          STR      r9,[sp,#0]            ;2295
00252a  4669              MOV      r1,sp                 ;2296
00252c  1d20              ADDS     r0,r4,#4              ;2296
00252e  f7fffffe          BL       lc640_write_long_ptr
002532  f8b8003c          LDRH     r0,[r8,#0x3c]         ;2298
002536  f88d0000          STRB     r0,[sp,#0]            ;2298
00253a  f8980038          LDRB     r0,[r8,#0x38]         ;2299
00253e  f88d0001          STRB     r0,[sp,#1]            ;2299
002542  f898002c          LDRB     r0,[r8,#0x2c]         ;2300
002546  f88d0002          STRB     r0,[sp,#2]            ;2300
00254a  f88d9003          STRB     r9,[sp,#3]            ;2301
00254e  4669              MOV      r1,sp                 ;2302
002550  f1040008          ADD      r0,r4,#8              ;2302
002554  f7fffffe          BL       lc640_write_long_ptr
002558  f8980028          LDRB     r0,[r8,#0x28]         ;2304
00255c  f88d0000          STRB     r0,[sp,#0]            ;2304
002560  f8980024          LDRB     r0,[r8,#0x24]         ;2305
002564  f88d0001          STRB     r0,[sp,#1]            ;2305
002568  f8980020          LDRB     r0,[r8,#0x20]         ;2306
00256c  f88d0002          STRB     r0,[sp,#2]            ;2306
002570  f88d9003          STRB     r9,[sp,#3]            ;2307
002574  4669              MOV      r1,sp                 ;2308
002576  f104000c          ADD      r0,r4,#0xc            ;2308
00257a  f7fffffe          BL       lc640_write_long_ptr
00257e  f04f0541          MOV      r5,#0x41              ;2310
002582  f88d5000          STRB     r5,[sp,#0]            ;2310
002586  f88d5001          STRB     r5,[sp,#1]            ;2311
00258a  f88d5002          STRB     r5,[sp,#2]            ;2312
00258e  f88d5003          STRB     r5,[sp,#3]            ;2313
002592  4669              MOV      r1,sp                 ;2314
002594  f1040010          ADD      r0,r4,#0x10           ;2314
002598  f7fffffe          BL       lc640_write_long_ptr
00259c  f88d5000          STRB     r5,[sp,#0]            ;2316
0025a0  e002              B        |L1.9640|
                  |L1.9634|
0025a2  e027              B        |L1.9716|
                  |L1.9636|
0025a4  e025              B        |L1.9714|
                  |L1.9638|
0025a6  e0ae              B        |L1.9990|
                  |L1.9640|
0025a8  f88d5001          STRB     r5,[sp,#1]            ;2317
0025ac  f88d5002          STRB     r5,[sp,#2]            ;2318
0025b0  f88d5003          STRB     r5,[sp,#3]            ;2319
0025b4  4669              MOV      r1,sp                 ;2320
0025b6  f1040014          ADD      r0,r4,#0x14           ;2320
0025ba  f7fffffe          BL       lc640_write_long_ptr
0025be  f88d5000          STRB     r5,[sp,#0]            ;2322
0025c2  f88d5001          STRB     r5,[sp,#1]            ;2323
0025c6  f88d5002          STRB     r5,[sp,#2]            ;2324
0025ca  f88d5003          STRB     r5,[sp,#3]            ;2325
0025ce  4669              MOV      r1,sp                 ;2326
0025d0  f1040018          ADD      r0,r4,#0x18           ;2326
0025d4  f7fffffe          BL       lc640_write_long_ptr
0025d8  f88d5000          STRB     r5,[sp,#0]            ;2328
0025dc  f88d5001          STRB     r5,[sp,#1]            ;2329
0025e0  f88d5002          STRB     r5,[sp,#2]            ;2330
0025e4  f88d5003          STRB     r5,[sp,#3]            ;2331
0025e8  4669              MOV      r1,sp                 ;2332
0025ea  f104001c          ADD      r0,r4,#0x1c           ;2332
0025ee  f7fffffe          BL       lc640_write_long_ptr
                  |L1.9714|
;;;2412        		{        
;;;2413        		if(event_ptr_find)event_ptr_find--;
;;;2414        		else event_ptr_find=63;
;;;2415        		if(event_ptr_find==event_ptr)
;;;2416   				{
;;;2417   				lc640_adr=0;
;;;2418   				break;
;;;2419   				}
;;;2420        		else continue;
;;;2421        		}
;;;2422        	else 
;;;2423        		{
;;;2424        		lc640_read_long_ptr(lc640_adr+16,data);
;;;2425        		if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;2426        			{        
;;;2427        			if(event_ptr_find)event_ptr_find--;
;;;2428            		else event_ptr_find=63;
;;;2429            		if(event_ptr_find==event_ptr)
;;;2430   					{
;;;2431   					lc640_adr=0;
;;;2432   					break;
;;;2433   					}
;;;2434        			else continue;
;;;2435        			}
;;;2436        		}	
;;;2437   		}
;;;2438   	if(lc640_adr!=0)
;;;2439   		{
;;;2440   		data[0]=LPC_RTC->YEAR;
;;;2441   		data[1]=LPC_RTC->MONTH;
;;;2442   		data[2]=LPC_RTC->DOM;
;;;2443   		data[3]=0;
;;;2444   		lc640_write_long_ptr(lc640_adr+16,data);
;;;2445   	
;;;2446   		data[0]=LPC_RTC->HOUR;
;;;2447   		data[1]=LPC_RTC->MIN;
;;;2448   		data[2]=LPC_RTC->SEC;
;;;2449   		data[3]=0;
;;;2450   		lc640_write_long_ptr(lc640_adr+20,data);
;;;2451   		
;;;2452   		data[0]='B';
;;;2453   		data[1]='B';
;;;2454   		data[2]='B';
;;;2455   		data[3]='B';
;;;2456   		lc640_write_long_ptr(lc640_adr+24,data);
;;;2457   		
;;;2458   		data[0]='B';
;;;2459   		data[1]='B';
;;;2460   		data[2]='B';
;;;2461   		data[3]='B';
;;;2462   		lc640_write_long_ptr(lc640_adr+28,data);
;;;2463   		}
;;;2464   	}
;;;2465   }
0025f2  e496              B        |L1.7970|
                  |L1.9716|
0025f4  f04f0700          MOV      r7,#0                 ;2340
                  |L1.9720|
0025f8  eb0a1544          ADD      r5,r10,r4,LSL #5      ;2342
0025fc  4669              MOV      r1,sp                 ;2344
0025fe  4628              MOV      r0,r5                 ;2344
002600  f7fffffe          BL       lc640_read_long_ptr
002604  f89d0000          LDRB     r0,[sp,#0]            ;2346
002608  2866              CMP      r0,#0x66              ;2346
00260a  d103              BNE      |L1.9748|
00260c  f89d0002          LDRB     r0,[sp,#2]            ;2346
002610  285a              CMP      r0,#0x5a              ;2346
002612  d00a              BEQ      |L1.9770|
                  |L1.9748|
002614  b114              CBZ      r4,|L1.9756|
002616  f1a40401          SUB      r4,r4,#1              ;2348
00261a  e001              B        |L1.9760|
                  |L1.9756|
00261c  f04f043f          MOV      r4,#0x3f              ;2349
                  |L1.9760|
002620  42b4              CMP      r4,r6                 ;2350
002622  d122              BNE      |L1.9834|
002624  f04f0500          MOV      r5,#0                 ;2352
002628  e024              B        |L1.9844|
                  |L1.9770|
00262a  4669              MOV      r1,sp                 ;2359
00262c  f1050010          ADD      r0,r5,#0x10           ;2359
002630  f7fffffe          BL       lc640_read_long_ptr
002634  f89d0000          LDRB     r0,[sp,#0]            ;2360
002638  2841              CMP      r0,#0x41              ;2360
00263a  d10b              BNE      |L1.9812|
00263c  f89d0001          LDRB     r0,[sp,#1]            ;2360
002640  2841              CMP      r0,#0x41              ;2360
002642  d107              BNE      |L1.9812|
002644  f89d0002          LDRB     r0,[sp,#2]            ;2360
002648  2841              CMP      r0,#0x41              ;2360
00264a  d103              BNE      |L1.9812|
00264c  f89d0003          LDRB     r0,[sp,#3]            ;2360
002650  2841              CMP      r0,#0x41              ;2360
002652  d00a              BEQ      |L1.9834|
                  |L1.9812|
002654  b114              CBZ      r4,|L1.9820|
002656  f1a40401          SUB      r4,r4,#1              ;2362
00265a  e001              B        |L1.9824|
                  |L1.9820|
00265c  f04f043f          MOV      r4,#0x3f              ;2363
                  |L1.9824|
002660  42b4              CMP      r4,r6                 ;2364
002662  d102              BNE      |L1.9834|
002664  f04f0500          MOV      r5,#0                 ;2366
002668  e004              B        |L1.9844|
                  |L1.9834|
00266a  f1070701          ADD      r7,r7,#1              ;2340
00266e  b2ff              UXTB     r7,r7                 ;2340
002670  2f3f              CMP      r7,#0x3f              ;2340
002672  d3c1              BCC      |L1.9720|
                  |L1.9844|
002674  2d00              CMP      r5,#0                 ;2373
002676  d0bc              BEQ      |L1.9714|
002678  f8b8003c          LDRH     r0,[r8,#0x3c]         ;2375
00267c  f88d0000          STRB     r0,[sp,#0]            ;2375
002680  f8980038          LDRB     r0,[r8,#0x38]         ;2376
002684  f88d0001          STRB     r0,[sp,#1]            ;2376
002688  f898002c          LDRB     r0,[r8,#0x2c]         ;2377
00268c  f88d0002          STRB     r0,[sp,#2]            ;2377
002690  f88d9003          STRB     r9,[sp,#3]            ;2378
002694  4669              MOV      r1,sp                 ;2379
002696  f1050010          ADD      r0,r5,#0x10           ;2379
00269a  f7fffffe          BL       lc640_write_long_ptr
00269e  f8980028          LDRB     r0,[r8,#0x28]         ;2381
0026a2  f88d0000          STRB     r0,[sp,#0]            ;2381
0026a6  f8980024          LDRB     r0,[r8,#0x24]         ;2382
0026aa  f88d0001          STRB     r0,[sp,#1]            ;2382
0026ae  f8980020          LDRB     r0,[r8,#0x20]         ;2383
0026b2  f88d0002          STRB     r0,[sp,#2]            ;2383
0026b6  f88d9003          STRB     r9,[sp,#3]            ;2384
0026ba  4669              MOV      r1,sp                 ;2385
0026bc  f1050014          ADD      r0,r5,#0x14           ;2385
0026c0  f7fffffe          BL       lc640_write_long_ptr
0026c4  f04f0443          MOV      r4,#0x43              ;2387
0026c8  f88d4000          STRB     r4,[sp,#0]            ;2387
0026cc  f88d4001          STRB     r4,[sp,#1]            ;2388
0026d0  f88d4002          STRB     r4,[sp,#2]            ;2389
0026d4  f88d4003          STRB     r4,[sp,#3]            ;2390
0026d8  4669              MOV      r1,sp                 ;2391
0026da  f1050018          ADD      r0,r5,#0x18           ;2391
0026de  f7fffffe          BL       lc640_write_long_ptr
0026e2  f88d4000          STRB     r4,[sp,#0]            ;2393
0026e6  f88d4001          STRB     r4,[sp,#1]            ;2394
0026ea  f88d4002          STRB     r4,[sp,#2]            ;2395
0026ee  f88d4003          STRB     r4,[sp,#3]            ;2396
0026f2  4669              MOV      r1,sp                 ;2397
0026f4  f105001c          ADD      r0,r5,#0x1c           ;2397
0026f8  f7fffffe          BL       lc640_write_long_ptr
                  |L1.9980|
0026fc  e411              B        |L1.7970|
                  |L1.9982|
0026fe  f89d0002          LDRB     r0,[sp,#2]            ;2411
002702  285a              CMP      r0,#0x5a              ;2411
002704  d00a              BEQ      |L1.10012|
                  |L1.9990|
002706  b114              CBZ      r4,|L1.9998|
002708  f1a40401          SUB      r4,r4,#1              ;2413
00270c  e001              B        |L1.10002|
                  |L1.9998|
00270e  f04f043f          MOV      r4,#0x3f              ;2414
                  |L1.10002|
002712  42b4              CMP      r4,r6                 ;2415
002714  d122              BNE      |L1.10076|
002716  f04f0500          MOV      r5,#0                 ;2417
00271a  e025              B        |L1.10088|
                  |L1.10012|
00271c  4669              MOV      r1,sp                 ;2424
00271e  f1050010          ADD      r0,r5,#0x10           ;2424
002722  f7fffffe          BL       lc640_read_long_ptr
002726  f89d0000          LDRB     r0,[sp,#0]            ;2425
00272a  2841              CMP      r0,#0x41              ;2425
00272c  d10b              BNE      |L1.10054|
00272e  f89d0001          LDRB     r0,[sp,#1]            ;2425
002732  2841              CMP      r0,#0x41              ;2425
002734  d107              BNE      |L1.10054|
002736  f89d0002          LDRB     r0,[sp,#2]            ;2425
00273a  2841              CMP      r0,#0x41              ;2425
00273c  d103              BNE      |L1.10054|
00273e  f89d0003          LDRB     r0,[sp,#3]            ;2425
002742  2841              CMP      r0,#0x41              ;2425
002744  d00a              BEQ      |L1.10076|
                  |L1.10054|
002746  b114              CBZ      r4,|L1.10062|
002748  f1a40401          SUB      r4,r4,#1              ;2427
00274c  e001              B        |L1.10066|
                  |L1.10062|
00274e  f04f043f          MOV      r4,#0x3f              ;2428
                  |L1.10066|
002752  42b4              CMP      r4,r6                 ;2429
002754  d102              BNE      |L1.10076|
002756  f04f0500          MOV      r5,#0                 ;2431
00275a  e005              B        |L1.10088|
                  |L1.10076|
00275c  f1070701          ADD      r7,r7,#1              ;2405
002760  b2ff              UXTB     r7,r7                 ;2405
002762  2f3f              CMP      r7,#0x3f              ;2405
002764  f4ffaea3          BCC      |L1.9390|
                  |L1.10088|
002768  2d00              CMP      r5,#0                 ;2438
00276a  d0c7              BEQ      |L1.9980|
00276c  f8b8003c          LDRH     r0,[r8,#0x3c]         ;2440
002770  f88d0000          STRB     r0,[sp,#0]            ;2440
002774  f8980038          LDRB     r0,[r8,#0x38]         ;2441
002778  f88d0001          STRB     r0,[sp,#1]            ;2441
00277c  f898002c          LDRB     r0,[r8,#0x2c]         ;2442
002780  f88d0002          STRB     r0,[sp,#2]            ;2442
002784  f88d9003          STRB     r9,[sp,#3]            ;2443
002788  4669              MOV      r1,sp                 ;2444
00278a  f1050010          ADD      r0,r5,#0x10           ;2444
00278e  f7fffffe          BL       lc640_write_long_ptr
002792  f8980028          LDRB     r0,[r8,#0x28]         ;2446
002796  f88d0000          STRB     r0,[sp,#0]            ;2446
00279a  f8980024          LDRB     r0,[r8,#0x24]         ;2447
00279e  f88d0001          STRB     r0,[sp,#1]            ;2447
0027a2  f8980020          LDRB     r0,[r8,#0x20]         ;2448
0027a6  f88d0002          STRB     r0,[sp,#2]            ;2448
0027aa  f88d9003          STRB     r9,[sp,#3]            ;2449
0027ae  4669              MOV      r1,sp                 ;2450
0027b0  f1050014          ADD      r0,r5,#0x14           ;2450
0027b4  f7fffffe          BL       lc640_write_long_ptr
0027b8  f04f0442          MOV      r4,#0x42              ;2452
0027bc  f88d4000          STRB     r4,[sp,#0]            ;2452
0027c0  f88d4001          STRB     r4,[sp,#1]            ;2453
0027c4  f88d4002          STRB     r4,[sp,#2]            ;2454
0027c8  f88d4003          STRB     r4,[sp,#3]            ;2455
0027cc  4669              MOV      r1,sp                 ;2456
0027ce  f1050018          ADD      r0,r5,#0x18           ;2456
0027d2  f7fffffe          BL       lc640_write_long_ptr
0027d6  f88d4000          STRB     r4,[sp,#0]            ;2458
0027da  f88d4001          STRB     r4,[sp,#1]            ;2459
0027de  f88d4002          STRB     r4,[sp,#2]            ;2460
0027e2  f88d4003          STRB     r4,[sp,#3]            ;2461
0027e6  4669              MOV      r1,sp                 ;2462
0027e8  f105001c          ADD      r0,r5,#0x1c           ;2462
0027ec  f7fffffe          BL       lc640_write_long_ptr
0027f0  e41c              B        |L1.8236|
                          ENDP

0027f2  0000              DCW      0x0000
                  |L1.10228|
                          DCD      0x40024000

                          AREA ||area_number.2||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.2||, ||.text||
                  ke_mem_hndl PROC
;;;78     //-----------------------------------------------
;;;79     void avar_hndl(void)
000000  b5f3              PUSH     {r0,r1,r4-r7,lr}
;;;80     {
;;;81     //static unsigned avar_stat_old;
;;;82     char i;
;;;83     //unsigned avar_stat_new,avar_stat_offed;
;;;84     
;;;85     if(net_av)		SET_REG(avar_stat,1,0,1);
000002  b083              SUB      sp,sp,#0xc
000004  4605              MOV      r5,r0
000006  4948              LDR      r1,|L2.296|
000008  eb050085          ADD      r0,r5,r5,LSL #2
00000c  eb011100          ADD      r1,r1,r0,LSL #4
000010  4846              LDR      r0,|L2.300|
000012  f9b00000          LDRSH    r0,[r0,#0]  ; bat_u_old_cnt
;;;86     else	   			SET_REG(avar_stat,0,0,1);
000016  f1000001          ADD      r0,r0,#1
;;;87     #ifndef UKU_220_IPS_TERMOKOMPENSAT //o_10
;;;88     for(i=0;i<2;i++)
;;;89     	{
;;;90     	if(bat[i]._av&3)	SET_REG(avar_stat,1,1+i,1);
;;;91     	else	   			SET_REG(avar_stat,0,1+i,1);
;;;92     	}
;;;93     #endif //o_10
;;;94     for(i=0;i<18;i++)
00001a  eb010040          ADD      r0,r1,r0,LSL #1
;;;95     	{
;;;96     	if(bps[i]._av&0xef)	SET_REG(avar_stat,1,3+i,1);
00001e  f9b00024          LDRSH    r0,[r0,#0x24]
000022  9001              STR      r0,[sp,#4]
000024  f44f6660          MOV      r6,#0xe00
000028  4630              MOV      r0,r6
00002a  f7fffffe          BL       lc640_read_int
00002e  f1000001          ADD      r0,r0,#1
000032  4604              MOV      r4,r0
000034  2c3f              CMP      r4,#0x3f
000036  d901              BLS      |L2.60|
000038  f04f0400          MOV      r4,#0
                  |L2.60|
00003c  b221              SXTH     r1,r4
00003e  4630              MOV      r0,r6
000040  f7fffffe          BL       lc640_write_int
000044  f6406702          MOV      r7,#0xe02
000048  4638              MOV      r0,r7
00004a  f7fffffe          BL       lc640_read_int
;;;97     	else	   		SET_REG(avar_stat,0,3+i,1);
00004e  283f              CMP      r0,#0x3f
000050  d000              BEQ      |L2.84|
000052  4620              MOV      r0,r4
                  |L2.84|
000054  b201              SXTH     r1,r0
000056  4638              MOV      r0,r7
000058  f7fffffe          BL       lc640_write_int
00005c  4630              MOV      r0,r6
00005e  f7fffffe          BL       lc640_read_int
000062  f44f6180          MOV      r1,#0x400             ;94
000066  eb011440          ADD      r4,r1,r0,LSL #5       ;94
;;;98     	}
;;;99     
;;;100    /*for(i=0;i<6;i++)
;;;101    	{
;;;102    	if(av_inv[i])	SET_REG(avar_stat,1,15+i,1);
;;;103    	else	   		SET_REG(avar_stat,0,15+i,1);
;;;104    	}*/
;;;105    
;;;106    /*for(i=0;i<4;i++)
;;;107    	{
;;;108    	if(av_dt[i])	SET_REG(avar_stat,1,21+i,1);
;;;109    	else	   		SET_REG(avar_stat,0,21+i,1);
;;;110    	}  */
;;;111    #ifndef UKU_ZVU
;;;112    for(i=0;i<4;i++)
;;;113    	{
;;;114    //	if(sk_av_stat[i]==sasON)	SET_REG(avar_stat,1,24+i,1);
;;;115    //	else	   		SET_REG(avar_stat,0,24+i,1);
;;;116    	}
;;;117    #endif //UKU_ZVU
;;;118    #ifndef UKU_FSO
;;;119    for(i=0;i<4;i++)
00006a  f04f0042          MOV      r0,#0x42
00006e  f88d0008          STRB     r0,[sp,#8]
000072  f88d5009          STRB     r5,[sp,#9]
;;;120    	{
;;;121    //	if(sk_av_stat[i]==sasON)	SET_REG(avar_stat,1,24+i,1);
;;;122    //	else	   		SET_REG(avar_stat,0,24+i,1);
;;;123    	}
;;;124    #endif //UKU_FSO
;;;125    //if(uout_av)			SET_REG(avar_stat,1,28,1);
;;;126    //else	   			SET_REG(avar_stat,0,28,1);
;;;127    
;;;128    
;;;129    avar_stat_new=(avar_stat^avar_stat_old)&avar_stat;
000076  f04f004b          MOV      r0,#0x4b
00007a  f88d000a          STRB     r0,[sp,#0xa]
00007e  f04f0600          MOV      r6,#0
;;;130    
;;;131    avar_ind_stat|=avar_stat_new;
000082  f88d600b          STRB     r6,[sp,#0xb]
000086  a902              ADD      r1,sp,#8
;;;132    
;;;133    if((SK_ZVUK_EN[0])) avar_ind_stat&=(~(1UL<<24));
000088  4620              MOV      r0,r4
00008a  f7fffffe          BL       lc640_write_long_ptr
00008e  f89d0010          LDRB     r0,[sp,#0x10]
000092  f88d0008          STRB     r0,[sp,#8]
;;;134    if((SK_ZVUK_EN[1])) avar_ind_stat&=(~(1UL<<25));
000096  f89d0011          LDRB     r0,[sp,#0x11]
00009a  f88d0009          STRB     r0,[sp,#9]
00009e  f89d0004          LDRB     r0,[sp,#4]
;;;135    if((SK_ZVUK_EN[2])) avar_ind_stat&=(~(1UL<<26));
0000a2  f88d000a          STRB     r0,[sp,#0xa]
0000a6  f89d0005          LDRB     r0,[sp,#5]
0000aa  f88d000b          STRB     r0,[sp,#0xb]
;;;136    if((SK_ZVUK_EN[3])) avar_ind_stat&=(~(1UL<<27));	
0000ae  a902              ADD      r1,sp,#8
0000b0  1d20              ADDS     r0,r4,#4
0000b2  f7fffffe          BL       lc640_write_long_ptr
0000b6  f24020a2          MOV      r0,#0x2a2
;;;137    
;;;138    
;;;139    avar_stat_offed=~((avar_stat^avar_stat_old)&avar_stat_old);
0000ba  f7fffffe          BL       lc640_read_long
0000be  4d1c              LDR      r5,|L2.304|
0000c0  6028              STR      r0,[r5,#0]  ; ke_date
;;;140    
;;;141    if(!AV_OFF_AVT)avar_stat_offed|=0xeffffffe;
0000c2  4629              MOV      r1,r5
0000c4  f1040008          ADD      r0,r4,#8
0000c8  f7fffffe          BL       lc640_write_long_ptr
0000cc  f24020a6          MOV      r0,#0x2a6
;;;142    
;;;143    avar_ind_stat&=avar_stat_offed; 
0000d0  f7fffffe          BL       lc640_read_long
0000d4  6068              STR      r0,[r5,#4]  ; ke_date
0000d6  1d29              ADDS     r1,r5,#4
0000d8  f104000c          ADD      r0,r4,#0xc
;;;144    
;;;145    avar_stat_old=avar_stat;
;;;146    
;;;147    //oleg_start
;;;148    
;;;149    
;;;150    
;;;151    rki_avar1_stat=(sk_alarm<<8)|(status_izm_r&0x3F);
0000dc  f7fffffe          BL       lc640_write_long_ptr
0000e0  4d14              LDR      r5,|L2.308|
0000e2  8ba8              LDRH     r0,[r5,#0x1c]
0000e4  f88d0008          STRB     r0,[sp,#8]
0000e8  7e28              LDRB     r0,[r5,#0x18]
0000ea  f88d0009          STRB     r0,[sp,#9]
;;;152    rki_avar1_stat_new=(rki_avar1_stat^rki_avar1_stat_old)&rki_avar1_stat;
0000ee  7b28              LDRB     r0,[r5,#0xc]
0000f0  f88d000a          STRB     r0,[sp,#0xa]
0000f4  f88d600b          STRB     r6,[sp,#0xb]
;;;153    rki_avar1_ind_stat|=rki_avar1_stat_new;
0000f8  a902              ADD      r1,sp,#8
0000fa  f1040010          ADD      r0,r4,#0x10
;;;154    rki_avar1_stat_offed=~((rki_avar1_stat^rki_avar1_stat_old)&rki_avar1_stat_old);
0000fe  f7fffffe          BL       lc640_write_long_ptr
000102  7a28              LDRB     r0,[r5,#8]
000104  f88d0008          STRB     r0,[sp,#8]
;;;155    rki_avar1_ind_stat&=rki_avar1_stat_offed;
000108  7928              LDRB     r0,[r5,#4]
00010a  f88d0009          STRB     r0,[sp,#9]
;;;156    rki_avar1_stat_old=rki_avar1_stat;
;;;157    /*
;;;158    rki_avarI1_stat=status_di1;
;;;159    rki_avarI1_stat_new=(rki_avarI1_stat^rki_avarI1_stat_old)&rki_avarI1_stat;
;;;160    rki_avarI1_ind_stat|=rki_avarI1_stat_new;
;;;161    rki_avarI1_stat_offed=~((rki_avarI1_stat^rki_avarI1_stat_old)&rki_avarI1_stat_old);
;;;162    rki_avarI1_ind_stat&=rki_avarI1_stat_offed;
;;;163    rki_avarI1_stat_old=rki_avarI1_stat;
;;;164    
;;;165    rki_avarI2_stat=status_di2;
;;;166    rki_avarI2_stat_new=(rki_avarI2_stat^rki_avarI2_stat_old)&rki_avarI2_stat;
;;;167    rki_avarI2_ind_stat|=rki_avarI2_stat_new;
;;;168    rki_avarI2_stat_offed=~((rki_avarI2_stat^rki_avarI2_stat_old)&rki_avarI2_stat_old);
;;;169    rki_avarI2_ind_stat&=rki_avarI2_stat_offed;
;;;170    rki_avarI2_stat_old=rki_avarI2_stat;
;;;171    */
;;;172    //oleg_end
;;;173    }
00010e  7828              LDRB     r0,[r5,#0]
000110  f88d000a          STRB     r0,[sp,#0xa]
000114  f88d600b          STRB     r6,[sp,#0xb]
000118  a902              ADD      r1,sp,#8
00011a  f1040014          ADD      r0,r4,#0x14
00011e  f7fffffe          BL       lc640_write_long_ptr
000122  b005              ADD      sp,sp,#0x14
000124  bdf0              POP      {r4-r7,pc}
;;;174    
                          ENDP

000126  0000              DCW      0x0000
                  |L2.296|
                          DCD      bat
                  |L2.300|
                          DCD      bat_u_old_cnt
                  |L2.304|
                          DCD      ke_date
                  |L2.308|
                          DCD      0x40024020

                          AREA ||.data||, DATA, ALIGN=2

                  avar_stat
                          DCD      0x00000000
                  avar_ind_stat
                          DCD      0x00000000
                  avar_stat_old
                          DCD      0x00000000
                  avar_stat_new
                          DCD      0x00000000
                  avar_stat_offed
                          DCD      0x00000000
                  rki_avar1_stat
                          DCD      0x00000000
                  rki_avar1_ind_stat
                          DCD      0x00000000
                  rki_avar1_stat_old
                          DCD      0x00000000
                  rki_avar1_stat_new
                          DCD      0x00000000
                  rki_avar1_stat_offed
                          DCD      0x00000000

                          AREA ||area_number.6||, DATA, ALIGN=0

                          EXPORTAS ||area_number.6||, ||.data||
                  av_inv
                          DCDU     0x00000000
000004  0000              DCB      0x00,0x00

;*** Start embedded assembler ***

#line 1 "avar_hndl.c"
	AREA ||.emb_text||, CODE, READONLY
	THUMB
	EXPORT |__asm___11_avar_hndl_c_ef0810c9____REV16|
#line 112 "C:\\Keil\\ARM\\CMSIS\\Include\\core_cmInstr.h"
|__asm___11_avar_hndl_c_ef0810c9____REV16| PROC
#line 113

 rev16 r0, r0
 bx lr
	ENDP
	AREA ||.emb_text||, CODE, READONLY
	THUMB
	EXPORT |__asm___11_avar_hndl_c_ef0810c9____REVSH|
#line 130
|__asm___11_avar_hndl_c_ef0810c9____REVSH| PROC
#line 131

 revsh r0, r0
 bx lr
	ENDP

;*** End   embedded assembler ***
