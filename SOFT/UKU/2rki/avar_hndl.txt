; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\avar_hndl.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\avar_hndl.d --feedback=.\EXE\UKU_220_IPS_TERMOKOMPENSAT.fed --cpu=Cortex-M3 --apcs=interwork -O1 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU_220_IPS_TERMOKOMPENSAT -DUKU2071x --omf_browse=.\EXE\avar_hndl.crf avar_hndl.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  avar_hndl PROC
;;;77     //-----------------------------------------------
;;;78     void avar_hndl(void)
000000  b530              PUSH     {r4,r5,lr}
;;;79     {
;;;80     //static unsigned avar_stat_old;
;;;81     char i;
;;;82     //unsigned avar_stat_new,avar_stat_offed;
;;;83     
;;;84     if(net_av)		SET_REG(avar_stat,1,0,1);
000002  48ff              LDR      r0,|L1.1024|
000004  49ff              LDR      r1,|L1.1028|
000006  7802              LDRB     r2,[r0,#0]  ; net_av
000008  6808              LDR      r0,[r1,#0]
00000a  b11a              CBZ      r2,|L1.20|
00000c  f0400001          ORR      r0,r0,#1
000010  6008              STR      r0,[r1,#0]  ; avar_stat
000012  e002              B        |L1.26|
                  |L1.20|
;;;85     else	   			SET_REG(avar_stat,0,0,1);
000014  f0200001          BIC      r0,r0,#1
000018  6008              STR      r0,[r1,#0]  ; avar_stat
                  |L1.26|
;;;86     
;;;87     for(i=0;i<2;i++)
00001a  f04f0000          MOV      r0,#0
;;;88     	{
;;;89     	if(bat[i]._av&1)	SET_REG(avar_stat,1,1+i,1);
00001e  4dfa              LDR      r5,|L1.1032|
000020  f04f0401          MOV      r4,#1
                  |L1.36|
000024  eb000240          ADD      r2,r0,r0,LSL #1
000028  eb021200          ADD      r2,r2,r0,LSL #4
00002c  eb050282          ADD      r2,r5,r2,LSL #2
000030  f892203d          LDRB     r2,[r2,#0x3d]
000034  07d2              LSLS     r2,r2,#31
000036  d00a              BEQ      |L1.78|
000038  f1000301          ADD      r3,r0,#1
00003c  fa04f203          LSL      r2,r4,r3
000040  680b              LDR      r3,[r1,#0]  ; avar_stat
000042  ea230302          BIC      r3,r3,r2
000046  ea430302          ORR      r3,r3,r2
00004a  600b              STR      r3,[r1,#0]  ; avar_stat
00004c  e007              B        |L1.94|
                  |L1.78|
;;;90     	else	   		SET_REG(avar_stat,0,1+i,1);
00004e  f1000201          ADD      r2,r0,#1
000052  fa04f302          LSL      r3,r4,r2
000056  680a              LDR      r2,[r1,#0]  ; avar_stat
000058  ea220203          BIC      r2,r2,r3
00005c  600a              STR      r2,[r1,#0]  ; avar_stat
                  |L1.94|
00005e  f1000001          ADD      r0,r0,#1              ;87
000062  b2c0              UXTB     r0,r0                 ;87
000064  2802              CMP      r0,#2                 ;87
000066  d3dd              BCC      |L1.36|
;;;91     	}
;;;92     
;;;93     for(i=0;i<12;i++)
000068  f04f0000          MOV      r0,#0
;;;94     	{
;;;95     	if(bps[i]._av&0xef)	SET_REG(avar_stat,1,3+i,1);
00006c  4ae7              LDR      r2,|L1.1036|
                  |L1.110|
00006e  ebc003c0          RSB      r3,r0,r0,LSL #3
000072  eb031300          ADD      r3,r3,r0,LSL #4
000076  eb020383          ADD      r3,r2,r3,LSL #2
00007a  785b              LDRB     r3,[r3,#1]
00007c  f0130fef          TST      r3,#0xef
000080  d00a              BEQ      |L1.152|
000082  f1000503          ADD      r5,r0,#3
000086  fa04f305          LSL      r3,r4,r5
00008a  680d              LDR      r5,[r1,#0]  ; avar_stat
00008c  ea250503          BIC      r5,r5,r3
000090  ea450503          ORR      r5,r5,r3
000094  600d              STR      r5,[r1,#0]  ; avar_stat
000096  e007              B        |L1.168|
                  |L1.152|
;;;96     	else	   		SET_REG(avar_stat,0,3+i,1);
000098  f1000303          ADD      r3,r0,#3
00009c  fa04f503          LSL      r5,r4,r3
0000a0  680b              LDR      r3,[r1,#0]  ; avar_stat
0000a2  ea230305          BIC      r3,r3,r5
0000a6  600b              STR      r3,[r1,#0]  ; avar_stat
                  |L1.168|
0000a8  f1000001          ADD      r0,r0,#1              ;93
0000ac  b2c0              UXTB     r0,r0                 ;93
0000ae  280c              CMP      r0,#0xc               ;93
0000b0  d3dd              BCC      |L1.110|
;;;97     	}
;;;98     
;;;99     for(i=0;i<6;i++)
0000b2  f04f0000          MOV      r0,#0
;;;100    	{
;;;101    	if(av_inv[i])	SET_REG(avar_stat,1,15+i,1);
0000b6  4dd3              LDR      r5,|L1.1028|
0000b8  f1050550          ADD      r5,r5,#0x50
                  |L1.188|
0000bc  5c2a              LDRB     r2,[r5,r0]
0000be  b152              CBZ      r2,|L1.214|
0000c0  f100030f          ADD      r3,r0,#0xf
0000c4  fa04f203          LSL      r2,r4,r3
0000c8  680b              LDR      r3,[r1,#0]  ; avar_stat
0000ca  ea230302          BIC      r3,r3,r2
0000ce  ea430302          ORR      r3,r3,r2
0000d2  600b              STR      r3,[r1,#0]  ; avar_stat
0000d4  e007              B        |L1.230|
                  |L1.214|
;;;102    	else	   		SET_REG(avar_stat,0,15+i,1);
0000d6  f100020f          ADD      r2,r0,#0xf
0000da  680b              LDR      r3,[r1,#0]  ; avar_stat
0000dc  fa04f202          LSL      r2,r4,r2
0000e0  ea230302          BIC      r3,r3,r2
0000e4  600b              STR      r3,[r1,#0]  ; avar_stat
                  |L1.230|
0000e6  f1000001          ADD      r0,r0,#1              ;99
0000ea  b2c0              UXTB     r0,r0                 ;99
0000ec  2806              CMP      r0,#6                 ;99
0000ee  d3e5              BCC      |L1.188|
;;;103    	}
;;;104    
;;;105    /*for(i=0;i<4;i++)
;;;106    	{
;;;107    	if(av_dt[i])	SET_REG(avar_stat,1,21+i,1);
;;;108    	else	   		SET_REG(avar_stat,0,21+i,1);
;;;109    	}  */
;;;110    for(i=0;i<4;i++)
0000f0  f04f0000          MOV      r0,#0
;;;111    	{
;;;112    	if(sk_av_stat[i]==sasON)	SET_REG(avar_stat,1,24+i,1);
0000f4  4bc6              LDR      r3,|L1.1040|
                  |L1.246|
0000f6  5c1a              LDRB     r2,[r3,r0]
0000f8  2a01              CMP      r2,#1
0000fa  d014              BEQ      |L1.294|
;;;113    	else	   		SET_REG(avar_stat,0,24+i,1);
0000fc  f1000218          ADD      r2,r0,#0x18
000100  fa04f502          LSL      r5,r4,r2
000104  680a              LDR      r2,[r1,#0]  ; avar_stat
000106  ea220205          BIC      r2,r2,r5
00010a  600a              STR      r2,[r1,#0]  ; avar_stat
                  |L1.268|
00010c  f1000001          ADD      r0,r0,#1              ;110
000110  b2c0              UXTB     r0,r0                 ;110
000112  2804              CMP      r0,#4                 ;110
000114  d3ef              BCC      |L1.246|
;;;114    	}
;;;115    
;;;116    if(uout_av)			SET_REG(avar_stat,1,28,1);
000116  48bf              LDR      r0,|L1.1044|
000118  7800              LDRB     r0,[r0,#0]  ; uout_av
00011a  b178              CBZ      r0,|L1.316|
00011c  6808              LDR      r0,[r1,#0]  ; avar_stat
00011e  f0405080          ORR      r0,r0,#0x10000000
000122  6008              STR      r0,[r1,#0]  ; avar_stat
000124  e00e              B        |L1.324|
                  |L1.294|
000126  f1000518          ADD      r5,r0,#0x18           ;112
00012a  fa04f205          LSL      r2,r4,r5              ;112
00012e  680d              LDR      r5,[r1,#0]            ;112  ; avar_stat
000130  ea250502          BIC      r5,r5,r2              ;112
000134  ea450502          ORR      r5,r5,r2              ;112
000138  600d              STR      r5,[r1,#0]            ;112  ; avar_stat
00013a  e7e7              B        |L1.268|
                  |L1.316|
;;;117    else	   			SET_REG(avar_stat,0,28,1);
00013c  6808              LDR      r0,[r1,#0]  ; avar_stat
00013e  f0205080          BIC      r0,r0,#0x10000000
000142  6008              STR      r0,[r1,#0]  ; avar_stat
                  |L1.324|
;;;118    
;;;119    
;;;120    avar_stat_new=(avar_stat^avar_stat_old)&avar_stat;
000144  688a              LDR      r2,[r1,#8]  ; avar_stat_old
000146  6808              LDR      r0,[r1,#0]  ; avar_stat
000148  ea200302          BIC      r3,r0,r2
00014c  60cb              STR      r3,[r1,#0xc]  ; avar_stat_new
;;;121    
;;;122    avar_ind_stat|=avar_stat_new;
00014e  684c              LDR      r4,[r1,#4]  ; avar_ind_stat
000150  ea440403          ORR      r4,r4,r3
000154  604c              STR      r4,[r1,#4]  ; avar_ind_stat
;;;123    
;;;124    if((SK_ZVUK_EN[0])) avar_ind_stat&=(~(1UL<<24));
000156  4bb0              LDR      r3,|L1.1048|
000158  881d              LDRH     r5,[r3,#0]  ; SK_ZVUK_EN
00015a  b115              CBZ      r5,|L1.354|
00015c  f0247480          BIC      r4,r4,#0x1000000
000160  604c              STR      r4,[r1,#4]  ; avar_ind_stat
                  |L1.354|
;;;125    if((SK_ZVUK_EN[1])) avar_ind_stat&=(~(1UL<<25));
000162  885c              LDRH     r4,[r3,#2]  ; SK_ZVUK_EN
000164  b11c              CBZ      r4,|L1.366|
000166  684c              LDR      r4,[r1,#4]  ; avar_ind_stat
000168  f0247400          BIC      r4,r4,#0x2000000
00016c  604c              STR      r4,[r1,#4]  ; avar_ind_stat
                  |L1.366|
;;;126    if((SK_ZVUK_EN[2])) avar_ind_stat&=(~(1UL<<26));
00016e  889c              LDRH     r4,[r3,#4]  ; SK_ZVUK_EN
000170  b11c              CBZ      r4,|L1.378|
000172  684c              LDR      r4,[r1,#4]  ; avar_ind_stat
000174  f0246480          BIC      r4,r4,#0x4000000
000178  604c              STR      r4,[r1,#4]  ; avar_ind_stat
                  |L1.378|
;;;127    if((SK_ZVUK_EN[3])) avar_ind_stat&=(~(1UL<<27));	
00017a  88db              LDRH     r3,[r3,#6]  ; SK_ZVUK_EN
00017c  b11b              CBZ      r3,|L1.390|
00017e  684b              LDR      r3,[r1,#4]  ; avar_ind_stat
000180  f0236300          BIC      r3,r3,#0x8000000
000184  604b              STR      r3,[r1,#4]  ; avar_ind_stat
                  |L1.390|
;;;128    
;;;129    
;;;130    avar_stat_offed=~((avar_stat^avar_stat_old)&avar_stat_old);
000186  ea220200          BIC      r2,r2,r0
00018a  ea6f0202          MVN      r2,r2
00018e  610a              STR      r2,[r1,#0x10]  ; avar_stat_offed
;;;131    
;;;132    if(!AV_OFF_AVT)avar_stat_offed|=0xeffffffe;
000190  4ba2              LDR      r3,|L1.1052|
000192  881b              LDRH     r3,[r3,#0]  ; AV_OFF_AVT
000194  b91b              CBNZ     r3,|L1.414|
000196  4ba2              LDR      r3,|L1.1056|
000198  ea420203          ORR      r2,r2,r3
00019c  610a              STR      r2,[r1,#0x10]  ; avar_stat_offed
                  |L1.414|
;;;133    
;;;134    avar_ind_stat&=avar_stat_offed; 
00019e  690b              LDR      r3,[r1,#0x10]  ; avar_stat_offed
0001a0  684a              LDR      r2,[r1,#4]  ; avar_ind_stat
0001a2  ea020203          AND      r2,r2,r3
0001a6  604a              STR      r2,[r1,#4]  ; avar_ind_stat
;;;135    
;;;136    avar_stat_old=avar_stat;
0001a8  6088              STR      r0,[r1,#8]  ; avar_stat_old
;;;137    
;;;138    //oleg_start
;;;139    
;;;140    
;;;141    
;;;142    rki_avar1_stat=(sk_alarm<<8)|(status_izm_r&0x3F);
0001aa  489e              LDR      r0,|L1.1060|
0001ac  4a9e              LDR      r2,|L1.1064|
0001ae  8800              LDRH     r0,[r0,#0]  ; status_izm_r
0001b0  6812              LDR      r2,[r2,#0]  ; sk_alarm
0001b2  f000003f          AND      r0,r0,#0x3f
0001b6  ea402002          ORR      r0,r0,r2,LSL #8
0001ba  6148              STR      r0,[r1,#0x14]  ; rki_avar1_stat
;;;143    rki_avar1_stat_new=(rki_avar1_stat^rki_avar1_stat_old)&rki_avar1_stat;
0001bc  69cb              LDR      r3,[r1,#0x1c]  ; rki_avar1_stat_old
0001be  ea200203          BIC      r2,r0,r3
0001c2  620a              STR      r2,[r1,#0x20]  ; rki_avar1_stat_new
;;;144    rki_avar1_ind_stat|=rki_avar1_stat_new;
0001c4  698c              LDR      r4,[r1,#0x18]  ; rki_avar1_ind_stat
0001c6  ea440402          ORR      r4,r4,r2
;;;145    rki_avar1_stat_offed=~((rki_avar1_stat^rki_avar1_stat_old)&rki_avar1_stat_old);
0001ca  ea230300          BIC      r3,r3,r0
0001ce  ea6f0203          MVN      r2,r3
0001d2  624a              STR      r2,[r1,#0x24]  ; rki_avar1_stat_offed
;;;146    rki_avar1_ind_stat&=rki_avar1_stat_offed;
0001d4  ea040402          AND      r4,r4,r2
0001d8  618c              STR      r4,[r1,#0x18]  ; rki_avar1_ind_stat
;;;147    rki_avar1_stat_old=rki_avar1_stat;
0001da  61c8              STR      r0,[r1,#0x1c]  ; rki_avar1_stat_old
;;;148    
;;;149    rki_avarI1_stat=status_di1;
0001dc  4893              LDR      r0,|L1.1068|
0001de  6800              LDR      r0,[r0,#0]  ; status_di1
0001e0  6288              STR      r0,[r1,#0x28]  ; rki_avarI1_stat
;;;150    rki_avarI1_stat_new=(rki_avarI1_stat^rki_avarI1_stat_old)&rki_avarI1_stat;
0001e2  6b0b              LDR      r3,[r1,#0x30]  ; rki_avarI1_stat_old
0001e4  ea200203          BIC      r2,r0,r3
0001e8  634a              STR      r2,[r1,#0x34]  ; rki_avarI1_stat_new
;;;151    rki_avarI1_ind_stat|=rki_avarI1_stat_new;
0001ea  6acc              LDR      r4,[r1,#0x2c]  ; rki_avarI1_ind_stat
0001ec  ea440402          ORR      r4,r4,r2
;;;152    rki_avarI1_stat_offed=~((rki_avarI1_stat^rki_avarI1_stat_old)&rki_avarI1_stat_old);
0001f0  ea230300          BIC      r3,r3,r0
0001f4  ea6f0203          MVN      r2,r3
0001f8  638a              STR      r2,[r1,#0x38]  ; rki_avarI1_stat_offed
;;;153    rki_avarI1_ind_stat&=rki_avarI1_stat_offed;
0001fa  ea040402          AND      r4,r4,r2
0001fe  62cc              STR      r4,[r1,#0x2c]  ; rki_avarI1_ind_stat
;;;154    rki_avarI1_stat_old=rki_avarI1_stat;
000200  6308              STR      r0,[r1,#0x30]  ; rki_avarI1_stat_old
;;;155    
;;;156    rki_avarI2_stat=status_di2;
000202  488b              LDR      r0,|L1.1072|
000204  6800              LDR      r0,[r0,#0]  ; status_di2
000206  63c8              STR      r0,[r1,#0x3c]  ; rki_avarI2_stat
;;;157    rki_avarI2_stat_new=(rki_avarI2_stat^rki_avarI2_stat_old)&rki_avarI2_stat;
000208  6c4b              LDR      r3,[r1,#0x44]  ; rki_avarI2_stat_old
00020a  ea200203          BIC      r2,r0,r3
00020e  648a              STR      r2,[r1,#0x48]  ; rki_avarI2_stat_new
;;;158    rki_avarI2_ind_stat|=rki_avarI2_stat_new;
000210  6c0c              LDR      r4,[r1,#0x40]  ; rki_avarI2_ind_stat
000212  ea440402          ORR      r4,r4,r2
;;;159    rki_avarI2_stat_offed=~((rki_avarI2_stat^rki_avarI2_stat_old)&rki_avarI2_stat_old);
000216  ea230300          BIC      r3,r3,r0
00021a  ea6f0203          MVN      r2,r3
00021e  64ca              STR      r2,[r1,#0x4c]  ; rki_avarI2_stat_offed
;;;160    rki_avarI2_ind_stat&=rki_avarI2_stat_offed;
000220  ea040402          AND      r4,r4,r2
000224  640c              STR      r4,[r1,#0x40]  ; rki_avarI2_ind_stat
;;;161    rki_avarI2_stat_old=rki_avarI2_stat;
000226  6448              STR      r0,[r1,#0x44]  ; rki_avarI2_stat_old
;;;162    
;;;163    //oleg_end
;;;164    }
000228  bd30              POP      {r4,r5,pc}
;;;165    
                          ENDP

                  reload_hndl PROC
;;;166    //-----------------------------------------------
;;;167    void reload_hndl(void)
00022a  b5f8              PUSH     {r3-r7,lr}
;;;168    {
;;;169    char data[4];
;;;170    unsigned int event_ptr,lc640_adr/*,event_ptr_find*/,event_cnt;
;;;171    
;;;172    event_ptr=lc640_read_int(PTR_EVENT_LOG);
00022c  f44f6560          MOV      r5,#0xe00
000230  4628              MOV      r0,r5
000232  f7fffffe          BL       lc640_read_int
;;;173    event_ptr++;	
000236  f1000001          ADD      r0,r0,#1
00023a  4604              MOV      r4,r0
;;;174    if(event_ptr>63)event_ptr=0;	
00023c  2c3f              CMP      r4,#0x3f
00023e  d901              BLS      |L1.580|
000240  f04f0400          MOV      r4,#0
                  |L1.580|
;;;175    lc640_write_int(PTR_EVENT_LOG,event_ptr);	
000244  b221              SXTH     r1,r4
000246  4628              MOV      r0,r5
000248  f7fffffe          BL       lc640_write_int
;;;176    	
;;;177    event_cnt=lc640_read_int(CNT_EVENT_LOG);
00024c  f6406602          MOV      r6,#0xe02
000250  4630              MOV      r0,r6
000252  f7fffffe          BL       lc640_read_int
;;;178    if(event_cnt!=63)event_cnt=event_ptr;
000256  283f              CMP      r0,#0x3f
000258  d000              BEQ      |L1.604|
00025a  4620              MOV      r0,r4
                  |L1.604|
;;;179    lc640_write_int(CNT_EVENT_LOG,event_cnt); 
00025c  b201              SXTH     r1,r0
00025e  4630              MOV      r0,r6
000260  f7fffffe          BL       lc640_write_int
;;;180    	
;;;181    lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
000264  4628              MOV      r0,r5
000266  f7fffffe          BL       lc640_read_int
00026a  f44f6180          MOV      r1,#0x400
00026e  eb011440          ADD      r4,r1,r0,LSL #5
;;;182    	
;;;183    data[0]='U';
000272  f04f0055          MOV      r0,#0x55
000276  f88d0000          STRB     r0,[sp,#0]
;;;184    data[1]=0;
00027a  f04f0600          MOV      r6,#0
00027e  f88d6001          STRB     r6,[sp,#1]
;;;185    data[2]='R';
000282  f04f0052          MOV      r0,#0x52
000286  f88d0002          STRB     r0,[sp,#2]
;;;186    data[3]=0;
00028a  f88d6003          STRB     r6,[sp,#3]
;;;187    lc640_write_long_ptr(lc640_adr,data);
00028e  4669              MOV      r1,sp
000290  4620              MOV      r0,r4
000292  f7fffffe          BL       lc640_write_long_ptr
;;;188    
;;;189    data[0]=0;
;;;190    data[1]=0;
;;;191    data[2]=0;
;;;192    data[3]=0;
000296  9600              STR      r6,[sp,#0]
;;;193    lc640_write_long_ptr(lc640_adr+4,data);
000298  4669              MOV      r1,sp
00029a  1d20              ADDS     r0,r4,#4
00029c  f7fffffe          BL       lc640_write_long_ptr
;;;194    
;;;195    data[0]=LPC_RTC->YEAR;
0002a0  4d64              LDR      r5,|L1.1076|
0002a2  8ba8              LDRH     r0,[r5,#0x1c]
0002a4  f88d0000          STRB     r0,[sp,#0]
;;;196    data[1]=LPC_RTC->MONTH;
0002a8  7e28              LDRB     r0,[r5,#0x18]
0002aa  f88d0001          STRB     r0,[sp,#1]
;;;197    data[2]=LPC_RTC->DOM;
0002ae  7b28              LDRB     r0,[r5,#0xc]
0002b0  f88d0002          STRB     r0,[sp,#2]
;;;198    data[3]=0;
0002b4  f88d6003          STRB     r6,[sp,#3]
;;;199    lc640_write_long_ptr(lc640_adr+8,data);
0002b8  4669              MOV      r1,sp
0002ba  f1040008          ADD      r0,r4,#8
0002be  f7fffffe          BL       lc640_write_long_ptr
;;;200    
;;;201    data[0]=LPC_RTC->HOUR;
0002c2  7a28              LDRB     r0,[r5,#8]
0002c4  f88d0000          STRB     r0,[sp,#0]
;;;202    data[1]=LPC_RTC->MIN;
0002c8  7928              LDRB     r0,[r5,#4]
0002ca  f88d0001          STRB     r0,[sp,#1]
;;;203    data[2]=LPC_RTC->SEC;
0002ce  7828              LDRB     r0,[r5,#0]
0002d0  f88d0002          STRB     r0,[sp,#2]
;;;204    data[3]=LPC_SC->RSID;
0002d4  4858              LDR      r0,|L1.1080|
0002d6  f8d00180          LDR      r0,[r0,#0x180]
0002da  f88d0003          STRB     r0,[sp,#3]
;;;205    
;;;206    lc640_write_long_ptr(lc640_adr+12,data);
0002de  4669              MOV      r1,sp
0002e0  f104000c          ADD      r0,r4,#0xc
0002e4  f7fffffe          BL       lc640_write_long_ptr
;;;207    	
;;;208    data[0]='A';
0002e8  f04f0541          MOV      r5,#0x41
0002ec  f88d5000          STRB     r5,[sp,#0]
;;;209    data[1]='A';
0002f0  f88d5001          STRB     r5,[sp,#1]
;;;210    data[2]='A';
0002f4  f88d5002          STRB     r5,[sp,#2]
;;;211    data[3]='A';
0002f8  f88d5003          STRB     r5,[sp,#3]
;;;212    lc640_write_long_ptr(lc640_adr+16,data);
0002fc  4669              MOV      r1,sp
0002fe  f1040010          ADD      r0,r4,#0x10
000302  f7fffffe          BL       lc640_write_long_ptr
;;;213    	
;;;214    data[0]='A';
000306  f88d5000          STRB     r5,[sp,#0]
;;;215    data[1]='A';
00030a  f88d5001          STRB     r5,[sp,#1]
;;;216    data[2]='A';
00030e  f88d5002          STRB     r5,[sp,#2]
;;;217    data[3]='A';
000312  f88d5003          STRB     r5,[sp,#3]
;;;218    lc640_write_long_ptr(lc640_adr+20,data);
000316  4669              MOV      r1,sp
000318  f1040014          ADD      r0,r4,#0x14
00031c  f7fffffe          BL       lc640_write_long_ptr
;;;219    	
;;;220    data[0]='A';
000320  f88d5000          STRB     r5,[sp,#0]
;;;221    data[1]='A';
000324  f88d5001          STRB     r5,[sp,#1]
;;;222    data[2]='A';
000328  f88d5002          STRB     r5,[sp,#2]
;;;223    data[3]='A';
00032c  f88d5003          STRB     r5,[sp,#3]
;;;224    lc640_write_long_ptr(lc640_adr+24,data);
000330  4669              MOV      r1,sp
000332  f1040018          ADD      r0,r4,#0x18
000336  f7fffffe          BL       lc640_write_long_ptr
;;;225    	
;;;226    data[0]='A';
00033a  f88d5000          STRB     r5,[sp,#0]
;;;227    data[1]='A';
00033e  f88d5001          STRB     r5,[sp,#1]
;;;228    data[2]='A';
000342  f88d5002          STRB     r5,[sp,#2]
;;;229    data[3]='A';
000346  f88d5003          STRB     r5,[sp,#3]
;;;230    lc640_write_long_ptr(lc640_adr+28,data);				
00034a  4669              MOV      r1,sp
00034c  f104001c          ADD      r0,r4,#0x1c
000350  f7fffffe          BL       lc640_write_long_ptr
;;;231    	
;;;232    	
;;;233    }
000354  bdf8              POP      {r3-r7,pc}
;;;234    
                          ENDP

                  avar_unet_hndl PROC
;;;235    //-----------------------------------------------
;;;236    void avar_unet_hndl(char in)
000356  e92d43f8          PUSH     {r3-r9,lr}
;;;237    {
;;;238    
;;;239    char data[4];
;;;240    unsigned int event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;241    
;;;242    
;;;243    if(in==1)
;;;244    	{
;;;245    	net_av=1;
;;;246    
;;;247    	//beep_init(0x01L,'O');
;;;248    	//a.av.bAN=1;
;;;249    
;;;250    
;;;251    	//beep_init(0x33333333,'A');
;;;252    	 
;;;253    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;254    	event_ptr++;	
;;;255    	if(event_ptr>63)event_ptr=0;	
;;;256    	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;257    	
;;;258         event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;259    	if(event_cnt!=63)event_cnt=event_ptr;
;;;260    	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;261    	
;;;262    	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;263    	
;;;264    	data[0]='P';
;;;265    	data[1]=0;
;;;266    	data[2]='A';
;;;267    	data[3]=0;
;;;268    	lc640_write_long_ptr(lc640_adr,data);
;;;269    
;;;270    	data[0]=0;//*((char*)&Unet_store);
;;;271    	data[1]=0;//*(((char*)&Unet_store)+1);
;;;272    	data[2]=0;
;;;273    	data[3]=0;
;;;274    	lc640_write_long_ptr(lc640_adr+4,data);
;;;275    
;;;276    	data[0]=LPC_RTC->YEAR;
00035a  4f36              LDR      r7,|L1.1076|
00035c  4928              LDR      r1,|L1.1024|
00035e  3f20              SUBS     r7,r7,#0x20
000360  f44f6560          MOV      r5,#0xe00             ;253
000364  f04f0800          MOV      r8,#0                 ;255
000368  f44f6980          MOV      r9,#0x400             ;262
00036c  2801              CMP      r0,#1                 ;243
00036e  d002              BEQ      |L1.886|
;;;277    	data[1]=LPC_RTC->MONTH;
;;;278    	data[2]=LPC_RTC->DOM;
;;;279    	data[3]=0;
;;;280    	lc640_write_long_ptr(lc640_adr+8,data);
;;;281    
;;;282    	data[0]=LPC_RTC->HOUR;
;;;283    	data[1]=LPC_RTC->MIN;
;;;284    	data[2]=LPC_RTC->SEC;
;;;285    	data[3]=0;
;;;286    	lc640_write_long_ptr(lc640_adr+12,data);
;;;287    	
;;;288    	data[0]='A';
;;;289    	data[1]='A';
;;;290    	data[2]='A';
;;;291    	data[3]='A';
;;;292    	lc640_write_long_ptr(lc640_adr+16,data);
;;;293    	
;;;294    	data[0]='A';
;;;295    	data[1]='A';
;;;296    	data[2]='A';
;;;297    	data[3]='A';
;;;298    	lc640_write_long_ptr(lc640_adr+20,data);
;;;299    	
;;;300    	data[0]='A';
;;;301    	data[1]='A';
;;;302    	data[2]='A';
;;;303    	data[3]='A';
;;;304    	lc640_write_long_ptr(lc640_adr+24,data);
;;;305    	
;;;306    	data[0]='A';
;;;307    	data[1]='A';
;;;308    	data[2]='A';
;;;309    	data[3]='A';
;;;310    	lc640_write_long_ptr(lc640_adr+28,data);				
;;;311    	
;;;312    /*	memo_out0[0]=0x55;
;;;313         memo_out0[1]=0x00+2;
;;;314         memo_out0[2]=1;
;;;315         memo_out0[3]=0x0b;
;;;316         memo_out0[4]=0x55;
;;;317         memo_out0[5]=0x55; 
;;;318         	
;;;319         memo_out0[6]=crc_87(memo_out0,6);
;;;320    	memo_out0[7]=crc_95(memo_out0,6);
;;;321         usart_out_adr0(memo_out0,8); 
;;;322    	*/
;;;323    	snmp_trap_send("Main power alarm",2,1,0);
;;;324    	}
;;;325    
;;;326    else if(in==0)
000370  2800              CMP      r0,#0
000372  d044              BEQ      |L1.1022|
000374  e146              B        |L1.1540|
                  |L1.886|
000376  f04f0001          MOV      r0,#1                 ;245
00037a  7008              STRB     r0,[r1,#0]            ;245
00037c  4628              MOV      r0,r5                 ;253
00037e  f7fffffe          BL       lc640_read_int
000382  f1000001          ADD      r0,r0,#1              ;254
000386  4604              MOV      r4,r0                 ;254
000388  2c3f              CMP      r4,#0x3f              ;255
00038a  d901              BLS      |L1.912|
00038c  f04f0400          MOV      r4,#0                 ;255
                  |L1.912|
000390  b221              SXTH     r1,r4                 ;256
000392  4628              MOV      r0,r5                 ;256
000394  f7fffffe          BL       lc640_write_int
000398  f6406602          MOV      r6,#0xe02             ;258
00039c  4630              MOV      r0,r6                 ;258
00039e  f7fffffe          BL       lc640_read_int
0003a2  283f              CMP      r0,#0x3f              ;259
0003a4  d000              BEQ      |L1.936|
0003a6  4620              MOV      r0,r4                 ;259
                  |L1.936|
0003a8  b201              SXTH     r1,r0                 ;260
0003aa  4630              MOV      r0,r6                 ;260
0003ac  f7fffffe          BL       lc640_write_int
0003b0  4628              MOV      r0,r5                 ;262
0003b2  f7fffffe          BL       lc640_read_int
0003b6  eb091540          ADD      r5,r9,r0,LSL #5       ;262
0003ba  f04f0050          MOV      r0,#0x50              ;264
0003be  f88d0000          STRB     r0,[sp,#0]            ;264
0003c2  f88d8001          STRB     r8,[sp,#1]            ;265
0003c6  f04f0441          MOV      r4,#0x41              ;266
0003ca  f88d4002          STRB     r4,[sp,#2]            ;266
0003ce  f88d8003          STRB     r8,[sp,#3]            ;267
0003d2  4669              MOV      r1,sp                 ;268
0003d4  4628              MOV      r0,r5                 ;268
0003d6  f7fffffe          BL       lc640_write_long_ptr
0003da  f8cd8000          STR      r8,[sp,#0]            ;273
0003de  4669              MOV      r1,sp                 ;274
0003e0  1d28              ADDS     r0,r5,#4              ;274
0003e2  f7fffffe          BL       lc640_write_long_ptr
0003e6  f1070720          ADD      r7,r7,#0x20           ;276
0003ea  8bb8              LDRH     r0,[r7,#0x1c]         ;276
0003ec  f88d0000          STRB     r0,[sp,#0]            ;276
0003f0  7e38              LDRB     r0,[r7,#0x18]         ;277
0003f2  f88d0001          STRB     r0,[sp,#1]            ;277
0003f6  7b38              LDRB     r0,[r7,#0xc]          ;278
0003f8  f88d0002          STRB     r0,[sp,#2]            ;278
0003fc  e01e              B        |L1.1084|
                  |L1.1022|
0003fe  e06f              B        |L1.1248|
                  |L1.1024|
                          DCD      net_av
                  |L1.1028|
                          DCD      ||.data||
                  |L1.1032|
                          DCD      bat
                  |L1.1036|
                          DCD      bps
                  |L1.1040|
                          DCD      sk_av_stat
                  |L1.1044|
                          DCD      uout_av
                  |L1.1048|
                          DCD      SK_ZVUK_EN
                  |L1.1052|
                          DCD      AV_OFF_AVT
                  |L1.1056|
                          DCD      0xeffffffe
                  |L1.1060|
                          DCD      status_izm_r
                  |L1.1064|
                          DCD      sk_alarm
                  |L1.1068|
                          DCD      status_di1
                  |L1.1072|
                          DCD      status_di2
                  |L1.1076|
                          DCD      0x40024020
                  |L1.1080|
                          DCD      0x400fc000
                  |L1.1084|
00043c  f88d8003          STRB     r8,[sp,#3]            ;279
000440  4669              MOV      r1,sp                 ;280
000442  f1050008          ADD      r0,r5,#8              ;280
000446  f7fffffe          BL       lc640_write_long_ptr
00044a  7a38              LDRB     r0,[r7,#8]            ;282
00044c  f88d0000          STRB     r0,[sp,#0]            ;282
000450  7938              LDRB     r0,[r7,#4]            ;283
000452  f88d0001          STRB     r0,[sp,#1]            ;283
000456  7838              LDRB     r0,[r7,#0]            ;284
000458  f88d0002          STRB     r0,[sp,#2]            ;284
00045c  f88d8003          STRB     r8,[sp,#3]            ;285
000460  4669              MOV      r1,sp                 ;286
000462  f105000c          ADD      r0,r5,#0xc            ;286
000466  f7fffffe          BL       lc640_write_long_ptr
00046a  f88d4000          STRB     r4,[sp,#0]            ;288
00046e  f88d4001          STRB     r4,[sp,#1]            ;289
000472  f88d4002          STRB     r4,[sp,#2]            ;290
000476  f88d4003          STRB     r4,[sp,#3]            ;291
00047a  4669              MOV      r1,sp                 ;292
00047c  f1050010          ADD      r0,r5,#0x10           ;292
000480  f7fffffe          BL       lc640_write_long_ptr
000484  f88d4000          STRB     r4,[sp,#0]            ;294
000488  f88d4001          STRB     r4,[sp,#1]            ;295
00048c  f88d4002          STRB     r4,[sp,#2]            ;296
000490  f88d4003          STRB     r4,[sp,#3]            ;297
000494  4669              MOV      r1,sp                 ;298
000496  f1050014          ADD      r0,r5,#0x14           ;298
00049a  f7fffffe          BL       lc640_write_long_ptr
00049e  f88d4000          STRB     r4,[sp,#0]            ;300
0004a2  f88d4001          STRB     r4,[sp,#1]            ;301
0004a6  f88d4002          STRB     r4,[sp,#2]            ;302
0004aa  f88d4003          STRB     r4,[sp,#3]            ;303
0004ae  4669              MOV      r1,sp                 ;304
0004b0  f1050018          ADD      r0,r5,#0x18           ;304
0004b4  f7fffffe          BL       lc640_write_long_ptr
0004b8  f88d4000          STRB     r4,[sp,#0]            ;306
0004bc  f88d4001          STRB     r4,[sp,#1]            ;307
0004c0  f88d4002          STRB     r4,[sp,#2]            ;308
0004c4  f88d4003          STRB     r4,[sp,#3]            ;309
0004c8  4669              MOV      r1,sp                 ;310
0004ca  f105001c          ADD      r0,r5,#0x1c           ;310
0004ce  f7fffffe          BL       lc640_write_long_ptr
0004d2  2300              MOVS     r3,#0                 ;323
0004d4  2201              MOVS     r2,#1                 ;323
0004d6  2102              MOVS     r1,#2                 ;323
0004d8  a0fd              ADR      r0,|L1.2256|
0004da  f7fffffe          BL       snmp_trap_send
0004de  e091              B        |L1.1540|
                  |L1.1248|
;;;327    	{
;;;328    	net_av=0;
0004e0  f8818000          STRB     r8,[r1,#0]
;;;329    
;;;330      /*
;;;331    	SET_REG(C2GSR,3,24,8);
;;;332    	C2MOD=0;
;;;333    	bOUT_FREE2=1;*/
;;;334    
;;;335    
;;;336    	//C2MOD=0;
;;;337    
;;;338    	//can2_init(7,8,CANBitrate250k_60MHz);
;;;339    
;;;340         //beep_init(0x02L,'O');
;;;341    	//a_.av.bAN=0;
;;;342    	SET_REG(avar_stat,0,0,1);
0004e4  48ff              LDR      r0,|L1.2276|
0004e6  6801              LDR      r1,[r0,#0]  ; avar_stat
0004e8  f0210101          BIC      r1,r1,#1
0004ec  6001              STR      r1,[r0,#0]  ; avar_stat
;;;343    
;;;344    	//if(AV_OFF_AVT)a.av.bAN=0;
;;;345    	
;;;346    	if(AV_OFF_AVT) SET_REG(avar_ind_stat,0,0,1);
0004ee  49fe              LDR      r1,|L1.2280|
0004f0  8809              LDRH     r1,[r1,#0]  ; AV_OFF_AVT
0004f2  b119              CBZ      r1,|L1.1276|
0004f4  6841              LDR      r1,[r0,#4]  ; avar_ind_stat
0004f6  f0210101          BIC      r1,r1,#1
0004fa  6041              STR      r1,[r0,#4]  ; avar_ind_stat
                  |L1.1276|
;;;347    
;;;348         event_ptr=lc640_read_int(PTR_EVENT_LOG);
0004fc  4628              MOV      r0,r5
0004fe  f7fffffe          BL       lc640_read_int
000502  4606              MOV      r6,r0
;;;349    	event_ptr_find=event_ptr;
000504  4634              MOV      r4,r6
                  |L1.1286|
;;;350    avar_unet_hndl_lbl1:
;;;351    	lc640_adr=EVENT_LOG+(event_ptr_find*32);
000506  eb091544          ADD      r5,r9,r4,LSL #5
;;;352    
;;;353         lc640_read_long_ptr(lc640_adr,data);
00050a  4669              MOV      r1,sp
00050c  4628              MOV      r0,r5
00050e  f7fffffe          BL       lc640_read_long_ptr
;;;354         
;;;355         if(!((data[0]=='P')&&(data[1]==0)&&(data[2]=='A')))
000512  f89d0000          LDRB     r0,[sp,#0]
000516  2850              CMP      r0,#0x50
000518  d106              BNE      |L1.1320|
00051a  f89d0001          LDRB     r0,[sp,#1]
00051e  b918              CBNZ     r0,|L1.1320|
000520  f89d0002          LDRB     r0,[sp,#2]
000524  2841              CMP      r0,#0x41
000526  d008              BEQ      |L1.1338|
                  |L1.1320|
;;;356         	{        
;;;357         	if(event_ptr_find)event_ptr_find--;
000528  b114              CBZ      r4,|L1.1328|
00052a  f1a40401          SUB      r4,r4,#1
00052e  e001              B        |L1.1332|
                  |L1.1328|
;;;358         	else event_ptr_find=63;
000530  f04f043f          MOV      r4,#0x3f
                  |L1.1332|
;;;359         	if(event_ptr_find==event_ptr)goto avar_unet_hndl_end;
000534  42b4              CMP      r4,r6
000536  d1e6              BNE      |L1.1286|
000538  e064              B        |L1.1540|
                  |L1.1338|
;;;360         	else goto avar_unet_hndl_lbl1;
;;;361         	}
;;;362         else 
;;;363         	{
;;;364         	lc640_read_long_ptr(lc640_adr+16,data);
00053a  4669              MOV      r1,sp
00053c  f1050010          ADD      r0,r5,#0x10
000540  f7fffffe          BL       lc640_read_long_ptr
;;;365         	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
000544  f89d0000          LDRB     r0,[sp,#0]
000548  2841              CMP      r0,#0x41
00054a  d10b              BNE      |L1.1380|
00054c  f89d0001          LDRB     r0,[sp,#1]
000550  2841              CMP      r0,#0x41
000552  d107              BNE      |L1.1380|
000554  f89d0002          LDRB     r0,[sp,#2]
000558  2841              CMP      r0,#0x41
00055a  d103              BNE      |L1.1380|
00055c  f89d0003          LDRB     r0,[sp,#3]
000560  2841              CMP      r0,#0x41
000562  d008              BEQ      |L1.1398|
                  |L1.1380|
;;;366         		{        
;;;367         		if(event_ptr_find)event_ptr_find--;
000564  b114              CBZ      r4,|L1.1388|
000566  f1a40401          SUB      r4,r4,#1
00056a  e001              B        |L1.1392|
                  |L1.1388|
;;;368             		else event_ptr_find=63;
00056c  f04f043f          MOV      r4,#0x3f
                  |L1.1392|
;;;369             		if(event_ptr_find==event_ptr)goto avar_unet_hndl_end;
000570  42b4              CMP      r4,r6
000572  d1c8              BNE      |L1.1286|
000574  e046              B        |L1.1540|
                  |L1.1398|
;;;370         		else goto avar_unet_hndl_lbl1;
;;;371         		}
;;;372    
;;;373         	}	
;;;374    	
;;;375    	data[0]=LPC_RTC->YEAR;
000576  f1070720          ADD      r7,r7,#0x20
00057a  8bb8              LDRH     r0,[r7,#0x1c]
00057c  f88d0000          STRB     r0,[sp,#0]
;;;376    	data[1]=LPC_RTC->MONTH;
000580  7e38              LDRB     r0,[r7,#0x18]
000582  f88d0001          STRB     r0,[sp,#1]
;;;377    	data[2]=LPC_RTC->DOM;
000586  7b38              LDRB     r0,[r7,#0xc]
000588  f88d0002          STRB     r0,[sp,#2]
;;;378    	data[3]=0;
00058c  f88d8003          STRB     r8,[sp,#3]
;;;379    	lc640_write_long_ptr(lc640_adr+16,data);
000590  4669              MOV      r1,sp
000592  f1050010          ADD      r0,r5,#0x10
000596  f7fffffe          BL       lc640_write_long_ptr
;;;380    
;;;381    	data[0]=LPC_RTC->HOUR;
00059a  7a38              LDRB     r0,[r7,#8]
00059c  f88d0000          STRB     r0,[sp,#0]
;;;382    	data[1]=LPC_RTC->MIN;
0005a0  7938              LDRB     r0,[r7,#4]
0005a2  f88d0001          STRB     r0,[sp,#1]
;;;383    	data[2]=LPC_RTC->SEC;
0005a6  7838              LDRB     r0,[r7,#0]
0005a8  f88d0002          STRB     r0,[sp,#2]
;;;384    	data[3]=0;
0005ac  f88d8003          STRB     r8,[sp,#3]
;;;385    	lc640_write_long_ptr(lc640_adr+20,data); 
0005b0  4669              MOV      r1,sp
0005b2  f1050014          ADD      r0,r5,#0x14
0005b6  f7fffffe          BL       lc640_write_long_ptr
;;;386    	
;;;387    	data[0]=*((char*)(&net_Ustore));
0005ba  48cc              LDR      r0,|L1.2284|
0005bc  7801              LDRB     r1,[r0,#0]  ; net_Ustore
0005be  f88d1000          STRB     r1,[sp,#0]
;;;388    	data[1]=*(((char*)(&net_Ustore))+1);
0005c2  7840              LDRB     r0,[r0,#1]  ; net_Ustore
0005c4  f88d0001          STRB     r0,[sp,#1]
;;;389    	data[2]='B';
0005c8  f04f0442          MOV      r4,#0x42
0005cc  f88d4002          STRB     r4,[sp,#2]
;;;390    	data[3]='B';
0005d0  f88d4003          STRB     r4,[sp,#3]
;;;391    	lc640_write_long_ptr(lc640_adr+24,data);
0005d4  4669              MOV      r1,sp
0005d6  f1050018          ADD      r0,r5,#0x18
0005da  f7fffffe          BL       lc640_write_long_ptr
;;;392    	
;;;393    	data[0]='B';
0005de  f88d4000          STRB     r4,[sp,#0]
;;;394    	data[1]='B';
0005e2  f88d4001          STRB     r4,[sp,#1]
;;;395    	data[2]='B';
0005e6  f88d4002          STRB     r4,[sp,#2]
;;;396    	data[3]='B';
0005ea  f88d4003          STRB     r4,[sp,#3]
;;;397    	lc640_write_long_ptr(lc640_adr+28,data);	
0005ee  4669              MOV      r1,sp
0005f0  f105001c          ADD      r0,r5,#0x1c
0005f4  f7fffffe          BL       lc640_write_long_ptr
;;;398    	
;;;399    /*	memo_out0[0]=0x55;
;;;400         memo_out0[1]=0x00+2;
;;;401         memo_out0[2]=1;
;;;402         memo_out0[3]=0x0b;
;;;403         memo_out0[4]=0xaa;
;;;404         memo_out0[5]=0xaa; 
;;;405         	
;;;406         memo_out0[6]=crc_87(memo_out0,6);
;;;407    	memo_out0[7]=crc_95(memo_out0,6);
;;;408         usart_out_adr0(memo_out0,8); */
;;;409         snmp_trap_send("Main power alarm  clear",2,1,1);	
0005f8  2301              MOVS     r3,#1
0005fa  461a              MOV      r2,r3
0005fc  2102              MOVS     r1,#2
0005fe  a0bc              ADR      r0,|L1.2288|
000600  f7fffffe          BL       snmp_trap_send
                  |L1.1540|
;;;410    	}
;;;411    avar_unet_hndl_end:
;;;412    	__nop();		
000604  bf00              NOP      
                  |L1.1542|
;;;413    }
000606  e8bd83f8          POP      {r3-r9,pc}
;;;414    
                          ENDP

                  avar_uout_hndl PROC
;;;416    //-----------------------------------------------
;;;417    void avar_uout_hndl(char in)
00060a  e92d43f8          PUSH     {r3-r9,lr}
;;;418    {
;;;419    
;;;420    char data[4];
;;;421    unsigned int event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;422    
;;;423    
;;;424    if(in==1)
;;;425    	{
;;;426    	//net_av=1;
;;;427    
;;;428    	//beep_init(0x01L,'O');
;;;429    	//a.av.bAN=1;
;;;430    
;;;431    
;;;432    	//beep_init(0x33333333,'A');
;;;433    
;;;434    	if(load_U>U_OUT_KONTR_MAX)uout_av=1;
;;;435    	if(load_U<U_OUT_KONTR_MIN)uout_av=2;
;;;436    		 
;;;437    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;438    	event_ptr++;	
;;;439    	if(event_ptr>63)event_ptr=0;	
;;;440    	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;441    	
;;;442        event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;443    	if(event_cnt!=63)event_cnt=event_ptr;
;;;444    	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;445    	
;;;446    	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;447    	
;;;448    	data[0]='Q';
;;;449    	data[1]=0;
;;;450    	data[2]='A';
;;;451    	data[3]=0;
;;;452    	lc640_write_long_ptr(lc640_adr,data);
;;;453    
;;;454    	data[0]=0;//*((char*)&Unet_store);
;;;455    	data[1]=0;//*(((char*)&Unet_store)+1);
;;;456    	data[2]=0;
;;;457    	data[3]=0;
;;;458    	lc640_write_long_ptr(lc640_adr+4,data);
;;;459    
;;;460    	data[0]=LPC_RTC->YEAR;
00060e  4fbe              LDR      r7,|L1.2312|
000610  49be              LDR      r1,|L1.2316|
000612  f44f6560          MOV      r5,#0xe00             ;437
000616  f04f0800          MOV      r8,#0                 ;439
00061a  f44f6980          MOV      r9,#0x400             ;446
00061e  2801              CMP      r0,#1                 ;424
000620  d002              BEQ      |L1.1576|
;;;461    	data[1]=LPC_RTC->MONTH;
;;;462    	data[2]=LPC_RTC->DOM;
;;;463    	data[3]=0;
;;;464    	lc640_write_long_ptr(lc640_adr+8,data);
;;;465    
;;;466    	data[0]=LPC_RTC->HOUR;
;;;467    	data[1]=LPC_RTC->MIN;
;;;468    	data[2]=LPC_RTC->SEC;
;;;469    	data[3]=0;
;;;470    	lc640_write_long_ptr(lc640_adr+12,data);
;;;471    	
;;;472    	data[0]='A';
;;;473    	data[1]='A';
;;;474    	data[2]='A';
;;;475    	data[3]='A';
;;;476    	lc640_write_long_ptr(lc640_adr+16,data);
;;;477    	
;;;478    	data[0]='A';
;;;479    	data[1]='A';
;;;480    	data[2]='A';
;;;481    	data[3]='A';
;;;482    	lc640_write_long_ptr(lc640_adr+20,data);
;;;483    	
;;;484    	data[0]='A';
;;;485    	data[1]='A';
;;;486    	data[2]='A';
;;;487    	data[3]='A';
;;;488    	lc640_write_long_ptr(lc640_adr+24,data);
;;;489    	
;;;490    	data[0]='A';
;;;491    	data[1]='A';
;;;492    	data[2]='A';
;;;493    	data[3]='A';
;;;494    	lc640_write_long_ptr(lc640_adr+28,data);				
;;;495    	
;;;496    /*	memo_out0[0]=0x55;
;;;497         memo_out0[1]=0x00+2;
;;;498         memo_out0[2]=1;
;;;499         memo_out0[3]=0x0b;
;;;500         memo_out0[4]=0x55;
;;;501         memo_out0[5]=0x55; 
;;;502         	
;;;503         memo_out0[6]=crc_87(memo_out0,6);
;;;504    	memo_out0[7]=crc_95(memo_out0,6);
;;;505         usart_out_adr0(memo_out0,8); 
;;;506    	*/
;;;507    	//snmp_trap_send("Main power is off",2,1,0);
;;;508    	}
;;;509    
;;;510    else if(in==0)
000622  2800              CMP      r0,#0
000624  d07e              BEQ      |L1.1828|
000626  e126              B        |L1.2166|
                  |L1.1576|
000628  48b9              LDR      r0,|L1.2320|
00062a  4aba              LDR      r2,|L1.2324|
00062c  f9b00000          LDRSH    r0,[r0,#0]            ;434  ; load_U
000630  f9b22000          LDRSH    r2,[r2,#0]            ;434  ; U_OUT_KONTR_MAX
000634  4290              CMP      r0,r2                 ;434
000636  dd02              BLE      |L1.1598|
000638  f04f0201          MOV      r2,#1                 ;434
00063c  700a              STRB     r2,[r1,#0]            ;434
                  |L1.1598|
00063e  4ab6              LDR      r2,|L1.2328|
000640  f9b22000          LDRSH    r2,[r2,#0]            ;435  ; U_OUT_KONTR_MIN
000644  4290              CMP      r0,r2                 ;435
000646  da02              BGE      |L1.1614|
000648  f04f0002          MOV      r0,#2                 ;435
00064c  7008              STRB     r0,[r1,#0]            ;435
                  |L1.1614|
00064e  4628              MOV      r0,r5                 ;437
000650  f7fffffe          BL       lc640_read_int
000654  f1000001          ADD      r0,r0,#1              ;438
000658  4604              MOV      r4,r0                 ;438
00065a  2c3f              CMP      r4,#0x3f              ;439
00065c  d901              BLS      |L1.1634|
00065e  f04f0400          MOV      r4,#0                 ;439
                  |L1.1634|
000662  b221              SXTH     r1,r4                 ;440
000664  4628              MOV      r0,r5                 ;440
000666  f7fffffe          BL       lc640_write_int
00066a  f6406602          MOV      r6,#0xe02             ;442
00066e  4630              MOV      r0,r6                 ;442
000670  f7fffffe          BL       lc640_read_int
000674  283f              CMP      r0,#0x3f              ;443
000676  d000              BEQ      |L1.1658|
000678  4620              MOV      r0,r4                 ;443
                  |L1.1658|
00067a  b201              SXTH     r1,r0                 ;444
00067c  4630              MOV      r0,r6                 ;444
00067e  f7fffffe          BL       lc640_write_int
000682  4628              MOV      r0,r5                 ;446
000684  f7fffffe          BL       lc640_read_int
000688  eb091540          ADD      r5,r9,r0,LSL #5       ;446
00068c  f04f0051          MOV      r0,#0x51              ;448
000690  f88d0000          STRB     r0,[sp,#0]            ;448
000694  f88d8001          STRB     r8,[sp,#1]            ;449
000698  f04f0441          MOV      r4,#0x41              ;450
00069c  f88d4002          STRB     r4,[sp,#2]            ;450
0006a0  f88d8003          STRB     r8,[sp,#3]            ;451
0006a4  4669              MOV      r1,sp                 ;452
0006a6  4628              MOV      r0,r5                 ;452
0006a8  f7fffffe          BL       lc640_write_long_ptr
0006ac  f8cd8000          STR      r8,[sp,#0]            ;457
0006b0  4669              MOV      r1,sp                 ;458
0006b2  1d28              ADDS     r0,r5,#4              ;458
0006b4  f7fffffe          BL       lc640_write_long_ptr
0006b8  f1070720          ADD      r7,r7,#0x20           ;460
0006bc  8bb8              LDRH     r0,[r7,#0x1c]         ;460
0006be  f88d0000          STRB     r0,[sp,#0]            ;460
0006c2  7e38              LDRB     r0,[r7,#0x18]         ;461
0006c4  f88d0001          STRB     r0,[sp,#1]            ;461
0006c8  7b38              LDRB     r0,[r7,#0xc]          ;462
0006ca  f88d0002          STRB     r0,[sp,#2]            ;462
0006ce  f88d8003          STRB     r8,[sp,#3]            ;463
0006d2  4669              MOV      r1,sp                 ;464
0006d4  f1050008          ADD      r0,r5,#8              ;464
0006d8  f7fffffe          BL       lc640_write_long_ptr
0006dc  7a38              LDRB     r0,[r7,#8]            ;466
0006de  f88d0000          STRB     r0,[sp,#0]            ;466
0006e2  7938              LDRB     r0,[r7,#4]            ;467
0006e4  f88d0001          STRB     r0,[sp,#1]            ;467
0006e8  7838              LDRB     r0,[r7,#0]            ;468
0006ea  f88d0002          STRB     r0,[sp,#2]            ;468
0006ee  f88d8003          STRB     r8,[sp,#3]            ;469
0006f2  4669              MOV      r1,sp                 ;470
0006f4  f105000c          ADD      r0,r5,#0xc            ;470
0006f8  f7fffffe          BL       lc640_write_long_ptr
0006fc  f88d4000          STRB     r4,[sp,#0]            ;472
000700  f88d4001          STRB     r4,[sp,#1]            ;473
000704  f88d4002          STRB     r4,[sp,#2]            ;474
000708  f88d4003          STRB     r4,[sp,#3]            ;475
00070c  4669              MOV      r1,sp                 ;476
00070e  f1050010          ADD      r0,r5,#0x10           ;476
000712  f7fffffe          BL       lc640_write_long_ptr
000716  f88d4000          STRB     r4,[sp,#0]            ;478
00071a  f88d4001          STRB     r4,[sp,#1]            ;479
00071e  f88d4002          STRB     r4,[sp,#2]            ;480
000722  e000              B        |L1.1830|
                  |L1.1828|
000724  e021              B        |L1.1898|
                  |L1.1830|
000726  f88d4003          STRB     r4,[sp,#3]            ;481
00072a  4669              MOV      r1,sp                 ;482
00072c  f1050014          ADD      r0,r5,#0x14           ;482
000730  f7fffffe          BL       lc640_write_long_ptr
000734  f88d4000          STRB     r4,[sp,#0]            ;484
000738  f88d4001          STRB     r4,[sp,#1]            ;485
00073c  f88d4002          STRB     r4,[sp,#2]            ;486
000740  f88d4003          STRB     r4,[sp,#3]            ;487
000744  4669              MOV      r1,sp                 ;488
000746  f1050018          ADD      r0,r5,#0x18           ;488
00074a  f7fffffe          BL       lc640_write_long_ptr
00074e  f88d4000          STRB     r4,[sp,#0]            ;490
000752  f88d4001          STRB     r4,[sp,#1]            ;491
000756  f88d4002          STRB     r4,[sp,#2]            ;492
00075a  f88d4003          STRB     r4,[sp,#3]            ;493
00075e  4669              MOV      r1,sp                 ;494
000760  f105001c          ADD      r0,r5,#0x1c           ;494
000764  f7fffffe          BL       lc640_write_long_ptr
000768  e085              B        |L1.2166|
                  |L1.1898|
;;;511    	{
;;;512    	uout_av=0;
00076a  f8818000          STRB     r8,[r1,#0]
;;;513    
;;;514      /*
;;;515    	SET_REG(C2GSR,3,24,8);
;;;516    	C2MOD=0;
;;;517    	bOUT_FREE2=1;*/
;;;518    
;;;519    
;;;520    	//C2MOD=0;
;;;521    
;;;522    	//can2_init(7,8,CANBitrate250k_60MHz);
;;;523    
;;;524         //beep_init(0x02L,'O');
;;;525    	//a_.av.bAN=0;
;;;526    //	SET_REG(avar_stat,0,0,1);
;;;527    
;;;528    	//if(AV_OFF_AVT)a.av.bAN=0;
;;;529    	
;;;530    	//if(AV_OFF_AVT) SET_REG(avar_ind_stat,0,0,1);
;;;531    
;;;532        event_ptr=lc640_read_int(PTR_EVENT_LOG);
00076e  4628              MOV      r0,r5
000770  f7fffffe          BL       lc640_read_int
000774  4606              MOV      r6,r0
;;;533    	event_ptr_find=event_ptr;
000776  4634              MOV      r4,r6
                  |L1.1912|
;;;534    avar_uout_hndl_lbl1:
;;;535    	lc640_adr=EVENT_LOG+(event_ptr_find*32);
000778  eb091544          ADD      r5,r9,r4,LSL #5
;;;536    
;;;537         lc640_read_long_ptr(lc640_adr,data);
00077c  4669              MOV      r1,sp
00077e  4628              MOV      r0,r5
000780  f7fffffe          BL       lc640_read_long_ptr
;;;538         
;;;539         if(!((data[0]=='Q')&&(data[1]==0)&&(data[2]=='A')))
000784  f89d0000          LDRB     r0,[sp,#0]
000788  2851              CMP      r0,#0x51
00078a  d106              BNE      |L1.1946|
00078c  f89d0001          LDRB     r0,[sp,#1]
000790  b918              CBNZ     r0,|L1.1946|
000792  f89d0002          LDRB     r0,[sp,#2]
000796  2841              CMP      r0,#0x41
000798  d008              BEQ      |L1.1964|
                  |L1.1946|
;;;540         	{        
;;;541         	if(event_ptr_find)event_ptr_find--;
00079a  b114              CBZ      r4,|L1.1954|
00079c  f1a40401          SUB      r4,r4,#1
0007a0  e001              B        |L1.1958|
                  |L1.1954|
;;;542         	else event_ptr_find=63;
0007a2  f04f043f          MOV      r4,#0x3f
                  |L1.1958|
;;;543         	if(event_ptr_find==event_ptr)goto avar_unet_hndl_end;
0007a6  42b4              CMP      r4,r6
0007a8  d1e6              BNE      |L1.1912|
0007aa  e064              B        |L1.2166|
                  |L1.1964|
;;;544         	else goto avar_uout_hndl_lbl1;
;;;545         	}
;;;546         else 
;;;547         	{
;;;548         	lc640_read_long_ptr(lc640_adr+16,data);
0007ac  4669              MOV      r1,sp
0007ae  f1050010          ADD      r0,r5,#0x10
0007b2  f7fffffe          BL       lc640_read_long_ptr
;;;549         	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
0007b6  f89d0000          LDRB     r0,[sp,#0]
0007ba  2841              CMP      r0,#0x41
0007bc  d10b              BNE      |L1.2006|
0007be  f89d0001          LDRB     r0,[sp,#1]
0007c2  2841              CMP      r0,#0x41
0007c4  d107              BNE      |L1.2006|
0007c6  f89d0002          LDRB     r0,[sp,#2]
0007ca  2841              CMP      r0,#0x41
0007cc  d103              BNE      |L1.2006|
0007ce  f89d0003          LDRB     r0,[sp,#3]
0007d2  2841              CMP      r0,#0x41
0007d4  d008              BEQ      |L1.2024|
                  |L1.2006|
;;;550         		{        
;;;551         		if(event_ptr_find)event_ptr_find--;
0007d6  b114              CBZ      r4,|L1.2014|
0007d8  f1a40401          SUB      r4,r4,#1
0007dc  e001              B        |L1.2018|
                  |L1.2014|
;;;552             		else event_ptr_find=63;
0007de  f04f043f          MOV      r4,#0x3f
                  |L1.2018|
;;;553             		if(event_ptr_find==event_ptr)goto avar_unet_hndl_end;
0007e2  42b4              CMP      r4,r6
0007e4  d1c8              BNE      |L1.1912|
0007e6  e046              B        |L1.2166|
                  |L1.2024|
;;;554         		else goto avar_uout_hndl_lbl1;
;;;555         		}
;;;556    
;;;557         	}	
;;;558    	
;;;559    	data[0]=LPC_RTC->YEAR;
0007e8  f1070720          ADD      r7,r7,#0x20
0007ec  8bb8              LDRH     r0,[r7,#0x1c]
0007ee  f88d0000          STRB     r0,[sp,#0]
;;;560    	data[1]=LPC_RTC->MONTH;
0007f2  7e38              LDRB     r0,[r7,#0x18]
0007f4  f88d0001          STRB     r0,[sp,#1]
;;;561    	data[2]=LPC_RTC->DOM;
0007f8  7b38              LDRB     r0,[r7,#0xc]
0007fa  f88d0002          STRB     r0,[sp,#2]
;;;562    	data[3]=0;
0007fe  f88d8003          STRB     r8,[sp,#3]
;;;563    	lc640_write_long_ptr(lc640_adr+16,data);
000802  4669              MOV      r1,sp
000804  f1050010          ADD      r0,r5,#0x10
000808  f7fffffe          BL       lc640_write_long_ptr
;;;564    
;;;565    	data[0]=LPC_RTC->HOUR;
00080c  7a38              LDRB     r0,[r7,#8]
00080e  f88d0000          STRB     r0,[sp,#0]
;;;566    	data[1]=LPC_RTC->MIN;
000812  7938              LDRB     r0,[r7,#4]
000814  f88d0001          STRB     r0,[sp,#1]
;;;567    	data[2]=LPC_RTC->SEC;
000818  7838              LDRB     r0,[r7,#0]
00081a  f88d0002          STRB     r0,[sp,#2]
;;;568    	data[3]=0;
00081e  f88d8003          STRB     r8,[sp,#3]
;;;569    	lc640_write_long_ptr(lc640_adr+20,data); 
000822  4669              MOV      r1,sp
000824  f1050014          ADD      r0,r5,#0x14
000828  f7fffffe          BL       lc640_write_long_ptr
;;;570    	
;;;571    	data[0]=*((char*)(&net_Ustore));
00082c  482f              LDR      r0,|L1.2284|
00082e  7801              LDRB     r1,[r0,#0]  ; net_Ustore
000830  f88d1000          STRB     r1,[sp,#0]
;;;572    	data[1]=*(((char*)(&net_Ustore))+1);
000834  7840              LDRB     r0,[r0,#1]  ; net_Ustore
000836  f88d0001          STRB     r0,[sp,#1]
;;;573    	data[2]='B';
00083a  f04f0442          MOV      r4,#0x42
00083e  f88d4002          STRB     r4,[sp,#2]
;;;574    	data[3]='B';
000842  f88d4003          STRB     r4,[sp,#3]
;;;575    	lc640_write_long_ptr(lc640_adr+24,data);
000846  4669              MOV      r1,sp
000848  f1050018          ADD      r0,r5,#0x18
00084c  f7fffffe          BL       lc640_write_long_ptr
;;;576    	
;;;577    	data[0]='B';
000850  f88d4000          STRB     r4,[sp,#0]
;;;578    	data[1]='B';
000854  f88d4001          STRB     r4,[sp,#1]
;;;579    	data[2]='B';
000858  f88d4002          STRB     r4,[sp,#2]
;;;580    	data[3]='B';
00085c  f88d4003          STRB     r4,[sp,#3]
;;;581    	lc640_write_long_ptr(lc640_adr+28,data);	
000860  4669              MOV      r1,sp
000862  f105001c          ADD      r0,r5,#0x1c
000866  f7fffffe          BL       lc640_write_long_ptr
;;;582    	
;;;583    /*	memo_out0[0]=0x55;
;;;584         memo_out0[1]=0x00+2;
;;;585         memo_out0[2]=1;
;;;586         memo_out0[3]=0x0b;
;;;587         memo_out0[4]=0xaa;
;;;588         memo_out0[5]=0xaa; 
;;;589         	
;;;590         memo_out0[6]=crc_87(memo_out0,6);
;;;591    	memo_out0[7]=crc_95(memo_out0,6);
;;;592         usart_out_adr0(memo_out0,8); */
;;;593         snmp_trap_send("Main power is on",2,1,1);	
00086a  2301              MOVS     r3,#1
00086c  461a              MOV      r2,r3
00086e  2102              MOVS     r1,#2
000870  a02a              ADR      r0,|L1.2332|
000872  f7fffffe          BL       snmp_trap_send
                  |L1.2166|
;;;594    	}
;;;595    avar_unet_hndl_end:
;;;596    	__nop();		
000876  bf00              NOP      
;;;597    }
000878  e6c5              B        |L1.1542|
;;;598    
                          ENDP

                  avar_bps_hndl PROC
;;;599    //-----------------------------------------------
;;;600    void avar_bps_hndl(char dev, char v, char in)
00087a  e92d4ff8          PUSH     {r3-r11,lr}
;;;601    {
00087e  4606              MOV      r6,r0
000880  460c              MOV      r4,r1
;;;602    char data[4];
;;;603    unsigned short event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;604    char avar_simbol;
;;;605    
;;;606    avar_simbol='T';
000882  f04f0754          MOV      r7,#0x54
;;;607    if(v==0)avar_simbol='T';
000886  b174              CBZ      r4,|L1.2214|
;;;608    else if(v==1)avar_simbol='U';
000888  2c01              CMP      r4,#1
00088a  d004              BEQ      |L1.2198|
;;;609    else if(v==2)avar_simbol='u';
00088c  2c02              CMP      r4,#2
00088e  d005              BEQ      |L1.2204|
;;;610    else if(v==3)avar_simbol='L';
000890  2c03              CMP      r4,#3
000892  d006              BEQ      |L1.2210|
000894  e007              B        |L1.2214|
                  |L1.2198|
000896  f04f0755          MOV      r7,#0x55              ;608
00089a  e004              B        |L1.2214|
                  |L1.2204|
00089c  f04f0775          MOV      r7,#0x75              ;609
0008a0  e001              B        |L1.2214|
                  |L1.2210|
0008a2  f04f074c          MOV      r7,#0x4c
                  |L1.2214|
;;;611    
;;;612    if(in==1)
;;;613    	{
;;;614    	//av_src[bps]=1;
;;;615    
;;;616    //	SET_REG(avar_ind_stat,1,3+dev,1);
;;;617    //	SET_REG(avar_stat,1,3+dev,1);
;;;618    	
;;;619    	if(v==0)bps[dev]._av|=(1<<0);
0008a6  4822              LDR      r0,|L1.2352|
0008a8  ebc601c6          RSB      r1,r6,r6,LSL #3
;;;620    	else if(v==1) bps[dev]._av|=(1<<1);
;;;621    	else if(v==2) bps[dev]._av|=(1<<2);
;;;622    	else if(v==3) bps[dev]._av|=(1<<3);
;;;623    
;;;624    	bps[dev]._last_avar=v;
;;;625    
;;;626    	//beep_init(0x33333333,'A');
;;;627    
;;;628    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;629    	event_ptr++;	
;;;630    	if(event_ptr>63)event_ptr=0;	
;;;631    	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;632    	
;;;633         event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;634    	if(event_cnt!=63)event_cnt=event_ptr;
;;;635    	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;636    	
;;;637    	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;638    	
;;;639    	data[0]='S';
;;;640    	data[1]=dev; 
;;;641    	data[2]=avar_simbol;
;;;642    	data[3]=0;
;;;643    	lc640_write_long_ptr(lc640_adr,data);
;;;644    
;;;645    	data[0]=0;
;;;646    	data[1]=0;
;;;647    	data[2]=0;
;;;648    	data[3]=0;
;;;649    	lc640_write_long_ptr(lc640_adr+4,data);
;;;650    
;;;651    	data[0]=LPC_RTC->YEAR;
0008ac  f8df8058          LDR      r8,|L1.2312|
0008b0  eb011106          ADD      r1,r1,r6,LSL #4       ;619
0008b4  f04f0900          MOV      r9,#0                 ;601
0008b8  f44f6a60          MOV      r10,#0xe00            ;628
0008bc  f44f6580          MOV      r5,#0x400             ;637
0008c0  eb000081          ADD      r0,r0,r1,LSL #2       ;619
0008c4  2a01              CMP      r2,#1                 ;612
0008c6  d035              BEQ      |L1.2356|
;;;652    	data[1]=LPC_RTC->MONTH;
;;;653    	data[2]=LPC_RTC->DOM;
;;;654    	data[3]=0;
;;;655    	lc640_write_long_ptr(lc640_adr+8,data);
;;;656    
;;;657    	data[0]=LPC_RTC->HOUR;
;;;658    	data[1]=LPC_RTC->MIN;
;;;659    	data[2]=LPC_RTC->SEC;
;;;660    	data[3]=0;
;;;661    	lc640_write_long_ptr(lc640_adr+12,data);
;;;662    	
;;;663    	data[0]='A';
;;;664    	data[1]='A';
;;;665    	data[2]='A';
;;;666    	data[3]='A';
;;;667    	lc640_write_long_ptr(lc640_adr+16,data);
;;;668    	
;;;669    	data[0]='A';
;;;670    	data[1]='A';
;;;671    	data[2]='A';
;;;672    	data[3]='A';
;;;673    	lc640_write_long_ptr(lc640_adr+20,data);
;;;674    	
;;;675    	data[0]='A';
;;;676    	data[1]='A';
;;;677    	data[2]='A';
;;;678    	data[3]='A';
;;;679    	lc640_write_long_ptr(lc640_adr+24,data);
;;;680    	
;;;681    	data[0]='A';
;;;682    	data[1]='A';
;;;683    	data[2]='A';
;;;684    	data[3]='A';
;;;685    	lc640_write_long_ptr(lc640_adr+28,data);		
;;;686    
;;;687    
;;;688    	if(dev==0)
;;;689    		{
;;;690    		if(v==0)
;;;691    		snmp_trap_send("BPS #1 Alarm, overheat",4,1,0);
;;;692    		else if(v==1)
;;;693    		snmp_trap_send("BPS #1 Alarm, voltage is up",4,1,1);
;;;694    		else if(v==2)
;;;695    		snmp_trap_send("BPS #1 Alarm, voltage is down",4,1,2);
;;;696    		else if(v==3)
;;;697    		snmp_trap_send("BPS #1 Alarm, connect is lost",4,1,3);
;;;698    		}
;;;699    	else if(dev==1)
;;;700    		{
;;;701    		if(v==0)
;;;702    		snmp_trap_send("BPS #2 Alarm, overheat",4,2,0);
;;;703    		else if(v==1)
;;;704    		snmp_trap_send("BPS #2 Alarm, voltage is up",4,2,1);
;;;705    		else if(v==2)
;;;706    		snmp_trap_send("BPS #2 Alarm, voltage is down",4,2,2);
;;;707    		else if(v==3)
;;;708    		snmp_trap_send("BPS #2 Alarm, connect is lost",4,2,3);
;;;709    		} 
;;;710    	else if(dev==2)
;;;711    		{
;;;712    		if(v==0)
;;;713    		snmp_trap_send("BPS #3 Alarm, overheat",4,3,0);
;;;714    		else if(v==1)
;;;715    		snmp_trap_send("BPS #3 Alarm, voltage is up",4,3,1);
;;;716    		else if(v==2)
;;;717    		snmp_trap_send("BPS #3 Alarm, voltage is down",4,3,2);
;;;718    		else if(v==3)
;;;719    		snmp_trap_send("BPS #3 Alarm, connect is lost",4,3,3);
;;;720    		} 	
;;;721    			
;;;722    	}
;;;723    
;;;724    else if(in==0)
0008c8  2a00              CMP      r2,#0
0008ca  d07d              BEQ      |L1.2504|
0008cc  e1f7              B        |L1.3262|
0008ce  0000              DCW      0x0000
                  |L1.2256|
0008d0  4d61696e          DCB      "Main power alarm",0
0008d4  20706f77
0008d8  65722061
0008dc  6c61726d
0008e0  00      
0008e1  00                DCB      0
0008e2  00                DCB      0
0008e3  00                DCB      0
                  |L1.2276|
                          DCD      ||.data||
                  |L1.2280|
                          DCD      AV_OFF_AVT
                  |L1.2284|
                          DCD      net_Ustore
                  |L1.2288|
0008f0  4d61696e          DCB      "Main power alarm  clear",0
0008f4  20706f77
0008f8  65722061
0008fc  6c61726d
000900  2020636c
000904  65617200
                  |L1.2312|
                          DCD      0x40024000
                  |L1.2316|
                          DCD      uout_av
                  |L1.2320|
                          DCD      load_U
                  |L1.2324|
                          DCD      U_OUT_KONTR_MAX
                  |L1.2328|
                          DCD      U_OUT_KONTR_MIN
                  |L1.2332|
00091c  4d61696e          DCB      "Main power is on",0
000920  20706f77
000924  65722069
000928  73206f6e
00092c  00      
00092d  00                DCB      0
00092e  00                DCB      0
00092f  00                DCB      0
                  |L1.2352|
                          DCD      bps
                  |L1.2356|
000934  b134              CBZ      r4,|L1.2372|
000936  2c01              CMP      r4,#1                 ;620
000938  d009              BEQ      |L1.2382|
00093a  2c02              CMP      r4,#2                 ;621
00093c  d00c              BEQ      |L1.2392|
00093e  2c03              CMP      r4,#3                 ;622
000940  d00f              BEQ      |L1.2402|
000942  e012              B        |L1.2410|
                  |L1.2372|
000944  7841              LDRB     r1,[r0,#1]            ;619
000946  f0410101          ORR      r1,r1,#1              ;619
00094a  7041              STRB     r1,[r0,#1]            ;619
00094c  e00d              B        |L1.2410|
                  |L1.2382|
00094e  7841              LDRB     r1,[r0,#1]            ;620
000950  f0410102          ORR      r1,r1,#2              ;620
000954  7041              STRB     r1,[r0,#1]            ;620
000956  e008              B        |L1.2410|
                  |L1.2392|
000958  7841              LDRB     r1,[r0,#1]            ;621
00095a  f0410104          ORR      r1,r1,#4              ;621
00095e  7041              STRB     r1,[r0,#1]            ;621
000960  e003              B        |L1.2410|
                  |L1.2402|
000962  7841              LDRB     r1,[r0,#1]            ;622
000964  f0410108          ORR      r1,r1,#8              ;622
000968  7041              STRB     r1,[r0,#1]            ;622
                  |L1.2410|
00096a  f8804053          STRB     r4,[r0,#0x53]         ;624
00096e  4650              MOV      r0,r10                ;628
000970  f7fffffe          BL       lc640_read_int
000974  f1000001          ADD      r0,r0,#1              ;629
000978  fa1ffb80          UXTH     r11,r0                ;629
00097c  f1bb0f3f          CMP      r11,#0x3f             ;630
000980  d901              BLS      |L1.2438|
000982  f04f0b00          MOV      r11,#0                ;630
                  |L1.2438|
000986  fa0ff18b          SXTH     r1,r11                ;631
00098a  4650              MOV      r0,r10                ;631
00098c  f7fffffe          BL       lc640_write_int
000990  f6406002          MOV      r0,#0xe02             ;633
000994  f7fffffe          BL       lc640_read_int
000998  b280              UXTH     r0,r0                 ;633
00099a  283f              CMP      r0,#0x3f              ;634
00099c  d000              BEQ      |L1.2464|
00099e  4658              MOV      r0,r11                ;634
                  |L1.2464|
0009a0  b201              SXTH     r1,r0                 ;635
0009a2  f6406002          MOV      r0,#0xe02             ;635
0009a6  f7fffffe          BL       lc640_write_int
0009aa  4650              MOV      r0,r10                ;637
0009ac  f7fffffe          BL       lc640_read_int
0009b0  eb051040          ADD      r0,r5,r0,LSL #5       ;637
0009b4  b285              UXTH     r5,r0                 ;637
0009b6  f04f0053          MOV      r0,#0x53              ;639
0009ba  f88d0000          STRB     r0,[sp,#0]            ;639
0009be  f88d6001          STRB     r6,[sp,#1]            ;640
0009c2  f88d7002          STRB     r7,[sp,#2]            ;641
0009c6  e000              B        |L1.2506|
                  |L1.2504|
0009c8  e0d9              B        |L1.2942|
                  |L1.2506|
0009ca  f88d9003          STRB     r9,[sp,#3]            ;642
0009ce  4669              MOV      r1,sp                 ;643
0009d0  4628              MOV      r0,r5                 ;643
0009d2  f7fffffe          BL       lc640_write_long_ptr
0009d6  f8cd9000          STR      r9,[sp,#0]            ;648
0009da  4669              MOV      r1,sp                 ;649
0009dc  1d28              ADDS     r0,r5,#4              ;649
0009de  f7fffffe          BL       lc640_write_long_ptr
0009e2  f8b8003c          LDRH     r0,[r8,#0x3c]         ;651
0009e6  f88d0000          STRB     r0,[sp,#0]            ;651
0009ea  f8980038          LDRB     r0,[r8,#0x38]         ;652
0009ee  f88d0001          STRB     r0,[sp,#1]            ;652
0009f2  f898002c          LDRB     r0,[r8,#0x2c]         ;653
0009f6  f88d0002          STRB     r0,[sp,#2]            ;653
0009fa  f88d9003          STRB     r9,[sp,#3]            ;654
0009fe  4669              MOV      r1,sp                 ;655
000a00  f1050008          ADD      r0,r5,#8              ;655
000a04  f7fffffe          BL       lc640_write_long_ptr
000a08  f8980028          LDRB     r0,[r8,#0x28]         ;657
000a0c  f88d0000          STRB     r0,[sp,#0]            ;657
000a10  f8980024          LDRB     r0,[r8,#0x24]         ;658
000a14  f88d0001          STRB     r0,[sp,#1]            ;658
000a18  f8980020          LDRB     r0,[r8,#0x20]         ;659
000a1c  f88d0002          STRB     r0,[sp,#2]            ;659
000a20  f88d9003          STRB     r9,[sp,#3]            ;660
000a24  4669              MOV      r1,sp                 ;661
000a26  f105000c          ADD      r0,r5,#0xc            ;661
000a2a  f7fffffe          BL       lc640_write_long_ptr
000a2e  f04f0741          MOV      r7,#0x41              ;663
000a32  f88d7000          STRB     r7,[sp,#0]            ;663
000a36  f88d7001          STRB     r7,[sp,#1]            ;664
000a3a  f88d7002          STRB     r7,[sp,#2]            ;665
000a3e  f88d7003          STRB     r7,[sp,#3]            ;666
000a42  4669              MOV      r1,sp                 ;667
000a44  f1050010          ADD      r0,r5,#0x10           ;667
000a48  f7fffffe          BL       lc640_write_long_ptr
000a4c  f88d7000          STRB     r7,[sp,#0]            ;669
000a50  f88d7001          STRB     r7,[sp,#1]            ;670
000a54  f88d7002          STRB     r7,[sp,#2]            ;671
000a58  f88d7003          STRB     r7,[sp,#3]            ;672
000a5c  4669              MOV      r1,sp                 ;673
000a5e  f1050014          ADD      r0,r5,#0x14           ;673
000a62  f7fffffe          BL       lc640_write_long_ptr
000a66  f88d7000          STRB     r7,[sp,#0]            ;675
000a6a  f88d7001          STRB     r7,[sp,#1]            ;676
000a6e  f88d7002          STRB     r7,[sp,#2]            ;677
000a72  f88d7003          STRB     r7,[sp,#3]            ;678
000a76  4669              MOV      r1,sp                 ;679
000a78  f1050018          ADD      r0,r5,#0x18           ;679
000a7c  f7fffffe          BL       lc640_write_long_ptr
000a80  f88d7000          STRB     r7,[sp,#0]            ;681
000a84  f88d7001          STRB     r7,[sp,#1]            ;682
000a88  f88d7002          STRB     r7,[sp,#2]            ;683
000a8c  f88d7003          STRB     r7,[sp,#3]            ;684
000a90  4669              MOV      r1,sp                 ;685
000a92  f105001c          ADD      r0,r5,#0x1c           ;685
000a96  f7fffffe          BL       lc640_write_long_ptr
000a9a  b126              CBZ      r6,|L1.2726|
000a9c  2e01              CMP      r6,#1                 ;699
000a9e  d026              BEQ      |L1.2798|
000aa0  2e02              CMP      r6,#2                 ;710
000aa2  d048              BEQ      |L1.2870|
000aa4  e10b              B        |L1.3262|
                  |L1.2726|
000aa6  b134              CBZ      r4,|L1.2742|
000aa8  2c01              CMP      r4,#1                 ;692
000aaa  d00b              BEQ      |L1.2756|
000aac  2c02              CMP      r4,#2                 ;694
000aae  d010              BEQ      |L1.2770|
000ab0  2c03              CMP      r4,#3                 ;696
000ab2  d015              BEQ      |L1.2784|
000ab4  e103              B        |L1.3262|
                  |L1.2742|
000ab6  2300              MOVS     r3,#0                 ;691
000ab8  2201              MOVS     r2,#1                 ;691
000aba  2104              MOVS     r1,#4                 ;691
000abc  a0d7              ADR      r0,|L1.3612|
000abe  f7fffffe          BL       snmp_trap_send
000ac2  e0fc              B        |L1.3262|
                  |L1.2756|
000ac4  2301              MOVS     r3,#1                 ;693
000ac6  461a              MOV      r2,r3                 ;693
000ac8  2104              MOVS     r1,#4                 ;693
000aca  a0da              ADR      r0,|L1.3636|
000acc  f7fffffe          BL       snmp_trap_send
000ad0  e0f5              B        |L1.3262|
                  |L1.2770|
000ad2  2302              MOVS     r3,#2                 ;695
000ad4  2201              MOVS     r2,#1                 ;695
000ad6  2104              MOVS     r1,#4                 ;695
000ad8  a0dd              ADR      r0,|L1.3664|
000ada  f7fffffe          BL       snmp_trap_send
000ade  e0ee              B        |L1.3262|
                  |L1.2784|
000ae0  2303              MOVS     r3,#3                 ;697
000ae2  2201              MOVS     r2,#1                 ;697
000ae4  2104              MOVS     r1,#4                 ;697
000ae6  a0e2              ADR      r0,|L1.3696|
000ae8  f7fffffe          BL       snmp_trap_send
000aec  e0e7              B        |L1.3262|
                  |L1.2798|
000aee  b134              CBZ      r4,|L1.2814|
000af0  2c01              CMP      r4,#1                 ;703
000af2  d00b              BEQ      |L1.2828|
000af4  2c02              CMP      r4,#2                 ;705
000af6  d010              BEQ      |L1.2842|
000af8  2c03              CMP      r4,#3                 ;707
000afa  d015              BEQ      |L1.2856|
000afc  e0df              B        |L1.3262|
                  |L1.2814|
000afe  2300              MOVS     r3,#0                 ;702
000b00  2202              MOVS     r2,#2                 ;702
000b02  2104              MOVS     r1,#4                 ;702
000b04  a0e2              ADR      r0,|L1.3728|
000b06  f7fffffe          BL       snmp_trap_send
000b0a  e0d8              B        |L1.3262|
                  |L1.2828|
000b0c  2301              MOVS     r3,#1                 ;704
000b0e  2202              MOVS     r2,#2                 ;704
000b10  2104              MOVS     r1,#4                 ;704
000b12  a0e5              ADR      r0,|L1.3752|
000b14  f7fffffe          BL       snmp_trap_send
000b18  e0d1              B        |L1.3262|
                  |L1.2842|
000b1a  2302              MOVS     r3,#2                 ;706
000b1c  461a              MOV      r2,r3                 ;706
000b1e  2104              MOVS     r1,#4                 ;706
000b20  a0e8              ADR      r0,|L1.3780|
000b22  f7fffffe          BL       snmp_trap_send
000b26  e0ca              B        |L1.3262|
                  |L1.2856|
000b28  2303              MOVS     r3,#3                 ;708
000b2a  2202              MOVS     r2,#2                 ;708
000b2c  2104              MOVS     r1,#4                 ;708
000b2e  a0ed              ADR      r0,|L1.3812|
000b30  f7fffffe          BL       snmp_trap_send
000b34  e0c3              B        |L1.3262|
                  |L1.2870|
000b36  b134              CBZ      r4,|L1.2886|
000b38  2c01              CMP      r4,#1                 ;714
000b3a  d00b              BEQ      |L1.2900|
000b3c  2c02              CMP      r4,#2                 ;716
000b3e  d010              BEQ      |L1.2914|
000b40  2c03              CMP      r4,#3                 ;718
000b42  d015              BEQ      |L1.2928|
000b44  e0bb              B        |L1.3262|
                  |L1.2886|
000b46  2300              MOVS     r3,#0                 ;713
000b48  2203              MOVS     r2,#3                 ;713
000b4a  2104              MOVS     r1,#4                 ;713
000b4c  a0ed              ADR      r0,|L1.3844|
000b4e  f7fffffe          BL       snmp_trap_send
000b52  e0b4              B        |L1.3262|
                  |L1.2900|
000b54  2301              MOVS     r3,#1                 ;715
000b56  2203              MOVS     r2,#3                 ;715
000b58  2104              MOVS     r1,#4                 ;715
000b5a  a0f0              ADR      r0,|L1.3868|
000b5c  f7fffffe          BL       snmp_trap_send
000b60  e0ad              B        |L1.3262|
                  |L1.2914|
000b62  2302              MOVS     r3,#2                 ;717
000b64  2203              MOVS     r2,#3                 ;717
000b66  2104              MOVS     r1,#4                 ;717
000b68  a0f3              ADR      r0,|L1.3896|
000b6a  f7fffffe          BL       snmp_trap_send
000b6e  e0a6              B        |L1.3262|
                  |L1.2928|
000b70  2303              MOVS     r3,#3                 ;719
000b72  461a              MOV      r2,r3                 ;719
000b74  2104              MOVS     r1,#4                 ;719
000b76  a0f8              ADR      r0,|L1.3928|
000b78  f7fffffe          BL       snmp_trap_send
000b7c  e09f              B        |L1.3262|
                  |L1.2942|
;;;725    	{      
;;;726    //	av_bps[bps]=0;
;;;727    
;;;728    	//SET_REG(avar_stat,0,3+bps,1);
;;;729    	//if(AV_OFF_AVT) SET_REG(avar_ind_stat,0,3+bps,1);
;;;730    
;;;731         if(v==0) bps[dev]._av&=(~(1<<0));
000b7e  b134              CBZ      r4,|L1.2958|
;;;732         else if(v==1) bps[dev]._av&=(~(1<<1));
000b80  2c01              CMP      r4,#1
000b82  d009              BEQ      |L1.2968|
;;;733    	else if(v==2) bps[dev]._av&=(~(1<<2));
000b84  2c02              CMP      r4,#2
000b86  d00c              BEQ      |L1.2978|
;;;734    	else if(v==3) bps[dev]._av&=(~(1<<3));
000b88  2c03              CMP      r4,#3
000b8a  d00f              BEQ      |L1.2988|
000b8c  e012              B        |L1.2996|
                  |L1.2958|
000b8e  7841              LDRB     r1,[r0,#1]            ;731
000b90  f0210101          BIC      r1,r1,#1              ;731
000b94  7041              STRB     r1,[r0,#1]            ;731
000b96  e00d              B        |L1.2996|
                  |L1.2968|
000b98  7841              LDRB     r1,[r0,#1]            ;732
000b9a  f0210102          BIC      r1,r1,#2              ;732
000b9e  7041              STRB     r1,[r0,#1]            ;732
000ba0  e008              B        |L1.2996|
                  |L1.2978|
000ba2  7841              LDRB     r1,[r0,#1]            ;733
000ba4  f0210104          BIC      r1,r1,#4              ;733
000ba8  7041              STRB     r1,[r0,#1]            ;733
000baa  e003              B        |L1.2996|
                  |L1.2988|
000bac  7841              LDRB     r1,[r0,#1]
000bae  f0210108          BIC      r1,r1,#8
000bb2  7041              STRB     r1,[r0,#1]
                  |L1.2996|
;;;735         
;;;736    //	if((bps[dev]._av&0x0f==0))
;;;737    //	     {
;;;738    		//SET_REG(avar_stat,0,3+bps,1);
;;;739    		//if(AV_OFF_AVT) SET_REG(avar_ind_stat,0,3+bps,1);
;;;740    //	     }
;;;741     
;;;742    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
000bb4  4650              MOV      r0,r10
000bb6  f7fffffe          BL       lc640_read_int
000bba  fa1ffb80          UXTH     r11,r0
;;;743    	event_ptr_find=event_ptr;
000bbe  465c              MOV      r4,r11
                  |L1.3008|
;;;744    	
;;;745    avar_src_hndl_lbl1: 
;;;746    
;;;747    	lc640_adr=EVENT_LOG+(event_ptr_find*32);
000bc0  eb051044          ADD      r0,r5,r4,LSL #5
000bc4  fa1ffa80          UXTH     r10,r0
;;;748    
;;;749         lc640_read_long_ptr(lc640_adr,data);
000bc8  4669              MOV      r1,sp
000bca  4650              MOV      r0,r10
000bcc  f7fffffe          BL       lc640_read_long_ptr
;;;750         
;;;751         if(!((data[0]=='S')&&(data[1]==dev)&&(data[2]==avar_simbol)))
000bd0  f89d0000          LDRB     r0,[sp,#0]
000bd4  2853              CMP      r0,#0x53
000bd6  d107              BNE      |L1.3048|
000bd8  f89d0001          LDRB     r0,[sp,#1]
000bdc  42b0              CMP      r0,r6
000bde  d103              BNE      |L1.3048|
000be0  f89d0002          LDRB     r0,[sp,#2]
000be4  42b8              CMP      r0,r7
000be6  d009              BEQ      |L1.3068|
                  |L1.3048|
;;;752         	{        
;;;753         	if(event_ptr_find)event_ptr_find--;
000be8  b11c              CBZ      r4,|L1.3058|
000bea  f1a40401          SUB      r4,r4,#1
000bee  b2a4              UXTH     r4,r4
000bf0  e001              B        |L1.3062|
                  |L1.3058|
;;;754         	else event_ptr_find=63;
000bf2  f04f043f          MOV      r4,#0x3f
                  |L1.3062|
;;;755         	if(event_ptr_find==event_ptr)goto avar_src_hndl_end;
000bf6  455c              CMP      r4,r11
000bf8  d1e2              BNE      |L1.3008|
000bfa  e060              B        |L1.3262|
                  |L1.3068|
;;;756         	else goto avar_src_hndl_lbl1;
;;;757         	}
;;;758         else 
;;;759         	{
;;;760         	lc640_read_long_ptr(lc640_adr+16,data);
000bfc  4669              MOV      r1,sp
000bfe  f10a0010          ADD      r0,r10,#0x10
000c02  f7fffffe          BL       lc640_read_long_ptr
;;;761         	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
000c06  f89d0000          LDRB     r0,[sp,#0]
000c0a  2841              CMP      r0,#0x41
000c0c  d10b              BNE      |L1.3110|
000c0e  f89d0001          LDRB     r0,[sp,#1]
000c12  2841              CMP      r0,#0x41
000c14  d107              BNE      |L1.3110|
000c16  f89d0002          LDRB     r0,[sp,#2]
000c1a  2841              CMP      r0,#0x41
000c1c  d103              BNE      |L1.3110|
000c1e  f89d0003          LDRB     r0,[sp,#3]
000c22  2841              CMP      r0,#0x41
000c24  d009              BEQ      |L1.3130|
                  |L1.3110|
;;;762         		{        
;;;763         		if(event_ptr_find)event_ptr_find--;
000c26  b11c              CBZ      r4,|L1.3120|
000c28  f1a40401          SUB      r4,r4,#1
000c2c  b2a4              UXTH     r4,r4
000c2e  e001              B        |L1.3124|
                  |L1.3120|
;;;764             		else event_ptr_find=63;
000c30  f04f043f          MOV      r4,#0x3f
                  |L1.3124|
;;;765             		if(event_ptr_find==event_ptr)goto avar_src_hndl_end;
000c34  455c              CMP      r4,r11
000c36  d1c3              BNE      |L1.3008|
000c38  e041              B        |L1.3262|
                  |L1.3130|
;;;766         		else goto avar_src_hndl_lbl1;
;;;767         		}
;;;768    
;;;769         	}	
;;;770    
;;;771    
;;;772    	
;;;773    	data[0]=LPC_RTC->YEAR;
000c3a  f8b8003c          LDRH     r0,[r8,#0x3c]
000c3e  f88d0000          STRB     r0,[sp,#0]
;;;774    	data[1]=LPC_RTC->MONTH;
000c42  f8980038          LDRB     r0,[r8,#0x38]
000c46  f88d0001          STRB     r0,[sp,#1]
;;;775    	data[2]=LPC_RTC->DOM;
000c4a  f898002c          LDRB     r0,[r8,#0x2c]
000c4e  f88d0002          STRB     r0,[sp,#2]
;;;776    	data[3]=0;
000c52  f88d9003          STRB     r9,[sp,#3]
;;;777    	lc640_write_long_ptr(lc640_adr+16,data);
000c56  4669              MOV      r1,sp
000c58  f10a0010          ADD      r0,r10,#0x10
000c5c  f7fffffe          BL       lc640_write_long_ptr
;;;778    
;;;779    	data[0]=LPC_RTC->HOUR;
000c60  f8980028          LDRB     r0,[r8,#0x28]
000c64  f88d0000          STRB     r0,[sp,#0]
;;;780    	data[1]=LPC_RTC->MIN;
000c68  f8980024          LDRB     r0,[r8,#0x24]
000c6c  f88d0001          STRB     r0,[sp,#1]
;;;781    	data[2]=LPC_RTC->SEC;
000c70  f8980020          LDRB     r0,[r8,#0x20]
000c74  f88d0002          STRB     r0,[sp,#2]
;;;782    	data[3]=0;
000c78  f88d9003          STRB     r9,[sp,#3]
;;;783    	lc640_write_long_ptr(lc640_adr+20,data);
000c7c  4669              MOV      r1,sp
000c7e  f10a0014          ADD      r0,r10,#0x14
000c82  f7fffffe          BL       lc640_write_long_ptr
;;;784    	
;;;785    	data[0]='B';
000c86  f04f0442          MOV      r4,#0x42
000c8a  f88d4000          STRB     r4,[sp,#0]
;;;786    	data[1]='B';
000c8e  f88d4001          STRB     r4,[sp,#1]
;;;787    	data[2]='B';
000c92  f88d4002          STRB     r4,[sp,#2]
;;;788    	data[3]='B';
000c96  f88d4003          STRB     r4,[sp,#3]
;;;789    	lc640_write_long_ptr(lc640_adr+24,data);
000c9a  4669              MOV      r1,sp
000c9c  f10a0018          ADD      r0,r10,#0x18
000ca0  f7fffffe          BL       lc640_write_long_ptr
;;;790    	
;;;791    	data[0]='B';
000ca4  f88d4000          STRB     r4,[sp,#0]
;;;792    	data[1]='B';
000ca8  f88d4001          STRB     r4,[sp,#1]
;;;793    	data[2]='B';
000cac  f88d4002          STRB     r4,[sp,#2]
;;;794    	data[3]='B';
000cb0  f88d4003          STRB     r4,[sp,#3]
;;;795    	lc640_write_long_ptr(lc640_adr+28,data);
000cb4  4669              MOV      r1,sp
000cb6  f10a001c          ADD      r0,r10,#0x1c
000cba  f7fffffe          BL       lc640_write_long_ptr
                  |L1.3262|
;;;796    	
;;;797    	}
;;;798    	
;;;799    avar_src_hndl_end:
;;;800    __nop();		
000cbe  bf00              NOP      
                  |L1.3264|
;;;801    }
000cc0  e8bd8ff8          POP      {r3-r11,pc}
;;;802    
                          ENDP

                  wrk_mem_hndl PROC
;;;803    //-----------------------------------------------
;;;804    void wrk_mem_hndl(char b)
000cc4  e92d41fc          PUSH     {r2-r8,lr}
;;;805    {
000cc8  4606              MOV      r6,r0
;;;806    char data[4];
;;;807    unsigned short event_ptr,lc640_adr/*,event_ptr_find*/,event_cnt;
;;;808    
;;;809    signed short temp_temp;
;;;810    
;;;811    if(bat[b]._Iintegr_<5) goto wrk_mem_hndl_end;
000cca  eb060046          ADD      r0,r6,r6,LSL #1
000cce  eb001106          ADD      r1,r0,r6,LSL #4
000cd2  48a9              LDR      r0,|L1.3960|
000cd4  eb000481          ADD      r4,r0,r1,LSL #2
000cd8  8be0              LDRH     r0,[r4,#0x1e]
000cda  2805              CMP      r0,#5
000cdc  d37e              BCC      |L1.3548|
;;;812    
;;;813    temp_temp=bat[b]._u_old[((bat_u_old_cnt+6)&0x07)]; 
000cde  48a7              LDR      r0,|L1.3964|
000ce0  8800              LDRH     r0,[r0,#0]  ; bat_u_old_cnt
000ce2  f1000006          ADD      r0,r0,#6
000ce6  f0000007          AND      r0,r0,#7
000cea  eb040040          ADD      r0,r4,r0,LSL #1
000cee  8c00              LDRH     r0,[r0,#0x20]
000cf0  9000              STR      r0,[sp,#0]
;;;814    
;;;815    
;;;816    event_ptr=lc640_read_int(PTR_EVENT_LOG);
000cf2  f44f6760          MOV      r7,#0xe00
000cf6  4638              MOV      r0,r7
000cf8  f7fffffe          BL       lc640_read_int
;;;817    event_ptr++;	
000cfc  f1000001          ADD      r0,r0,#1
000d00  b285              UXTH     r5,r0
;;;818    if(event_ptr>63)event_ptr=0;	
000d02  2d3f              CMP      r5,#0x3f
000d04  d901              BLS      |L1.3338|
000d06  f04f0500          MOV      r5,#0
                  |L1.3338|
;;;819    lc640_write_int(PTR_EVENT_LOG,event_ptr);	
000d0a  b229              SXTH     r1,r5
000d0c  4638              MOV      r0,r7
000d0e  f7fffffe          BL       lc640_write_int
;;;820    	
;;;821    event_cnt=lc640_read_int(CNT_EVENT_LOG);
000d12  f6406802          MOV      r8,#0xe02
000d16  4640              MOV      r0,r8
000d18  f7fffffe          BL       lc640_read_int
000d1c  b280              UXTH     r0,r0
;;;822    if(event_cnt!=63)event_cnt=event_ptr;
000d1e  283f              CMP      r0,#0x3f
000d20  d000              BEQ      |L1.3364|
000d22  4628              MOV      r0,r5
                  |L1.3364|
;;;823    lc640_write_int(CNT_EVENT_LOG,event_cnt); 
000d24  b201              SXTH     r1,r0
000d26  4640              MOV      r0,r8
000d28  f7fffffe          BL       lc640_write_int
;;;824    	
;;;825    lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
000d2c  4638              MOV      r0,r7
000d2e  f7fffffe          BL       lc640_read_int
000d32  f44f6180          MOV      r1,#0x400
000d36  eb011040          ADD      r0,r1,r0,LSL #5
000d3a  b285              UXTH     r5,r0
;;;826    	
;;;827    data[0]='B';
000d3c  f04f0042          MOV      r0,#0x42
000d40  f88d0004          STRB     r0,[sp,#4]
;;;828    data[1]=b; 
000d44  f88d6005          STRB     r6,[sp,#5]
;;;829    data[2]='W';
000d48  f04f0057          MOV      r0,#0x57
000d4c  f88d0006          STRB     r0,[sp,#6]
;;;830    data[3]=0;
000d50  f04f0600          MOV      r6,#0
000d54  f88d6007          STRB     r6,[sp,#7]
;;;831    
;;;832    lc640_write_long_ptr(lc640_adr,data);
000d58  a901              ADD      r1,sp,#4
000d5a  4628              MOV      r0,r5
000d5c  f7fffffe          BL       lc640_write_long_ptr
;;;833    
;;;834    data[0]=*((char*)&bat[b]._Iintegr_);
000d60  7fa0              LDRB     r0,[r4,#0x1e]
000d62  f88d0004          STRB     r0,[sp,#4]
;;;835    data[1]=*(((char*)(&bat[b]._Iintegr_))+1);
000d66  7fe0              LDRB     r0,[r4,#0x1f]
000d68  f88d0005          STRB     r0,[sp,#5]
;;;836    data[2]=*((char*)&temp_temp);
000d6c  f89d0000          LDRB     r0,[sp,#0]
000d70  f88d0006          STRB     r0,[sp,#6]
;;;837    data[3]=*(((char*)(&temp_temp))+1);
000d74  f89d0001          LDRB     r0,[sp,#1]
000d78  f88d0007          STRB     r0,[sp,#7]
;;;838    lc640_write_long_ptr(lc640_adr+4,data);
000d7c  a901              ADD      r1,sp,#4
000d7e  1d28              ADDS     r0,r5,#4
000d80  f7fffffe          BL       lc640_write_long_ptr
;;;839    
;;;840    lc640_write_long_ptr(lc640_adr+8,(char*)&bat[b]._wrk_date[0]);
000d84  f1040134          ADD      r1,r4,#0x34
000d88  f1050008          ADD      r0,r5,#8
000d8c  f7fffffe          BL       lc640_write_long_ptr
;;;841    	
;;;842    lc640_write_long_ptr(lc640_adr+12,(char*)&bat[b]._wrk_date[1]);
000d90  f1040138          ADD      r1,r4,#0x38
000d94  f105000c          ADD      r0,r5,#0xc
000d98  f7fffffe          BL       lc640_write_long_ptr
;;;843    
;;;844    data[0]=LPC_RTC->YEAR;
000d9c  4c78              LDR      r4,|L1.3968|
000d9e  8ba0              LDRH     r0,[r4,#0x1c]
000da0  f88d0004          STRB     r0,[sp,#4]
;;;845    data[1]=LPC_RTC->MONTH;
000da4  7e20              LDRB     r0,[r4,#0x18]
000da6  f88d0005          STRB     r0,[sp,#5]
;;;846    data[2]=LPC_RTC->DOM;
000daa  7b20              LDRB     r0,[r4,#0xc]
000dac  f88d0006          STRB     r0,[sp,#6]
;;;847    data[3]=0;
000db0  f88d6007          STRB     r6,[sp,#7]
;;;848    lc640_write_long_ptr(lc640_adr+16,data);
000db4  a901              ADD      r1,sp,#4
000db6  f1050010          ADD      r0,r5,#0x10
000dba  f7fffffe          BL       lc640_write_long_ptr
;;;849    
;;;850    data[0]=LPC_RTC->HOUR;
000dbe  7a20              LDRB     r0,[r4,#8]
000dc0  f88d0004          STRB     r0,[sp,#4]
;;;851    data[1]=LPC_RTC->MIN;
000dc4  7920              LDRB     r0,[r4,#4]
000dc6  f88d0005          STRB     r0,[sp,#5]
;;;852    data[2]=LPC_RTC->SEC;
000dca  7820              LDRB     r0,[r4,#0]
000dcc  f88d0006          STRB     r0,[sp,#6]
;;;853    data[3]=0;
000dd0  f88d6007          STRB     r6,[sp,#7]
;;;854    lc640_write_long_ptr(lc640_adr+20,data);
000dd4  a901              ADD      r1,sp,#4
000dd6  f1050014          ADD      r0,r5,#0x14
000dda  e000              B        |L1.3550|
                  |L1.3548|
000ddc  e001              B        |L1.3554|
                  |L1.3550|
000dde  f7fffffe          BL       lc640_write_long_ptr
                  |L1.3554|
;;;855    	
;;;856    
;;;857    
;;;858    	
;;;859    wrk_mem_hndl_end:	
;;;860    __nop();
000de2  bf00              NOP      
;;;861    }  
000de4  e8bd81fc          POP      {r2-r8,pc}
;;;862    
                          ENDP

                  avar_bat_ips_hndl PROC
;;;864    //-----------------------------------------------
;;;865    void avar_bat_ips_hndl(char in)
000de8  e92d4ff8          PUSH     {r3-r11,lr}
;;;866    {
000dec  4602              MOV      r2,r0
;;;867    char data[4];
;;;868    unsigned short event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;869    
;;;870    if(in==1)
;;;871    	{
;;;872    	bat_ips._av|=1;
000dee  4865              LDR      r0,|L1.3972|
;;;873        ips_bat_av_stat=1;
000df0  4c65              LDR      r4,|L1.3976|
;;;874    	ips_bat_av_vzvod=1;
000df2  4b66              LDR      r3,|L1.3980|
;;;875    
;;;876    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;877    	event_ptr++;	
;;;878    	if(event_ptr>63)event_ptr=0;	
;;;879    	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;880    	
;;;881         event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;882    	if(event_cnt!=63)event_cnt=event_ptr;
;;;883    	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;884    	
;;;885    	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;886    	
;;;887    	data[0]='B';
;;;888    	data[1]=0;
;;;889    	data[2]='C';
;;;890    	data[3]=0;
;;;891    	lc640_write_long_ptr(lc640_adr,data);
;;;892    
;;;893    	data[0]=0;
;;;894    	data[1]=0;
;;;895    	data[2]=0;
;;;896    	data[3]=0;
;;;897    	lc640_write_long_ptr(lc640_adr+4,data);
;;;898    
;;;899    	data[0]=LPC_RTC->YEAR;
000df4  f8df8198          LDR      r8,|L1.3984|
000df8  f890103d          LDRB     r1,[r0,#0x3d]         ;872
000dfc  f04f0742          MOV      r7,#0x42              ;887
000e00  f44f6560          MOV      r5,#0xe00             ;876
000e04  f04f0900          MOV      r9,#0                 ;878
000e08  f44f6a80          MOV      r10,#0x400            ;885
000e0c  2a01              CMP      r2,#1                 ;870
000e0e  d002              BEQ      |L1.3606|
;;;900    	data[1]=LPC_RTC->MONTH;
;;;901    	data[2]=LPC_RTC->DOM;
;;;902    	data[3]=0;
;;;903    	lc640_write_long_ptr(lc640_adr+8,data);
;;;904    
;;;905    	data[0]=LPC_RTC->HOUR;
;;;906    	data[1]=LPC_RTC->MIN;
;;;907    	data[2]=LPC_RTC->SEC;
;;;908    	data[3]=0;
;;;909    	lc640_write_long_ptr(lc640_adr+12,data);
;;;910    	
;;;911    	data[0]='A';
;;;912    	data[1]='A';
;;;913    	data[2]='A';
;;;914    	data[3]='A';
;;;915    	lc640_write_long_ptr(lc640_adr+16,data);
;;;916    	
;;;917    	data[0]='A';
;;;918    	data[1]='A';
;;;919    	data[2]='A';
;;;920    	data[3]='A';
;;;921    	lc640_write_long_ptr(lc640_adr+20,data);
;;;922    	
;;;923    	data[0]='A';
;;;924    	data[1]='A';
;;;925    	data[2]='A';
;;;926    	data[3]='A';
;;;927    	lc640_write_long_ptr(lc640_adr+24,data);
;;;928    	
;;;929    	data[0]='A';
;;;930    	data[1]='A';
;;;931    	data[2]='A';
;;;932    	data[3]='A';
;;;933    	lc640_write_long_ptr(lc640_adr+28,data);
;;;934    					
;;;935    	snmp_trap_send("BAT 1 Alarm, lost",5,1,1);
;;;936    		
;;;937    	}
;;;938    
;;;939    else if(in==0)
000e10  2a00              CMP      r2,#0
000e12  d001              BEQ      |L1.3608|
000e14  e1e6              B        |L1.4580|
                  |L1.3606|
000e16  e0bd              B        |L1.3988|
                  |L1.3608|
000e18  e15c              B        |L1.4308|
000e1a  0000              DCW      0x0000
                  |L1.3612|
000e1c  42505320          DCB      "BPS #1 Alarm, overheat",0
000e20  23312041
000e24  6c61726d
000e28  2c206f76
000e2c  65726865
000e30  617400  
000e33  00                DCB      0
                  |L1.3636|
000e34  42505320          DCB      "BPS #1 Alarm, voltage is up",0
000e38  23312041
000e3c  6c61726d
000e40  2c20766f
000e44  6c746167
000e48  65206973
000e4c  20757000
                  |L1.3664|
000e50  42505320          DCB      "BPS #1 Alarm, voltage is down",0
000e54  23312041
000e58  6c61726d
000e5c  2c20766f
000e60  6c746167
000e64  65206973
000e68  20646f77
000e6c  6e00    
000e6e  00                DCB      0
000e6f  00                DCB      0
                  |L1.3696|
000e70  42505320          DCB      "BPS #1 Alarm, connect is lost",0
000e74  23312041
000e78  6c61726d
000e7c  2c20636f
000e80  6e6e6563
000e84  74206973
000e88  206c6f73
000e8c  7400    
000e8e  00                DCB      0
000e8f  00                DCB      0
                  |L1.3728|
000e90  42505320          DCB      "BPS #2 Alarm, overheat",0
000e94  23322041
000e98  6c61726d
000e9c  2c206f76
000ea0  65726865
000ea4  617400  
000ea7  00                DCB      0
                  |L1.3752|
000ea8  42505320          DCB      "BPS #2 Alarm, voltage is up",0
000eac  23322041
000eb0  6c61726d
000eb4  2c20766f
000eb8  6c746167
000ebc  65206973
000ec0  20757000
                  |L1.3780|
000ec4  42505320          DCB      "BPS #2 Alarm, voltage is down",0
000ec8  23322041
000ecc  6c61726d
000ed0  2c20766f
000ed4  6c746167
000ed8  65206973
000edc  20646f77
000ee0  6e00    
000ee2  00                DCB      0
000ee3  00                DCB      0
                  |L1.3812|
000ee4  42505320          DCB      "BPS #2 Alarm, connect is lost",0
000ee8  23322041
000eec  6c61726d
000ef0  2c20636f
000ef4  6e6e6563
000ef8  74206973
000efc  206c6f73
000f00  7400    
000f02  00                DCB      0
000f03  00                DCB      0
                  |L1.3844|
000f04  42505320          DCB      "BPS #3 Alarm, overheat",0
000f08  23332041
000f0c  6c61726d
000f10  2c206f76
000f14  65726865
000f18  617400  
000f1b  00                DCB      0
                  |L1.3868|
000f1c  42505320          DCB      "BPS #3 Alarm, voltage is up",0
000f20  23332041
000f24  6c61726d
000f28  2c20766f
000f2c  6c746167
000f30  65206973
000f34  20757000
                  |L1.3896|
000f38  42505320          DCB      "BPS #3 Alarm, voltage is down",0
000f3c  23332041
000f40  6c61726d
000f44  2c20766f
000f48  6c746167
000f4c  65206973
000f50  20646f77
000f54  6e00    
000f56  00                DCB      0
000f57  00                DCB      0
                  |L1.3928|
000f58  42505320          DCB      "BPS #3 Alarm, connect is lost",0
000f5c  23332041
000f60  6c61726d
000f64  2c20636f
000f68  6e6e6563
000f6c  74206973
000f70  206c6f73
000f74  7400    
000f76  00                DCB      0
000f77  00                DCB      0
                  |L1.3960|
                          DCD      bat
                  |L1.3964|
                          DCD      bat_u_old_cnt
                  |L1.3968|
                          DCD      0x40024020
                  |L1.3972|
                          DCD      bat_ips
                  |L1.3976|
                          DCD      ips_bat_av_stat
                  |L1.3980|
                          DCD      ips_bat_av_vzvod
                  |L1.3984|
                          DCD      0x40024000
                  |L1.3988|
000f94  f0410101          ORR      r1,r1,#1              ;872
000f98  f880103d          STRB     r1,[r0,#0x3d]         ;872
000f9c  f04f0001          MOV      r0,#1                 ;873
000fa0  7020              STRB     r0,[r4,#0]            ;873
000fa2  7018              STRB     r0,[r3,#0]            ;874
000fa4  4628              MOV      r0,r5                 ;876
000fa6  f7fffffe          BL       lc640_read_int
000faa  f1000001          ADD      r0,r0,#1              ;877
000fae  b284              UXTH     r4,r0                 ;877
000fb0  2c3f              CMP      r4,#0x3f              ;878
000fb2  d901              BLS      |L1.4024|
000fb4  f04f0400          MOV      r4,#0                 ;878
                  |L1.4024|
000fb8  b221              SXTH     r1,r4                 ;879
000fba  4628              MOV      r0,r5                 ;879
000fbc  f7fffffe          BL       lc640_write_int
000fc0  f6406602          MOV      r6,#0xe02             ;881
000fc4  4630              MOV      r0,r6                 ;881
000fc6  f7fffffe          BL       lc640_read_int
000fca  b281              UXTH     r1,r0                 ;881
000fcc  293f              CMP      r1,#0x3f              ;882
000fce  d000              BEQ      |L1.4050|
000fd0  4621              MOV      r1,r4                 ;882
                  |L1.4050|
000fd2  b209              SXTH     r1,r1                 ;883
000fd4  4630              MOV      r0,r6                 ;883
000fd6  f7fffffe          BL       lc640_write_int
000fda  4628              MOV      r0,r5                 ;885
000fdc  f7fffffe          BL       lc640_read_int
000fe0  eb0a1040          ADD      r0,r10,r0,LSL #5      ;885
000fe4  b284              UXTH     r4,r0                 ;885
000fe6  f88d7000          STRB     r7,[sp,#0]            ;887
000fea  f88d9001          STRB     r9,[sp,#1]            ;888
000fee  f04f0043          MOV      r0,#0x43              ;889
000ff2  f88d0002          STRB     r0,[sp,#2]            ;889
000ff6  f88d9003          STRB     r9,[sp,#3]            ;890
000ffa  4669              MOV      r1,sp                 ;891
000ffc  4620              MOV      r0,r4                 ;891
000ffe  f7fffffe          BL       lc640_write_long_ptr
001002  f8cd9000          STR      r9,[sp,#0]            ;896
001006  4669              MOV      r1,sp                 ;897
001008  1d20              ADDS     r0,r4,#4              ;897
00100a  f7fffffe          BL       lc640_write_long_ptr
00100e  f8b8003c          LDRH     r0,[r8,#0x3c]         ;899
001012  f88d0000          STRB     r0,[sp,#0]            ;899
001016  f8980038          LDRB     r0,[r8,#0x38]         ;900
00101a  f88d0001          STRB     r0,[sp,#1]            ;900
00101e  f898002c          LDRB     r0,[r8,#0x2c]         ;901
001022  f88d0002          STRB     r0,[sp,#2]            ;901
001026  f88d9003          STRB     r9,[sp,#3]            ;902
00102a  4669              MOV      r1,sp                 ;903
00102c  f1040008          ADD      r0,r4,#8              ;903
001030  f7fffffe          BL       lc640_write_long_ptr
001034  f8980028          LDRB     r0,[r8,#0x28]         ;905
001038  f88d0000          STRB     r0,[sp,#0]            ;905
00103c  f8980024          LDRB     r0,[r8,#0x24]         ;906
001040  f88d0001          STRB     r0,[sp,#1]            ;906
001044  f8980020          LDRB     r0,[r8,#0x20]         ;907
001048  f88d0002          STRB     r0,[sp,#2]            ;907
00104c  f88d9003          STRB     r9,[sp,#3]            ;908
001050  4669              MOV      r1,sp                 ;909
001052  f104000c          ADD      r0,r4,#0xc            ;909
001056  f7fffffe          BL       lc640_write_long_ptr
00105a  f04f0541          MOV      r5,#0x41              ;911
00105e  f88d5000          STRB     r5,[sp,#0]            ;911
001062  f88d5001          STRB     r5,[sp,#1]            ;912
001066  f88d5002          STRB     r5,[sp,#2]            ;913
00106a  f88d5003          STRB     r5,[sp,#3]            ;914
00106e  4669              MOV      r1,sp                 ;915
001070  f1040010          ADD      r0,r4,#0x10           ;915
001074  f7fffffe          BL       lc640_write_long_ptr
001078  f88d5000          STRB     r5,[sp,#0]            ;917
00107c  f88d5001          STRB     r5,[sp,#1]            ;918
001080  f88d5002          STRB     r5,[sp,#2]            ;919
001084  f88d5003          STRB     r5,[sp,#3]            ;920
001088  4669              MOV      r1,sp                 ;921
00108a  f1040014          ADD      r0,r4,#0x14           ;921
00108e  f7fffffe          BL       lc640_write_long_ptr
001092  f88d5000          STRB     r5,[sp,#0]            ;923
001096  f88d5001          STRB     r5,[sp,#1]            ;924
00109a  f88d5002          STRB     r5,[sp,#2]            ;925
00109e  f88d5003          STRB     r5,[sp,#3]            ;926
0010a2  4669              MOV      r1,sp                 ;927
0010a4  f1040018          ADD      r0,r4,#0x18           ;927
0010a8  f7fffffe          BL       lc640_write_long_ptr
0010ac  f88d5000          STRB     r5,[sp,#0]            ;929
0010b0  f88d5001          STRB     r5,[sp,#1]            ;930
0010b4  f88d5002          STRB     r5,[sp,#2]            ;931
0010b8  f88d5003          STRB     r5,[sp,#3]            ;932
0010bc  4669              MOV      r1,sp                 ;933
0010be  f104001c          ADD      r0,r4,#0x1c           ;933
0010c2  f7fffffe          BL       lc640_write_long_ptr
0010c6  2301              MOVS     r3,#1                 ;935
0010c8  461a              MOV      r2,r3                 ;935
0010ca  2105              MOVS     r1,#5                 ;935
0010cc  a0ff              ADR      r0,|L1.5324|
0010ce  f7fffffe          BL       snmp_trap_send
0010d2  e087              B        |L1.4580|
                  |L1.4308|
;;;940    	{
;;;941    	bat_ips._av&=~1;
0010d4  f0210101          BIC      r1,r1,#1
0010d8  f880103d          STRB     r1,[r0,#0x3d]
;;;942    	ips_bat_av_stat=0;
0010dc  f8849000          STRB     r9,[r4,#0]
;;;943    	ips_bat_av_vzvod=0;
0010e0  f8839000          STRB     r9,[r3,#0]
;;;944         
;;;945    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
0010e4  4628              MOV      r0,r5
0010e6  f7fffffe          BL       lc640_read_int
0010ea  b286              UXTH     r6,r0
;;;946    	event_ptr_find=event_ptr;
0010ec  4634              MOV      r4,r6
                  |L1.4334|
;;;947    	
;;;948    avar_bat_ips_hndl_lbl1: 
;;;949    
;;;950    	lc640_adr=EVENT_LOG+(event_ptr_find*32);
0010ee  eb0a1044          ADD      r0,r10,r4,LSL #5
0010f2  b285              UXTH     r5,r0
;;;951    
;;;952         lc640_read_long_ptr(lc640_adr,data);
0010f4  4669              MOV      r1,sp
0010f6  4628              MOV      r0,r5
0010f8  f7fffffe          BL       lc640_read_long_ptr
;;;953         
;;;954         if(!((data[0]=='B')&&(data[1]==0)&&(data[2]=='C')))
0010fc  f89d0000          LDRB     r0,[sp,#0]
001100  2842              CMP      r0,#0x42
001102  d106              BNE      |L1.4370|
001104  f89d0001          LDRB     r0,[sp,#1]
001108  b918              CBNZ     r0,|L1.4370|
00110a  f89d0002          LDRB     r0,[sp,#2]
00110e  2843              CMP      r0,#0x43
001110  d009              BEQ      |L1.4390|
                  |L1.4370|
;;;955         	{        
;;;956         	if(event_ptr_find)event_ptr_find--;
001112  b11c              CBZ      r4,|L1.4380|
001114  f1a40401          SUB      r4,r4,#1
001118  b2a4              UXTH     r4,r4
00111a  e001              B        |L1.4384|
                  |L1.4380|
;;;957         	else event_ptr_find=63;
00111c  f04f043f          MOV      r4,#0x3f
                  |L1.4384|
;;;958         	if(event_ptr_find==event_ptr)goto avar_bat_ips_hndl_end;
001120  42b4              CMP      r4,r6
001122  d1e4              BNE      |L1.4334|
001124  e05e              B        |L1.4580|
                  |L1.4390|
;;;959         	else goto avar_bat_ips_hndl_lbl1;
;;;960         	}
;;;961         else 
;;;962         	{
;;;963         	lc640_read_long_ptr(lc640_adr+16,data);
001126  4669              MOV      r1,sp
001128  f1050010          ADD      r0,r5,#0x10
00112c  f7fffffe          BL       lc640_read_long_ptr
;;;964         	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
001130  f89d0000          LDRB     r0,[sp,#0]
001134  2841              CMP      r0,#0x41
001136  d10b              BNE      |L1.4432|
001138  f89d0001          LDRB     r0,[sp,#1]
00113c  2841              CMP      r0,#0x41
00113e  d107              BNE      |L1.4432|
001140  f89d0002          LDRB     r0,[sp,#2]
001144  2841              CMP      r0,#0x41
001146  d103              BNE      |L1.4432|
001148  f89d0003          LDRB     r0,[sp,#3]
00114c  2841              CMP      r0,#0x41
00114e  d009              BEQ      |L1.4452|
                  |L1.4432|
;;;965         		{        
;;;966         		if(event_ptr_find)event_ptr_find--;
001150  b11c              CBZ      r4,|L1.4442|
001152  f1a40401          SUB      r4,r4,#1
001156  b2a4              UXTH     r4,r4
001158  e001              B        |L1.4446|
                  |L1.4442|
;;;967             		else event_ptr_find=63;
00115a  f04f043f          MOV      r4,#0x3f
                  |L1.4446|
;;;968             	    	if(event_ptr_find==event_ptr)goto avar_bat_ips_hndl_end;
00115e  42b4              CMP      r4,r6
001160  d1c5              BNE      |L1.4334|
001162  e03f              B        |L1.4580|
                  |L1.4452|
;;;969         		else goto avar_bat_ips_hndl_lbl1;
;;;970         		}
;;;971    
;;;972         	}
;;;973         		
;;;974    	data[0]=LPC_RTC->YEAR;
001164  f8b8003c          LDRH     r0,[r8,#0x3c]
001168  f88d0000          STRB     r0,[sp,#0]
;;;975    	data[1]=LPC_RTC->MONTH;
00116c  f8980038          LDRB     r0,[r8,#0x38]
001170  f88d0001          STRB     r0,[sp,#1]
;;;976    	data[2]=LPC_RTC->DOM;
001174  f898002c          LDRB     r0,[r8,#0x2c]
001178  f88d0002          STRB     r0,[sp,#2]
;;;977    	data[3]=0;
00117c  f88d9003          STRB     r9,[sp,#3]
;;;978    	lc640_write_long_ptr(lc640_adr+16,data);
001180  4669              MOV      r1,sp
001182  f1050010          ADD      r0,r5,#0x10
001186  f7fffffe          BL       lc640_write_long_ptr
;;;979    
;;;980    	data[0]=LPC_RTC->HOUR;
00118a  f8980028          LDRB     r0,[r8,#0x28]
00118e  f88d0000          STRB     r0,[sp,#0]
;;;981    	data[1]=LPC_RTC->MIN;
001192  f8980024          LDRB     r0,[r8,#0x24]
001196  f88d0001          STRB     r0,[sp,#1]
;;;982    	data[2]=LPC_RTC->SEC;
00119a  f8980020          LDRB     r0,[r8,#0x20]
00119e  f88d0002          STRB     r0,[sp,#2]
;;;983    	data[3]=0;
0011a2  f88d9003          STRB     r9,[sp,#3]
;;;984    	lc640_write_long_ptr(lc640_adr+20,data);
0011a6  4669              MOV      r1,sp
0011a8  f1050014          ADD      r0,r5,#0x14
0011ac  f7fffffe          BL       lc640_write_long_ptr
;;;985    	
;;;986    	data[0]='B';
0011b0  f88d7000          STRB     r7,[sp,#0]
;;;987    	data[1]='B';
0011b4  f88d7001          STRB     r7,[sp,#1]
;;;988    	data[2]='B';
0011b8  f88d7002          STRB     r7,[sp,#2]
;;;989    	data[3]='B';
0011bc  f88d7003          STRB     r7,[sp,#3]
;;;990    	lc640_write_long_ptr(lc640_adr+24,data);
0011c0  4669              MOV      r1,sp
0011c2  f1050018          ADD      r0,r5,#0x18
0011c6  f7fffffe          BL       lc640_write_long_ptr
;;;991    	
;;;992    	data[0]='B';
0011ca  f88d7000          STRB     r7,[sp,#0]
;;;993    	data[1]='B';
0011ce  f88d7001          STRB     r7,[sp,#1]
;;;994    	data[2]='B';
0011d2  f88d7002          STRB     r7,[sp,#2]
;;;995    	data[3]='B';
0011d6  f88d7003          STRB     r7,[sp,#3]
;;;996    	lc640_write_long_ptr(lc640_adr+28,data);
0011da  4669              MOV      r1,sp
0011dc  f105001c          ADD      r0,r5,#0x1c
0011e0  f7fffffe          BL       lc640_write_long_ptr
                  |L1.4580|
;;;997    	
;;;998    
;;;999    	
;;;1000   	}
;;;1001   	
;;;1002   avar_bat_ips_hndl_end:
;;;1003   __nop();		
0011e4  bf00              NOP      
                  |L1.4582|
;;;1004   }
0011e6  e56b              B        |L1.3264|
;;;1005   
                          ENDP

                  avar_bat_hndl PROC
;;;1008   //-----------------------------------------------
;;;1009   void avar_bat_hndl(char b, char in)
0011e8  e92d4ff8          PUSH     {r3-r11,lr}
;;;1010   {
0011ec  4606              MOV      r6,r0
;;;1011   char data[4];
;;;1012   unsigned short event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;1013   
;;;1014   if(in==1)
;;;1015   	{
;;;1016   	bat[b]._av|=1;
0011ee  48bc              LDR      r0,|L1.5344|
0011f0  eb060246          ADD      r2,r6,r6,LSL #1
;;;1017       
;;;1018   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;1019   	event_ptr++;	
;;;1020   	if(event_ptr>63)event_ptr=0;	
;;;1021   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;1022   	
;;;1023        event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;1024   	if(event_cnt!=63)event_cnt=event_ptr;
;;;1025   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;1026   	
;;;1027   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;1028   	
;;;1029   	data[0]='B';
;;;1030   	data[1]=b;
;;;1031   	data[2]='C';
;;;1032   	data[3]=0;
;;;1033   	lc640_write_long_ptr(lc640_adr,data);
;;;1034   
;;;1035   	data[0]=0;
;;;1036   	data[1]=0;
;;;1037   	data[2]=0;
;;;1038   	data[3]=0;
;;;1039   	lc640_write_long_ptr(lc640_adr+4,data);
;;;1040   
;;;1041   	data[0]=LPC_RTC->YEAR;
0011f4  f8df82ec          LDR      r8,|L1.5348|
0011f8  eb021206          ADD      r2,r2,r6,LSL #4       ;1016
0011fc  f04f0a00          MOV      r10,#0                ;1020
001200  f04f0942          MOV      r9,#0x42              ;1029
001204  f44f6560          MOV      r5,#0xe00             ;1018
001208  f44f6b80          MOV      r11,#0x400            ;1027
00120c  eb000082          ADD      r0,r0,r2,LSL #2       ;1016
001210  2901              CMP      r1,#1                 ;1014
001212  d002              BEQ      |L1.4634|
;;;1042   	data[1]=LPC_RTC->MONTH;
;;;1043   	data[2]=LPC_RTC->DOM;
;;;1044   	data[3]=0;
;;;1045   	lc640_write_long_ptr(lc640_adr+8,data);
;;;1046   
;;;1047   	data[0]=LPC_RTC->HOUR;
;;;1048   	data[1]=LPC_RTC->MIN;
;;;1049   	data[2]=LPC_RTC->SEC;
;;;1050   	data[3]=0;
;;;1051   	lc640_write_long_ptr(lc640_adr+12,data);
;;;1052   	
;;;1053   	data[0]='A';
;;;1054   	data[1]='A';
;;;1055   	data[2]='A';
;;;1056   	data[3]='A';
;;;1057   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1058   	
;;;1059   	data[0]='A';
;;;1060   	data[1]='A';
;;;1061   	data[2]='A';
;;;1062   	data[3]='A';
;;;1063   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1064   	
;;;1065   	data[0]='A';
;;;1066   	data[1]='A';
;;;1067   	data[2]='A';
;;;1068   	data[3]='A';
;;;1069   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1070   	
;;;1071   	data[0]='A';
;;;1072   	data[1]='A';
;;;1073   	data[2]='A';
;;;1074   	data[3]='A';
;;;1075   	lc640_write_long_ptr(lc640_adr+28,data);
;;;1076   					
;;;1077   	if(b==0)
;;;1078   		{
;;;1079   		snmp_trap_send("BAT #1 Alarm, lost",5,1,1);
;;;1080   		}
;;;1081   	else if(b==1)
;;;1082   		{
;;;1083   		snmp_trap_send("BAT #2 Alarm, lost",5,2,1);
;;;1084   		} 
;;;1085   			
;;;1086   	}
;;;1087   
;;;1088   else if(in==0)
001214  2900              CMP      r1,#0
001216  d07d              BEQ      |L1.4884|
001218  e12f              B        |L1.5242|
                  |L1.4634|
00121a  f8101f3d          LDRB     r1,[r0,#0x3d]!        ;1016
00121e  f0410101          ORR      r1,r1,#1              ;1016
001222  7001              STRB     r1,[r0,#0]            ;1016
001224  4628              MOV      r0,r5                 ;1018
001226  f7fffffe          BL       lc640_read_int
00122a  f1000001          ADD      r0,r0,#1              ;1019
00122e  b284              UXTH     r4,r0                 ;1019
001230  2c3f              CMP      r4,#0x3f              ;1020
001232  d901              BLS      |L1.4664|
001234  f04f0400          MOV      r4,#0                 ;1020
                  |L1.4664|
001238  b221              SXTH     r1,r4                 ;1021
00123a  4628              MOV      r0,r5                 ;1021
00123c  f7fffffe          BL       lc640_write_int
001240  f6406702          MOV      r7,#0xe02             ;1023
001244  4638              MOV      r0,r7                 ;1023
001246  f7fffffe          BL       lc640_read_int
00124a  b280              UXTH     r0,r0                 ;1023
00124c  283f              CMP      r0,#0x3f              ;1024
00124e  d000              BEQ      |L1.4690|
001250  4620              MOV      r0,r4                 ;1024
                  |L1.4690|
001252  b201              SXTH     r1,r0                 ;1025
001254  4638              MOV      r0,r7                 ;1025
001256  f7fffffe          BL       lc640_write_int
00125a  4628              MOV      r0,r5                 ;1027
00125c  f7fffffe          BL       lc640_read_int
001260  eb0b1040          ADD      r0,r11,r0,LSL #5      ;1027
001264  b284              UXTH     r4,r0                 ;1027
001266  f88d9000          STRB     r9,[sp,#0]            ;1029
00126a  f88d6001          STRB     r6,[sp,#1]            ;1030
00126e  f04f0043          MOV      r0,#0x43              ;1031
001272  f88d0002          STRB     r0,[sp,#2]            ;1031
001276  f88da003          STRB     r10,[sp,#3]           ;1032
00127a  4669              MOV      r1,sp                 ;1033
00127c  4620              MOV      r0,r4                 ;1033
00127e  f7fffffe          BL       lc640_write_long_ptr
001282  f8cda000          STR      r10,[sp,#0]           ;1038
001286  4669              MOV      r1,sp                 ;1039
001288  1d20              ADDS     r0,r4,#4              ;1039
00128a  f7fffffe          BL       lc640_write_long_ptr
00128e  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1041
001292  f88d0000          STRB     r0,[sp,#0]            ;1041
001296  f8980038          LDRB     r0,[r8,#0x38]         ;1042
00129a  f88d0001          STRB     r0,[sp,#1]            ;1042
00129e  f898002c          LDRB     r0,[r8,#0x2c]         ;1043
0012a2  f88d0002          STRB     r0,[sp,#2]            ;1043
0012a6  f88da003          STRB     r10,[sp,#3]           ;1044
0012aa  4669              MOV      r1,sp                 ;1045
0012ac  f1040008          ADD      r0,r4,#8              ;1045
0012b0  f7fffffe          BL       lc640_write_long_ptr
0012b4  f8980028          LDRB     r0,[r8,#0x28]         ;1047
0012b8  f88d0000          STRB     r0,[sp,#0]            ;1047
0012bc  f8980024          LDRB     r0,[r8,#0x24]         ;1048
0012c0  f88d0001          STRB     r0,[sp,#1]            ;1048
0012c4  f8980020          LDRB     r0,[r8,#0x20]         ;1049
0012c8  f88d0002          STRB     r0,[sp,#2]            ;1049
0012cc  f88da003          STRB     r10,[sp,#3]           ;1050
0012d0  4669              MOV      r1,sp                 ;1051
0012d2  f104000c          ADD      r0,r4,#0xc            ;1051
0012d6  f7fffffe          BL       lc640_write_long_ptr
0012da  f04f0541          MOV      r5,#0x41              ;1053
0012de  f88d5000          STRB     r5,[sp,#0]            ;1053
0012e2  f88d5001          STRB     r5,[sp,#1]            ;1054
0012e6  f88d5002          STRB     r5,[sp,#2]            ;1055
0012ea  f88d5003          STRB     r5,[sp,#3]            ;1056
0012ee  4669              MOV      r1,sp                 ;1057
0012f0  f1040010          ADD      r0,r4,#0x10           ;1057
0012f4  f7fffffe          BL       lc640_write_long_ptr
0012f8  f88d5000          STRB     r5,[sp,#0]            ;1059
0012fc  f88d5001          STRB     r5,[sp,#1]            ;1060
001300  f88d5002          STRB     r5,[sp,#2]            ;1061
001304  f88d5003          STRB     r5,[sp,#3]            ;1062
001308  4669              MOV      r1,sp                 ;1063
00130a  f1040014          ADD      r0,r4,#0x14           ;1063
00130e  f7fffffe          BL       lc640_write_long_ptr
001312  e000              B        |L1.4886|
                  |L1.4884|
001314  e02b              B        |L1.4974|
                  |L1.4886|
001316  f88d5000          STRB     r5,[sp,#0]            ;1065
00131a  f88d5001          STRB     r5,[sp,#1]            ;1066
00131e  f88d5002          STRB     r5,[sp,#2]            ;1067
001322  f88d5003          STRB     r5,[sp,#3]            ;1068
001326  4669              MOV      r1,sp                 ;1069
001328  f1040018          ADD      r0,r4,#0x18           ;1069
00132c  f7fffffe          BL       lc640_write_long_ptr
001330  f88d5000          STRB     r5,[sp,#0]            ;1071
001334  f88d5001          STRB     r5,[sp,#1]            ;1072
001338  f88d5002          STRB     r5,[sp,#2]            ;1073
00133c  f88d5003          STRB     r5,[sp,#3]            ;1074
001340  4669              MOV      r1,sp                 ;1075
001342  f104001c          ADD      r0,r4,#0x1c           ;1075
001346  f7fffffe          BL       lc640_write_long_ptr
00134a  b116              CBZ      r6,|L1.4946|
00134c  2e01              CMP      r6,#1                 ;1081
00134e  d007              BEQ      |L1.4960|
001350  e093              B        |L1.5242|
                  |L1.4946|
001352  2301              MOVS     r3,#1                 ;1079
001354  461a              MOV      r2,r3                 ;1079
001356  2105              MOVS     r1,#5                 ;1079
001358  a063              ADR      r0,|L1.5352|
00135a  f7fffffe          BL       snmp_trap_send
00135e  e08c              B        |L1.5242|
                  |L1.4960|
001360  2301              MOVS     r3,#1                 ;1083
001362  2202              MOVS     r2,#2                 ;1083
001364  2105              MOVS     r1,#5                 ;1083
001366  a065              ADR      r0,|L1.5372|
001368  f7fffffe          BL       snmp_trap_send
00136c  e085              B        |L1.5242|
                  |L1.4974|
;;;1089   	{
;;;1090   	bat[b]._av&=~1;
00136e  f8101f3d          LDRB     r1,[r0,#0x3d]!
001372  f0210101          BIC      r1,r1,#1
001376  7001              STRB     r1,[r0,#0]
;;;1091   
;;;1092        event_ptr=lc640_read_int(PTR_EVENT_LOG);
001378  4628              MOV      r0,r5
00137a  f7fffffe          BL       lc640_read_int
00137e  b287              UXTH     r7,r0
;;;1093   	event_ptr_find=event_ptr;
001380  463c              MOV      r4,r7
                  |L1.4994|
;;;1094   	
;;;1095   avar_bat_hndl_lbl1: 
;;;1096   
;;;1097   	lc640_adr=EVENT_LOG+(event_ptr_find*32);
001382  eb0b1044          ADD      r0,r11,r4,LSL #5
001386  b285              UXTH     r5,r0
;;;1098   
;;;1099        lc640_read_long_ptr(lc640_adr,data);
001388  4669              MOV      r1,sp
00138a  4628              MOV      r0,r5
00138c  f7fffffe          BL       lc640_read_long_ptr
;;;1100        
;;;1101        if(!((data[0]=='B')&&(data[1]==b)&&(data[2]=='C')))
001390  f89d0000          LDRB     r0,[sp,#0]
001394  2842              CMP      r0,#0x42
001396  d107              BNE      |L1.5032|
001398  f89d0001          LDRB     r0,[sp,#1]
00139c  42b0              CMP      r0,r6
00139e  d103              BNE      |L1.5032|
0013a0  f89d0002          LDRB     r0,[sp,#2]
0013a4  2843              CMP      r0,#0x43
0013a6  d009              BEQ      |L1.5052|
                  |L1.5032|
;;;1102        	{        
;;;1103        	if(event_ptr_find)event_ptr_find--;
0013a8  b11c              CBZ      r4,|L1.5042|
0013aa  f1a40401          SUB      r4,r4,#1
0013ae  b2a4              UXTH     r4,r4
0013b0  e001              B        |L1.5046|
                  |L1.5042|
;;;1104        	else event_ptr_find=63;
0013b2  f04f043f          MOV      r4,#0x3f
                  |L1.5046|
;;;1105        	if(event_ptr_find==event_ptr)goto avar_bat_hndl_end;
0013b6  42bc              CMP      r4,r7
0013b8  d1e3              BNE      |L1.4994|
0013ba  e05e              B        |L1.5242|
                  |L1.5052|
;;;1106        	else goto avar_bat_hndl_lbl1;
;;;1107        	}
;;;1108        else 
;;;1109        	{
;;;1110        	lc640_read_long_ptr(lc640_adr+16,data);
0013bc  4669              MOV      r1,sp
0013be  f1050010          ADD      r0,r5,#0x10
0013c2  f7fffffe          BL       lc640_read_long_ptr
;;;1111        	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
0013c6  f89d0000          LDRB     r0,[sp,#0]
0013ca  2841              CMP      r0,#0x41
0013cc  d10b              BNE      |L1.5094|
0013ce  f89d0001          LDRB     r0,[sp,#1]
0013d2  2841              CMP      r0,#0x41
0013d4  d107              BNE      |L1.5094|
0013d6  f89d0002          LDRB     r0,[sp,#2]
0013da  2841              CMP      r0,#0x41
0013dc  d103              BNE      |L1.5094|
0013de  f89d0003          LDRB     r0,[sp,#3]
0013e2  2841              CMP      r0,#0x41
0013e4  d009              BEQ      |L1.5114|
                  |L1.5094|
;;;1112        		{        
;;;1113        		if(event_ptr_find)event_ptr_find--;
0013e6  b11c              CBZ      r4,|L1.5104|
0013e8  f1a40401          SUB      r4,r4,#1
0013ec  b2a4              UXTH     r4,r4
0013ee  e001              B        |L1.5108|
                  |L1.5104|
;;;1114            		else event_ptr_find=63;
0013f0  f04f043f          MOV      r4,#0x3f
                  |L1.5108|
;;;1115            	    	if(event_ptr_find==event_ptr)goto avar_bat_hndl_end;
0013f4  42bc              CMP      r4,r7
0013f6  d1c4              BNE      |L1.4994|
0013f8  e03f              B        |L1.5242|
                  |L1.5114|
;;;1116        		else goto avar_bat_hndl_lbl1;
;;;1117        		}
;;;1118   
;;;1119        	}
;;;1120        		
;;;1121   	data[0]=LPC_RTC->YEAR;
0013fa  f8b8003c          LDRH     r0,[r8,#0x3c]
0013fe  f88d0000          STRB     r0,[sp,#0]
;;;1122   	data[1]=LPC_RTC->MONTH;
001402  f8980038          LDRB     r0,[r8,#0x38]
001406  f88d0001          STRB     r0,[sp,#1]
;;;1123   	data[2]=LPC_RTC->DOM;
00140a  f898002c          LDRB     r0,[r8,#0x2c]
00140e  f88d0002          STRB     r0,[sp,#2]
;;;1124   	data[3]=0;
001412  f88da003          STRB     r10,[sp,#3]
;;;1125   	lc640_write_long_ptr(lc640_adr+16,data);
001416  4669              MOV      r1,sp
001418  f1050010          ADD      r0,r5,#0x10
00141c  f7fffffe          BL       lc640_write_long_ptr
;;;1126   
;;;1127   	data[0]=LPC_RTC->HOUR;
001420  f8980028          LDRB     r0,[r8,#0x28]
001424  f88d0000          STRB     r0,[sp,#0]
;;;1128   	data[1]=LPC_RTC->MIN;
001428  f8980024          LDRB     r0,[r8,#0x24]
00142c  f88d0001          STRB     r0,[sp,#1]
;;;1129   	data[2]=LPC_RTC->SEC;
001430  f8980020          LDRB     r0,[r8,#0x20]
001434  f88d0002          STRB     r0,[sp,#2]
;;;1130   	data[3]=0;
001438  f88da003          STRB     r10,[sp,#3]
;;;1131   	lc640_write_long_ptr(lc640_adr+20,data);
00143c  4669              MOV      r1,sp
00143e  f1050014          ADD      r0,r5,#0x14
001442  f7fffffe          BL       lc640_write_long_ptr
;;;1132   	
;;;1133   	data[0]='B';
001446  f88d9000          STRB     r9,[sp,#0]
;;;1134   	data[1]='B';
00144a  f88d9001          STRB     r9,[sp,#1]
;;;1135   	data[2]='B';
00144e  f88d9002          STRB     r9,[sp,#2]
;;;1136   	data[3]='B';
001452  f88d9003          STRB     r9,[sp,#3]
;;;1137   	lc640_write_long_ptr(lc640_adr+24,data);
001456  4669              MOV      r1,sp
001458  f1050018          ADD      r0,r5,#0x18
00145c  f7fffffe          BL       lc640_write_long_ptr
;;;1138   	
;;;1139   	data[0]='B';
001460  f88d9000          STRB     r9,[sp,#0]
;;;1140   	data[1]='B';
001464  f88d9001          STRB     r9,[sp,#1]
;;;1141   	data[2]='B';
001468  f88d9002          STRB     r9,[sp,#2]
;;;1142   	data[3]='B';
00146c  f88d9003          STRB     r9,[sp,#3]
;;;1143   	lc640_write_long_ptr(lc640_adr+28,data);
001470  4669              MOV      r1,sp
001472  f105001c          ADD      r0,r5,#0x1c
001476  f7fffffe          BL       lc640_write_long_ptr
                  |L1.5242|
;;;1144   	
;;;1145   
;;;1146   	
;;;1147   	}
;;;1148   	
;;;1149   avar_bat_hndl_end:
;;;1150   __nop();		
00147a  bf00              NOP      
                  |L1.5244|
;;;1151   }
00147c  e420              B        |L1.3264|
;;;1152   
                          ENDP

                  avar_bat_as_hndl PROC
;;;1153   //-----------------------------------------------
;;;1154   void avar_bat_as_hndl(char b, char in)
00147e  e92d4ff8          PUSH     {r3-r11,lr}
;;;1155   {
001482  4606              MOV      r6,r0
;;;1156   char data[4];
;;;1157   unsigned short event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;1158   
;;;1159   if(in==1)
;;;1160   	{
;;;1161   	bat[b]._av|=2;
;;;1162       
;;;1163   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;1164   	event_ptr++;	
;;;1165   	if(event_ptr>63)event_ptr=0;	
;;;1166   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;1167   	
;;;1168        event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;1169   	if(event_cnt!=63)event_cnt=event_ptr;
;;;1170   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;1171   	
;;;1172   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;1173   	
;;;1174   	data[0]='B';
;;;1175   	data[1]=b;
;;;1176   	data[2]='S';
;;;1177   	data[3]=0;
;;;1178   	lc640_write_long_ptr(lc640_adr,data);
;;;1179   
;;;1180   	data[0]=0;
;;;1181   	data[1]=0;
;;;1182   	data[2]=0;
;;;1183   	data[3]=0;
;;;1184   	lc640_write_long_ptr(lc640_adr+4,data);
;;;1185   
;;;1186   	data[0]=LPC_RTC->YEAR;
001484  f8df805c          LDR      r8,|L1.5348|
001488  f04f0a00          MOV      r10,#0                ;1165
00148c  f04f0942          MOV      r9,#0x42              ;1174
001490  f44f6560          MOV      r5,#0xe00             ;1163
001494  f44f6b80          MOV      r11,#0x400            ;1172
001498  2901              CMP      r1,#1                 ;1159
00149a  d002              BEQ      |L1.5282|
;;;1187   	data[1]=LPC_RTC->MONTH;
;;;1188   	data[2]=LPC_RTC->DOM;
;;;1189   	data[3]=0;
;;;1190   	lc640_write_long_ptr(lc640_adr+8,data);
;;;1191   
;;;1192   	data[0]=LPC_RTC->HOUR;
;;;1193   	data[1]=LPC_RTC->MIN;
;;;1194   	data[2]=LPC_RTC->SEC;
;;;1195   	data[3]=0;
;;;1196   	lc640_write_long_ptr(lc640_adr+12,data);
;;;1197   	
;;;1198   	data[0]='A';
;;;1199   	data[1]='A';
;;;1200   	data[2]='A';
;;;1201   	data[3]='A';
;;;1202   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1203   	
;;;1204   	data[0]='A';
;;;1205   	data[1]='A';
;;;1206   	data[2]='A';
;;;1207   	data[3]='A';
;;;1208   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1209   	
;;;1210   	data[0]='A';
;;;1211   	data[1]='A';
;;;1212   	data[2]='A';
;;;1213   	data[3]='A';
;;;1214   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1215   	
;;;1216   	data[0]='A';
;;;1217   	data[1]='A';
;;;1218   	data[2]='A';
;;;1219   	data[3]='A';
;;;1220   	lc640_write_long_ptr(lc640_adr+28,data);				
;;;1221   
;;;1222   	if(b==0)
;;;1223   		{
;;;1224   		snmp_trap_send("BAT #1 Alarm, assimetry",5,1,2);
;;;1225   		}
;;;1226   	else if(b==1)
;;;1227   		{
;;;1228   		snmp_trap_send("BAT #2 Alarm, assimetry",5,2,2);
;;;1229   		} 
;;;1230   	
;;;1231   	}
;;;1232   
;;;1233   else if(in==0)
00149c  2900              CMP      r1,#0
00149e  d07e              BEQ      |L1.5534|
0014a0  e154              B        |L1.5964|
                  |L1.5282|
0014a2  eb060046          ADD      r0,r6,r6,LSL #1       ;1161
0014a6  eb001106          ADD      r1,r0,r6,LSL #4       ;1161
0014aa  480d              LDR      r0,|L1.5344|
0014ac  eb000081          ADD      r0,r0,r1,LSL #2       ;1161
0014b0  f8101f3d          LDRB     r1,[r0,#0x3d]!        ;1161
0014b4  f0410102          ORR      r1,r1,#2              ;1161
0014b8  7001              STRB     r1,[r0,#0]            ;1161
0014ba  4628              MOV      r0,r5                 ;1163
0014bc  f7fffffe          BL       lc640_read_int
0014c0  f1000001          ADD      r0,r0,#1              ;1164
0014c4  b284              UXTH     r4,r0                 ;1164
0014c6  2c3f              CMP      r4,#0x3f              ;1165
0014c8  d924              BLS      |L1.5396|
0014ca  e021              B        |L1.5392|
                  |L1.5324|
0014cc  42415420          DCB      "BAT ",185,"1 Alarm, lost",0
0014d0  b9312041
0014d4  6c61726d
0014d8  2c206c6f
0014dc  737400  
0014df  00                DCB      0
                  |L1.5344|
                          DCD      bat
                  |L1.5348|
                          DCD      0x40024000
                  |L1.5352|
0014e8  42415420          DCB      "BAT #1 Alarm, lost",0
0014ec  23312041
0014f0  6c61726d
0014f4  2c206c6f
0014f8  737400  
0014fb  00                DCB      0
                  |L1.5372|
0014fc  42415420          DCB      "BAT #2 Alarm, lost",0
001500  23322041
001504  6c61726d
001508  2c206c6f
00150c  737400  
00150f  00                DCB      0
                  |L1.5392|
001510  f04f0400          MOV      r4,#0                 ;1165
                  |L1.5396|
001514  b221              SXTH     r1,r4                 ;1166
001516  4628              MOV      r0,r5                 ;1166
001518  f7fffffe          BL       lc640_write_int
00151c  f6406702          MOV      r7,#0xe02             ;1168
001520  4638              MOV      r0,r7                 ;1168
001522  f7fffffe          BL       lc640_read_int
001526  b280              UXTH     r0,r0                 ;1168
001528  283f              CMP      r0,#0x3f              ;1169
00152a  d000              BEQ      |L1.5422|
00152c  4620              MOV      r0,r4                 ;1169
                  |L1.5422|
00152e  b201              SXTH     r1,r0                 ;1170
001530  4638              MOV      r0,r7                 ;1170
001532  f7fffffe          BL       lc640_write_int
001536  4628              MOV      r0,r5                 ;1172
001538  f7fffffe          BL       lc640_read_int
00153c  eb0b1040          ADD      r0,r11,r0,LSL #5      ;1172
001540  b284              UXTH     r4,r0                 ;1172
001542  f88d9000          STRB     r9,[sp,#0]            ;1174
001546  f88d6001          STRB     r6,[sp,#1]            ;1175
00154a  f04f0053          MOV      r0,#0x53              ;1176
00154e  f88d0002          STRB     r0,[sp,#2]            ;1176
001552  f88da003          STRB     r10,[sp,#3]           ;1177
001556  4669              MOV      r1,sp                 ;1178
001558  4620              MOV      r0,r4                 ;1178
00155a  f7fffffe          BL       lc640_write_long_ptr
00155e  f8cda000          STR      r10,[sp,#0]           ;1183
001562  4669              MOV      r1,sp                 ;1184
001564  1d20              ADDS     r0,r4,#4              ;1184
001566  f7fffffe          BL       lc640_write_long_ptr
00156a  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1186
00156e  f88d0000          STRB     r0,[sp,#0]            ;1186
001572  f8980038          LDRB     r0,[r8,#0x38]         ;1187
001576  f88d0001          STRB     r0,[sp,#1]            ;1187
00157a  f898002c          LDRB     r0,[r8,#0x2c]         ;1188
00157e  f88d0002          STRB     r0,[sp,#2]            ;1188
001582  f88da003          STRB     r10,[sp,#3]           ;1189
001586  4669              MOV      r1,sp                 ;1190
001588  f1040008          ADD      r0,r4,#8              ;1190
00158c  f7fffffe          BL       lc640_write_long_ptr
001590  f8980028          LDRB     r0,[r8,#0x28]         ;1192
001594  f88d0000          STRB     r0,[sp,#0]            ;1192
001598  f8980024          LDRB     r0,[r8,#0x24]         ;1193
00159c  e000              B        |L1.5536|
                  |L1.5534|
00159e  e054              B        |L1.5706|
                  |L1.5536|
0015a0  f88d0001          STRB     r0,[sp,#1]            ;1193
0015a4  f8980020          LDRB     r0,[r8,#0x20]         ;1194
0015a8  f88d0002          STRB     r0,[sp,#2]            ;1194
0015ac  f88da003          STRB     r10,[sp,#3]           ;1195
0015b0  4669              MOV      r1,sp                 ;1196
0015b2  f104000c          ADD      r0,r4,#0xc            ;1196
0015b6  f7fffffe          BL       lc640_write_long_ptr
0015ba  f04f0541          MOV      r5,#0x41              ;1198
0015be  f88d5000          STRB     r5,[sp,#0]            ;1198
0015c2  f88d5001          STRB     r5,[sp,#1]            ;1199
0015c6  f88d5002          STRB     r5,[sp,#2]            ;1200
0015ca  f88d5003          STRB     r5,[sp,#3]            ;1201
0015ce  4669              MOV      r1,sp                 ;1202
0015d0  f1040010          ADD      r0,r4,#0x10           ;1202
0015d4  f7fffffe          BL       lc640_write_long_ptr
0015d8  f88d5000          STRB     r5,[sp,#0]            ;1204
0015dc  f88d5001          STRB     r5,[sp,#1]            ;1205
0015e0  f88d5002          STRB     r5,[sp,#2]            ;1206
0015e4  f88d5003          STRB     r5,[sp,#3]            ;1207
0015e8  4669              MOV      r1,sp                 ;1208
0015ea  f1040014          ADD      r0,r4,#0x14           ;1208
0015ee  f7fffffe          BL       lc640_write_long_ptr
0015f2  f88d5000          STRB     r5,[sp,#0]            ;1210
0015f6  f88d5001          STRB     r5,[sp,#1]            ;1211
0015fa  f88d5002          STRB     r5,[sp,#2]            ;1212
0015fe  f88d5003          STRB     r5,[sp,#3]            ;1213
001602  4669              MOV      r1,sp                 ;1214
001604  f1040018          ADD      r0,r4,#0x18           ;1214
001608  f7fffffe          BL       lc640_write_long_ptr
00160c  f88d5000          STRB     r5,[sp,#0]            ;1216
001610  f88d5001          STRB     r5,[sp,#1]            ;1217
001614  f88d5002          STRB     r5,[sp,#2]            ;1218
001618  f88d5003          STRB     r5,[sp,#3]            ;1219
00161c  4669              MOV      r1,sp                 ;1220
00161e  f104001c          ADD      r0,r4,#0x1c           ;1220
001622  f7fffffe          BL       lc640_write_long_ptr
001626  b116              CBZ      r6,|L1.5678|
001628  2e01              CMP      r6,#1                 ;1226
00162a  d007              BEQ      |L1.5692|
00162c  e08e              B        |L1.5964|
                  |L1.5678|
00162e  2302              MOVS     r3,#2                 ;1224
001630  2201              MOVS     r2,#1                 ;1224
001632  2105              MOVS     r1,#5                 ;1224
001634  a0fb              ADR      r0,|L1.6692|
001636  f7fffffe          BL       snmp_trap_send
00163a  e087              B        |L1.5964|
                  |L1.5692|
00163c  2302              MOVS     r3,#2                 ;1228
00163e  461a              MOV      r2,r3                 ;1228
001640  2105              MOVS     r1,#5                 ;1228
001642  a0fe              ADR      r0,|L1.6716|
001644  f7fffffe          BL       snmp_trap_send
001648  e080              B        |L1.5964|
                  |L1.5706|
;;;1234   	{
;;;1235   	//bat[b]._av=0;
;;;1236   
;;;1237        event_ptr=lc640_read_int(PTR_EVENT_LOG);
00164a  4628              MOV      r0,r5
00164c  f7fffffe          BL       lc640_read_int
001650  b287              UXTH     r7,r0
;;;1238   	event_ptr_find=event_ptr;
001652  463c              MOV      r4,r7
                  |L1.5716|
;;;1239   	
;;;1240   avar_bat_as_hndl_lbl1: 
;;;1241   
;;;1242   	lc640_adr=EVENT_LOG+(event_ptr_find*32);
001654  eb0b1044          ADD      r0,r11,r4,LSL #5
001658  b285              UXTH     r5,r0
;;;1243   
;;;1244        lc640_read_long_ptr(lc640_adr,data);
00165a  4669              MOV      r1,sp
00165c  4628              MOV      r0,r5
00165e  f7fffffe          BL       lc640_read_long_ptr
;;;1245        
;;;1246        if(!((data[0]=='B')&&(data[1]==b)&&(data[2]=='C')))
001662  f89d0000          LDRB     r0,[sp,#0]
001666  2842              CMP      r0,#0x42
001668  d107              BNE      |L1.5754|
00166a  f89d0001          LDRB     r0,[sp,#1]
00166e  42b0              CMP      r0,r6
001670  d103              BNE      |L1.5754|
001672  f89d0002          LDRB     r0,[sp,#2]
001676  2843              CMP      r0,#0x43
001678  d009              BEQ      |L1.5774|
                  |L1.5754|
;;;1247        	{        
;;;1248        	if(event_ptr_find)event_ptr_find--;
00167a  b11c              CBZ      r4,|L1.5764|
00167c  f1a40401          SUB      r4,r4,#1
001680  b2a4              UXTH     r4,r4
001682  e001              B        |L1.5768|
                  |L1.5764|
;;;1249        	else event_ptr_find=63;
001684  f04f043f          MOV      r4,#0x3f
                  |L1.5768|
;;;1250        	if(event_ptr_find==event_ptr)goto avar_bat_as_hndl_end;
001688  42bc              CMP      r4,r7
00168a  d1e3              BNE      |L1.5716|
00168c  e05e              B        |L1.5964|
                  |L1.5774|
;;;1251        	else goto avar_bat_as_hndl_lbl1;
;;;1252        	}
;;;1253        else 
;;;1254        	{
;;;1255        	lc640_read_long_ptr(lc640_adr+16,data);
00168e  4669              MOV      r1,sp
001690  f1050010          ADD      r0,r5,#0x10
001694  f7fffffe          BL       lc640_read_long_ptr
;;;1256        	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
001698  f89d0000          LDRB     r0,[sp,#0]
00169c  2841              CMP      r0,#0x41
00169e  d10b              BNE      |L1.5816|
0016a0  f89d0001          LDRB     r0,[sp,#1]
0016a4  2841              CMP      r0,#0x41
0016a6  d107              BNE      |L1.5816|
0016a8  f89d0002          LDRB     r0,[sp,#2]
0016ac  2841              CMP      r0,#0x41
0016ae  d103              BNE      |L1.5816|
0016b0  f89d0003          LDRB     r0,[sp,#3]
0016b4  2841              CMP      r0,#0x41
0016b6  d009              BEQ      |L1.5836|
                  |L1.5816|
;;;1257        		{        
;;;1258        		if(event_ptr_find)event_ptr_find--;
0016b8  b11c              CBZ      r4,|L1.5826|
0016ba  f1a40401          SUB      r4,r4,#1
0016be  b2a4              UXTH     r4,r4
0016c0  e001              B        |L1.5830|
                  |L1.5826|
;;;1259            		else event_ptr_find=63;
0016c2  f04f043f          MOV      r4,#0x3f
                  |L1.5830|
;;;1260            	    	if(event_ptr_find==event_ptr)goto avar_bat_as_hndl_end;
0016c6  42bc              CMP      r4,r7
0016c8  d1c4              BNE      |L1.5716|
0016ca  e03f              B        |L1.5964|
                  |L1.5836|
;;;1261        		else goto avar_bat_as_hndl_lbl1;
;;;1262        		}
;;;1263   
;;;1264        	}
;;;1265        		
;;;1266   	data[0]=LPC_RTC->YEAR;
0016cc  f8b8003c          LDRH     r0,[r8,#0x3c]
0016d0  f88d0000          STRB     r0,[sp,#0]
;;;1267   	data[1]=LPC_RTC->MONTH;
0016d4  f8980038          LDRB     r0,[r8,#0x38]
0016d8  f88d0001          STRB     r0,[sp,#1]
;;;1268   	data[2]=LPC_RTC->DOM;
0016dc  f898002c          LDRB     r0,[r8,#0x2c]
0016e0  f88d0002          STRB     r0,[sp,#2]
;;;1269   	data[3]=0;
0016e4  f88da003          STRB     r10,[sp,#3]
;;;1270   	lc640_write_long_ptr(lc640_adr+16,data);
0016e8  4669              MOV      r1,sp
0016ea  f1050010          ADD      r0,r5,#0x10
0016ee  f7fffffe          BL       lc640_write_long_ptr
;;;1271   
;;;1272   	data[0]=LPC_RTC->HOUR;
0016f2  f8980028          LDRB     r0,[r8,#0x28]
0016f6  f88d0000          STRB     r0,[sp,#0]
;;;1273   	data[1]=LPC_RTC->MIN;
0016fa  f8980024          LDRB     r0,[r8,#0x24]
0016fe  f88d0001          STRB     r0,[sp,#1]
;;;1274   	data[2]=LPC_RTC->SEC;
001702  f8980020          LDRB     r0,[r8,#0x20]
001706  f88d0002          STRB     r0,[sp,#2]
;;;1275   	data[3]=0;
00170a  f88da003          STRB     r10,[sp,#3]
;;;1276   	lc640_write_long_ptr(lc640_adr+20,data);
00170e  4669              MOV      r1,sp
001710  f1050014          ADD      r0,r5,#0x14
001714  f7fffffe          BL       lc640_write_long_ptr
;;;1277   	
;;;1278   	data[0]='B';
001718  f88d9000          STRB     r9,[sp,#0]
;;;1279   	data[1]='B';
00171c  f88d9001          STRB     r9,[sp,#1]
;;;1280   	data[2]='B';
001720  f88d9002          STRB     r9,[sp,#2]
;;;1281   	data[3]='B';
001724  f88d9003          STRB     r9,[sp,#3]
;;;1282   	lc640_write_long_ptr(lc640_adr+24,data);
001728  4669              MOV      r1,sp
00172a  f1050018          ADD      r0,r5,#0x18
00172e  f7fffffe          BL       lc640_write_long_ptr
;;;1283   	
;;;1284   	data[0]='B';
001732  f88d9000          STRB     r9,[sp,#0]
;;;1285   	data[1]='B';
001736  f88d9001          STRB     r9,[sp,#1]
;;;1286   	data[2]='B';
00173a  f88d9002          STRB     r9,[sp,#2]
;;;1287   	data[3]='B';
00173e  f88d9003          STRB     r9,[sp,#3]
;;;1288   	lc640_write_long_ptr(lc640_adr+28,data);
001742  4669              MOV      r1,sp
001744  f105001c          ADD      r0,r5,#0x1c
001748  f7fffffe          BL       lc640_write_long_ptr
                  |L1.5964|
;;;1289   	
;;;1290   
;;;1291   	
;;;1292   	}
;;;1293   	
;;;1294   avar_bat_as_hndl_end:
;;;1295   __nop();		
00174c  bf00              NOP      
                  |L1.5966|
;;;1296   }
00174e  e54a              B        |L1.4582|
;;;1297   
                          ENDP

                  ke_mem_hndl PROC
;;;1299   //-----------------------------------------------
;;;1300   void ke_mem_hndl(char b,unsigned short in)
001750  b5f3              PUSH     {r0,r1,r4-r7,lr}
;;;1301   {
001752  b083              SUB      sp,sp,#0xc
001754  4605              MOV      r5,r0
;;;1302   char data[4];
;;;1303   unsigned int event_ptr=0,lc640_adr/*,event_ptr_find*/,event_cnt;
;;;1304   //unsigned char temp,temp_;
;;;1305   //unsigned int tempUI;
;;;1306   //unsigned long tempUL; 
;;;1307   signed temp_temp;
;;;1308   
;;;1309   temp_temp=bat[b]._u_old[bat_u_old_cnt+1]; 
001756  eb050045          ADD      r0,r5,r5,LSL #1
00175a  49be              LDR      r1,|L1.6740|
00175c  eb001005          ADD      r0,r0,r5,LSL #4
001760  eb010180          ADD      r1,r1,r0,LSL #2
001764  48bc              LDR      r0,|L1.6744|
001766  f9b00000          LDRSH    r0,[r0,#0]  ; bat_u_old_cnt
00176a  f1000001          ADD      r0,r0,#1
00176e  eb010040          ADD      r0,r1,r0,LSL #1
001772  f9b00020          LDRSH    r0,[r0,#0x20]
001776  9001              STR      r0,[sp,#4]
;;;1310   
;;;1311   event_ptr=lc640_read_int(PTR_EVENT_LOG);
001778  f44f6660          MOV      r6,#0xe00
00177c  4630              MOV      r0,r6
00177e  f7fffffe          BL       lc640_read_int
;;;1312   event_ptr++;	
001782  f1000001          ADD      r0,r0,#1
001786  4604              MOV      r4,r0
;;;1313   if(event_ptr>63)event_ptr=0;	
001788  2c3f              CMP      r4,#0x3f
00178a  d901              BLS      |L1.6032|
00178c  f04f0400          MOV      r4,#0
                  |L1.6032|
;;;1314   lc640_write_int(PTR_EVENT_LOG,event_ptr);	
001790  b221              SXTH     r1,r4
001792  4630              MOV      r0,r6
001794  f7fffffe          BL       lc640_write_int
;;;1315   	
;;;1316   event_cnt=lc640_read_int(CNT_EVENT_LOG);
001798  f6406702          MOV      r7,#0xe02
00179c  4638              MOV      r0,r7
00179e  f7fffffe          BL       lc640_read_int
;;;1317   if(event_cnt!=63)event_cnt=event_ptr;
0017a2  283f              CMP      r0,#0x3f
0017a4  d000              BEQ      |L1.6056|
0017a6  4620              MOV      r0,r4
                  |L1.6056|
;;;1318   lc640_write_int(CNT_EVENT_LOG,event_cnt); 
0017a8  b201              SXTH     r1,r0
0017aa  4638              MOV      r0,r7
0017ac  f7fffffe          BL       lc640_write_int
;;;1319   	
;;;1320   lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
0017b0  4630              MOV      r0,r6
0017b2  f7fffffe          BL       lc640_read_int
0017b6  f44f6180          MOV      r1,#0x400
0017ba  eb011440          ADD      r4,r1,r0,LSL #5
;;;1321   	
;;;1322   data[0]='B';
0017be  f04f0042          MOV      r0,#0x42
0017c2  f88d0008          STRB     r0,[sp,#8]
;;;1323   data[1]=b; 
0017c6  f88d5009          STRB     r5,[sp,#9]
;;;1324   data[2]='K';
0017ca  f04f004b          MOV      r0,#0x4b
0017ce  f88d000a          STRB     r0,[sp,#0xa]
;;;1325   data[3]=0;
0017d2  f04f0600          MOV      r6,#0
0017d6  f88d600b          STRB     r6,[sp,#0xb]
;;;1326   
;;;1327   lc640_write_long_ptr(lc640_adr,data);
0017da  a902              ADD      r1,sp,#8
0017dc  4620              MOV      r0,r4
0017de  f7fffffe          BL       lc640_write_long_ptr
;;;1328   
;;;1329   data[0]=*((char*)&in);
0017e2  f89d0010          LDRB     r0,[sp,#0x10]
0017e6  f88d0008          STRB     r0,[sp,#8]
;;;1330   data[1]=*(((char*)(&in))+1);
0017ea  f89d0011          LDRB     r0,[sp,#0x11]
0017ee  f88d0009          STRB     r0,[sp,#9]
;;;1331   data[2]=*((char*)&temp_temp);
0017f2  f89d0004          LDRB     r0,[sp,#4]
0017f6  f88d000a          STRB     r0,[sp,#0xa]
;;;1332   data[3]=*(((char*)(&temp_temp))+1);
0017fa  f89d0005          LDRB     r0,[sp,#5]
0017fe  f88d000b          STRB     r0,[sp,#0xb]
;;;1333   lc640_write_long_ptr(lc640_adr+4,data);
001802  a902              ADD      r1,sp,#8
001804  1d20              ADDS     r0,r4,#4
001806  f7fffffe          BL       lc640_write_long_ptr
;;;1334   
;;;1335   ke_date[0]=lc640_read_long(EE_SPC_KE_DATE0);
00180a  f44f70fc          MOV      r0,#0x1f8
00180e  f7fffffe          BL       lc640_read_long
001812  4d92              LDR      r5,|L1.6748|
001814  6028              STR      r0,[r5,#0]  ; ke_date
;;;1336   lc640_write_long_ptr(lc640_adr+8,(char*)&ke_date[0]);
001816  4629              MOV      r1,r5
001818  f1040008          ADD      r0,r4,#8
00181c  f7fffffe          BL       lc640_write_long_ptr
;;;1337   ke_date[1]=lc640_read_long(EE_SPC_KE_DATE1);	
001820  f44f70fe          MOV      r0,#0x1fc
001824  f7fffffe          BL       lc640_read_long
001828  6068              STR      r0,[r5,#4]  ; ke_date
;;;1338   lc640_write_long_ptr(lc640_adr+12,(char*)&ke_date[1]);
00182a  1d29              ADDS     r1,r5,#4
00182c  f104000c          ADD      r0,r4,#0xc
001830  f7fffffe          BL       lc640_write_long_ptr
;;;1339   
;;;1340   data[0]=LPC_RTC->YEAR;
001834  4d8a              LDR      r5,|L1.6752|
001836  8ba8              LDRH     r0,[r5,#0x1c]
001838  f88d0008          STRB     r0,[sp,#8]
;;;1341   data[1]=LPC_RTC->MONTH;
00183c  7e28              LDRB     r0,[r5,#0x18]
00183e  f88d0009          STRB     r0,[sp,#9]
;;;1342   data[2]=LPC_RTC->DOM;
001842  7b28              LDRB     r0,[r5,#0xc]
001844  f88d000a          STRB     r0,[sp,#0xa]
;;;1343   data[3]=0;
001848  f88d600b          STRB     r6,[sp,#0xb]
;;;1344   lc640_write_long_ptr(lc640_adr+16,data);
00184c  a902              ADD      r1,sp,#8
00184e  f1040010          ADD      r0,r4,#0x10
001852  f7fffffe          BL       lc640_write_long_ptr
;;;1345   
;;;1346   data[0]=LPC_RTC->HOUR;
001856  7a28              LDRB     r0,[r5,#8]
001858  f88d0008          STRB     r0,[sp,#8]
;;;1347   data[1]=LPC_RTC->MIN;
00185c  7928              LDRB     r0,[r5,#4]
00185e  f88d0009          STRB     r0,[sp,#9]
;;;1348   data[2]=LPC_RTC->SEC;
001862  7828              LDRB     r0,[r5,#0]
001864  f88d000a          STRB     r0,[sp,#0xa]
;;;1349   data[3]=0;
001868  f88d600b          STRB     r6,[sp,#0xb]
;;;1350   lc640_write_long_ptr(lc640_adr+20,data);
00186c  a902              ADD      r1,sp,#8
00186e  f1040014          ADD      r0,r4,#0x14
001872  f7fffffe          BL       lc640_write_long_ptr
;;;1351    
;;;1352   }
001876  b005              ADD      sp,sp,#0x14
001878  bdf0              POP      {r4-r7,pc}
;;;1353   
                          ENDP

                  vz_mem_hndl PROC
;;;1355   //-----------------------------------------------
;;;1356   void vz_mem_hndl(unsigned short in)
00187a  e92d4ff8          PUSH     {r3-r11,lr}
;;;1357   {
;;;1358   char data[4];
;;;1359   unsigned int event_ptr=0,lc640_adr,event_ptr_find=0,event_cnt;
00187e  f04f0600          MOV      r6,#0
001882  4634              MOV      r4,r6
;;;1360   //char avar_simbol;
;;;1361   
;;;1362   if(in==1)
;;;1363   	{
;;;1364   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;1365   	event_ptr++;	
;;;1366   	if(event_ptr>63)event_ptr=0;	
;;;1367   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;1368   	
;;;1369        event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;1370   	if(event_cnt!=63)event_cnt=event_ptr;
;;;1371   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;1372   	
;;;1373   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;1374   	
;;;1375   	data[0]='B';
;;;1376   	data[1]=0; 
;;;1377   	data[2]='Z';
;;;1378   	data[3]=0;
;;;1379   	lc640_write_long_ptr(lc640_adr,data);
;;;1380   
;;;1381   	data[0]=0;
;;;1382   	data[1]=0;
;;;1383   	data[2]=0;
;;;1384   	data[3]=0;
;;;1385   	lc640_write_long_ptr(lc640_adr+4,data);
;;;1386   
;;;1387   	data[0]=LPC_RTC->YEAR;
001884  f8df81dc          LDR      r8,|L1.6756|
001888  46a1              MOV      r9,r4                 ;1359
00188a  f04f0742          MOV      r7,#0x42              ;1375
00188e  f44f6a80          MOV      r10,#0x400            ;1373
001892  2801              CMP      r0,#1                 ;1362
001894  d002              BEQ      |L1.6300|
;;;1388   	data[1]=LPC_RTC->MONTH;
;;;1389   	data[2]=LPC_RTC->DOM;
;;;1390   	data[3]=0;
;;;1391   	lc640_write_long_ptr(lc640_adr+8,data);
;;;1392   
;;;1393   	data[0]=LPC_RTC->HOUR;
;;;1394   	data[1]=LPC_RTC->MIN;
;;;1395   	data[2]=LPC_RTC->SEC;
;;;1396   	data[3]=0;
;;;1397   	lc640_write_long_ptr(lc640_adr+12,data);
;;;1398   	
;;;1399   	data[0]='A';
;;;1400   	data[1]='A';
;;;1401   	data[2]='A';
;;;1402   	data[3]='A';
;;;1403   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1404   	
;;;1405   	data[0]='A';
;;;1406   	data[1]='A';
;;;1407   	data[2]='A';
;;;1408   	data[3]='A';
;;;1409   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1410   	
;;;1411   	data[0]='A';
;;;1412   	data[1]='A';
;;;1413   	data[2]='A';
;;;1414   	data[3]='A';
;;;1415   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1416   	
;;;1417   	data[0]='A';
;;;1418   	data[1]='A';
;;;1419   	data[2]='A';
;;;1420   	data[3]='A';
;;;1421   	lc640_write_long_ptr(lc640_adr+28,data);		
;;;1422    	
;;;1423   	}
;;;1424   
;;;1425   else if(in==0)
001896  2800              CMP      r0,#0
001898  d07e              BEQ      |L1.6552|
00189a  e12a              B        |L1.6898|
                  |L1.6300|
00189c  f44f6560          MOV      r5,#0xe00             ;1364
0018a0  4628              MOV      r0,r5                 ;1364
0018a2  f7fffffe          BL       lc640_read_int
0018a6  f1000001          ADD      r0,r0,#1              ;1365
0018aa  4604              MOV      r4,r0                 ;1365
0018ac  2c3f              CMP      r4,#0x3f              ;1366
0018ae  d901              BLS      |L1.6324|
0018b0  f04f0400          MOV      r4,#0                 ;1366
                  |L1.6324|
0018b4  b221              SXTH     r1,r4                 ;1367
0018b6  4628              MOV      r0,r5                 ;1367
0018b8  f7fffffe          BL       lc640_write_int
0018bc  f6406602          MOV      r6,#0xe02             ;1369
0018c0  4630              MOV      r0,r6                 ;1369
0018c2  f7fffffe          BL       lc640_read_int
0018c6  283f              CMP      r0,#0x3f              ;1370
0018c8  d000              BEQ      |L1.6348|
0018ca  4620              MOV      r0,r4                 ;1370
                  |L1.6348|
0018cc  b201              SXTH     r1,r0                 ;1371
0018ce  4630              MOV      r0,r6                 ;1371
0018d0  f7fffffe          BL       lc640_write_int
0018d4  4628              MOV      r0,r5                 ;1373
0018d6  f7fffffe          BL       lc640_read_int
0018da  eb0a1440          ADD      r4,r10,r0,LSL #5      ;1373
0018de  f88d7000          STRB     r7,[sp,#0]            ;1375
0018e2  f88d9001          STRB     r9,[sp,#1]            ;1376
0018e6  f04f005a          MOV      r0,#0x5a              ;1377
0018ea  f88d0002          STRB     r0,[sp,#2]            ;1377
0018ee  f88d9003          STRB     r9,[sp,#3]            ;1378
0018f2  4669              MOV      r1,sp                 ;1379
0018f4  4620              MOV      r0,r4                 ;1379
0018f6  f7fffffe          BL       lc640_write_long_ptr
0018fa  f8cd9000          STR      r9,[sp,#0]            ;1384
0018fe  4669              MOV      r1,sp                 ;1385
001900  1d20              ADDS     r0,r4,#4              ;1385
001902  f7fffffe          BL       lc640_write_long_ptr
001906  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1387
00190a  f88d0000          STRB     r0,[sp,#0]            ;1387
00190e  f8980038          LDRB     r0,[r8,#0x38]         ;1388
001912  f88d0001          STRB     r0,[sp,#1]            ;1388
001916  f898002c          LDRB     r0,[r8,#0x2c]         ;1389
00191a  f88d0002          STRB     r0,[sp,#2]            ;1389
00191e  f88d9003          STRB     r9,[sp,#3]            ;1390
001922  4669              MOV      r1,sp                 ;1391
001924  f1040008          ADD      r0,r4,#8              ;1391
001928  f7fffffe          BL       lc640_write_long_ptr
00192c  f8980028          LDRB     r0,[r8,#0x28]         ;1393
001930  f88d0000          STRB     r0,[sp,#0]            ;1393
001934  f8980024          LDRB     r0,[r8,#0x24]         ;1394
001938  f88d0001          STRB     r0,[sp,#1]            ;1394
00193c  f8980020          LDRB     r0,[r8,#0x20]         ;1395
001940  f88d0002          STRB     r0,[sp,#2]            ;1395
001944  f88d9003          STRB     r9,[sp,#3]            ;1396
001948  4669              MOV      r1,sp                 ;1397
00194a  f104000c          ADD      r0,r4,#0xc            ;1397
00194e  f7fffffe          BL       lc640_write_long_ptr
001952  f04f0541          MOV      r5,#0x41              ;1399
001956  f88d5000          STRB     r5,[sp,#0]            ;1399
00195a  f88d5001          STRB     r5,[sp,#1]            ;1400
00195e  f88d5002          STRB     r5,[sp,#2]            ;1401
001962  f88d5003          STRB     r5,[sp,#3]            ;1402
001966  4669              MOV      r1,sp                 ;1403
001968  f1040010          ADD      r0,r4,#0x10           ;1403
00196c  f7fffffe          BL       lc640_write_long_ptr
001970  f88d5000          STRB     r5,[sp,#0]            ;1405
001974  f88d5001          STRB     r5,[sp,#1]            ;1406
001978  f88d5002          STRB     r5,[sp,#2]            ;1407
00197c  f88d5003          STRB     r5,[sp,#3]            ;1408
001980  4669              MOV      r1,sp                 ;1409
001982  f1040014          ADD      r0,r4,#0x14           ;1409
001986  f7fffffe          BL       lc640_write_long_ptr
00198a  f88d5000          STRB     r5,[sp,#0]            ;1411
00198e  f88d5001          STRB     r5,[sp,#1]            ;1412
001992  f88d5002          STRB     r5,[sp,#2]            ;1413
001996  e000              B        |L1.6554|
                  |L1.6552|
001998  e014              B        |L1.6596|
                  |L1.6554|
00199a  f88d5003          STRB     r5,[sp,#3]            ;1414
00199e  4669              MOV      r1,sp                 ;1415
0019a0  f1040018          ADD      r0,r4,#0x18           ;1415
0019a4  f7fffffe          BL       lc640_write_long_ptr
0019a8  f88d5000          STRB     r5,[sp,#0]            ;1417
0019ac  f88d5001          STRB     r5,[sp,#1]            ;1418
0019b0  f88d5002          STRB     r5,[sp,#2]            ;1419
0019b4  f88d5003          STRB     r5,[sp,#3]            ;1420
0019b8  4669              MOV      r1,sp                 ;1421
0019ba  f104001c          ADD      r0,r4,#0x1c           ;1421
0019be  f7fffffe          BL       lc640_write_long_ptr
0019c2  e096              B        |L1.6898|
                  |L1.6596|
;;;1426   	{      
;;;1427        
;;;1428   vz_mem_hndl_lbl1: 
;;;1429   
;;;1430   	lc640_adr=EVENT_LOG+(event_ptr_find*32);
0019c4  eb0a1544          ADD      r5,r10,r4,LSL #5
;;;1431   
;;;1432        lc640_read_long_ptr(lc640_adr,data);
0019c8  4669              MOV      r1,sp
0019ca  4628              MOV      r0,r5
0019cc  f7fffffe          BL       lc640_read_long_ptr
;;;1433        
;;;1434        if(!((data[0]=='B')&&(data[2]=='Z')))
0019d0  f89d0000          LDRB     r0,[sp,#0]
0019d4  2842              CMP      r0,#0x42
0019d6  d103              BNE      |L1.6624|
0019d8  f89d0002          LDRB     r0,[sp,#2]
0019dc  285a              CMP      r0,#0x5a
0019de  d008              BEQ      |L1.6642|
                  |L1.6624|
;;;1435        	{        
;;;1436        	if(event_ptr_find)event_ptr_find--;
0019e0  b114              CBZ      r4,|L1.6632|
0019e2  f1a40401          SUB      r4,r4,#1
0019e6  e001              B        |L1.6636|
                  |L1.6632|
;;;1437        	else event_ptr_find=63;
0019e8  f04f043f          MOV      r4,#0x3f
                  |L1.6636|
;;;1438        	if(event_ptr_find==event_ptr)goto vz_mem_hndl_end;
0019ec  42b4              CMP      r4,r6
0019ee  d1e9              BNE      |L1.6596|
0019f0  e07f              B        |L1.6898|
                  |L1.6642|
;;;1439        	else goto vz_mem_hndl_lbl1;
;;;1440        	}
;;;1441        else 
;;;1442        	{
;;;1443        	lc640_read_long_ptr(lc640_adr+16,data);
0019f2  4669              MOV      r1,sp
0019f4  f1050010          ADD      r0,r5,#0x10
0019f8  f7fffffe          BL       lc640_read_long_ptr
;;;1444        	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
0019fc  f89d0000          LDRB     r0,[sp,#0]
001a00  2841              CMP      r0,#0x41
001a02  d10b              BNE      |L1.6684|
001a04  f89d0001          LDRB     r0,[sp,#1]
001a08  2841              CMP      r0,#0x41
001a0a  d107              BNE      |L1.6684|
001a0c  f89d0002          LDRB     r0,[sp,#2]
001a10  2841              CMP      r0,#0x41
001a12  d103              BNE      |L1.6684|
001a14  f89d0003          LDRB     r0,[sp,#3]
001a18  2841              CMP      r0,#0x41
001a1a  d02a              BEQ      |L1.6770|
                  |L1.6684|
;;;1445        		{        
;;;1446        		if(event_ptr_find)event_ptr_find--;
001a1c  b324              CBZ      r4,|L1.6760|
001a1e  f1a40401          SUB      r4,r4,#1
001a22  e023              B        |L1.6764|
                  |L1.6692|
001a24  42415420          DCB      "BAT #1 Alarm, assimetry",0
001a28  23312041
001a2c  6c61726d
001a30  2c206173
001a34  73696d65
001a38  74727900
                  |L1.6716|
001a3c  42415420          DCB      "BAT #2 Alarm, assimetry",0
001a40  23322041
001a44  6c61726d
001a48  2c206173
001a4c  73696d65
001a50  74727900
                  |L1.6740|
                          DCD      bat
                  |L1.6744|
                          DCD      bat_u_old_cnt
                  |L1.6748|
                          DCD      ke_date
                  |L1.6752|
                          DCD      0x40024020
                  |L1.6756|
                          DCD      0x40024000
                  |L1.6760|
;;;1447            		else event_ptr_find=63;
001a68  f04f043f          MOV      r4,#0x3f
                  |L1.6764|
;;;1448            		if(event_ptr_find==event_ptr)goto vz_mem_hndl_end;
001a6c  42b4              CMP      r4,r6
001a6e  d1a9              BNE      |L1.6596|
001a70  e03f              B        |L1.6898|
                  |L1.6770|
;;;1449        		else goto vz_mem_hndl_lbl1;
;;;1450        		}
;;;1451   
;;;1452        	}	
;;;1453   
;;;1454   
;;;1455   	
;;;1456   	data[0]=LPC_RTC->YEAR;
001a72  f8b8003c          LDRH     r0,[r8,#0x3c]
001a76  f88d0000          STRB     r0,[sp,#0]
;;;1457   	data[1]=LPC_RTC->MONTH;
001a7a  f8980038          LDRB     r0,[r8,#0x38]
001a7e  f88d0001          STRB     r0,[sp,#1]
;;;1458   	data[2]=LPC_RTC->DOM;
001a82  f898002c          LDRB     r0,[r8,#0x2c]
001a86  f88d0002          STRB     r0,[sp,#2]
;;;1459   	data[3]=0;
001a8a  f88d9003          STRB     r9,[sp,#3]
;;;1460   	lc640_write_long_ptr(lc640_adr+16,data);
001a8e  4669              MOV      r1,sp
001a90  f1050010          ADD      r0,r5,#0x10
001a94  f7fffffe          BL       lc640_write_long_ptr
;;;1461   
;;;1462   	data[0]=LPC_RTC->HOUR;
001a98  f8980028          LDRB     r0,[r8,#0x28]
001a9c  f88d0000          STRB     r0,[sp,#0]
;;;1463   	data[1]=LPC_RTC->MIN;
001aa0  f8980024          LDRB     r0,[r8,#0x24]
001aa4  f88d0001          STRB     r0,[sp,#1]
;;;1464   	data[2]=LPC_RTC->SEC;
001aa8  f8980020          LDRB     r0,[r8,#0x20]
001aac  f88d0002          STRB     r0,[sp,#2]
;;;1465   	data[3]=0;
001ab0  f88d9003          STRB     r9,[sp,#3]
;;;1466   	lc640_write_long_ptr(lc640_adr+20,data);
001ab4  4669              MOV      r1,sp
001ab6  f1050014          ADD      r0,r5,#0x14
001aba  f7fffffe          BL       lc640_write_long_ptr
;;;1467   	
;;;1468   	data[0]='B';
001abe  f88d7000          STRB     r7,[sp,#0]
;;;1469   	data[1]='B';
001ac2  f88d7001          STRB     r7,[sp,#1]
;;;1470   	data[2]='B';
001ac6  f88d7002          STRB     r7,[sp,#2]
;;;1471   	data[3]='B';
001aca  f88d7003          STRB     r7,[sp,#3]
;;;1472   	lc640_write_long_ptr(lc640_adr+24,data);
001ace  4669              MOV      r1,sp
001ad0  f1050018          ADD      r0,r5,#0x18
001ad4  f7fffffe          BL       lc640_write_long_ptr
;;;1473   	
;;;1474   	data[0]='B';
001ad8  f88d7000          STRB     r7,[sp,#0]
;;;1475   	data[1]='B';
001adc  f88d7001          STRB     r7,[sp,#1]
;;;1476   	data[2]='B';
001ae0  f88d7002          STRB     r7,[sp,#2]
;;;1477   	data[3]='B';
001ae4  f88d7003          STRB     r7,[sp,#3]
;;;1478   	lc640_write_long_ptr(lc640_adr+28,data);
001ae8  4669              MOV      r1,sp
001aea  f105001c          ADD      r0,r5,#0x1c
001aee  f7fffffe          BL       lc640_write_long_ptr
                  |L1.6898|
;;;1479   	
;;;1480   	}
;;;1481   
;;;1482   vz_mem_hndl_end:
;;;1483   __nop(); 
001af2  bf00              NOP      
                  |L1.6900|
;;;1484   
;;;1485   }
001af4  e4c2              B        |L1.5244|
;;;1486   
                          ENDP

                  speedz_mem_hndl PROC
;;;1487   //-----------------------------------------------
;;;1488   void speedz_mem_hndl(unsigned short in)	 //    (1-, 5- , 0- , 10- )
001af6  e92d4ff8          PUSH     {r3-r11,lr}
;;;1489   {
001afa  4605              MOV      r5,r0
;;;1490   char data[4];
;;;1491   unsigned int event_ptr=0,lc640_adr,event_ptr_find=0,event_cnt;
001afc  f04f0600          MOV      r6,#0
001b00  4634              MOV      r4,r6
;;;1492   //char avar_simbol;
;;;1493   
;;;1494   if((in==1)||(in==5)) //  
;;;1495   	{
;;;1496   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;1497   	event_ptr++;	
;;;1498   	if(event_ptr>63)event_ptr=0;	
;;;1499   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;1500   	
;;;1501       event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;1502   	if(event_cnt!=63)event_cnt=event_ptr;
;;;1503   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;1504   	
;;;1505   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;1506   	
;;;1507   	data[0]='s';
;;;1508   	data[1]=0;
;;;1509   	if(in==5)data[1]='a'; 
;;;1510   	data[2]='Z';
;;;1511   	data[3]=0;
;;;1512   	lc640_write_long_ptr(lc640_adr,data);
;;;1513   
;;;1514   	data[0]=0;
;;;1515   	data[1]=0;
;;;1516   	data[2]=0;
;;;1517   	data[3]=0;
;;;1518   	lc640_write_long_ptr(lc640_adr+4,data);
;;;1519   
;;;1520   	data[0]=LPC_RTC->YEAR;
001b02  f8df8a3c          LDR      r8,|L1.9536|
001b06  46a1              MOV      r9,r4                 ;1491
001b08  f44f6a80          MOV      r10,#0x400            ;1505
001b0c  2d01              CMP      r5,#1                 ;1494
001b0e  d012              BEQ      |L1.6966|
001b10  2d05              CMP      r5,#5                 ;1494
001b12  d010              BEQ      |L1.6966|
;;;1521   	data[1]=LPC_RTC->MONTH;
;;;1522   	data[2]=LPC_RTC->DOM;
;;;1523   	data[3]=0;
;;;1524   	lc640_write_long_ptr(lc640_adr+8,data);
;;;1525   
;;;1526   	data[0]=LPC_RTC->HOUR;
;;;1527   	data[1]=LPC_RTC->MIN;
;;;1528   	data[2]=LPC_RTC->SEC;
;;;1529   	data[3]=0;
;;;1530   	lc640_write_long_ptr(lc640_adr+12,data);
;;;1531   	
;;;1532   	data[0]='A';
;;;1533   	data[1]='A';
;;;1534   	data[2]='A';
;;;1535   	data[3]='A';
;;;1536   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1537   	
;;;1538   	data[0]='A';
;;;1539   	data[1]='A';
;;;1540   	data[2]='A';
;;;1541   	data[3]='A';
;;;1542   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1543   	
;;;1544   	data[0]='A';
;;;1545   	data[1]='A';
;;;1546   	data[2]='A';
;;;1547   	data[3]='A';
;;;1548   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1549   	
;;;1550   	data[0]='A';
;;;1551   	data[1]='A';
;;;1552   	data[2]='A';
;;;1553   	data[3]='A';
;;;1554   	lc640_write_long_ptr(lc640_adr+28,data);		
;;;1555    	
;;;1556   	}
;;;1557   
;;;1558   else if(in==0)	// 
001b14  2d00              CMP      r5,#0
001b16  d07d              BEQ      |L1.7188|
;;;1559   	{      
;;;1560   	char i;     
;;;1561   	event_ptr_find=0;
;;;1562   	for (i=0;i<63;i++)
;;;1563   		{
;;;1564   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
;;;1565   
;;;1566        	lc640_read_long_ptr(lc640_adr,data);
;;;1567        
;;;1568        	if(!((data[0]=='s')&&(data[2]=='Z')))
;;;1569        		{        
;;;1570        		if(event_ptr_find)event_ptr_find--;
;;;1571        		else event_ptr_find=63;
;;;1572        		if(event_ptr_find==event_ptr)
;;;1573   				{
;;;1574   				lc640_adr=0;
;;;1575   				break;
;;;1576   				}
;;;1577        		else continue;
;;;1578        		}
;;;1579        	else 
;;;1580        		{
;;;1581        		lc640_read_long_ptr(lc640_adr+16,data);
;;;1582        		if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;1583        			{        
;;;1584        			if(event_ptr_find)event_ptr_find--;
;;;1585            		else event_ptr_find=63;
;;;1586            		if(event_ptr_find==event_ptr)
;;;1587   					{
;;;1588   					lc640_adr=0;
;;;1589   					break;
;;;1590   					}
;;;1591        			else continue;
;;;1592        			}
;;;1593        		}	
;;;1594   		}
;;;1595   	if(lc640_adr!=0)
;;;1596   		{
;;;1597   		data[0]=LPC_RTC->YEAR;
;;;1598   		data[1]=LPC_RTC->MONTH;
;;;1599   		data[2]=LPC_RTC->DOM;
;;;1600   		data[3]=0;
;;;1601   		lc640_write_long_ptr(lc640_adr+16,data);
;;;1602   	
;;;1603   		data[0]=LPC_RTC->HOUR;
;;;1604   		data[1]=LPC_RTC->MIN;
;;;1605   		data[2]=LPC_RTC->SEC;
;;;1606   		data[3]=0;
;;;1607   		lc640_write_long_ptr(lc640_adr+20,data);
;;;1608   		
;;;1609   		data[0]='C';
;;;1610   		data[1]='C';
;;;1611   		data[2]='C';
;;;1612   		data[3]='C';
;;;1613   		lc640_write_long_ptr(lc640_adr+24,data);
;;;1614   		
;;;1615   		data[0]='C';
;;;1616   		data[1]='C';
;;;1617   		data[2]='C';
;;;1618   		data[3]='C';
;;;1619   		lc640_write_long_ptr(lc640_adr+28,data);
;;;1620   		}
;;;1621   	}
;;;1622   else if(in==10) 	//  
001b18  2d0a              CMP      r5,#0xa
001b1a  d17c              BNE      |L1.7190|
;;;1623   	{      
;;;1624   	char i;     
;;;1625   
;;;1626   	event_ptr_find=0;
;;;1627   	for (i=0;i<63;i++)
001b1c  f04f0700          MOV      r7,#0
                  |L1.6944|
;;;1628   		{
;;;1629   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
001b20  eb0a1544          ADD      r5,r10,r4,LSL #5
;;;1630   
;;;1631        	lc640_read_long_ptr(lc640_adr,data);
001b24  4669              MOV      r1,sp
001b26  4628              MOV      r0,r5
001b28  f7fffffe          BL       lc640_read_long_ptr
;;;1632        
;;;1633        	if(!((data[0]=='s')&&(data[2]=='Z')))
001b2c  f89d0000          LDRB     r0,[sp,#0]
001b30  2873              CMP      r0,#0x73
001b32  d171              BNE      |L1.7192|
001b34  e122              B        |L1.7548|
                  |L1.6966|
001b36  f44f6660          MOV      r6,#0xe00             ;1496
001b3a  4630              MOV      r0,r6                 ;1496
001b3c  f7fffffe          BL       lc640_read_int
001b40  f1000001          ADD      r0,r0,#1              ;1497
001b44  4604              MOV      r4,r0                 ;1497
001b46  2c3f              CMP      r4,#0x3f              ;1498
001b48  d901              BLS      |L1.6990|
001b4a  f04f0400          MOV      r4,#0                 ;1498
                  |L1.6990|
001b4e  b221              SXTH     r1,r4                 ;1499
001b50  4630              MOV      r0,r6                 ;1499
001b52  f7fffffe          BL       lc640_write_int
001b56  f6406702          MOV      r7,#0xe02             ;1501
001b5a  4638              MOV      r0,r7                 ;1501
001b5c  f7fffffe          BL       lc640_read_int
001b60  283f              CMP      r0,#0x3f              ;1502
001b62  d000              BEQ      |L1.7014|
001b64  4620              MOV      r0,r4                 ;1502
                  |L1.7014|
001b66  b201              SXTH     r1,r0                 ;1503
001b68  4638              MOV      r0,r7                 ;1503
001b6a  f7fffffe          BL       lc640_write_int
001b6e  4630              MOV      r0,r6                 ;1505
001b70  f7fffffe          BL       lc640_read_int
001b74  eb0a1440          ADD      r4,r10,r0,LSL #5      ;1505
001b78  f04f0073          MOV      r0,#0x73              ;1507
001b7c  f88d0000          STRB     r0,[sp,#0]            ;1507
001b80  f88d9001          STRB     r9,[sp,#1]            ;1508
001b84  2d05              CMP      r5,#5                 ;1509
001b86  d103              BNE      |L1.7056|
001b88  f04f0061          MOV      r0,#0x61              ;1509
001b8c  f88d0001          STRB     r0,[sp,#1]            ;1509
                  |L1.7056|
001b90  f04f005a          MOV      r0,#0x5a              ;1510
001b94  f88d0002          STRB     r0,[sp,#2]            ;1510
001b98  f88d9003          STRB     r9,[sp,#3]            ;1511
001b9c  4669              MOV      r1,sp                 ;1512
001b9e  4620              MOV      r0,r4                 ;1512
001ba0  f7fffffe          BL       lc640_write_long_ptr
001ba4  f8cd9000          STR      r9,[sp,#0]            ;1517
001ba8  4669              MOV      r1,sp                 ;1518
001baa  1d20              ADDS     r0,r4,#4              ;1518
001bac  f7fffffe          BL       lc640_write_long_ptr
001bb0  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1520
001bb4  f88d0000          STRB     r0,[sp,#0]            ;1520
001bb8  f8980038          LDRB     r0,[r8,#0x38]         ;1521
001bbc  f88d0001          STRB     r0,[sp,#1]            ;1521
001bc0  f898002c          LDRB     r0,[r8,#0x2c]         ;1522
001bc4  f88d0002          STRB     r0,[sp,#2]            ;1522
001bc8  f88d9003          STRB     r9,[sp,#3]            ;1523
001bcc  4669              MOV      r1,sp                 ;1524
001bce  f1040008          ADD      r0,r4,#8              ;1524
001bd2  f7fffffe          BL       lc640_write_long_ptr
001bd6  f8980028          LDRB     r0,[r8,#0x28]         ;1526
001bda  f88d0000          STRB     r0,[sp,#0]            ;1526
001bde  f8980024          LDRB     r0,[r8,#0x24]         ;1527
001be2  f88d0001          STRB     r0,[sp,#1]            ;1527
001be6  f8980020          LDRB     r0,[r8,#0x20]         ;1528
001bea  f88d0002          STRB     r0,[sp,#2]            ;1528
001bee  f88d9003          STRB     r9,[sp,#3]            ;1529
001bf2  4669              MOV      r1,sp                 ;1530
001bf4  f104000c          ADD      r0,r4,#0xc            ;1530
001bf8  f7fffffe          BL       lc640_write_long_ptr
001bfc  f04f0541          MOV      r5,#0x41              ;1532
001c00  f88d5000          STRB     r5,[sp,#0]            ;1532
001c04  f88d5001          STRB     r5,[sp,#1]            ;1533
001c08  f88d5002          STRB     r5,[sp,#2]            ;1534
001c0c  f88d5003          STRB     r5,[sp,#3]            ;1535
001c10  4669              MOV      r1,sp                 ;1536
001c12  e002              B        |L1.7194|
                  |L1.7188|
001c14  e02d              B        |L1.7282|
                  |L1.7190|
001c16  e02b              B        |L1.7280|
                  |L1.7192|
001c18  e0b4              B        |L1.7556|
                  |L1.7194|
001c1a  f1040010          ADD      r0,r4,#0x10           ;1536
001c1e  f7fffffe          BL       lc640_write_long_ptr
001c22  f88d5000          STRB     r5,[sp,#0]            ;1538
001c26  f88d5001          STRB     r5,[sp,#1]            ;1539
001c2a  f88d5002          STRB     r5,[sp,#2]            ;1540
001c2e  f88d5003          STRB     r5,[sp,#3]            ;1541
001c32  4669              MOV      r1,sp                 ;1542
001c34  f1040014          ADD      r0,r4,#0x14           ;1542
001c38  f7fffffe          BL       lc640_write_long_ptr
001c3c  f88d5000          STRB     r5,[sp,#0]            ;1544
001c40  f88d5001          STRB     r5,[sp,#1]            ;1545
001c44  f88d5002          STRB     r5,[sp,#2]            ;1546
001c48  f88d5003          STRB     r5,[sp,#3]            ;1547
001c4c  4669              MOV      r1,sp                 ;1548
001c4e  f1040018          ADD      r0,r4,#0x18           ;1548
001c52  f7fffffe          BL       lc640_write_long_ptr
001c56  f88d5000          STRB     r5,[sp,#0]            ;1550
001c5a  f88d5001          STRB     r5,[sp,#1]            ;1551
001c5e  f88d5002          STRB     r5,[sp,#2]            ;1552
001c62  f88d5003          STRB     r5,[sp,#3]            ;1553
001c66  4669              MOV      r1,sp                 ;1554
001c68  f104001c          ADD      r0,r4,#0x1c           ;1554
001c6c  f7fffffe          BL       lc640_write_long_ptr
                  |L1.7280|
;;;1634        		{        
;;;1635        		if(event_ptr_find)event_ptr_find--;
;;;1636        		else event_ptr_find=63;
;;;1637        		if(event_ptr_find==event_ptr)
;;;1638   				{
;;;1639   				lc640_adr=0;
;;;1640   				break;
;;;1641   				}
;;;1642        		else continue;
;;;1643        		}
;;;1644        	else 
;;;1645        		{
;;;1646        		lc640_read_long_ptr(lc640_adr+16,data);
;;;1647        		if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;1648        			{        
;;;1649        			if(event_ptr_find)event_ptr_find--;
;;;1650            		else event_ptr_find=63;
;;;1651            		if(event_ptr_find==event_ptr)
;;;1652   					{
;;;1653   					lc640_adr=0;
;;;1654   					break;
;;;1655   					}
;;;1656        			else continue;
;;;1657        			}
;;;1658        		}	
;;;1659   		}
;;;1660   	if(lc640_adr!=0)
;;;1661   		{
;;;1662   		data[0]=LPC_RTC->YEAR;
;;;1663   		data[1]=LPC_RTC->MONTH;
;;;1664   		data[2]=LPC_RTC->DOM;
;;;1665   		data[3]=0;
;;;1666   		lc640_write_long_ptr(lc640_adr+16,data);
;;;1667   	
;;;1668   		data[0]=LPC_RTC->HOUR;
;;;1669   		data[1]=LPC_RTC->MIN;
;;;1670   		data[2]=LPC_RTC->SEC;
;;;1671   		data[3]=0;
;;;1672   		lc640_write_long_ptr(lc640_adr+20,data);
;;;1673   		
;;;1674   		data[0]='B';
;;;1675   		data[1]='B';
;;;1676   		data[2]='B';
;;;1677   		data[3]='B';
;;;1678   		lc640_write_long_ptr(lc640_adr+24,data);
;;;1679   		
;;;1680   		data[0]='B';
;;;1681   		data[1]='B';
;;;1682   		data[2]='B';
;;;1683   		data[3]='B';
;;;1684   		lc640_write_long_ptr(lc640_adr+28,data);
;;;1685   		}
;;;1686   	}
;;;1687   }
001c70  e404              B        |L1.5244|
                  |L1.7282|
001c72  f04f0700          MOV      r7,#0                 ;1562
                  |L1.7286|
001c76  eb0a1544          ADD      r5,r10,r4,LSL #5      ;1564
001c7a  4669              MOV      r1,sp                 ;1566
001c7c  4628              MOV      r0,r5                 ;1566
001c7e  f7fffffe          BL       lc640_read_long_ptr
001c82  f89d0000          LDRB     r0,[sp,#0]            ;1568
001c86  2873              CMP      r0,#0x73              ;1568
001c88  d103              BNE      |L1.7314|
001c8a  f89d0002          LDRB     r0,[sp,#2]            ;1568
001c8e  285a              CMP      r0,#0x5a              ;1568
001c90  d00a              BEQ      |L1.7336|
                  |L1.7314|
001c92  b114              CBZ      r4,|L1.7322|
001c94  f1a40401          SUB      r4,r4,#1              ;1570
001c98  e001              B        |L1.7326|
                  |L1.7322|
001c9a  f04f043f          MOV      r4,#0x3f              ;1571
                  |L1.7326|
001c9e  42b4              CMP      r4,r6                 ;1572
001ca0  d122              BNE      |L1.7400|
001ca2  f04f0500          MOV      r5,#0                 ;1574
001ca6  e024              B        |L1.7410|
                  |L1.7336|
001ca8  4669              MOV      r1,sp                 ;1581
001caa  f1050010          ADD      r0,r5,#0x10           ;1581
001cae  f7fffffe          BL       lc640_read_long_ptr
001cb2  f89d0000          LDRB     r0,[sp,#0]            ;1582
001cb6  2841              CMP      r0,#0x41              ;1582
001cb8  d10b              BNE      |L1.7378|
001cba  f89d0001          LDRB     r0,[sp,#1]            ;1582
001cbe  2841              CMP      r0,#0x41              ;1582
001cc0  d107              BNE      |L1.7378|
001cc2  f89d0002          LDRB     r0,[sp,#2]            ;1582
001cc6  2841              CMP      r0,#0x41              ;1582
001cc8  d103              BNE      |L1.7378|
001cca  f89d0003          LDRB     r0,[sp,#3]            ;1582
001cce  2841              CMP      r0,#0x41              ;1582
001cd0  d00a              BEQ      |L1.7400|
                  |L1.7378|
001cd2  b114              CBZ      r4,|L1.7386|
001cd4  f1a40401          SUB      r4,r4,#1              ;1584
001cd8  e001              B        |L1.7390|
                  |L1.7386|
001cda  f04f043f          MOV      r4,#0x3f              ;1585
                  |L1.7390|
001cde  42b4              CMP      r4,r6                 ;1586
001ce0  d102              BNE      |L1.7400|
001ce2  f04f0500          MOV      r5,#0                 ;1588
001ce6  e004              B        |L1.7410|
                  |L1.7400|
001ce8  f1070701          ADD      r7,r7,#1              ;1562
001cec  b2ff              UXTB     r7,r7                 ;1562
001cee  2f3f              CMP      r7,#0x3f              ;1562
001cf0  d3c1              BCC      |L1.7286|
                  |L1.7410|
001cf2  2d00              CMP      r5,#0                 ;1595
001cf4  d0bc              BEQ      |L1.7280|
001cf6  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1597
001cfa  f88d0000          STRB     r0,[sp,#0]            ;1597
001cfe  f8980038          LDRB     r0,[r8,#0x38]         ;1598
001d02  f88d0001          STRB     r0,[sp,#1]            ;1598
001d06  f898002c          LDRB     r0,[r8,#0x2c]         ;1599
001d0a  f88d0002          STRB     r0,[sp,#2]            ;1599
001d0e  f88d9003          STRB     r9,[sp,#3]            ;1600
001d12  4669              MOV      r1,sp                 ;1601
001d14  f1050010          ADD      r0,r5,#0x10           ;1601
001d18  f7fffffe          BL       lc640_write_long_ptr
001d1c  f8980028          LDRB     r0,[r8,#0x28]         ;1603
001d20  f88d0000          STRB     r0,[sp,#0]            ;1603
001d24  f8980024          LDRB     r0,[r8,#0x24]         ;1604
001d28  f88d0001          STRB     r0,[sp,#1]            ;1604
001d2c  f8980020          LDRB     r0,[r8,#0x20]         ;1605
001d30  f88d0002          STRB     r0,[sp,#2]            ;1605
001d34  f88d9003          STRB     r9,[sp,#3]            ;1606
001d38  4669              MOV      r1,sp                 ;1607
001d3a  f1050014          ADD      r0,r5,#0x14           ;1607
001d3e  f7fffffe          BL       lc640_write_long_ptr
001d42  f04f0443          MOV      r4,#0x43              ;1609
001d46  f88d4000          STRB     r4,[sp,#0]            ;1609
001d4a  f88d4001          STRB     r4,[sp,#1]            ;1610
001d4e  f88d4002          STRB     r4,[sp,#2]            ;1611
001d52  f88d4003          STRB     r4,[sp,#3]            ;1612
001d56  4669              MOV      r1,sp                 ;1613
001d58  f1050018          ADD      r0,r5,#0x18           ;1613
001d5c  f7fffffe          BL       lc640_write_long_ptr
001d60  f88d4000          STRB     r4,[sp,#0]            ;1615
001d64  f88d4001          STRB     r4,[sp,#1]            ;1616
001d68  f88d4002          STRB     r4,[sp,#2]            ;1617
001d6c  f88d4003          STRB     r4,[sp,#3]            ;1618
001d70  4669              MOV      r1,sp                 ;1619
001d72  f105001c          ADD      r0,r5,#0x1c           ;1619
001d76  f7fffffe          BL       lc640_write_long_ptr
                  |L1.7546|
001d7a  e4e8              B        |L1.5966|
                  |L1.7548|
001d7c  f89d0002          LDRB     r0,[sp,#2]            ;1633
001d80  285a              CMP      r0,#0x5a              ;1633
001d82  d00a              BEQ      |L1.7578|
                  |L1.7556|
001d84  b114              CBZ      r4,|L1.7564|
001d86  f1a40401          SUB      r4,r4,#1              ;1635
001d8a  e001              B        |L1.7568|
                  |L1.7564|
001d8c  f04f043f          MOV      r4,#0x3f              ;1636
                  |L1.7568|
001d90  42b4              CMP      r4,r6                 ;1637
001d92  d122              BNE      |L1.7642|
001d94  f04f0500          MOV      r5,#0                 ;1639
001d98  e025              B        |L1.7654|
                  |L1.7578|
001d9a  4669              MOV      r1,sp                 ;1646
001d9c  f1050010          ADD      r0,r5,#0x10           ;1646
001da0  f7fffffe          BL       lc640_read_long_ptr
001da4  f89d0000          LDRB     r0,[sp,#0]            ;1647
001da8  2841              CMP      r0,#0x41              ;1647
001daa  d10b              BNE      |L1.7620|
001dac  f89d0001          LDRB     r0,[sp,#1]            ;1647
001db0  2841              CMP      r0,#0x41              ;1647
001db2  d107              BNE      |L1.7620|
001db4  f89d0002          LDRB     r0,[sp,#2]            ;1647
001db8  2841              CMP      r0,#0x41              ;1647
001dba  d103              BNE      |L1.7620|
001dbc  f89d0003          LDRB     r0,[sp,#3]            ;1647
001dc0  2841              CMP      r0,#0x41              ;1647
001dc2  d00a              BEQ      |L1.7642|
                  |L1.7620|
001dc4  b114              CBZ      r4,|L1.7628|
001dc6  f1a40401          SUB      r4,r4,#1              ;1649
001dca  e001              B        |L1.7632|
                  |L1.7628|
001dcc  f04f043f          MOV      r4,#0x3f              ;1650
                  |L1.7632|
001dd0  42b4              CMP      r4,r6                 ;1651
001dd2  d102              BNE      |L1.7642|
001dd4  f04f0500          MOV      r5,#0                 ;1653
001dd8  e005              B        |L1.7654|
                  |L1.7642|
001dda  f1070701          ADD      r7,r7,#1              ;1627
001dde  b2ff              UXTB     r7,r7                 ;1627
001de0  2f3f              CMP      r7,#0x3f              ;1627
001de2  f4ffae9d          BCC      |L1.6944|
                  |L1.7654|
001de6  2d00              CMP      r5,#0                 ;1660
001de8  d0c7              BEQ      |L1.7546|
001dea  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1662
001dee  f88d0000          STRB     r0,[sp,#0]            ;1662
001df2  f8980038          LDRB     r0,[r8,#0x38]         ;1663
001df6  f88d0001          STRB     r0,[sp,#1]            ;1663
001dfa  f898002c          LDRB     r0,[r8,#0x2c]         ;1664
001dfe  f88d0002          STRB     r0,[sp,#2]            ;1664
001e02  f88d9003          STRB     r9,[sp,#3]            ;1665
001e06  4669              MOV      r1,sp                 ;1666
001e08  f1050010          ADD      r0,r5,#0x10           ;1666
001e0c  f7fffffe          BL       lc640_write_long_ptr
001e10  f8980028          LDRB     r0,[r8,#0x28]         ;1668
001e14  f88d0000          STRB     r0,[sp,#0]            ;1668
001e18  f8980024          LDRB     r0,[r8,#0x24]         ;1669
001e1c  f88d0001          STRB     r0,[sp,#1]            ;1669
001e20  f8980020          LDRB     r0,[r8,#0x20]         ;1670
001e24  f88d0002          STRB     r0,[sp,#2]            ;1670
001e28  f88d9003          STRB     r9,[sp,#3]            ;1671
001e2c  4669              MOV      r1,sp                 ;1672
001e2e  f1050014          ADD      r0,r5,#0x14           ;1672
001e32  f7fffffe          BL       lc640_write_long_ptr
001e36  f04f0442          MOV      r4,#0x42              ;1674
001e3a  f88d4000          STRB     r4,[sp,#0]            ;1674
001e3e  f88d4001          STRB     r4,[sp,#1]            ;1675
001e42  f88d4002          STRB     r4,[sp,#2]            ;1676
001e46  f88d4003          STRB     r4,[sp,#3]            ;1677
001e4a  4669              MOV      r1,sp                 ;1678
001e4c  f1050018          ADD      r0,r5,#0x18           ;1678
001e50  f7fffffe          BL       lc640_write_long_ptr
001e54  f88d4000          STRB     r4,[sp,#0]            ;1680
001e58  f88d4001          STRB     r4,[sp,#1]            ;1681
001e5c  f88d4002          STRB     r4,[sp,#2]            ;1682
001e60  f88d4003          STRB     r4,[sp,#3]            ;1683
001e64  4669              MOV      r1,sp                 ;1684
001e66  f105001c          ADD      r0,r5,#0x1c           ;1684
001e6a  f7fffffe          BL       lc640_write_long_ptr
001e6e  e46e              B        |L1.5966|
;;;1688     
                          ENDP

                  uz_mem_hndl PROC
;;;1690   //-----------------------------------------------
;;;1691   void uz_mem_hndl(unsigned short in)	 //   
001e70  e92d4ff8          PUSH     {r3-r11,lr}
;;;1692   {
;;;1693   char data[4];
;;;1694   unsigned int event_ptr=0,lc640_adr,event_ptr_find=0,event_cnt;
001e74  f04f0600          MOV      r6,#0
001e78  4634              MOV      r4,r6
;;;1695   //char avar_simbol;
;;;1696   
;;;1697   if(in==1) //  
;;;1698   	{
;;;1699   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;1700   	event_ptr++;	
;;;1701   	if(event_ptr>63)event_ptr=0;	
;;;1702   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;1703   	
;;;1704       event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;1705   	if(event_cnt!=63)event_cnt=event_ptr;
;;;1706   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;1707   	
;;;1708   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;1709   	
;;;1710   	data[0]='u';
;;;1711   	data[1]=0; 
;;;1712   	data[2]='Z';
;;;1713   	data[3]=0;
;;;1714   	lc640_write_long_ptr(lc640_adr,data);
;;;1715   
;;;1716   	data[0]=0;
;;;1717   	data[1]=0;
;;;1718   	data[2]=0;
;;;1719   	data[3]=0;
;;;1720   	lc640_write_long_ptr(lc640_adr+4,data);
;;;1721   
;;;1722   	data[0]=LPC_RTC->YEAR;
001e7a  f8df86c4          LDR      r8,|L1.9536|
001e7e  46a1              MOV      r9,r4                 ;1694
001e80  f44f6a80          MOV      r10,#0x400            ;1708
001e84  2801              CMP      r0,#1                 ;1697
001e86  d010              BEQ      |L1.7850|
;;;1723   	data[1]=LPC_RTC->MONTH;
;;;1724   	data[2]=LPC_RTC->DOM;
;;;1725   	data[3]=0;
;;;1726   	lc640_write_long_ptr(lc640_adr+8,data);
;;;1727   
;;;1728   	data[0]=LPC_RTC->HOUR;
;;;1729   	data[1]=LPC_RTC->MIN;
;;;1730   	data[2]=LPC_RTC->SEC;
;;;1731   	data[3]=0;
;;;1732   	lc640_write_long_ptr(lc640_adr+12,data);
;;;1733   	
;;;1734   	data[0]='A';
;;;1735   	data[1]='A';
;;;1736   	data[2]='A';
;;;1737   	data[3]='A';
;;;1738   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1739   	
;;;1740   	data[0]='A';
;;;1741   	data[1]='A';
;;;1742   	data[2]='A';
;;;1743   	data[3]='A';
;;;1744   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1745   	
;;;1746   	data[0]='A';
;;;1747   	data[1]='A';
;;;1748   	data[2]='A';
;;;1749   	data[3]='A';
;;;1750   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1751   	
;;;1752   	data[0]='A';
;;;1753   	data[1]='A';
;;;1754   	data[2]='A';
;;;1755   	data[3]='A';
;;;1756   	lc640_write_long_ptr(lc640_adr+28,data);		
;;;1757    	
;;;1758   	}
;;;1759   
;;;1760   else if(in==0)	// 
001e88  2800              CMP      r0,#0
001e8a  d07d              BEQ      |L1.8072|
;;;1761   	{      
;;;1762   	char i;     
;;;1763   	event_ptr_find=0;
;;;1764   	for (i=0;i<63;i++)
;;;1765   		{
;;;1766   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
;;;1767   
;;;1768        	lc640_read_long_ptr(lc640_adr,data);
;;;1769        
;;;1770        	if(!((data[0]=='u')&&(data[2]=='Z')))
;;;1771        		{        
;;;1772        		if(event_ptr_find)event_ptr_find--;
;;;1773        		else event_ptr_find=63;
;;;1774        		if(event_ptr_find==event_ptr)
;;;1775   				{
;;;1776   				lc640_adr=0;
;;;1777   				break;
;;;1778   				}
;;;1779        		else continue;
;;;1780        		}
;;;1781        	else 
;;;1782        		{
;;;1783        		lc640_read_long_ptr(lc640_adr+16,data);
;;;1784        		if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;1785        			{        
;;;1786        			if(event_ptr_find)event_ptr_find--;
;;;1787            		else event_ptr_find=63;
;;;1788            		if(event_ptr_find==event_ptr)
;;;1789   					{
;;;1790   					lc640_adr=0;
;;;1791   					break;
;;;1792   					}
;;;1793        			else continue;
;;;1794        			}
;;;1795        		}	
;;;1796   		}
;;;1797   	if(lc640_adr!=0)
;;;1798   		{
;;;1799   		data[0]=LPC_RTC->YEAR;
;;;1800   		data[1]=LPC_RTC->MONTH;
;;;1801   		data[2]=LPC_RTC->DOM;
;;;1802   		data[3]=0;
;;;1803   		lc640_write_long_ptr(lc640_adr+16,data);
;;;1804   	
;;;1805   		data[0]=LPC_RTC->HOUR;
;;;1806   		data[1]=LPC_RTC->MIN;
;;;1807   		data[2]=LPC_RTC->SEC;
;;;1808   		data[3]=0;
;;;1809   		lc640_write_long_ptr(lc640_adr+20,data);
;;;1810   		
;;;1811   		data[0]='C';
;;;1812   		data[1]='C';
;;;1813   		data[2]='C';
;;;1814   		data[3]='C';
;;;1815   		lc640_write_long_ptr(lc640_adr+24,data);
;;;1816   		
;;;1817   		data[0]='C';
;;;1818   		data[1]='C';
;;;1819   		data[2]='C';
;;;1820   		data[3]='C';
;;;1821   		lc640_write_long_ptr(lc640_adr+28,data);
;;;1822   		}
;;;1823   	}
;;;1824   else if(in==10) 	//  
001e8c  280a              CMP      r0,#0xa
001e8e  d17c              BNE      |L1.8074|
;;;1825   	{      
;;;1826   	char i;     
;;;1827   
;;;1828   	event_ptr_find=0;
;;;1829   	for (i=0;i<63;i++)
001e90  f04f0700          MOV      r7,#0
                  |L1.7828|
;;;1830   		{
;;;1831   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
001e94  eb0a1544          ADD      r5,r10,r4,LSL #5
;;;1832   
;;;1833        	lc640_read_long_ptr(lc640_adr,data);
001e98  4669              MOV      r1,sp
001e9a  4628              MOV      r0,r5
001e9c  f7fffffe          BL       lc640_read_long_ptr
;;;1834        
;;;1835        	if(!((data[0]=='u')&&(data[2]=='Z')))
001ea0  f89d0000          LDRB     r0,[sp,#0]
001ea4  2875              CMP      r0,#0x75
001ea6  d171              BNE      |L1.8076|
001ea8  e11c              B        |L1.8420|
                  |L1.7850|
001eaa  f44f6560          MOV      r5,#0xe00             ;1699
001eae  4628              MOV      r0,r5                 ;1699
001eb0  f7fffffe          BL       lc640_read_int
001eb4  f1000001          ADD      r0,r0,#1              ;1700
001eb8  4604              MOV      r4,r0                 ;1700
001eba  2c3f              CMP      r4,#0x3f              ;1701
001ebc  d901              BLS      |L1.7874|
001ebe  f04f0400          MOV      r4,#0                 ;1701
                  |L1.7874|
001ec2  b221              SXTH     r1,r4                 ;1702
001ec4  4628              MOV      r0,r5                 ;1702
001ec6  f7fffffe          BL       lc640_write_int
001eca  f6406602          MOV      r6,#0xe02             ;1704
001ece  4630              MOV      r0,r6                 ;1704
001ed0  f7fffffe          BL       lc640_read_int
001ed4  283f              CMP      r0,#0x3f              ;1705
001ed6  d000              BEQ      |L1.7898|
001ed8  4620              MOV      r0,r4                 ;1705
                  |L1.7898|
001eda  b201              SXTH     r1,r0                 ;1706
001edc  4630              MOV      r0,r6                 ;1706
001ede  f7fffffe          BL       lc640_write_int
001ee2  4628              MOV      r0,r5                 ;1708
001ee4  f7fffffe          BL       lc640_read_int
001ee8  eb0a1440          ADD      r4,r10,r0,LSL #5      ;1708
001eec  f04f0075          MOV      r0,#0x75              ;1710
001ef0  f88d0000          STRB     r0,[sp,#0]            ;1710
001ef4  f88d9001          STRB     r9,[sp,#1]            ;1711
001ef8  f04f005a          MOV      r0,#0x5a              ;1712
001efc  f88d0002          STRB     r0,[sp,#2]            ;1712
001f00  f88d9003          STRB     r9,[sp,#3]            ;1713
001f04  4669              MOV      r1,sp                 ;1714
001f06  4620              MOV      r0,r4                 ;1714
001f08  f7fffffe          BL       lc640_write_long_ptr
001f0c  f8cd9000          STR      r9,[sp,#0]            ;1719
001f10  4669              MOV      r1,sp                 ;1720
001f12  1d20              ADDS     r0,r4,#4              ;1720
001f14  f7fffffe          BL       lc640_write_long_ptr
001f18  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1722
001f1c  f88d0000          STRB     r0,[sp,#0]            ;1722
001f20  f8980038          LDRB     r0,[r8,#0x38]         ;1723
001f24  f88d0001          STRB     r0,[sp,#1]            ;1723
001f28  f898002c          LDRB     r0,[r8,#0x2c]         ;1724
001f2c  f88d0002          STRB     r0,[sp,#2]            ;1724
001f30  f88d9003          STRB     r9,[sp,#3]            ;1725
001f34  4669              MOV      r1,sp                 ;1726
001f36  f1040008          ADD      r0,r4,#8              ;1726
001f3a  f7fffffe          BL       lc640_write_long_ptr
001f3e  f8980028          LDRB     r0,[r8,#0x28]         ;1728
001f42  f88d0000          STRB     r0,[sp,#0]            ;1728
001f46  f8980024          LDRB     r0,[r8,#0x24]         ;1729
001f4a  f88d0001          STRB     r0,[sp,#1]            ;1729
001f4e  f8980020          LDRB     r0,[r8,#0x20]         ;1730
001f52  f88d0002          STRB     r0,[sp,#2]            ;1730
001f56  f88d9003          STRB     r9,[sp,#3]            ;1731
001f5a  4669              MOV      r1,sp                 ;1732
001f5c  f104000c          ADD      r0,r4,#0xc            ;1732
001f60  f7fffffe          BL       lc640_write_long_ptr
001f64  f04f0541          MOV      r5,#0x41              ;1734
001f68  f88d5000          STRB     r5,[sp,#0]            ;1734
001f6c  f88d5001          STRB     r5,[sp,#1]            ;1735
001f70  f88d5002          STRB     r5,[sp,#2]            ;1736
001f74  f88d5003          STRB     r5,[sp,#3]            ;1737
001f78  4669              MOV      r1,sp                 ;1738
001f7a  f1040010          ADD      r0,r4,#0x10           ;1738
001f7e  f7fffffe          BL       lc640_write_long_ptr
001f82  f88d5000          STRB     r5,[sp,#0]            ;1740
001f86  e002              B        |L1.8078|
                  |L1.8072|
001f88  e027              B        |L1.8154|
                  |L1.8074|
001f8a  e025              B        |L1.8152|
                  |L1.8076|
001f8c  e0ae              B        |L1.8428|
                  |L1.8078|
001f8e  f88d5001          STRB     r5,[sp,#1]            ;1741
001f92  f88d5002          STRB     r5,[sp,#2]            ;1742
001f96  f88d5003          STRB     r5,[sp,#3]            ;1743
001f9a  4669              MOV      r1,sp                 ;1744
001f9c  f1040014          ADD      r0,r4,#0x14           ;1744
001fa0  f7fffffe          BL       lc640_write_long_ptr
001fa4  f88d5000          STRB     r5,[sp,#0]            ;1746
001fa8  f88d5001          STRB     r5,[sp,#1]            ;1747
001fac  f88d5002          STRB     r5,[sp,#2]            ;1748
001fb0  f88d5003          STRB     r5,[sp,#3]            ;1749
001fb4  4669              MOV      r1,sp                 ;1750
001fb6  f1040018          ADD      r0,r4,#0x18           ;1750
001fba  f7fffffe          BL       lc640_write_long_ptr
001fbe  f88d5000          STRB     r5,[sp,#0]            ;1752
001fc2  f88d5001          STRB     r5,[sp,#1]            ;1753
001fc6  f88d5002          STRB     r5,[sp,#2]            ;1754
001fca  f88d5003          STRB     r5,[sp,#3]            ;1755
001fce  4669              MOV      r1,sp                 ;1756
001fd0  f104001c          ADD      r0,r4,#0x1c           ;1756
001fd4  f7fffffe          BL       lc640_write_long_ptr
                  |L1.8152|
;;;1836        		{        
;;;1837        		if(event_ptr_find)event_ptr_find--;
;;;1838        		else event_ptr_find=63;
;;;1839        		if(event_ptr_find==event_ptr)
;;;1840   				{
;;;1841   				lc640_adr=0;
;;;1842   				break;
;;;1843   				}
;;;1844        		else continue;
;;;1845        		}
;;;1846        	else 
;;;1847        		{
;;;1848        		lc640_read_long_ptr(lc640_adr+16,data);
;;;1849        		if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;1850        			{        
;;;1851        			if(event_ptr_find)event_ptr_find--;
;;;1852            		else event_ptr_find=63;
;;;1853            		if(event_ptr_find==event_ptr)
;;;1854   					{
;;;1855   					lc640_adr=0;
;;;1856   					break;
;;;1857   					}
;;;1858        			else continue;
;;;1859        			}
;;;1860        		}	
;;;1861   		}
;;;1862   	if(lc640_adr!=0)
;;;1863   		{
;;;1864   		data[0]=LPC_RTC->YEAR;
;;;1865   		data[1]=LPC_RTC->MONTH;
;;;1866   		data[2]=LPC_RTC->DOM;
;;;1867   		data[3]=0;
;;;1868   		lc640_write_long_ptr(lc640_adr+16,data);
;;;1869   	
;;;1870   		data[0]=LPC_RTC->HOUR;
;;;1871   		data[1]=LPC_RTC->MIN;
;;;1872   		data[2]=LPC_RTC->SEC;
;;;1873   		data[3]=0;
;;;1874   		lc640_write_long_ptr(lc640_adr+20,data);
;;;1875   		
;;;1876   		data[0]='B';
;;;1877   		data[1]='B';
;;;1878   		data[2]='B';
;;;1879   		data[3]='B';
;;;1880   		lc640_write_long_ptr(lc640_adr+24,data);
;;;1881   		
;;;1882   		data[0]='B';
;;;1883   		data[1]='B';
;;;1884   		data[2]='B';
;;;1885   		data[3]='B';
;;;1886   		lc640_write_long_ptr(lc640_adr+28,data);
;;;1887   		}
;;;1888   	}
;;;1889   }
001fd8  e58c              B        |L1.6900|
                  |L1.8154|
001fda  f04f0700          MOV      r7,#0                 ;1764
                  |L1.8158|
001fde  eb0a1544          ADD      r5,r10,r4,LSL #5      ;1766
001fe2  4669              MOV      r1,sp                 ;1768
001fe4  4628              MOV      r0,r5                 ;1768
001fe6  f7fffffe          BL       lc640_read_long_ptr
001fea  f89d0000          LDRB     r0,[sp,#0]            ;1770
001fee  2875              CMP      r0,#0x75              ;1770
001ff0  d103              BNE      |L1.8186|
001ff2  f89d0002          LDRB     r0,[sp,#2]            ;1770
001ff6  285a              CMP      r0,#0x5a              ;1770
001ff8  d00a              BEQ      |L1.8208|
                  |L1.8186|
001ffa  b114              CBZ      r4,|L1.8194|
001ffc  f1a40401          SUB      r4,r4,#1              ;1772
002000  e001              B        |L1.8198|
                  |L1.8194|
002002  f04f043f          MOV      r4,#0x3f              ;1773
                  |L1.8198|
002006  42b4              CMP      r4,r6                 ;1774
002008  d122              BNE      |L1.8272|
00200a  f04f0500          MOV      r5,#0                 ;1776
00200e  e024              B        |L1.8282|
                  |L1.8208|
002010  4669              MOV      r1,sp                 ;1783
002012  f1050010          ADD      r0,r5,#0x10           ;1783
002016  f7fffffe          BL       lc640_read_long_ptr
00201a  f89d0000          LDRB     r0,[sp,#0]            ;1784
00201e  2841              CMP      r0,#0x41              ;1784
002020  d10b              BNE      |L1.8250|
002022  f89d0001          LDRB     r0,[sp,#1]            ;1784
002026  2841              CMP      r0,#0x41              ;1784
002028  d107              BNE      |L1.8250|
00202a  f89d0002          LDRB     r0,[sp,#2]            ;1784
00202e  2841              CMP      r0,#0x41              ;1784
002030  d103              BNE      |L1.8250|
002032  f89d0003          LDRB     r0,[sp,#3]            ;1784
002036  2841              CMP      r0,#0x41              ;1784
002038  d00a              BEQ      |L1.8272|
                  |L1.8250|
00203a  b114              CBZ      r4,|L1.8258|
00203c  f1a40401          SUB      r4,r4,#1              ;1786
002040  e001              B        |L1.8262|
                  |L1.8258|
002042  f04f043f          MOV      r4,#0x3f              ;1787
                  |L1.8262|
002046  42b4              CMP      r4,r6                 ;1788
002048  d102              BNE      |L1.8272|
00204a  f04f0500          MOV      r5,#0                 ;1790
00204e  e004              B        |L1.8282|
                  |L1.8272|
002050  f1070701          ADD      r7,r7,#1              ;1764
002054  b2ff              UXTB     r7,r7                 ;1764
002056  2f3f              CMP      r7,#0x3f              ;1764
002058  d3c1              BCC      |L1.8158|
                  |L1.8282|
00205a  2d00              CMP      r5,#0                 ;1797
00205c  d0bc              BEQ      |L1.8152|
00205e  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1799
002062  f88d0000          STRB     r0,[sp,#0]            ;1799
002066  f8980038          LDRB     r0,[r8,#0x38]         ;1800
00206a  f88d0001          STRB     r0,[sp,#1]            ;1800
00206e  f898002c          LDRB     r0,[r8,#0x2c]         ;1801
002072  f88d0002          STRB     r0,[sp,#2]            ;1801
002076  f88d9003          STRB     r9,[sp,#3]            ;1802
00207a  4669              MOV      r1,sp                 ;1803
00207c  f1050010          ADD      r0,r5,#0x10           ;1803
002080  f7fffffe          BL       lc640_write_long_ptr
002084  f8980028          LDRB     r0,[r8,#0x28]         ;1805
002088  f88d0000          STRB     r0,[sp,#0]            ;1805
00208c  f8980024          LDRB     r0,[r8,#0x24]         ;1806
002090  f88d0001          STRB     r0,[sp,#1]            ;1806
002094  f8980020          LDRB     r0,[r8,#0x20]         ;1807
002098  f88d0002          STRB     r0,[sp,#2]            ;1807
00209c  f88d9003          STRB     r9,[sp,#3]            ;1808
0020a0  4669              MOV      r1,sp                 ;1809
0020a2  f1050014          ADD      r0,r5,#0x14           ;1809
0020a6  f7fffffe          BL       lc640_write_long_ptr
0020aa  f04f0443          MOV      r4,#0x43              ;1811
0020ae  f88d4000          STRB     r4,[sp,#0]            ;1811
0020b2  f88d4001          STRB     r4,[sp,#1]            ;1812
0020b6  f88d4002          STRB     r4,[sp,#2]            ;1813
0020ba  f88d4003          STRB     r4,[sp,#3]            ;1814
0020be  4669              MOV      r1,sp                 ;1815
0020c0  f1050018          ADD      r0,r5,#0x18           ;1815
0020c4  f7fffffe          BL       lc640_write_long_ptr
0020c8  f88d4000          STRB     r4,[sp,#0]            ;1817
0020cc  f88d4001          STRB     r4,[sp,#1]            ;1818
0020d0  f88d4002          STRB     r4,[sp,#2]            ;1819
0020d4  f88d4003          STRB     r4,[sp,#3]            ;1820
0020d8  4669              MOV      r1,sp                 ;1821
0020da  f105001c          ADD      r0,r5,#0x1c           ;1821
0020de  f7fffffe          BL       lc640_write_long_ptr
                  |L1.8418|
0020e2  e507              B        |L1.6900|
                  |L1.8420|
0020e4  f89d0002          LDRB     r0,[sp,#2]            ;1835
0020e8  285a              CMP      r0,#0x5a              ;1835
0020ea  d00a              BEQ      |L1.8450|
                  |L1.8428|
0020ec  b114              CBZ      r4,|L1.8436|
0020ee  f1a40401          SUB      r4,r4,#1              ;1837
0020f2  e001              B        |L1.8440|
                  |L1.8436|
0020f4  f04f043f          MOV      r4,#0x3f              ;1838
                  |L1.8440|
0020f8  42b4              CMP      r4,r6                 ;1839
0020fa  d122              BNE      |L1.8514|
0020fc  f04f0500          MOV      r5,#0                 ;1841
002100  e025              B        |L1.8526|
                  |L1.8450|
002102  4669              MOV      r1,sp                 ;1848
002104  f1050010          ADD      r0,r5,#0x10           ;1848
002108  f7fffffe          BL       lc640_read_long_ptr
00210c  f89d0000          LDRB     r0,[sp,#0]            ;1849
002110  2841              CMP      r0,#0x41              ;1849
002112  d10b              BNE      |L1.8492|
002114  f89d0001          LDRB     r0,[sp,#1]            ;1849
002118  2841              CMP      r0,#0x41              ;1849
00211a  d107              BNE      |L1.8492|
00211c  f89d0002          LDRB     r0,[sp,#2]            ;1849
002120  2841              CMP      r0,#0x41              ;1849
002122  d103              BNE      |L1.8492|
002124  f89d0003          LDRB     r0,[sp,#3]            ;1849
002128  2841              CMP      r0,#0x41              ;1849
00212a  d00a              BEQ      |L1.8514|
                  |L1.8492|
00212c  b114              CBZ      r4,|L1.8500|
00212e  f1a40401          SUB      r4,r4,#1              ;1851
002132  e001              B        |L1.8504|
                  |L1.8500|
002134  f04f043f          MOV      r4,#0x3f              ;1852
                  |L1.8504|
002138  42b4              CMP      r4,r6                 ;1853
00213a  d102              BNE      |L1.8514|
00213c  f04f0500          MOV      r5,#0                 ;1855
002140  e005              B        |L1.8526|
                  |L1.8514|
002142  f1070701          ADD      r7,r7,#1              ;1829
002146  b2ff              UXTB     r7,r7                 ;1829
002148  2f3f              CMP      r7,#0x3f              ;1829
00214a  f4ffaea3          BCC      |L1.7828|
                  |L1.8526|
00214e  2d00              CMP      r5,#0                 ;1862
002150  d0c7              BEQ      |L1.8418|
002152  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1864
002156  f88d0000          STRB     r0,[sp,#0]            ;1864
00215a  f8980038          LDRB     r0,[r8,#0x38]         ;1865
00215e  f88d0001          STRB     r0,[sp,#1]            ;1865
002162  f898002c          LDRB     r0,[r8,#0x2c]         ;1866
002166  f88d0002          STRB     r0,[sp,#2]            ;1866
00216a  f88d9003          STRB     r9,[sp,#3]            ;1867
00216e  4669              MOV      r1,sp                 ;1868
002170  f1050010          ADD      r0,r5,#0x10           ;1868
002174  f7fffffe          BL       lc640_write_long_ptr
002178  f8980028          LDRB     r0,[r8,#0x28]         ;1870
00217c  f88d0000          STRB     r0,[sp,#0]            ;1870
002180  f8980024          LDRB     r0,[r8,#0x24]         ;1871
002184  f88d0001          STRB     r0,[sp,#1]            ;1871
002188  f8980020          LDRB     r0,[r8,#0x20]         ;1872
00218c  f88d0002          STRB     r0,[sp,#2]            ;1872
002190  f88d9003          STRB     r9,[sp,#3]            ;1873
002194  4669              MOV      r1,sp                 ;1874
002196  f1050014          ADD      r0,r5,#0x14           ;1874
00219a  f7fffffe          BL       lc640_write_long_ptr
00219e  f04f0442          MOV      r4,#0x42              ;1876
0021a2  f88d4000          STRB     r4,[sp,#0]            ;1876
0021a6  f88d4001          STRB     r4,[sp,#1]            ;1877
0021aa  f88d4002          STRB     r4,[sp,#2]            ;1878
0021ae  f88d4003          STRB     r4,[sp,#3]            ;1879
0021b2  4669              MOV      r1,sp                 ;1880
0021b4  f1050018          ADD      r0,r5,#0x18           ;1880
0021b8  f7fffffe          BL       lc640_write_long_ptr
0021bc  f88d4000          STRB     r4,[sp,#0]            ;1882
0021c0  f88d4001          STRB     r4,[sp,#1]            ;1883
0021c4  f88d4002          STRB     r4,[sp,#2]            ;1884
0021c8  f88d4003          STRB     r4,[sp,#3]            ;1885
0021cc  4669              MOV      r1,sp                 ;1886
0021ce  f105001c          ADD      r0,r5,#0x1c           ;1886
0021d2  f7fffffe          BL       lc640_write_long_ptr
0021d6  e48d              B        |L1.6900|
;;;1890   
                          ENDP

                  fz_mem_hndl PROC
;;;1891   //-----------------------------------------------
;;;1892   void fz_mem_hndl(unsigned short in)	 //   
0021d8  e92d4ff8          PUSH     {r3-r11,lr}
;;;1893   {
;;;1894   char data[4];
;;;1895   unsigned int event_ptr=0,lc640_adr,event_ptr_find=0,event_cnt;
0021dc  f04f0600          MOV      r6,#0
0021e0  4634              MOV      r4,r6
;;;1896   //char avar_simbol;
;;;1897   
;;;1898   if(in==1) //  
;;;1899   	{
;;;1900   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;1901   	event_ptr++;	
;;;1902   	if(event_ptr>63)event_ptr=0;	
;;;1903   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;1904   	
;;;1905       event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;1906   	if(event_cnt!=63)event_cnt=event_ptr;
;;;1907   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;1908   	
;;;1909   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;1910   	
;;;1911   	data[0]='f';
;;;1912   	data[1]=0; 
;;;1913   	data[2]='Z';
;;;1914   	data[3]=0;
;;;1915   	lc640_write_long_ptr(lc640_adr,data);
;;;1916   
;;;1917   	data[0]=0;
;;;1918   	data[1]=0;
;;;1919   	data[2]=0;
;;;1920   	data[3]=0;
;;;1921   	lc640_write_long_ptr(lc640_adr+4,data);
;;;1922   
;;;1923   	data[0]=LPC_RTC->YEAR;
0021e2  f8df835c          LDR      r8,|L1.9536|
0021e6  46a1              MOV      r9,r4                 ;1895
0021e8  f44f6a80          MOV      r10,#0x400            ;1909
0021ec  2801              CMP      r0,#1                 ;1898
0021ee  d010              BEQ      |L1.8722|
;;;1924   	data[1]=LPC_RTC->MONTH;
;;;1925   	data[2]=LPC_RTC->DOM;
;;;1926   	data[3]=0;
;;;1927   	lc640_write_long_ptr(lc640_adr+8,data);
;;;1928   
;;;1929   	data[0]=LPC_RTC->HOUR;
;;;1930   	data[1]=LPC_RTC->MIN;
;;;1931   	data[2]=LPC_RTC->SEC;
;;;1932   	data[3]=0;
;;;1933   	lc640_write_long_ptr(lc640_adr+12,data);
;;;1934   	
;;;1935   	data[0]='A';
;;;1936   	data[1]='A';
;;;1937   	data[2]='A';
;;;1938   	data[3]='A';
;;;1939   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1940   	
;;;1941   	data[0]='A';
;;;1942   	data[1]='A';
;;;1943   	data[2]='A';
;;;1944   	data[3]='A';
;;;1945   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1946   	
;;;1947   	data[0]='A';
;;;1948   	data[1]='A';
;;;1949   	data[2]='A';
;;;1950   	data[3]='A';
;;;1951   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1952   	
;;;1953   	data[0]='A';
;;;1954   	data[1]='A';
;;;1955   	data[2]='A';
;;;1956   	data[3]='A';
;;;1957   	lc640_write_long_ptr(lc640_adr+28,data);		
;;;1958    	
;;;1959   	}
;;;1960   
;;;1961   else if(in==0)	// 
0021f0  2800              CMP      r0,#0
0021f2  d07d              BEQ      |L1.8944|
;;;1962   	{      
;;;1963   	char i;     
;;;1964   	event_ptr_find=0;
;;;1965   	for (i=0;i<63;i++)
;;;1966   		{
;;;1967   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
;;;1968   
;;;1969        	lc640_read_long_ptr(lc640_adr,data);
;;;1970        
;;;1971        	if(!((data[0]=='f')&&(data[2]=='Z')))
;;;1972        		{        
;;;1973        		if(event_ptr_find)event_ptr_find--;
;;;1974        		else event_ptr_find=63;
;;;1975        		if(event_ptr_find==event_ptr)
;;;1976   				{
;;;1977   				lc640_adr=0;
;;;1978   				break;
;;;1979   				}
;;;1980        		else continue;
;;;1981        		}
;;;1982        	else 
;;;1983        		{
;;;1984        		lc640_read_long_ptr(lc640_adr+16,data);
;;;1985        		if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;1986        			{        
;;;1987        			if(event_ptr_find)event_ptr_find--;
;;;1988            		else event_ptr_find=63;
;;;1989            		if(event_ptr_find==event_ptr)
;;;1990   					{
;;;1991   					lc640_adr=0;
;;;1992   					break;
;;;1993   					}
;;;1994        			else continue;
;;;1995        			}
;;;1996        		}	
;;;1997   		}
;;;1998   	if(lc640_adr!=0)
;;;1999   		{
;;;2000   		data[0]=LPC_RTC->YEAR;
;;;2001   		data[1]=LPC_RTC->MONTH;
;;;2002   		data[2]=LPC_RTC->DOM;
;;;2003   		data[3]=0;
;;;2004   		lc640_write_long_ptr(lc640_adr+16,data);
;;;2005   	
;;;2006   		data[0]=LPC_RTC->HOUR;
;;;2007   		data[1]=LPC_RTC->MIN;
;;;2008   		data[2]=LPC_RTC->SEC;
;;;2009   		data[3]=0;
;;;2010   		lc640_write_long_ptr(lc640_adr+20,data);
;;;2011   		
;;;2012   		data[0]='C';
;;;2013   		data[1]='C';
;;;2014   		data[2]='C';
;;;2015   		data[3]='C';
;;;2016   		lc640_write_long_ptr(lc640_adr+24,data);
;;;2017   		
;;;2018   		data[0]='C';
;;;2019   		data[1]='C';
;;;2020   		data[2]='C';
;;;2021   		data[3]='C';
;;;2022   		lc640_write_long_ptr(lc640_adr+28,data);
;;;2023   		}
;;;2024   	}
;;;2025   else if(in==10) 	//  
0021f4  280a              CMP      r0,#0xa
0021f6  d17c              BNE      |L1.8946|
;;;2026   	{      
;;;2027   	char i;     
;;;2028   
;;;2029   	event_ptr_find=0;
;;;2030   	for (i=0;i<63;i++)
0021f8  f04f0700          MOV      r7,#0
                  |L1.8700|
;;;2031   		{
;;;2032   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
0021fc  eb0a1544          ADD      r5,r10,r4,LSL #5
;;;2033   
;;;2034        	lc640_read_long_ptr(lc640_adr,data);
002200  4669              MOV      r1,sp
002202  4628              MOV      r0,r5
002204  f7fffffe          BL       lc640_read_long_ptr
;;;2035        
;;;2036        	if(!((data[0]=='f')&&(data[2]=='Z')))
002208  f89d0000          LDRB     r0,[sp,#0]
00220c  2866              CMP      r0,#0x66
00220e  d171              BNE      |L1.8948|
002210  e11c              B        |L1.9292|
                  |L1.8722|
002212  f44f6560          MOV      r5,#0xe00             ;1900
002216  4628              MOV      r0,r5                 ;1900
002218  f7fffffe          BL       lc640_read_int
00221c  f1000001          ADD      r0,r0,#1              ;1901
002220  4604              MOV      r4,r0                 ;1901
002222  2c3f              CMP      r4,#0x3f              ;1902
002224  d901              BLS      |L1.8746|
002226  f04f0400          MOV      r4,#0                 ;1902
                  |L1.8746|
00222a  b221              SXTH     r1,r4                 ;1903
00222c  4628              MOV      r0,r5                 ;1903
00222e  f7fffffe          BL       lc640_write_int
002232  f6406602          MOV      r6,#0xe02             ;1905
002236  4630              MOV      r0,r6                 ;1905
002238  f7fffffe          BL       lc640_read_int
00223c  283f              CMP      r0,#0x3f              ;1906
00223e  d000              BEQ      |L1.8770|
002240  4620              MOV      r0,r4                 ;1906
                  |L1.8770|
002242  b201              SXTH     r1,r0                 ;1907
002244  4630              MOV      r0,r6                 ;1907
002246  f7fffffe          BL       lc640_write_int
00224a  4628              MOV      r0,r5                 ;1909
00224c  f7fffffe          BL       lc640_read_int
002250  eb0a1440          ADD      r4,r10,r0,LSL #5      ;1909
002254  f04f0066          MOV      r0,#0x66              ;1911
002258  f88d0000          STRB     r0,[sp,#0]            ;1911
00225c  f88d9001          STRB     r9,[sp,#1]            ;1912
002260  f04f005a          MOV      r0,#0x5a              ;1913
002264  f88d0002          STRB     r0,[sp,#2]            ;1913
002268  f88d9003          STRB     r9,[sp,#3]            ;1914
00226c  4669              MOV      r1,sp                 ;1915
00226e  4620              MOV      r0,r4                 ;1915
002270  f7fffffe          BL       lc640_write_long_ptr
002274  f8cd9000          STR      r9,[sp,#0]            ;1920
002278  4669              MOV      r1,sp                 ;1921
00227a  1d20              ADDS     r0,r4,#4              ;1921
00227c  f7fffffe          BL       lc640_write_long_ptr
002280  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1923
002284  f88d0000          STRB     r0,[sp,#0]            ;1923
002288  f8980038          LDRB     r0,[r8,#0x38]         ;1924
00228c  f88d0001          STRB     r0,[sp,#1]            ;1924
002290  f898002c          LDRB     r0,[r8,#0x2c]         ;1925
002294  f88d0002          STRB     r0,[sp,#2]            ;1925
002298  f88d9003          STRB     r9,[sp,#3]            ;1926
00229c  4669              MOV      r1,sp                 ;1927
00229e  f1040008          ADD      r0,r4,#8              ;1927
0022a2  f7fffffe          BL       lc640_write_long_ptr
0022a6  f8980028          LDRB     r0,[r8,#0x28]         ;1929
0022aa  f88d0000          STRB     r0,[sp,#0]            ;1929
0022ae  f8980024          LDRB     r0,[r8,#0x24]         ;1930
0022b2  f88d0001          STRB     r0,[sp,#1]            ;1930
0022b6  f8980020          LDRB     r0,[r8,#0x20]         ;1931
0022ba  f88d0002          STRB     r0,[sp,#2]            ;1931
0022be  f88d9003          STRB     r9,[sp,#3]            ;1932
0022c2  4669              MOV      r1,sp                 ;1933
0022c4  f104000c          ADD      r0,r4,#0xc            ;1933
0022c8  f7fffffe          BL       lc640_write_long_ptr
0022cc  f04f0541          MOV      r5,#0x41              ;1935
0022d0  f88d5000          STRB     r5,[sp,#0]            ;1935
0022d4  f88d5001          STRB     r5,[sp,#1]            ;1936
0022d8  f88d5002          STRB     r5,[sp,#2]            ;1937
0022dc  f88d5003          STRB     r5,[sp,#3]            ;1938
0022e0  4669              MOV      r1,sp                 ;1939
0022e2  f1040010          ADD      r0,r4,#0x10           ;1939
0022e6  f7fffffe          BL       lc640_write_long_ptr
0022ea  f88d5000          STRB     r5,[sp,#0]            ;1941
0022ee  e002              B        |L1.8950|
                  |L1.8944|
0022f0  e027              B        |L1.9026|
                  |L1.8946|
0022f2  e025              B        |L1.9024|
                  |L1.8948|
0022f4  e0ae              B        |L1.9300|
                  |L1.8950|
0022f6  f88d5001          STRB     r5,[sp,#1]            ;1942
0022fa  f88d5002          STRB     r5,[sp,#2]            ;1943
0022fe  f88d5003          STRB     r5,[sp,#3]            ;1944
002302  4669              MOV      r1,sp                 ;1945
002304  f1040014          ADD      r0,r4,#0x14           ;1945
002308  f7fffffe          BL       lc640_write_long_ptr
00230c  f88d5000          STRB     r5,[sp,#0]            ;1947
002310  f88d5001          STRB     r5,[sp,#1]            ;1948
002314  f88d5002          STRB     r5,[sp,#2]            ;1949
002318  f88d5003          STRB     r5,[sp,#3]            ;1950
00231c  4669              MOV      r1,sp                 ;1951
00231e  f1040018          ADD      r0,r4,#0x18           ;1951
002322  f7fffffe          BL       lc640_write_long_ptr
002326  f88d5000          STRB     r5,[sp,#0]            ;1953
00232a  f88d5001          STRB     r5,[sp,#1]            ;1954
00232e  f88d5002          STRB     r5,[sp,#2]            ;1955
002332  f88d5003          STRB     r5,[sp,#3]            ;1956
002336  4669              MOV      r1,sp                 ;1957
002338  f104001c          ADD      r0,r4,#0x1c           ;1957
00233c  f7fffffe          BL       lc640_write_long_ptr
                  |L1.9024|
;;;2037        		{        
;;;2038        		if(event_ptr_find)event_ptr_find--;
;;;2039        		else event_ptr_find=63;
;;;2040        		if(event_ptr_find==event_ptr)
;;;2041   				{
;;;2042   				lc640_adr=0;
;;;2043   				break;
;;;2044   				}
;;;2045        		else continue;
;;;2046        		}
;;;2047        	else 
;;;2048        		{
;;;2049        		lc640_read_long_ptr(lc640_adr+16,data);
;;;2050        		if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;2051        			{        
;;;2052        			if(event_ptr_find)event_ptr_find--;
;;;2053            		else event_ptr_find=63;
;;;2054            		if(event_ptr_find==event_ptr)
;;;2055   					{
;;;2056   					lc640_adr=0;
;;;2057   					break;
;;;2058   					}
;;;2059        			else continue;
;;;2060        			}
;;;2061        		}	
;;;2062   		}
;;;2063   	if(lc640_adr!=0)
;;;2064   		{
;;;2065   		data[0]=LPC_RTC->YEAR;
;;;2066   		data[1]=LPC_RTC->MONTH;
;;;2067   		data[2]=LPC_RTC->DOM;
;;;2068   		data[3]=0;
;;;2069   		lc640_write_long_ptr(lc640_adr+16,data);
;;;2070   	
;;;2071   		data[0]=LPC_RTC->HOUR;
;;;2072   		data[1]=LPC_RTC->MIN;
;;;2073   		data[2]=LPC_RTC->SEC;
;;;2074   		data[3]=0;
;;;2075   		lc640_write_long_ptr(lc640_adr+20,data);
;;;2076   		
;;;2077   		data[0]='B';
;;;2078   		data[1]='B';
;;;2079   		data[2]='B';
;;;2080   		data[3]='B';
;;;2081   		lc640_write_long_ptr(lc640_adr+24,data);
;;;2082   		
;;;2083   		data[0]='B';
;;;2084   		data[1]='B';
;;;2085   		data[2]='B';
;;;2086   		data[3]='B';
;;;2087   		lc640_write_long_ptr(lc640_adr+28,data);
;;;2088   		}
;;;2089   	}
;;;2090   }
002340  e496              B        |L1.7280|
                  |L1.9026|
002342  f04f0700          MOV      r7,#0                 ;1965
                  |L1.9030|
002346  eb0a1544          ADD      r5,r10,r4,LSL #5      ;1967
00234a  4669              MOV      r1,sp                 ;1969
00234c  4628              MOV      r0,r5                 ;1969
00234e  f7fffffe          BL       lc640_read_long_ptr
002352  f89d0000          LDRB     r0,[sp,#0]            ;1971
002356  2866              CMP      r0,#0x66              ;1971
002358  d103              BNE      |L1.9058|
00235a  f89d0002          LDRB     r0,[sp,#2]            ;1971
00235e  285a              CMP      r0,#0x5a              ;1971
002360  d00a              BEQ      |L1.9080|
                  |L1.9058|
002362  b114              CBZ      r4,|L1.9066|
002364  f1a40401          SUB      r4,r4,#1              ;1973
002368  e001              B        |L1.9070|
                  |L1.9066|
00236a  f04f043f          MOV      r4,#0x3f              ;1974
                  |L1.9070|
00236e  42b4              CMP      r4,r6                 ;1975
002370  d122              BNE      |L1.9144|
002372  f04f0500          MOV      r5,#0                 ;1977
002376  e024              B        |L1.9154|
                  |L1.9080|
002378  4669              MOV      r1,sp                 ;1984
00237a  f1050010          ADD      r0,r5,#0x10           ;1984
00237e  f7fffffe          BL       lc640_read_long_ptr
002382  f89d0000          LDRB     r0,[sp,#0]            ;1985
002386  2841              CMP      r0,#0x41              ;1985
002388  d10b              BNE      |L1.9122|
00238a  f89d0001          LDRB     r0,[sp,#1]            ;1985
00238e  2841              CMP      r0,#0x41              ;1985
002390  d107              BNE      |L1.9122|
002392  f89d0002          LDRB     r0,[sp,#2]            ;1985
002396  2841              CMP      r0,#0x41              ;1985
002398  d103              BNE      |L1.9122|
00239a  f89d0003          LDRB     r0,[sp,#3]            ;1985
00239e  2841              CMP      r0,#0x41              ;1985
0023a0  d00a              BEQ      |L1.9144|
                  |L1.9122|
0023a2  b114              CBZ      r4,|L1.9130|
0023a4  f1a40401          SUB      r4,r4,#1              ;1987
0023a8  e001              B        |L1.9134|
                  |L1.9130|
0023aa  f04f043f          MOV      r4,#0x3f              ;1988
                  |L1.9134|
0023ae  42b4              CMP      r4,r6                 ;1989
0023b0  d102              BNE      |L1.9144|
0023b2  f04f0500          MOV      r5,#0                 ;1991
0023b6  e004              B        |L1.9154|
                  |L1.9144|
0023b8  f1070701          ADD      r7,r7,#1              ;1965
0023bc  b2ff              UXTB     r7,r7                 ;1965
0023be  2f3f              CMP      r7,#0x3f              ;1965
0023c0  d3c1              BCC      |L1.9030|
                  |L1.9154|
0023c2  2d00              CMP      r5,#0                 ;1998
0023c4  d0bc              BEQ      |L1.9024|
0023c6  f8b8003c          LDRH     r0,[r8,#0x3c]         ;2000
0023ca  f88d0000          STRB     r0,[sp,#0]            ;2000
0023ce  f8980038          LDRB     r0,[r8,#0x38]         ;2001
0023d2  f88d0001          STRB     r0,[sp,#1]            ;2001
0023d6  f898002c          LDRB     r0,[r8,#0x2c]         ;2002
0023da  f88d0002          STRB     r0,[sp,#2]            ;2002
0023de  f88d9003          STRB     r9,[sp,#3]            ;2003
0023e2  4669              MOV      r1,sp                 ;2004
0023e4  f1050010          ADD      r0,r5,#0x10           ;2004
0023e8  f7fffffe          BL       lc640_write_long_ptr
0023ec  f8980028          LDRB     r0,[r8,#0x28]         ;2006
0023f0  f88d0000          STRB     r0,[sp,#0]            ;2006
0023f4  f8980024          LDRB     r0,[r8,#0x24]         ;2007
0023f8  f88d0001          STRB     r0,[sp,#1]            ;2007
0023fc  f8980020          LDRB     r0,[r8,#0x20]         ;2008
002400  f88d0002          STRB     r0,[sp,#2]            ;2008
002404  f88d9003          STRB     r9,[sp,#3]            ;2009
002408  4669              MOV      r1,sp                 ;2010
00240a  f1050014          ADD      r0,r5,#0x14           ;2010
00240e  f7fffffe          BL       lc640_write_long_ptr
002412  f04f0443          MOV      r4,#0x43              ;2012
002416  f88d4000          STRB     r4,[sp,#0]            ;2012
00241a  f88d4001          STRB     r4,[sp,#1]            ;2013
00241e  f88d4002          STRB     r4,[sp,#2]            ;2014
002422  f88d4003          STRB     r4,[sp,#3]            ;2015
002426  4669              MOV      r1,sp                 ;2016
002428  f1050018          ADD      r0,r5,#0x18           ;2016
00242c  f7fffffe          BL       lc640_write_long_ptr
002430  f88d4000          STRB     r4,[sp,#0]            ;2018
002434  f88d4001          STRB     r4,[sp,#1]            ;2019
002438  f88d4002          STRB     r4,[sp,#2]            ;2020
00243c  f88d4003          STRB     r4,[sp,#3]            ;2021
002440  4669              MOV      r1,sp                 ;2022
002442  f105001c          ADD      r0,r5,#0x1c           ;2022
002446  f7fffffe          BL       lc640_write_long_ptr
                  |L1.9290|
00244a  e411              B        |L1.7280|
                  |L1.9292|
00244c  f89d0002          LDRB     r0,[sp,#2]            ;2036
002450  285a              CMP      r0,#0x5a              ;2036
002452  d00a              BEQ      |L1.9322|
                  |L1.9300|
002454  b114              CBZ      r4,|L1.9308|
002456  f1a40401          SUB      r4,r4,#1              ;2038
00245a  e001              B        |L1.9312|
                  |L1.9308|
00245c  f04f043f          MOV      r4,#0x3f              ;2039
                  |L1.9312|
002460  42b4              CMP      r4,r6                 ;2040
002462  d122              BNE      |L1.9386|
002464  f04f0500          MOV      r5,#0                 ;2042
002468  e025              B        |L1.9398|
                  |L1.9322|
00246a  4669              MOV      r1,sp                 ;2049
00246c  f1050010          ADD      r0,r5,#0x10           ;2049
002470  f7fffffe          BL       lc640_read_long_ptr
002474  f89d0000          LDRB     r0,[sp,#0]            ;2050
002478  2841              CMP      r0,#0x41              ;2050
00247a  d10b              BNE      |L1.9364|
00247c  f89d0001          LDRB     r0,[sp,#1]            ;2050
002480  2841              CMP      r0,#0x41              ;2050
002482  d107              BNE      |L1.9364|
002484  f89d0002          LDRB     r0,[sp,#2]            ;2050
002488  2841              CMP      r0,#0x41              ;2050
00248a  d103              BNE      |L1.9364|
00248c  f89d0003          LDRB     r0,[sp,#3]            ;2050
002490  2841              CMP      r0,#0x41              ;2050
002492  d00a              BEQ      |L1.9386|
                  |L1.9364|
002494  b114              CBZ      r4,|L1.9372|
002496  f1a40401          SUB      r4,r4,#1              ;2052
00249a  e001              B        |L1.9376|
                  |L1.9372|
00249c  f04f043f          MOV      r4,#0x3f              ;2053
                  |L1.9376|
0024a0  42b4              CMP      r4,r6                 ;2054
0024a2  d102              BNE      |L1.9386|
0024a4  f04f0500          MOV      r5,#0                 ;2056
0024a8  e005              B        |L1.9398|
                  |L1.9386|
0024aa  f1070701          ADD      r7,r7,#1              ;2030
0024ae  b2ff              UXTB     r7,r7                 ;2030
0024b0  2f3f              CMP      r7,#0x3f              ;2030
0024b2  f4ffaea3          BCC      |L1.8700|
                  |L1.9398|
0024b6  2d00              CMP      r5,#0                 ;2063
0024b8  d0c7              BEQ      |L1.9290|
0024ba  f8b8003c          LDRH     r0,[r8,#0x3c]         ;2065
0024be  f88d0000          STRB     r0,[sp,#0]            ;2065
0024c2  f8980038          LDRB     r0,[r8,#0x38]         ;2066
0024c6  f88d0001          STRB     r0,[sp,#1]            ;2066
0024ca  f898002c          LDRB     r0,[r8,#0x2c]         ;2067
0024ce  f88d0002          STRB     r0,[sp,#2]            ;2067
0024d2  f88d9003          STRB     r9,[sp,#3]            ;2068
0024d6  4669              MOV      r1,sp                 ;2069
0024d8  f1050010          ADD      r0,r5,#0x10           ;2069
0024dc  f7fffffe          BL       lc640_write_long_ptr
0024e0  f8980028          LDRB     r0,[r8,#0x28]         ;2071
0024e4  f88d0000          STRB     r0,[sp,#0]            ;2071
0024e8  f8980024          LDRB     r0,[r8,#0x24]         ;2072
0024ec  f88d0001          STRB     r0,[sp,#1]            ;2072
0024f0  f8980020          LDRB     r0,[r8,#0x20]         ;2073
0024f4  f88d0002          STRB     r0,[sp,#2]            ;2073
0024f8  f88d9003          STRB     r9,[sp,#3]            ;2074
0024fc  4669              MOV      r1,sp                 ;2075
0024fe  f1050014          ADD      r0,r5,#0x14           ;2075
002502  f7fffffe          BL       lc640_write_long_ptr
002506  f04f0442          MOV      r4,#0x42              ;2077
00250a  f88d4000          STRB     r4,[sp,#0]            ;2077
00250e  f88d4001          STRB     r4,[sp,#1]            ;2078
002512  f88d4002          STRB     r4,[sp,#2]            ;2079
002516  f88d4003          STRB     r4,[sp,#3]            ;2080
00251a  4669              MOV      r1,sp                 ;2081
00251c  f1050018          ADD      r0,r5,#0x18           ;2081
002520  f7fffffe          BL       lc640_write_long_ptr
002524  f88d4000          STRB     r4,[sp,#0]            ;2083
002528  f88d4001          STRB     r4,[sp,#1]            ;2084
00252c  f88d4002          STRB     r4,[sp,#2]            ;2085
002530  f88d4003          STRB     r4,[sp,#3]            ;2086
002534  4669              MOV      r1,sp                 ;2087
002536  f105001c          ADD      r0,r5,#0x1c           ;2087
00253a  f7fffffe          BL       lc640_write_long_ptr
00253e  e41c              B        |L1.7546|
                          ENDP

                  |L1.9536|
                          DCD      0x40024000

                          AREA ||.data||, DATA, ALIGN=2

                  avar_stat
                          DCD      0x00000000
                  avar_ind_stat
                          DCD      0x00000000
                  avar_stat_old
                          DCD      0x00000000
                  avar_stat_new
                          DCD      0x00000000
                  avar_stat_offed
                          DCD      0x00000000
                  rki_avar1_stat
                          DCD      0x00000000
                  rki_avar1_ind_stat
                          DCD      0x00000000
                  rki_avar1_stat_old
                          DCD      0x00000000
                  rki_avar1_stat_new
                          DCD      0x00000000
                  rki_avar1_stat_offed
                          DCD      0x00000000
                  rki_avarI1_stat
                          DCD      0x00000000
                  rki_avarI1_ind_stat
                          DCD      0x00000000
                  rki_avarI1_stat_old
                          DCD      0x00000000
                  rki_avarI1_stat_new
                          DCD      0x00000000
                  rki_avarI1_stat_offed
                          DCD      0x00000000
                  rki_avarI2_stat
                          DCD      0x00000000
                  rki_avarI2_ind_stat
                          DCD      0x00000000
                  rki_avarI2_stat_old
                          DCD      0x00000000
                  rki_avarI2_stat_new
                          DCD      0x00000000
                  rki_avarI2_stat_offed
                          DCD      0x00000000
                  av_inv
                          DCD      0x00000000
000054  0000              DCB      0x00,0x00
